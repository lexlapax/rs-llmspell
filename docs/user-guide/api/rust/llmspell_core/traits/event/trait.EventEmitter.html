<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Universal event emission trait for all components"><title>EventEmitter in llmspell_core::traits::event - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="llmspell_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31) (Homebrew)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../../../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../llmspell_core/index.html">llmspell_<wbr>core</a><span class="version">0.6.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Event<wbr>Emitter</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#key-design-decisions" title="Key Design Decisions">Key Design Decisions</a></li><li><a href="#usage-patterns" title="Usage Patterns">Usage Patterns</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.emit" title="emit">emit</a></li><li><a href="#tymethod.emit_structured" title="emit_structured">emit_structured</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.config" title="config">config</a></li><li><a href="#method.is_enabled" title="is_enabled">is_enabled</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In llmspell_<wbr>core::<wbr>traits::<wbr>event</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">llmspell_core</a>::<wbr><a href="../index.html">traits</a>::<wbr><a href="index.html">event</a></div><h1>Trait <span class="trait">EventEmitter</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/llmspell_core/traits/event.rs.html#40-103">Source</a> </span></div><pre class="rust item-decl"><code>pub trait EventEmitter:
    <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>
    + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>
    + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> {
    // Required methods
    fn <a href="#tymethod.emit" class="fn">emit</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 self,
        event_type: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>,
        data: <a class="enum" href="https://docs.rs/serde_json/1.0.140/serde_json/value/enum.Value.html" title="enum serde_json::value::Value">Value</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.86.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="../../error/type.Result.html" title="type llmspell_core::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.emit_structured" class="fn">emit_structured</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 self,
        event: <a class="struct" href="struct.EventData.html" title="struct llmspell_core::traits::event::EventData">EventData</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.86.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="../../error/type.Result.html" title="type llmspell_core::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait</span>;

    // Provided methods
    fn <a href="#method.is_enabled" class="fn">is_enabled</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.config" class="fn">config</a>(&amp;self) -&gt; <a class="struct" href="struct.EventConfig.html" title="struct llmspell_core::traits::event::EventConfig">EventConfig</a> { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Universal event emission trait for all components</p>
<p>This trait provides a clean abstraction for event operations that can be
implemented by various backends (EventBus, logging, webhooks, etc.).
It’s designed to provide observability and coordination for all component
interactions, following the same pattern as StateAccess.</p>
<h2 id="key-design-decisions"><a class="doc-anchor" href="#key-design-decisions">§</a>Key Design Decisions</h2>
<ul>
<li><strong>Optional Implementation</strong>: Components work with <code>Option&lt;Arc&lt;dyn EventEmitter&gt;&gt;</code></li>
<li><strong>Fire-and-Forget</strong>: Events are non-blocking and errors are logged but not propagated</li>
<li><strong>Structured Data</strong>: Events use JSON values for maximum flexibility</li>
<li><strong>Configuration-Driven</strong>: Can be enabled/disabled via config</li>
</ul>
<h2 id="usage-patterns"><a class="doc-anchor" href="#usage-patterns">§</a>Usage Patterns</h2>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="comment">// Components emit lifecycle events automatically
</span><span class="kw">if let </span><span class="prelude-val">Some</span>(events) = <span class="kw-2">&amp;</span>context.events {
    events.emit(<span class="string">"agent.started"</span>, <span class="macro">json!</span>({ <span class="string">"agent_id"</span>: id })).<span class="kw">await</span>;
}

<span class="comment">// Workflows emit step events
</span>events.emit(<span class="string">"workflow.step.completed"</span>, <span class="macro">json!</span>({
    <span class="string">"step"</span>: step_name,
    <span class="string">"duration_ms"</span>: elapsed
})).<span class="kw">await</span>;</code></pre></div>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.emit" class="method"><a class="src rightside" href="../../../src/llmspell_core/traits/event.rs.html#57">Source</a><h4 class="code-header">fn <a href="#tymethod.emit" class="fn">emit</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    event_type: &amp;'life1 <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.str.html">str</a>,
    data: <a class="enum" href="https://docs.rs/serde_json/1.0.140/serde_json/value/enum.Value.html" title="enum serde_json::value::Value">Value</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.86.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="../../error/type.Result.html" title="type llmspell_core::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Emit a simple event with type and data</p>
<p>This is the primary method for emitting events. The event type
should follow a dot-notation convention (e.g., “component.action”).</p>
<h5 id="arguments"><a class="doc-anchor" href="#arguments">§</a>Arguments</h5>
<ul>
<li><code>event_type</code> - The event type/name (e.g., “agent.started”)</li>
<li><code>data</code> - The event payload as JSON value</li>
</ul>
<h5 id="example"><a class="doc-anchor" href="#example">§</a>Example</h5>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code>events.emit(<span class="string">"tool.executed"</span>, <span class="macro">json!</span>({
    <span class="string">"tool_name"</span>: <span class="string">"calculator"</span>,
    <span class="string">"duration_ms"</span>: <span class="number">42
</span>})).<span class="kw">await</span><span class="question-mark">?</span>;</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.emit_structured" class="method"><a class="src rightside" href="../../../src/llmspell_core/traits/event.rs.html#78">Source</a><h4 class="code-header">fn <a href="#tymethod.emit_structured" class="fn">emit_structured</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 self,
    event: <a class="struct" href="struct.EventData.html" title="struct llmspell_core::traits::event::EventData">EventData</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.86.0/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="../../error/type.Result.html" title="type llmspell_core::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/1.86.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Emit with full event structure</p>
<p>For more complex events that need additional metadata,
correlation IDs, or parent event references.</p>
<h5 id="arguments-1"><a class="doc-anchor" href="#arguments-1">§</a>Arguments</h5>
<ul>
<li><code>event</code> - Full event data structure</li>
</ul>
<h5 id="example-1"><a class="doc-anchor" href="#example-1">§</a>Example</h5>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span>event = EventData {
    event_type: <span class="string">"workflow.step.started"</span>.to_string(),
    component_id: ComponentId::new(),
    data: <span class="macro">json!</span>({ <span class="string">"step"</span>: <span class="string">"validation" </span>}),
    correlation_id: <span class="prelude-val">Some</span>(workflow_id),
    ..Default::default()
};
events.emit_structured(event).<span class="kw">await</span><span class="question-mark">?</span>;</code></pre></div>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.is_enabled" class="method"><a class="src rightside" href="../../../src/llmspell_core/traits/event.rs.html#92-94">Source</a><h4 class="code-header">fn <a href="#method.is_enabled" class="fn">is_enabled</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Check if events are enabled</p>
<p>Components can use this to skip event preparation if events
are disabled, improving performance.</p>
<h5 id="example-2"><a class="doc-anchor" href="#example-2">§</a>Example</h5>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">if </span>events.is_enabled() {
    <span class="kw">let </span>expensive_data = calculate_metrics();
    events.emit(<span class="string">"metrics.calculated"</span>, expensive_data).<span class="kw">await</span><span class="question-mark">?</span>;
}</code></pre></div>
</div></details><details class="toggle method-toggle" open><summary><section id="method.config" class="method"><a class="src rightside" href="../../../src/llmspell_core/traits/event.rs.html#100-102">Source</a><h4 class="code-header">fn <a href="#method.config" class="fn">config</a>(&amp;self) -&gt; <a class="struct" href="struct.EventConfig.html" title="struct llmspell_core::traits::event::EventConfig">EventConfig</a></h4></section></summary><div class="docblock"><p>Get event configuration</p>
<p>Returns the current event configuration for filtering
and processing decisions.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../../trait.impl/llmspell_core/traits/event/trait.EventEmitter.js" async></script></section></div></main></body></html>