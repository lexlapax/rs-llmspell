warning: item in documentation is missing backticks
 --> llmspell-core/src/lib.rs:2:41
  |
2 | //! ABOUTME: Foundation layer providing BaseAgent, Agent, Tool, and Workflow traits
  |                                         ^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
2 - //! ABOUTME: Foundation layer providing BaseAgent, Agent, Tool, and Workflow traits
2 + //! ABOUTME: Foundation layer providing `BaseAgent`, Agent, Tool, and Workflow traits
  |

warning: item in documentation is missing backticks
 --> llmspell-core/src/lib.rs:6:54
  |
6 | //! `llmspell-core` is the foundational crate of the LLMSpell system, providing:
  |                                                      ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
6 - //! `llmspell-core` is the foundational crate of the LLMSpell system, providing:
6 + //! `llmspell-core` is the foundational crate of the `LLMSpell` system, providing:
  |

warning: item in documentation is missing backticks
 --> llmspell-core/src/error.rs:2:23
  |
2 | //! ABOUTME: Provides LLMSpellError enum and Result type alias
  |                       ^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides LLMSpellError enum and Result type alias
2 + //! ABOUTME: Provides `LLMSpellError` enum and Result type alias
  |

warning: item in documentation is missing backticks
  --> llmspell-core/src/error.rs:71:38
   |
71 | /// Comprehensive error enum for all LLMSpell operations.
   |                                      ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
71 - /// Comprehensive error enum for all LLMSpell operations.
71 + /// Comprehensive error enum for all `LLMSpell` operations.
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/error.rs:227:5
    |
227 |     pub fn category(&self) -> ErrorCategory {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn category(&self) -> ErrorCategory`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
    = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/error.rs:246:5
    |
246 |     pub fn severity(&self) -> ErrorSeverity {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn severity(&self) -> ErrorSeverity`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/error.rs:252:13
    |
252 |             Self::Timeout { .. } => ErrorSeverity::Warning,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`
help: or try merging the arm patterns and removing the obsolete arm
    |
248 ~             Self::Configuration { .. } => ErrorSeverity::Error,
249 |             Self::Security { .. } => ErrorSeverity::Critical,
250 |             Self::Internal { .. } => ErrorSeverity::Fatal,
251 ~             Self::Timeout { .. } | Self::Validation { .. } => ErrorSeverity::Warning,
    |

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-core/src/error.rs:249:13
    |
249 | /             Self::Configuration { .. } => ErrorSeverity::Error,
250 | |             Self::Security { .. } => ErrorSeverity::Critical,
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-core/src/error.rs:253:13
    |
253 |             _ => ErrorSeverity::Error,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/error.rs:258:5
    |
258 |     pub fn is_retryable(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_retryable(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/error.rs:264:13
    |
264 |             Self::Resource { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
260 ~             Self::Resource { .. } | Self::Network { .. }
261 +             | Self::Timeout { .. }
262 +             | Self::Provider { .. }
263 ~             | Self::RateLimit { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/error.rs:271:13
    |
271 |             Self::Security { .. } | Self::Configuration { .. } | Self::Validation { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
271 ~             Self::Security { .. } | Self::Configuration { .. } | Self::Validation { .. } | Self::Internal { .. } => false,
272 ~             Self::ResourceLimit { .. } => false, // Resource limits are not retryable
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/error.rs:271:13
    |
271 |             Self::Security { .. } | Self::Configuration { .. } | Self::Validation { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
271 ~             Self::Security { .. } | Self::Configuration { .. } | Self::Validation { .. } | Self::ResourceLimit { .. } => false,
272 |             Self::Internal { .. } => false,
273 ~             // Resource limits are not retryable
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/error.rs:272:13
    |
272 |             Self::Internal { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
272 ~             Self::Internal { .. } | Self::ResourceLimit { .. } => false,
273 ~             // Resource limits are not retryable
    |

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-core/src/error.rs:271:13
    |
271 | /             Self::Security { .. } | Self::Configuration { .. } | Self::Validation { .. } => false,
272 | |             Self::Internal { .. } => false,
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-core/src/error.rs:274:13
    |
274 |             _ => false,
    |             ^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-core/src/error.rs:272:13
    |
272 | /             Self::Internal { .. } => false,
273 | |             Self::ResourceLimit { .. } => false, // Resource limits are not retryable
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-core/src/error.rs:274:13
    |
274 |             _ => false,
    |             ^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-core/src/error.rs:273:13
    |
273 |             Self::ResourceLimit { .. } => false, // Resource limits are not retryable
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-core/src/error.rs:274:13
    |
274 |             _ => false,
    |             ^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/error.rs:279:5
    |
279 |     pub fn retry_delay_ms(&self) -> Option<u64> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn retry_delay_ms(&self) -> Option<u64>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-core/src/error.rs:285:13
    |
285 |             Self::Network { .. } => Some(1000), // 1 second
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-core/src/error.rs:293:13
    |
293 |             _ => Some(1000),                     // Default 1 second
    |             ^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/error.rs:298:5
    |
298 | /     pub fn with_source<E>(mut self, source: E) -> Self
299 | |     where
300 | |         E: std::error::Error + Send + Sync + 'static,
...   |
317 | |         self
318 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use
    = note: `-W clippy::return-self-not-must-use` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::return_self_not_must_use)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/error.rs:328:22
    |
328 |             message: format!("IO error: {}", err),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
328 -             message: format!("IO error: {}", err),
328 +             message: format!("IO error: {err}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/error.rs:338:22
    |
338 |             message: format!("JSON serialization error: {}", err),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
338 -             message: format!("JSON serialization error: {}", err),
338 +             message: format!("JSON serialization error: {err}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/error.rs:347:22
    |
347 |             message: format!("Formatting error: {}", err),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
347 -             message: format!("Formatting error: {}", err),
347 +             message: format!("Formatting error: {err}"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/events/artifact_events.rs:315:5
    |
315 |     pub fn new(event_type: ArtifactEventType, source: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(event_type: ArtifactEventType, source: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/events/artifact_events.rs:325:5
    |
325 | /     pub fn with_context(mut self, key: impl Into<String>, value: serde_json::Value) -> Self {
326 | |         self.context.insert(key.into(), value);
327 | |         self
328 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/events/artifact_events.rs:331:5
    |
331 |     pub fn event_name(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn event_name(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/events/artifact_events.rs:354:5
    |
354 |     pub fn new(source: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(source: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/events/artifact_events.rs:362:5
    |
362 | /     pub fn with_context(mut self, key: impl Into<String>, value: serde_json::Value) -> Self {
363 | |         self.context.insert(key.into(), value);
364 | |         self
365 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/events/artifact_events.rs:368:5
    |
368 | /     pub fn created(
369 | |         self,
370 | |         artifact: ArtifactMetadata,
371 | |         location: Option<StorageLocation>,
372 | |     ) -> ArtifactEvent {
    | |______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
368 ~     #[must_use] pub fn created(
369 +         self,
370 +         artifact: ArtifactMetadata,
371 +         location: Option<StorageLocation>,
372 ~     ) -> ArtifactEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/events/artifact_events.rs:386:5
    |
386 | /     pub fn modified(
387 | |         self,
388 | |         artifact_id: ArtifactId,
389 | |         modifications: Vec<Modification>,
390 | |     ) -> ArtifactEvent {
    | |______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
386 ~     #[must_use] pub fn modified(
387 +         self,
388 +         artifact_id: ArtifactId,
389 +         modifications: Vec<Modification>,
390 ~     ) -> ArtifactEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/events/artifact_events.rs:406:5
    |
406 | /     pub fn deleted(
407 | |         self,
408 | |         artifact_id: ArtifactId,
409 | |         metadata: ArtifactMetadata,
410 | |         permanent: bool,
411 | |     ) -> ArtifactEvent {
    | |______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
406 ~     #[must_use] pub fn deleted(
407 +         self,
408 +         artifact_id: ArtifactId,
409 +         metadata: ArtifactMetadata,
410 +         permanent: bool,
411 ~     ) -> ArtifactEvent {
    |

warning: item in documentation is missing backticks
 --> llmspell-core/src/execution_context.rs:1:23
  |
1 | //! ABOUTME: Enhanced ExecutionContext with hierarchical support and service bundle architecture
  |                       ^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: Enhanced ExecutionContext with hierarchical support and service bundle architecture
1 + //! ABOUTME: Enhanced `ExecutionContext` with hierarchical support and service bundle architecture
  |

warning: variables can be used directly in the `format!` string
  --> llmspell-core/src/execution_context.rs:43:42
   |
43 |             ContextScope::Session(id) => write!(f, "session:{}", id),
   |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
43 -             ContextScope::Session(id) => write!(f, "session:{}", id),
43 +             ContextScope::Session(id) => write!(f, "session:{id}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-core/src/execution_context.rs:44:43
   |
44 |             ContextScope::Workflow(id) => write!(f, "workflow:{}", id),
   |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
44 -             ContextScope::Workflow(id) => write!(f, "workflow:{}", id),
44 +             ContextScope::Workflow(id) => write!(f, "workflow:{id}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-core/src/execution_context.rs:45:40
   |
45 |             ContextScope::Agent(id) => write!(f, "agent:{}", id),
   |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
45 -             ContextScope::Agent(id) => write!(f, "agent:{}", id),
45 +             ContextScope::Agent(id) => write!(f, "agent:{id}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-core/src/execution_context.rs:46:39
   |
46 |             ContextScope::User(id) => write!(f, "user:{}", id),
   |                                       ^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
46 -             ContextScope::User(id) => write!(f, "user:{}", id),
46 +             ContextScope::User(id) => write!(f, "user:{id}"),
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/execution_context.rs:60:5
   |
60 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-core/src/execution_context.rs:67:5
   |
67 |     pub fn get(&self, scope: &ContextScope, key: &str) -> Option<Value> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-core/src/execution_context.rs:68:9
   |
68 | /         self.regions
69 | |             .read()
70 | |             .unwrap()
   | |_____________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
   = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/execution_context.rs:67:5
   |
67 |     pub fn get(&self, scope: &ContextScope, key: &str) -> Option<Value> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get(&self, scope: &ContextScope, key: &str) -> Option<Value>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-core/src/execution_context.rs:76:5
   |
76 |     pub fn set(&self, scope: ContextScope, key: String, value: Value) {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-core/src/execution_context.rs:77:27
   |
77 |         let mut regions = self.regions.write().unwrap();
   |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-core/src/execution_context.rs:82:5
   |
82 |     pub fn remove(&self, scope: &ContextScope, key: &str) -> Option<Value> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-core/src/execution_context.rs:83:27
   |
83 |         let mut regions = self.regions.write().unwrap();
   |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/execution_context.rs:82:5
   |
82 |     pub fn remove(&self, scope: &ContextScope, key: &str) -> Option<Value> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn remove(&self, scope: &ContextScope, key: &str) -> Option<Value>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-core/src/execution_context.rs:88:5
   |
88 |     pub fn clear_scope(&self, scope: &ContextScope) {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-core/src/execution_context.rs:89:27
   |
89 |         let mut regions = self.regions.write().unwrap();
   |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-core/src/execution_context.rs:94:5
   |
94 |     pub fn keys(&self, scope: &ContextScope) -> Vec<String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-core/src/execution_context.rs:95:9
   |
95 | /         self.regions
96 | |             .read()
97 | |             .unwrap()
   | |_____________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/execution_context.rs:94:5
   |
94 |     pub fn keys(&self, scope: &ContextScope) -> Vec<String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn keys(&self, scope: &ContextScope) -> Vec<String>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:159:5
    |
159 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:176:5
    |
176 |     pub fn with_conversation(conversation_id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_conversation(conversation_id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:183:5
    |
183 |     pub fn create_child(&self, scope: ContextScope, inheritance: InheritancePolicy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_child(&self, scope: ContextScope, inheritance: InheritancePolicy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:183:5
    |
183 | /     pub fn create_child(&self, scope: ContextScope, inheritance: InheritancePolicy) -> Self {
184 | |         let mut child = Self {
185 | |             id: uuid::Uuid::new_v4().to_string(),
186 | |             parent_id: Some(self.id.clone()),
...   |
221 | |         child
222 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/execution_context.rs:213:13
    |
213 | /             InheritancePolicy::Isolate => {
214 | |                 // Start fresh, no data copied
215 | |             }
    | |_____________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
213 ~             InheritancePolicy::Isolate | InheritancePolicy::Share => {
214 |                 // Start fresh, no data copied
215 |             }
216 ~             }
    |

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-core/src/execution_context.rs:202:17
    |
202 |                 child.data = self.data.clone();
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `child.data.clone_from(&self.data)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones
    = note: `-W clippy::assigning-clones` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::assigning_clones)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:225:5
    |
225 |     pub fn get(&self, key: &str) -> Option<Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get(&self, key: &str) -> Option<Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:253:5
    |
253 |     pub fn get_shared(&self, scope: &ContextScope, key: &str) -> Option<Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_shared(&self, scope: &ContextScope, key: &str) -> Option<Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:258:5
    |
258 |     pub fn with_data(mut self, key: String, value: Value) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_data(mut self, key: String, value: Value) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:258:5
    |
258 | /     pub fn with_data(mut self, key: String, value: Value) -> Self {
259 | |         self.data.insert(key, value);
260 | |         self
261 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:264:5
    |
264 |     pub fn with_scope(mut self, scope: ContextScope) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_scope(mut self, scope: ContextScope) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:264:5
    |
264 | /     pub fn with_scope(mut self, scope: ContextScope) -> Self {
265 | |         self.scope = scope;
266 | |         self
267 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:270:5
    |
270 |     pub fn with_inheritance(mut self, inheritance: InheritancePolicy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_inheritance(mut self, inheritance: InheritancePolicy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:270:5
    |
270 | /     pub fn with_inheritance(mut self, inheritance: InheritancePolicy) -> Self {
271 | |         self.inheritance = inheritance;
272 | |         self
273 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:276:5
    |
276 |     pub fn has_capability(&self, capability: &str) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_capability(&self, capability: &str) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: called `map(<f>).unwrap_or(false)` on an `Option` value
   --> llmspell-core/src/execution_context.rs:277:9
    |
277 | /         self.get("capabilities")
278 | |             .as_ref()
279 | |             .and_then(|v| v.as_array())
280 | |             .map(|caps| caps.iter().any(|c| c.as_str() == Some(capability)))
281 | |             .unwrap_or(false)
    | |_____________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`
help: use `is_some_and(<f>)` instead
    |
280 -             .map(|caps| caps.iter().any(|c| c.as_str() == Some(capability)))
280 +             .is_some_and(|caps| caps.iter().any(|c| c.as_str() == Some(capability)))
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:285:5
    |
285 |     pub fn root(&self) -> &ExecutionContext {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn root(&self) -> &ExecutionContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:292:5
    |
292 |     pub fn depth(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn depth(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: boolean to int conversion using if
   --> llmspell-core/src/execution_context.rs:295:9
    |
295 | /         if self.parent_id.is_some() {
296 | |             1
297 | |         } else {
298 | |             0
299 | |         }
    | |_________^ help: replace with from: `usize::from(self.parent_id.is_some())`
    |
    = note: `self.parent_id.is_some() as usize` or `self.parent_id.is_some().into()` can also be valid options
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_to_int_with_if
    = note: `-W clippy::bool-to-int-with-if` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::bool_to_int_with_if)]`

warning: item in documentation is missing backticks
   --> llmspell-core/src/execution_context.rs:316:17
    |
316 | /// Builder for ExecutionContext
    |                 ^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
316 - /// Builder for ExecutionContext
316 + /// Builder for `ExecutionContext`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:323:5
    |
323 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:330:5
    |
330 |     pub fn conversation_id(mut self, id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn conversation_id(mut self, id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:330:5
    |
330 | /     pub fn conversation_id(mut self, id: String) -> Self {
331 | |         self.context.conversation_id = Some(id);
332 | |         self
333 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:336:5
    |
336 |     pub fn user_id(mut self, id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn user_id(mut self, id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:336:5
    |
336 | /     pub fn user_id(mut self, id: String) -> Self {
337 | |         self.context.user_id = Some(id);
338 | |         self
339 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:342:5
    |
342 |     pub fn session_id(mut self, id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn session_id(mut self, id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:342:5
    |
342 | /     pub fn session_id(mut self, id: String) -> Self {
343 | |         self.context.session_id = Some(id);
344 | |         self
345 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:348:5
    |
348 |     pub fn scope(mut self, scope: ContextScope) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn scope(mut self, scope: ContextScope) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:348:5
    |
348 | /     pub fn scope(mut self, scope: ContextScope) -> Self {
349 | |         self.context.scope = scope;
350 | |         self
351 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:354:5
    |
354 |     pub fn parent_id(mut self, parent_id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn parent_id(mut self, parent_id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:354:5
    |
354 | /     pub fn parent_id(mut self, parent_id: String) -> Self {
355 | |         self.context.parent_id = Some(parent_id);
356 | |         self
357 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:360:5
    |
360 |     pub fn inheritance(mut self, policy: InheritancePolicy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn inheritance(mut self, policy: InheritancePolicy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:360:5
    |
360 | /     pub fn inheritance(mut self, policy: InheritancePolicy) -> Self {
361 | |         self.context.inheritance = policy;
362 | |         self
363 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:366:5
    |
366 |     pub fn data(mut self, key: String, value: Value) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn data(mut self, key: String, value: Value) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:366:5
    |
366 | /     pub fn data(mut self, key: String, value: Value) -> Self {
367 | |         self.context.data.insert(key, value);
368 | |         self
369 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:372:5
    |
372 |     pub fn security(mut self, security: SecurityContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn security(mut self, security: SecurityContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/execution_context.rs:372:5
    |
372 | /     pub fn security(mut self, security: SecurityContext) -> Self {
373 | |         self.context.security_context = Some(security);
374 | |         self
375 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/execution_context.rs:378:5
    |
378 |     pub fn build(self) -> ExecutionContext {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> ExecutionContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-core/src/logging.rs:12:35
   |
12 | /// Logging configuration for the LLMSpell system.
   |                                   ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
12 - /// Logging configuration for the LLMSpell system.
12 + /// Logging configuration for the `LLMSpell` system.
   |

warning: more than 3 bools in a struct
  --> llmspell-core/src/logging.rs:44:1
   |
44 | / pub struct LoggingConfig {
45 | |     /// Default log level
46 | |     pub default_level: Level,
47 | |     /// Whether to use JSON formatting
...  |
58 | |     pub with_span_events: bool,
59 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
   = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/logging.rs:77:5
   |
77 |     pub fn development() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn development() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/logging.rs:90:5
   |
90 |     pub fn production() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn production() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-core/src/logging.rs:117:1
    |
117 | pub fn init_logging(config: LoggingConfig) -> Result<(), Box<dyn std::error::Error>> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-core/src/logging.rs:117:29
    |
117 | pub fn init_logging(config: LoggingConfig) -> Result<(), Box<dyn std::error::Error>> {
    |                             ^^^^^^^^^^^^^ help: consider taking a reference instead: `&LoggingConfig`
    |
help: or consider marking this type as `Copy`
   --> llmspell-core/src/logging.rs:44:1
    |
44  | pub struct LoggingConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
    = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-core/src/logging.rs:163:1
    |
163 | pub fn init_from_env() -> Result<(), Box<dyn std::error::Error>> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-core/src/logging.rs:174:1
    |
174 | pub fn update_log_filter(filter: &str) -> Result<(), Box<dyn std::error::Error>> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/state/artifact_correlation.rs:22:5
   |
22 |     pub fn generate() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/state/artifact_correlation.rs:72:5
   |
72 | /     pub fn new(
73 | |         id: ArtifactId,
74 | |         artifact_type: String,
75 | |         name: String,
76 | |         created_by: ComponentId,
77 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
72 ~     #[must_use] pub fn new(
73 +         id: ArtifactId,
74 +         artifact_type: String,
75 +         name: String,
76 +         created_by: ComponentId,
77 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/state/artifact_correlation.rs:189:5
    |
189 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
 --> llmspell-core/src/types/mod.rs:2:23
  |
2 | //! ABOUTME: Provides ComponentId, Version, ComponentMetadata and streaming types
  |                       ^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides ComponentId, Version, ComponentMetadata and streaming types
2 + //! ABOUTME: Provides `ComponentId`, Version, ComponentMetadata and streaming types
  |

warning: item in documentation is missing backticks
 --> llmspell-core/src/types/mod.rs:2:45
  |
2 | //! ABOUTME: Provides ComponentId, Version, ComponentMetadata and streaming types
  |                                             ^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides ComponentId, Version, ComponentMetadata and streaming types
2 + //! ABOUTME: Provides ComponentId, Version, `ComponentMetadata` and streaming types
  |

warning: item in documentation is missing backticks
 --> llmspell-core/src/types/agent_io.rs:2:23
  |
2 | //! ABOUTME: Provides AgentInput, AgentOutput, and related types for agent communication
  |                       ^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides AgentInput, AgentOutput, and related types for agent communication
2 + //! ABOUTME: Provides `AgentInput`, AgentOutput, and related types for agent communication
  |

warning: item in documentation is missing backticks
 --> llmspell-core/src/types/agent_io.rs:2:35
  |
2 | //! ABOUTME: Provides AgentInput, AgentOutput, and related types for agent communication
  |                                   ^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides AgentInput, AgentOutput, and related types for agent communication
2 + //! ABOUTME: Provides AgentInput, `AgentOutput`, and related types for agent communication
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/types/agent_io.rs:80:5
   |
80 |     pub fn with_media(mut self, media: MediaContent) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_media(mut self, media: MediaContent) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/types/agent_io.rs:80:5
   |
80 | /     pub fn with_media(mut self, media: MediaContent) -> Self {
81 | |         self.media.push(media);
82 | |         self
83 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/types/agent_io.rs:86:5
   |
86 |     pub fn with_media_vec(mut self, media: Vec<MediaContent>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_media_vec(mut self, media: Vec<MediaContent>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/types/agent_io.rs:86:5
   |
86 | /     pub fn with_media_vec(mut self, media: Vec<MediaContent>) -> Self {
87 | |         self.media.extend(media);
88 | |         self
89 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/types/agent_io.rs:92:5
   |
92 |     pub fn with_context(mut self, context: ExecutionContext) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_context(mut self, context: ExecutionContext) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/types/agent_io.rs:92:5
   |
92 | /     pub fn with_context(mut self, context: ExecutionContext) -> Self {
93 | |         self.context = Some(context);
94 | |         self
95 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:98:5
    |
98  | /     pub fn with_parameter(mut self, key: impl Into<String>, value: impl Into<Value>) -> Self {
99  | |         self.parameters.insert(key.into(), value.into());
100 | |         self
101 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:104:5
    |
104 |     pub fn with_output_modalities(mut self, modalities: Vec<MediaType>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_output_modalities(mut self, modalities: Vec<MediaType>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:104:5
    |
104 | /     pub fn with_output_modalities(mut self, modalities: Vec<MediaType>) -> Self {
105 | |         self.output_modalities = modalities;
106 | |         self
107 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:110:5
    |
110 |     pub fn builder() -> AgentInputBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> AgentInputBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:115:5
    |
115 |     pub fn has_media(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_media(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:120:5
    |
120 |     pub fn get_media_by_type(&self, media_type: MediaType) -> Vec<&MediaContent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_media_by_type(&self, media_type: MediaType) -> Vec<&MediaContent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/agent_io.rs:147:17
    |
147 | /// Builder for AgentInput
    |                 ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
147 - /// Builder for AgentInput
147 + /// Builder for `AgentInput`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:158:5
    |
158 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:169:5
    |
169 | /     pub fn text(mut self, text: impl Into<String>) -> Self {
170 | |         self.text = text.into();
171 | |         self
172 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:175:5
    |
175 |     pub fn add_media(mut self, media: MediaContent) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_media(mut self, media: MediaContent) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:175:5
    |
175 | /     pub fn add_media(mut self, media: MediaContent) -> Self {
176 | |         self.media.push(media);
177 | |         self
178 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:181:5
    |
181 |     pub fn context(mut self, context: ExecutionContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn context(mut self, context: ExecutionContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:181:5
    |
181 | /     pub fn context(mut self, context: ExecutionContext) -> Self {
182 | |         self.context = Some(context);
183 | |         self
184 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:187:5
    |
187 | /     pub fn parameter(mut self, key: impl Into<String>, value: impl Into<Value>) -> Self {
188 | |         self.parameters.insert(key.into(), value.into());
189 | |         self
190 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:193:5
    |
193 |     pub fn output_modalities(mut self, modalities: Vec<MediaType>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn output_modalities(mut self, modalities: Vec<MediaType>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:193:5
    |
193 | /     pub fn output_modalities(mut self, modalities: Vec<MediaType>) -> Self {
194 | |         self.output_modalities = modalities;
195 | |         self
196 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/agent_io.rs:198:19
    |
198 |     /// Build the AgentInput
    |                   ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
198 -     /// Build the AgentInput
198 +     /// Build the `AgentInput`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:199:5
    |
199 |     pub fn build(self) -> AgentInput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> AgentInput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:244:5
    |
244 |     pub fn with_media(mut self, media: MediaContent) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_media(mut self, media: MediaContent) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:244:5
    |
244 | /     pub fn with_media(mut self, media: MediaContent) -> Self {
245 | |         self.media.push(media);
246 | |         self
247 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:250:5
    |
250 |     pub fn with_tool_call(mut self, tool_call: ToolCall) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_tool_call(mut self, tool_call: ToolCall) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:250:5
    |
250 | /     pub fn with_tool_call(mut self, tool_call: ToolCall) -> Self {
251 | |         self.tool_calls.push(tool_call);
252 | |         self
253 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:256:5
    |
256 |     pub fn with_metadata(mut self, metadata: OutputMetadata) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_metadata(mut self, metadata: OutputMetadata) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:256:5
    |
256 | /     pub fn with_metadata(mut self, metadata: OutputMetadata) -> Self {
257 | |         self.metadata = metadata;
258 | |         self
259 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:262:5
    |
262 |     pub fn with_transfer(mut self, agent_id: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_transfer(mut self, agent_id: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:262:5
    |
262 | /     pub fn with_transfer(mut self, agent_id: ComponentId) -> Self {
263 | |         self.transfer_to = Some(agent_id);
264 | |         self
265 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:268:5
    |
268 |     pub fn builder() -> AgentOutputBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> AgentOutputBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:273:5
    |
273 |     pub fn has_media(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_media(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:278:5
    |
278 |     pub fn has_tool_calls(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_tool_calls(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:283:5
    |
283 |     pub fn is_transfer(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_transfer(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/agent_io.rs:304:13
    |
304 |             write!(f, ", transfer_to: {}", agent_id)?;
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
304 -             write!(f, ", transfer_to: {}", agent_id)?;
304 +             write!(f, ", transfer_to: {agent_id}")?;
    |

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/agent_io.rs:310:17
    |
310 | /// Builder for AgentOutput
    |                 ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
310 - /// Builder for AgentOutput
310 + /// Builder for `AgentOutput`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:321:5
    |
321 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:332:5
    |
332 | /     pub fn text(mut self, text: impl Into<String>) -> Self {
333 | |         self.text = text.into();
334 | |         self
335 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:338:5
    |
338 |     pub fn add_media(mut self, media: MediaContent) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_media(mut self, media: MediaContent) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:338:5
    |
338 | /     pub fn add_media(mut self, media: MediaContent) -> Self {
339 | |         self.media.push(media);
340 | |         self
341 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:344:5
    |
344 |     pub fn add_tool_call(mut self, tool_call: ToolCall) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_tool_call(mut self, tool_call: ToolCall) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:344:5
    |
344 | /     pub fn add_tool_call(mut self, tool_call: ToolCall) -> Self {
345 | |         self.tool_calls.push(tool_call);
346 | |         self
347 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:350:5
    |
350 |     pub fn metadata(mut self, metadata: OutputMetadata) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn metadata(mut self, metadata: OutputMetadata) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:350:5
    |
350 | /     pub fn metadata(mut self, metadata: OutputMetadata) -> Self {
351 | |         self.metadata = metadata;
352 | |         self
353 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:356:5
    |
356 |     pub fn transfer_to(mut self, agent_id: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn transfer_to(mut self, agent_id: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/agent_io.rs:356:5
    |
356 | /     pub fn transfer_to(mut self, agent_id: ComponentId) -> Self {
357 | |         self.transfer_to = Some(agent_id);
358 | |         self
359 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/agent_io.rs:361:19
    |
361 |     /// Build the AgentOutput
    |                   ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
361 -     /// Build the AgentOutput
361 +     /// Build the `AgentOutput`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/agent_io.rs:362:5
    |
362 |     pub fn build(self) -> AgentOutput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> AgentOutput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
 --> llmspell-core/src/types/media.rs:2:23
  |
2 | //! ABOUTME: Provides MediaContent enum, format types, metadata structures, and validation helpers
  |                       ^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides MediaContent enum, format types, metadata structures, and validation helpers
2 + //! ABOUTME: Provides `MediaContent` enum, format types, metadata structures, and validation helpers
  |

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/media.rs:123:9
    |
123 |     /// WebM format
    |         ^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
123 -     /// WebM format
123 +     /// `WebM` format
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/media.rs:262:21
    |
262 |                     write!(f, ", {}", mime)?;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
262 -                     write!(f, ", {}", mime)?;
262 +                     write!(f, ", {mime}")?;
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/media.rs:265:21
    |
265 |                     write!(f, ", {}", name)?;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
265 -                     write!(f, ", {}", name)?;
265 +                     write!(f, ", {name}")?;
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:337:5
    |
337 |     pub fn size_bytes(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn size_bytes(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/types/media.rs:340:13
    |
340 |             MediaContent::Image { data, .. } => data.len(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
340 ~             MediaContent::Image { data, .. } | MediaContent::Audio { data, .. } => data.len(),
341 ~             MediaContent::Video { data, .. } => data.len(),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/types/media.rs:340:13
    |
340 |             MediaContent::Image { data, .. } => data.len(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
340 ~             MediaContent::Image { data, .. } | MediaContent::Video { data, .. } => data.len(),
341 |             MediaContent::Audio { data, .. } => data.len(),
342 ~             MediaContent::Binary { data, .. } => data.len(),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/types/media.rs:341:13
    |
341 |             MediaContent::Audio { data, .. } => data.len(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
341 ~             MediaContent::Audio { data, .. } | MediaContent::Video { data, .. } => data.len(),
342 ~             MediaContent::Binary { data, .. } => data.len(),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/types/media.rs:340:13
    |
340 |             MediaContent::Image { data, .. } => data.len(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
340 ~             MediaContent::Image { data, .. } | MediaContent::Binary { data, .. } => data.len(),
341 |             MediaContent::Audio { data, .. } => data.len(),
342 |             MediaContent::Video { data, .. } => data.len(),
343 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/types/media.rs:341:13
    |
341 |             MediaContent::Audio { data, .. } => data.len(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
341 ~             MediaContent::Audio { data, .. } | MediaContent::Binary { data, .. } => data.len(),
342 |             MediaContent::Video { data, .. } => data.len(),
343 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-core/src/types/media.rs:342:13
    |
342 |             MediaContent::Video { data, .. } => data.len(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
342 ~             MediaContent::Video { data, .. } | MediaContent::Binary { data, .. } => data.len(),
343 ~             }
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:348:5
    |
348 |     pub fn media_type(&self) -> MediaType {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn media_type(&self) -> MediaType`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-core/src/types/media.rs:359:5
    |
359 |     pub fn validate_size(&self) -> Result<(), String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/media.rs:370:17
    |
370 |               Err(format!(
    |  _________________^
371 | |                 "{} size {} bytes exceeds maximum {} bytes",
372 | |                 type_name, size, max_size
373 | |             ))
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:382:5
    |
382 |     pub fn mime_type(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn mime_type(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:394:5
    |
394 |     pub fn extensions(&self) -> &'static [&'static str] {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn extensions(&self) -> &'static [&'static str]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:408:5
    |
408 |     pub fn mime_type(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn mime_type(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:419:5
    |
419 |     pub fn extensions(&self) -> &'static [&'static str] {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn extensions(&self) -> &'static [&'static str]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:432:5
    |
432 |     pub fn mime_type(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn mime_type(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/media.rs:443:5
    |
443 |     pub fn extensions(&self) -> &'static [&'static str] {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn extensions(&self) -> &'static [&'static str]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/media.rs:467:22
    |
467 |             _ => Err(format!("Unknown image format: {}", ext)),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
467 -             _ => Err(format!("Unknown image format: {}", ext)),
467 +             _ => Err(format!("Unknown image format: {ext}")),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/media.rs:482:22
    |
482 |             _ => Err(format!("Unknown audio format: {}", ext)),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
482 -             _ => Err(format!("Unknown audio format: {}", ext)),
482 +             _ => Err(format!("Unknown audio format: {ext}")),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/media.rs:497:22
    |
497 |             _ => Err(format!("Unknown video format: {}", ext)),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
497 -             _ => Err(format!("Unknown video format: {}", ext)),
497 +             _ => Err(format!("Unknown video format: {ext}")),
    |

warning: item in documentation is missing backticks
 --> llmspell-core/src/types/streaming.rs:2:23
  |
2 | //! ABOUTME: Provides AgentStream, AgentChunk, and related types for streaming LLM interactions
  |                       ^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides AgentStream, AgentChunk, and related types for streaming LLM interactions
2 + //! ABOUTME: Provides `AgentStream`, AgentChunk, and related types for streaming LLM interactions
  |

warning: item in documentation is missing backticks
 --> llmspell-core/src/types/streaming.rs:2:36
  |
2 | //! ABOUTME: Provides AgentStream, AgentChunk, and related types for streaming LLM interactions
  |                                    ^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides AgentStream, AgentChunk, and related types for streaming LLM interactions
2 + //! ABOUTME: Provides AgentStream, `AgentChunk`, and related types for streaming LLM interactions
  |

warning: item in documentation is missing backticks
  --> llmspell-core/src/types/streaming.rs:16:26
   |
16 | /// containing either an AgentChunk or an error.
   |                          ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
16 - /// containing either an AgentChunk or an error.
16 + /// containing either an `AgentChunk` or an error.
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:143:41
    |
143 |             ChunkContent::Text(text) => write!(f, "Text: {}", text),
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
143 -             ChunkContent::Text(text) => write!(f, "Text: {}", text),
143 +             ChunkContent::Text(text) => write!(f, "Text: {text}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:145:17
    |
145 |                 write!(f, "ToolCallProgress: {}", tool_name)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
145 -                 write!(f, "ToolCallProgress: {}", tool_name)
145 +                 write!(f, "ToolCallProgress: {tool_name}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:148:17
    |
148 |                 write!(f, "ToolCallComplete: {}", tool_name)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
148 -                 write!(f, "ToolCallComplete: {}", tool_name)
148 +                 write!(f, "ToolCallComplete: {tool_name}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:159:34
    |
159 |                         .map(|c| format!(": {}", c))
    |                                  ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
159 -                         .map(|c| format!(": {}", c))
159 +                         .map(|c| format!(": {c}"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:163:43
    |
163 |             ChunkContent::Control(msg) => write!(f, "Control: {}", msg),
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
163 -             ChunkContent::Control(msg) => write!(f, "Control: {}", msg),
163 +             ChunkContent::Control(msg) => write!(f, "Control: {msg}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:196:24
    |
196 |             parts.push(format!("{} tokens", count));
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
196 -             parts.push(format!("{} tokens", count));
196 +             parts.push(format!("{count} tokens"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:200:24
    |
200 |             parts.push(format!("model={}", model));
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
200 -             parts.push(format!("model={}", model));
200 +             parts.push(format!("model={model}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:284:34
    |
284 |                         .map(|n| format!(" (expecting {} chunks)", n))
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
284 -                         .map(|n| format!(" (expecting {} chunks)", n))
284 +                         .map(|n| format!(" (expecting {n} chunks)"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:293:17
    |
293 | /                 write!(
294 | |                     f,
295 | |                     "StreamEnd ({} chunks in {}ms)",
296 | |                     total_chunks, duration_ms
297 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:300:17
    |
300 |                 write!(f, "StreamCancelled: {}", reason)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
300 -                 write!(f, "StreamCancelled: {}", reason)
300 +                 write!(f, "StreamCancelled: {reason}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:304:17
    |
304 |                 write!(f, "RateLimit ({} remaining)", remaining)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
304 -                 write!(f, "RateLimit ({} remaining)", remaining)
304 +                 write!(f, "RateLimit ({remaining} remaining)")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/types/streaming.rs:307:17
    |
307 |                 write!(f, "Custom[{}]", message_type)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
307 -                 write!(f, "Custom[{}]", message_type)
307 +                 write!(f, "Custom[{message_type}]")
    |

warning: item in documentation is missing backticks
  --> llmspell-core/src/types/mod.rs:25:45
   |
25 | /// Unique identifier for components in the LLMSpell system.
   |                                             ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
25 - /// Unique identifier for components in the LLMSpell system.
25 + /// Unique identifier for components in the `LLMSpell` system.
   |

warning: item in documentation is missing backticks
  --> llmspell-core/src/types/mod.rs:50:31
   |
50 |     /// Generate a new random ComponentId
   |                               ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
50 -     /// Generate a new random ComponentId
50 +     /// Generate a new random `ComponentId`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/types/mod.rs:51:5
   |
51 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-core/src/types/mod.rs:55:16
   |
55 |     /// Create ComponentId from name (deterministic)
   |                ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
55 -     /// Create ComponentId from name (deterministic)
55 +     /// Create `ComponentId` from name (deterministic)
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/types/mod.rs:56:5
   |
56 |     pub fn from_name(name: &str) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_name(name: &str) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/types/mod.rs:62:5
   |
62 |     pub fn uuid(&self) -> Uuid {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn uuid(&self) -> Uuid`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:109:5
    |
109 |     pub fn new(major: u32, minor: u32, patch: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(major: u32, minor: u32, patch: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:118:5
    |
118 |     pub fn is_compatible_with(&self, other: &Version) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_compatible_with(&self, other: &Version) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:123:5
    |
123 |     pub fn is_newer_than(&self, other: &Version) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_newer_than(&self, other: &Version) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/mod.rs:134:36
    |
134 | /// Metadata for components in the LLMSpell system.
    |                                    ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
134 - /// Metadata for components in the LLMSpell system.
134 + /// Metadata for components in the `LLMSpell` system.
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:167:5
    |
167 |     pub fn new(name: String, description: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, description: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/mod.rs:179:32
    |
179 |     /// Update the version and updated_at timestamp
    |                                ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
179 -     /// Update the version and updated_at timestamp
179 +     /// Update the version and `updated_at` timestamp
    |

warning: item in documentation is missing backticks
   --> llmspell-core/src/types/mod.rs:186:32
    |
186 | /// Metadata for events in the LLMSpell system.
    |                                ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
186 - /// Metadata for events in the LLMSpell system.
186 + /// Metadata for events in the `LLMSpell` system.
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:230:5
    |
230 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:238:5
    |
238 |     pub fn with_trace(trace_id: String, span_id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_trace(trace_id: String, span_id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:248:5
    |
248 |     pub fn trace_id(&self) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn trace_id(&self) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:258:5
    |
258 |     pub fn span_id(&self) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn span_id(&self) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:268:5
    |
268 |     pub fn parent_span_id(&self) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn parent_span_id(&self) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:278:5
    |
278 |     pub fn correlation_id(&self) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn correlation_id(&self) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:288:5
    |
288 |     pub fn source(&self) -> Option<&ComponentId> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn source(&self) -> Option<&ComponentId>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:303:5
    |
303 |     pub fn get_attribute(&self, key: &str) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_attribute(&self, key: &str) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: redundant closure
   --> llmspell-core/src/types/mod.rs:304:38
    |
304 |         self.attributes.get(key).map(|s| s.as_str())
    |                                      ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::String::as_str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:308:5
    |
308 |     pub fn attributes(&self) -> &HashMap<String, String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn attributes(&self) -> &HashMap<String, String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/types/mod.rs:313:5
    |
313 |     pub fn create_child(&self, span_id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_child(&self, span_id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/types/mod.rs:313:5
    |
313 | /     pub fn create_child(&self, span_id: String) -> Self {
314 | |         Self {
315 | |             trace_id: self.trace_id.clone(),
316 | |             span_id: Some(span_id),
...   |
323 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
 --> llmspell-core/src/traits/agent.rs:2:22
  |
2 | //! ABOUTME: Extends BaseAgent with conversation management and LLM provider integration
  |                      ^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Extends BaseAgent with conversation management and LLM provider integration
2 + //! ABOUTME: Extends `BaseAgent` with conversation management and LLM provider integration
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/agent.rs:68:5
   |
68 |     pub fn new(role: MessageRole, content: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(role: MessageRole, content: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/agent.rs:77:5
   |
77 |     pub fn system(content: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn system(content: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/agent.rs:82:5
   |
82 |     pub fn user(content: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn user(content: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/agent.rs:87:5
   |
87 |     pub fn assistant(content: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn assistant(content: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
 --> llmspell-core/src/traits/base_agent.rs:1:14
  |
1 | //! ABOUTME: BaseAgent trait - foundation for all components
  |              ^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: BaseAgent trait - foundation for all components
1 + //! ABOUTME: `BaseAgent` trait - foundation for all components
  |

warning: item in documentation is missing backticks
 --> llmspell-core/src/traits/tool.rs:2:22
  |
2 | //! ABOUTME: Extends BaseAgent with parameter validation and tool categorization
  |                      ^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Extends BaseAgent with parameter validation and tool categorization
2 + //! ABOUTME: Extends `BaseAgent` with parameter validation and tool categorization
  |

warning: variables can be used directly in the `format!` string
  --> llmspell-core/src/traits/tool.rs:54:43
   |
54 |             ToolCategory::Custom(name) => write!(f, "{}", name),
   |                                           ^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
54 -             ToolCategory::Custom(name) => write!(f, "{}", name),
54 +             ToolCategory::Custom(name) => write!(f, "{name}"),
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/tool.rs:87:5
   |
87 |     pub fn allows(&self, required: &SecurityLevel) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn allows(&self, required: &SecurityLevel) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:121:5
    |
121 |     pub fn safe() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn safe() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:126:5
    |
126 |     pub fn restricted() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn restricted() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:134:5
    |
134 |     pub fn privileged() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn privileged() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:145:5
    |
145 | /     pub fn with_file_access(mut self, path: impl Into<String>) -> Self {
146 | |         self.file_permissions.push(path.into());
147 | |         self
148 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:151:5
    |
151 | /     pub fn with_network_access(mut self, domain: impl Into<String>) -> Self {
152 | |         self.network_permissions.push(domain.into());
153 | |         self
154 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:157:5
    |
157 | /     pub fn with_env_access(mut self, var: impl Into<String>) -> Self {
158 | |         self.env_permissions.push(var.into());
159 | |         self
160 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:192:5
    |
192 |     pub fn unlimited() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn unlimited() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:203:5
    |
203 |     pub fn strict() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn strict() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:214:5
    |
214 |     pub fn with_memory_limit(mut self, bytes: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_memory_limit(mut self, bytes: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:214:5
    |
214 | /     pub fn with_memory_limit(mut self, bytes: u64) -> Self {
215 | |         self.max_memory_bytes = Some(bytes);
216 | |         self
217 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:220:5
    |
220 |     pub fn with_cpu_limit(mut self, milliseconds: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_cpu_limit(mut self, milliseconds: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:220:5
    |
220 | /     pub fn with_cpu_limit(mut self, milliseconds: u64) -> Self {
221 | |         self.max_cpu_time_ms = Some(milliseconds);
222 | |         self
223 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:226:5
    |
226 |     pub fn with_network_limit(mut self, bytes_per_second: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_network_limit(mut self, bytes_per_second: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:226:5
    |
226 | /     pub fn with_network_limit(mut self, bytes_per_second: u64) -> Self {
227 | |         self.max_network_bps = Some(bytes_per_second);
228 | |         self
229 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:301:5
    |
301 |     pub fn new(name: String, description: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, description: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:311:5
    |
311 |     pub fn with_parameter(mut self, param: ParameterDef) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_parameter(mut self, param: ParameterDef) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:311:5
    |
311 | /     pub fn with_parameter(mut self, param: ParameterDef) -> Self {
312 | |         self.parameters.push(param);
313 | |         self
314 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:317:5
    |
317 |     pub fn with_returns(mut self, returns: ParameterType) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_returns(mut self, returns: ParameterType) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool.rs:317:5
    |
317 | /     pub fn with_returns(mut self, returns: ParameterType) -> Self {
318 | |         self.returns = Some(returns);
319 | |         self
320 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:323:5
    |
323 |     pub fn required_parameters(&self) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn required_parameters(&self) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool.rs:332:5
    |
332 |     pub fn to_json_schema(&self) -> serde_json::Value {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn to_json_schema(&self) -> serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-core/src/traits/tool.rs:539:30
    |
539 |                     message: format!("Missing required parameter: {}", required),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
539 -                     message: format!("Missing required parameter: {}", required),
539 +                     message: format!("Missing required parameter: {required}"),
    |

warning: item in documentation is missing backticks
 --> llmspell-core/src/traits/tool_capable.rs:1:14
  |
1 | //! ABOUTME: ToolCapable trait for components that can interact with tools
  |              ^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: ToolCapable trait for components that can interact with tools
1 + //! ABOUTME: `ToolCapable` trait for components that can interact with tools
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/tool_capable.rs:47:5
   |
47 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/tool_capable.rs:52:5
   |
52 | /     pub fn with_category(mut self, category: impl Into<String>) -> Self {
53 | |         self.categories.push(category.into());
54 | |         self
55 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/tool_capable.rs:58:5
   |
58 | /     pub fn with_capability(mut self, capability: impl Into<String>) -> Self {
59 | |         self.capabilities.push(capability.into());
60 | |         self
61 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/tool_capable.rs:64:5
   |
64 | /     pub fn with_max_security_level(mut self, level: impl Into<String>) -> Self {
65 | |         self.max_security_level = Some(level.into());
66 | |         self
67 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/tool_capable.rs:70:5
   |
70 | /     pub fn with_min_security_level(mut self, level: impl Into<String>) -> Self {
71 | |         self.min_security_level = Some(level.into());
72 | |         self
73 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/tool_capable.rs:76:5
   |
76 | /     pub fn with_text_search(mut self, text: impl Into<String>) -> Self {
77 | |         self.text_search = Some(text.into());
78 | |         self
79 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/tool_capable.rs:82:5
   |
82 | /     pub fn with_custom_filter(mut self, key: impl Into<String>, value: JsonValue) -> Self {
83 | |         self.custom_filters.insert(key.into(), value);
84 | |         self
85 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-core/src/traits/tool_capable.rs:135:22
    |
135 |     /// Create a new ToolInfo
    |                      ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
135 -     /// Create a new ToolInfo
135 +     /// Create a new `ToolInfo`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool_capable.rs:154:5
    |
154 |     pub fn with_schema(mut self, schema: JsonValue) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_schema(mut self, schema: JsonValue) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool_capable.rs:154:5
    |
154 | /     pub fn with_schema(mut self, schema: JsonValue) -> Self {
155 | |         self.schema = schema;
156 | |         self
157 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool_capable.rs:160:5
    |
160 | /     pub fn with_capability(mut self, capability: impl Into<String>) -> Self {
161 | |         self.capabilities.push(capability.into());
162 | |         self
163 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool_capable.rs:166:5
    |
166 |     pub fn with_requirements(mut self, requirements: JsonValue) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_requirements(mut self, requirements: JsonValue) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool_capable.rs:166:5
    |
166 | /     pub fn with_requirements(mut self, requirements: JsonValue) -> Self {
167 | |         self.requirements = requirements;
168 | |         self
169 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool_capable.rs:267:5
    |
267 |     pub fn with_step(mut self, step: ToolCompositionStep) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_step(mut self, step: ToolCompositionStep) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool_capable.rs:267:5
    |
267 | /     pub fn with_step(mut self, step: ToolCompositionStep) -> Self {
268 | |         self.steps.push(step);
269 | |         self
270 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/tool_capable.rs:273:5
    |
273 |     pub fn with_parallel(mut self, parallel: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_parallel(mut self, parallel: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-core/src/traits/tool_capable.rs:273:5
    |
273 | /     pub fn with_parallel(mut self, parallel: bool) -> Self {
274 | |         self.parallel = parallel;
275 | |         self
276 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
 --> llmspell-core/src/traits/workflow.rs:2:22
  |
2 | //! ABOUTME: Extends BaseAgent with step management and execution planning
  |                      ^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Extends BaseAgent with step management and execution planning
2 + //! ABOUTME: Extends `BaseAgent` with step management and execution planning
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/workflow.rs:49:5
   |
49 |     pub fn new(name: String, component_id: ComponentId) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, component_id: ComponentId) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/workflow.rs:61:5
   |
61 |     pub fn with_dependency(mut self, dep: ComponentId) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_dependency(mut self, dep: ComponentId) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/workflow.rs:61:5
   |
61 | /     pub fn with_dependency(mut self, dep: ComponentId) -> Self {
62 | |         self.dependencies.push(dep);
63 | |         self
64 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/workflow.rs:67:5
   |
67 |     pub fn with_retry(mut self, policy: RetryPolicy) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_retry(mut self, policy: RetryPolicy) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/workflow.rs:67:5
   |
67 | /     pub fn with_retry(mut self, policy: RetryPolicy) -> Self {
68 | |         self.retry_policy = Some(policy);
69 | |         self
70 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-core/src/traits/workflow.rs:73:5
   |
73 |     pub fn with_timeout(mut self, timeout: Duration) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_timeout(mut self, timeout: Duration) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-core/src/traits/workflow.rs:73:5
   |
73 | /     pub fn with_timeout(mut self, timeout: Duration) -> Self {
74 | |         self.timeout = Some(timeout);
75 | |         self
76 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/workflow.rs:130:5
    |
130 |     pub fn success(step_id: ComponentId, output: AgentOutput, duration: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success(step_id: ComponentId, output: AgentOutput, duration: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-core/src/traits/workflow.rs:142:5
    |
142 | /     pub fn failure(
143 | |         step_id: ComponentId,
144 | |         error: String,
145 | |         duration: Duration,
146 | |         retry_count: u32,
147 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
142 ~     #[must_use] pub fn failure(
143 +         step_id: ComponentId,
144 +         error: String,
145 +         duration: Duration,
146 +         retry_count: u32,
147 ~     ) -> Self {
    |

warning: `llmspell-core` (lib) generated 269 warnings (run `cargo clippy --fix --lib -p llmspell-core` to apply 182 suggestions)
warning: this method could have a `#[must_use]` attribute
  --> llmspell-storage/src/backends/memory.rs:18:5
   |
18 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
   = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-storage/src/backends/sled_backend.rs:19:5
   |
19 |     pub fn new() -> Result<Self> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
   = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-storage/src/backends/sled_backend.rs:25:5
   |
25 |     pub fn new_with_path<P: AsRef<Path>>(path: P) -> Result<Self> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-storage/src/backends/sled_backend.rs:31:5
   |
31 |     pub fn new_temporary() -> Result<Self> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
  --> llmspell-storage/src/traits.rs:18:9
   |
18 |     /// RocksDB embedded database
   |         ^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
   = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
   |
18 -     /// RocksDB embedded database
18 +     /// `RocksDB` embedded database
   |

warning: more than 3 bools in a struct
  --> llmspell-storage/src/traits.rs:24:1
   |
24 | / pub struct StorageCharacteristics {
25 | |     /// Whether the backend persists data
26 | |     pub persistent: bool,
...  |
41 | |     pub avg_write_latency_us: u64,
42 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
   = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-storage/src/traits.rs:83:5
   |
83 |     fn to_storage_bytes(&self) -> Result<Vec<u8>>;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-storage/src/traits.rs:84:5
   |
84 |     fn from_storage_bytes(bytes: &[u8]) -> Result<Self>;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: `llmspell-storage` (lib) generated 8 warnings (run `cargo clippy --fix --lib -p llmspell-storage` to apply 2 suggestions)
warning: item in documentation is missing backticks
 --> llmspell-events/src/lib.rs:4:7
  |
4 | //! # LLMSpell Events
  |       ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
4 - //! # LLMSpell Events
4 + //! # `LLMSpell` Events
  |

warning: item in documentation is missing backticks
 --> llmspell-events/src/lib.rs:7:40
  |
7 | //! - Cross-language event support via UniversalEvent
  |                                        ^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
7 - //! - Cross-language event support via UniversalEvent
7 + //! - Cross-language event support via `UniversalEvent`
  |

warning: item in documentation is missing backticks
 --> llmspell-events/src/lib.rs:8:34
  |
8 | //! - Backpressure handling with FlowController
  |                                  ^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
8 - //! - Backpressure handling with FlowController
8 + //! - Backpressure handling with `FlowController`
  |

warning: item in documentation is missing backticks
  --> llmspell-events/src/lib.rs:14:9
   |
14 | //! - **UniversalEvent**: Language-agnostic event format
   |         ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
14 - //! - **UniversalEvent**: Language-agnostic event format
14 + //! - **`UniversalEvent`**: Language-agnostic event format
   |

warning: item in documentation is missing backticks
  --> llmspell-events/src/lib.rs:15:9
   |
15 | //! - **FlowController**: Rate limiting and backpressure
   |         ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
15 - //! - **FlowController**: Rate limiting and backpressure
15 + //! - **`FlowController`**: Rate limiting and backpressure
   |

warning: item in documentation is missing backticks
  --> llmspell-events/src/lib.rs:16:9
   |
16 | //! - **EventBus**: Async pub/sub with pattern matching
   |         ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
16 - //! - **EventBus**: Async pub/sub with pattern matching
16 + //! - **`EventBus`**: Async pub/sub with pattern matching
   |

warning: item in documentation is missing backticks
  --> llmspell-events/src/lib.rs:17:9
   |
17 | //! - **EventStorageAdapter**: Unified storage integration via llmspell-storage
   |         ^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
17 - //! - **EventStorageAdapter**: Unified storage integration via llmspell-storage
17 + //! - **`EventStorageAdapter`**: Unified storage integration via llmspell-storage
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/bus.rs:60:5
   |
60 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
   = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/bus.rs:65:5
   |
65 |     pub fn with_config(config: FlowControllerConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: FlowControllerConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/bus.rs:78:5
   |
78 | /     pub fn with_persistence<B: StorageBackend + 'static>(
79 | |         flow_config: FlowControllerConfig,
80 | |         storage_adapter: crate::storage_adapter::EventStorageAdapter<B>,
81 | |         persistence_config: PersistenceConfig,
82 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
78 ~     #[must_use] pub fn with_persistence<B: StorageBackend + 'static>(
79 +         flow_config: FlowControllerConfig,
80 +         storage_adapter: crate::storage_adapter::EventStorageAdapter<B>,
81 +         persistence_config: PersistenceConfig,
82 ~     ) -> Self {
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-events/src/bus.rs:98:5
   |
98 |     pub async fn publish(&self, event: UniversalEvent) -> Result<(), PublishError> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
   = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/bus.rs:142:5
    |
142 | /     pub async fn subscribe(
143 | |         &self,
144 | |         pattern: &str,
145 | |     ) -> Result<mpsc::UnboundedReceiver<UniversalEvent>, SubscribeError> {
    | |________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/bus.rs:166:5
    |
166 | /     pub async fn subscribe_with_handler<H>(
167 | |         &self,
168 | |         pattern: &str,
169 | |         handler: H,
170 | |     ) -> Result<Uuid, SubscribeError>
171 | |     where
172 | |         H: AsyncEventHandler + Send + 'static,
    | |______________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:191:5
    |
191 |     pub fn subscribe_all(&self) -> broadcast::Receiver<UniversalEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn subscribe_all(&self) -> broadcast::Receiver<UniversalEvent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:225:5
    |
225 |     pub fn buffer_size(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn buffer_size(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:230:5
    |
230 |     pub fn get_stats(&self) -> crate::flow_controller::FlowStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_stats(&self) -> crate::flow_controller::FlowStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:235:5
    |
235 |     pub fn subscription_count(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn subscription_count(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/bus.rs:243:5
    |
243 | /     pub async fn get_persisted_events(
244 | |         &self,
245 | |         pattern: &str,
246 | |     ) -> Result<Vec<UniversalEvent>, anyhow::Error> {
    | |___________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/bus.rs:256:5
    |
256 | /     pub async fn get_events_by_correlation_id(
257 | |         &self,
258 | |         correlation_id: Uuid,
259 | |     ) -> Result<Vec<UniversalEvent>, anyhow::Error> {
    | |___________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/bus.rs:272:5
    |
272 | /     pub async fn get_storage_stats(
273 | |         &self,
274 | |     ) -> Result<Option<crate::storage_adapter::StorageStats>, anyhow::Error> {
    | |____________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
   --> llmspell-events/src/bus.rs:291:17
    |
291 | /// Builder for EventBus
    |                 ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
291 - /// Builder for EventBus
291 + /// Builder for `EventBus`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:300:5
    |
300 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:309:5
    |
309 |     pub fn with_flow_config(mut self, config: FlowControllerConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_flow_config(mut self, config: FlowControllerConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/bus.rs:309:5
    |
309 | /     pub fn with_flow_config(mut self, config: FlowControllerConfig) -> Self {
310 | |         self.flow_config = config;
311 | |         self
312 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use
    = note: `-W clippy::return-self-not-must-use` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::return_self_not_must_use)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:315:5
    |
315 |     pub fn with_broadcast_capacity(mut self, capacity: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_broadcast_capacity(mut self, capacity: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/bus.rs:315:5
    |
315 | /     pub fn with_broadcast_capacity(mut self, capacity: usize) -> Self {
316 | |         self.broadcast_capacity = capacity;
317 | |         self
318 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:321:5
    |
321 | /     pub fn with_storage_persistence<B: StorageBackend + 'static>(
322 | |         mut self,
323 | |         storage_adapter: crate::storage_adapter::EventStorageAdapter<B>,
324 | |         config: PersistenceConfig,
325 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
321 ~     #[must_use] pub fn with_storage_persistence<B: StorageBackend + 'static>(
322 +         mut self,
323 +         storage_adapter: crate::storage_adapter::EventStorageAdapter<B>,
324 +         config: PersistenceConfig,
325 ~     ) -> Self {
    |

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/bus.rs:321:5
    |
321 | /     pub fn with_storage_persistence<B: StorageBackend + 'static>(
322 | |         mut self,
323 | |         storage_adapter: crate::storage_adapter::EventStorageAdapter<B>,
324 | |         config: PersistenceConfig,
...   |
328 | |         self
329 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/bus.rs:332:5
    |
332 |     pub fn build(self) -> EventBus {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> EventBus`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/query.rs:80:5
   |
80 |     pub fn new(start: DateTime<Utc>, end: DateTime<Utc>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(start: DateTime<Utc>, end: DateTime<Utc>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/query.rs:85:5
   |
85 |     pub fn last_seconds(seconds: i64) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn last_seconds(seconds: i64) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/query.rs:92:5
   |
92 |     pub fn last_minutes(minutes: i64) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn last_minutes(minutes: i64) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/query.rs:97:5
   |
97 |     pub fn last_hours(hours: i64) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn last_hours(hours: i64) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:102:5
    |
102 |     pub fn contains(&self, timestamp: DateTime<Utc>) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn contains(&self, timestamp: DateTime<Utc>) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:152:5
    |
152 |     pub fn new(query: TimelineQuery) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(query: TimelineQuery) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:168:5
    |
168 |     pub fn get_entries(&self) -> Vec<&TimelineEntry> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_entries(&self) -> Vec<&TimelineEntry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:173:5
    |
173 |     pub fn get_entries_by_score(&self) -> Vec<&QueryResultEntry> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_entries_by_score(&self) -> Vec<&QueryResultEntry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:192:5
    |
192 |     pub fn new(tracker: EventCorrelationTracker) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(tracker: EventCorrelationTracker) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:197:5
    |
197 |     pub fn execute_query(&self, query: TimelineQuery) -> QueryResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn execute_query(&self, query: TimelineQuery) -> QueryResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-events/src/correlation/query.rs:197:40
    |
197 |     pub fn execute_query(&self, query: TimelineQuery) -> QueryResult {
    |                                        ^^^^^^^^^^^^^ help: consider taking a reference instead: `&TimelineQuery`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
    = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: redundant closure
   --> llmspell-events/src/correlation/query.rs:220:63
    |
220 |         let total_events_examined = correlations.values().map(|v| v.len()).sum::<usize>();
    |                                                               ^^^^^^^^^^^ help: replace the closure with the method itself: `std::vec::Vec::len`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:260:5
    |
260 |     pub fn query_by_pattern(&self, pattern: &str) -> QueryResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn query_by_pattern(&self, pattern: &str) -> QueryResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:269:5
    |
269 |     pub fn query_by_time_range(&self, start: DateTime<Utc>, end: DateTime<Utc>) -> QueryResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn query_by_time_range(&self, start: DateTime<Utc>, end: DateTime<Utc>) -> QueryResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:278:5
    |
278 |     pub fn query_by_component(&self, component: &str) -> QueryResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn query_by_component(&self, component: &str) -> QueryResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:287:5
    |
287 |     pub fn query_root_causes(&self) -> QueryResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn query_root_causes(&self) -> QueryResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:296:5
    |
296 |     pub fn query_leaf_effects(&self) -> QueryResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn query_leaf_effects(&self) -> QueryResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-events/src/correlation/query.rs:307:17
    |
307 |         events: Vec<UniversalEvent>,
    |                 ^^^^^^^^^^^^^^^^^^^ help: consider changing the type to: `&[UniversalEvent]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: unused `self` argument
   --> llmspell-events/src/correlation/query.rs:344:9
    |
344 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: unused `self` argument
   --> llmspell-events/src/correlation/query.rs:448:21
    |
448 |     fn sort_entries(&self, entries: &mut [QueryResultEntry], sort_order: &SortOrder) {
    |                     ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:479:5
    |
479 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:486:5
    |
486 |     pub fn correlation_ids(mut self, ids: Vec<Uuid>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn correlation_ids(mut self, ids: Vec<Uuid>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:486:5
    |
486 | /     pub fn correlation_ids(mut self, ids: Vec<Uuid>) -> Self {
487 | |         self.query.correlation_ids = Some(ids);
488 | |         self
489 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:492:5
    |
492 |     pub fn event_types(mut self, patterns: Vec<String>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn event_types(mut self, patterns: Vec<String>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:492:5
    |
492 | /     pub fn event_types(mut self, patterns: Vec<String>) -> Self {
493 | |         self.query.event_types = Some(patterns);
494 | |         self
495 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:498:5
    |
498 |     pub fn time_range(mut self, start: DateTime<Utc>, end: DateTime<Utc>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn time_range(mut self, start: DateTime<Utc>, end: DateTime<Utc>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:498:5
    |
498 | /     pub fn time_range(mut self, start: DateTime<Utc>, end: DateTime<Utc>) -> Self {
499 | |         self.query.time_range = Some(TimeRange::new(start, end));
500 | |         self
501 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:504:5
    |
504 |     pub fn last_seconds(mut self, seconds: i64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn last_seconds(mut self, seconds: i64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:504:5
    |
504 | /     pub fn last_seconds(mut self, seconds: i64) -> Self {
505 | |         self.query.time_range = Some(TimeRange::last_seconds(seconds));
506 | |         self
507 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:510:5
    |
510 |     pub fn source_components(mut self, components: Vec<String>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn source_components(mut self, components: Vec<String>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:510:5
    |
510 | /     pub fn source_components(mut self, components: Vec<String>) -> Self {
511 | |         self.query.source_components = Some(components);
512 | |         self
513 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:516:5
    |
516 |     pub fn target_components(mut self, components: Vec<String>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn target_components(mut self, components: Vec<String>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:516:5
    |
516 | /     pub fn target_components(mut self, components: Vec<String>) -> Self {
517 | |         self.query.target_components = Some(components);
518 | |         self
519 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:522:5
    |
522 |     pub fn languages(mut self, languages: Vec<Language>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn languages(mut self, languages: Vec<Language>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:522:5
    |
522 | /     pub fn languages(mut self, languages: Vec<Language>) -> Self {
523 | |         self.query.languages = Some(languages);
524 | |         self
525 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:528:5
    |
528 |     pub fn tags(mut self, tags: Vec<String>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn tags(mut self, tags: Vec<String>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:528:5
    |
528 | /     pub fn tags(mut self, tags: Vec<String>) -> Self {
529 | |         self.query.tags = Some(tags);
530 | |         self
531 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:534:5
    |
534 |     pub fn causality_depth_range(mut self, min: u32, max: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn causality_depth_range(mut self, min: u32, max: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:534:5
    |
534 | /     pub fn causality_depth_range(mut self, min: u32, max: u32) -> Self {
535 | |         self.query.causality_depth_range = Some((min, max));
536 | |         self
537 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:540:5
    |
540 |     pub fn root_causes_only(mut self) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn root_causes_only(mut self) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:540:5
    |
540 | /     pub fn root_causes_only(mut self) -> Self {
541 | |         self.query.root_causes_only = true;
542 | |         self
543 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:546:5
    |
546 |     pub fn leaf_effects_only(mut self) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn leaf_effects_only(mut self) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:546:5
    |
546 | /     pub fn leaf_effects_only(mut self) -> Self {
547 | |         self.query.leaf_effects_only = true;
548 | |         self
549 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:552:5
    |
552 |     pub fn sort_by(mut self, order: SortOrder) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sort_by(mut self, order: SortOrder) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:552:5
    |
552 | /     pub fn sort_by(mut self, order: SortOrder) -> Self {
553 | |         self.query.sort_order = order;
554 | |         self
555 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:558:5
    |
558 |     pub fn limit(mut self, limit: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn limit(mut self, limit: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/query.rs:558:5
    |
558 | /     pub fn limit(mut self, limit: usize) -> Self {
559 | |         self.query.limit = Some(limit);
560 | |         self
561 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/query.rs:564:5
    |
564 |     pub fn build(self) -> TimelineQuery {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> TimelineQuery`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/timeline.rs:34:5
   |
34 |     pub fn new(event: UniversalEvent, position: usize, start_time: DateTime<Utc>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(event: UniversalEvent, position: usize, start_time: DateTime<Utc>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/timeline.rs:78:5
   |
78 |     pub fn is_root_cause(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_root_cause(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/timeline.rs:83:5
   |
83 |     pub fn is_leaf_effect(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_leaf_effect(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:157:5
    |
157 |     pub fn new(root_event_id: Uuid, start_time: DateTime<Utc>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(root_event_id: Uuid, start_time: DateTime<Utc>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:182:5
    |
182 |     pub fn root_event(&self) -> Option<Uuid> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn root_event(&self) -> Option<Uuid>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:187:5
    |
187 |     pub fn leaf_event(&self) -> Option<Uuid> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn leaf_event(&self) -> Option<Uuid>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:221:5
    |
221 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:250:5
    |
250 | /     pub fn get_events_in_range(
251 | |         &self,
252 | |         start: DateTime<Utc>,
253 | |         end: DateTime<Utc>,
254 | |     ) -> Vec<&TimelineEntry> {
    | |____________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
250 ~     #[must_use] pub fn get_events_in_range(
251 +         &self,
252 +         start: DateTime<Utc>,
253 +         end: DateTime<Utc>,
254 ~     ) -> Vec<&TimelineEntry> {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:262:5
    |
262 |     pub fn get_events_matching(&self, pattern: &str) -> Vec<&TimelineEntry> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_events_matching(&self, pattern: &str) -> Vec<&TimelineEntry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:270:5
    |
270 |     pub fn get_events_by_component(&self, component: &str) -> Vec<&TimelineEntry> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_events_by_component(&self, component: &str) -> Vec<&TimelineEntry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:285:5
    |
285 |     pub fn get_root_causes(&self) -> Vec<&TimelineEntry> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_root_causes(&self) -> Vec<&TimelineEntry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:293:5
    |
293 |     pub fn get_leaf_effects(&self) -> Vec<&TimelineEntry> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_leaf_effects(&self) -> Vec<&TimelineEntry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:301:5
    |
301 |     pub fn find_chain_containing(&self, event_id: Uuid) -> Option<&CausalityChain> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn find_chain_containing(&self, event_id: Uuid) -> Option<&CausalityChain>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:308:5
    |
308 |     pub fn get_longest_chain(&self) -> Option<&CausalityChain> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_longest_chain(&self) -> Option<&CausalityChain>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:350:5
    |
350 |     pub fn new(config: TimelineConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: TimelineConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:355:5
    |
355 |     pub fn with_default_config() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_default_config() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:360:5
    |
360 | /     pub fn build_timeline(
361 | |         &self,
362 | |         tracker: &EventCorrelationTracker,
363 | |         correlation_id: &Uuid,
364 | |     ) -> EventTimeline {
    | |______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
360 ~     #[must_use] pub fn build_timeline(
361 +         &self,
362 +         tracker: &EventCorrelationTracker,
363 +         correlation_id: &Uuid,
364 ~     ) -> EventTimeline {
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/timeline.rs:370:5
    |
370 | /     pub fn build_timeline_from_events(
371 | |         &self,
372 | |         mut events: Vec<UniversalEvent>,
373 | |         tracker: &EventCorrelationTracker,
374 | |     ) -> EventTimeline {
    | |______________________^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/timeline.rs:387:26
    |
387 |         let start_time = events.first().unwrap().timestamp;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
    = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/timeline.rs:370:5
    |
370 | /     pub fn build_timeline_from_events(
371 | |         &self,
372 | |         mut events: Vec<UniversalEvent>,
373 | |         tracker: &EventCorrelationTracker,
374 | |     ) -> EventTimeline {
    | |______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
370 ~     #[must_use] pub fn build_timeline_from_events(
371 +         &self,
372 +         mut events: Vec<UniversalEvent>,
373 +         tracker: &EventCorrelationTracker,
374 ~     ) -> EventTimeline {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-events/src/correlation/timeline.rs:447:21
    |
447 | /                     EventRelationship::ResponseTo => {
448 | |                         if let Some(&request_index) = event_to_index.get(&link.from_event_id) {
449 | |                             updates.push((current_index, link.from_event_id, true)); // Add causing event
450 | |                             updates.push((request_index, entry.event.id, false));
...   |
453 | |                     }
    | |_____________________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`
help: or try merging the arm patterns and removing the obsolete arm
    |
440 -                     EventRelationship::CausedBy => {
441 -                         if let Some(&causing_index) = event_to_index.get(&link.from_event_id) {
442 -                             updates.push((current_index, link.from_event_id, true)); // Add causing event
443 -                             updates.push((causing_index, entry.event.id, false));
444 -                             // Add caused event
445 -                         }
446 -                     }
447 -                     EventRelationship::ResponseTo => {
440 +                     EventRelationship::ResponseTo | EventRelationship::CausedBy => {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-events/src/correlation/timeline.rs:454:21
    |
454 | /                     EventRelationship::FollowsFrom => {
455 | |                         if let Some(&prev_index) = event_to_index.get(&link.from_event_id) {
456 | |                             updates.push((current_index, link.from_event_id, true)); // Add causing event
457 | |                             updates.push((prev_index, entry.event.id, false)); // Add caused event
458 | |                         }
459 | |                     }
    | |_____________________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
440 ~                     EventRelationship::ResponseTo => {
441 |                         if let Some(&request_index) = event_to_index.get(&link.from_event_id) {
...
446 |                     }
447 ~                     EventRelationship::FollowsFrom | EventRelationship::CausedBy => {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-events/src/correlation/timeline.rs:447:21
    |
447 | /                     EventRelationship::ResponseTo => {
448 | |                         if let Some(&request_index) = event_to_index.get(&link.from_event_id) {
449 | |                             updates.push((current_index, link.from_event_id, true)); // Add causing event
450 | |                             updates.push((request_index, entry.event.id, false));
...   |
453 | |                     }
    | |_____________________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
447 ~                     EventRelationship::ResponseTo | EventRelationship::FollowsFrom => {
448 |                         if let Some(&request_index) = event_to_index.get(&link.from_event_id) {
...
453 |                     }
454 ~                     _ => {} // Handle other relationships as needed
    |

warning: it is more concise to loop over references to containers instead of using explicit iteration methods
   --> llmspell-events/src/correlation/timeline.rs:546:22
    |
546 |         for entry in entries.iter() {
    |                      ^^^^^^^^^^^^^^ help: to write this more concisely, try: `entries`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_iter_loop
    = note: `-W clippy::explicit-iter-loop` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::explicit_iter_loop)]`

warning: unused `self` argument
   --> llmspell-events/src/correlation/timeline.rs:558:9
    |
558 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/mod.rs:34:5
   |
34 |     pub fn new_root() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new_root() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/mod.rs:47:5
   |
47 |     pub fn create_child(&self) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_child(&self) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-events/src/correlation/mod.rs:47:5
   |
47 | /     pub fn create_child(&self) -> Self {
48 | |         Self {
49 | |             correlation_id: Uuid::new_v4(),
50 | |             parent_id: Some(self.correlation_id),
...  |
56 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-events/src/correlation/mod.rs:59:5
   |
59 | /     pub fn with_metadata(mut self, key: impl Into<String>, value: impl Into<String>) -> Self {
60 | |         self.metadata.insert(key.into(), value.into());
61 | |         self
62 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-events/src/correlation/mod.rs:65:5
   |
65 | /     pub fn with_tag(mut self, tag: impl Into<String>) -> Self {
66 | |         self.tags.push(tag.into());
67 | |         self
68 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/mod.rs:71:5
   |
71 |     pub fn has_tag(&self, tag: &str) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_tag(&self, tag: &str) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/correlation/mod.rs:76:5
   |
76 |     pub fn get_metadata(&self, key: &str) -> Option<&String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_metadata(&self, key: &str) -> Option<&String>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:117:5
    |
117 |     pub fn new(from_event_id: Uuid, to_event_id: Uuid, relationship: EventRelationship) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(from_event_id: Uuid, to_event_id: Uuid, relationship: EventRelationship) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:129:5
    |
129 |     pub fn with_strength(mut self, strength: f64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_strength(mut self, strength: f64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/mod.rs:129:5
    |
129 | /     pub fn with_strength(mut self, strength: f64) -> Self {
130 | |         self.strength = strength.clamp(0.0, 1.0);
131 | |         self
132 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/correlation/mod.rs:135:5
    |
135 | /     pub fn with_metadata(mut self, key: impl Into<String>, value: impl Into<String>) -> Self {
136 | |         self.metadata.insert(key.into(), value.into());
137 | |         self
138 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:207:5
    |
207 |     pub fn new(config: CorrelationConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: CorrelationConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:219:5
    |
219 |     pub fn with_default_config() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_default_config() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:224:5
    |
224 |     pub fn track_event(&self, event: UniversalEvent) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:229:36
    |
229 |             let mut correlations = self.correlations.write().unwrap();
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-events/src/correlation/mod.rs:224:38
    |
224 |     pub fn track_event(&self, event: UniversalEvent) {
    |                                      ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&UniversalEvent`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:267:5
    |
267 |     pub fn add_context(&self, context: CorrelationContext) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:268:9
    |
268 | /         self.contexts
269 | |             .write()
270 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:275:5
    |
275 |     pub fn get_context(&self, correlation_id: &Uuid) -> Option<CorrelationContext> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:276:9
    |
276 |         self.contexts.read().unwrap().get(correlation_id).cloned()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:275:5
    |
275 |     pub fn get_context(&self, correlation_id: &Uuid) -> Option<CorrelationContext> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_context(&self, correlation_id: &Uuid) -> Option<CorrelationContext>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:280:5
    |
280 |     pub fn add_link(&self, link: EventLink) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:281:25
    |
281 |         let mut links = self.links.write().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:302:5
    |
302 |     pub fn get_events(&self, correlation_id: &Uuid) -> Vec<UniversalEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:303:9
    |
303 | /         self.correlations
304 | |             .read()
305 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:302:5
    |
302 |     pub fn get_events(&self, correlation_id: &Uuid) -> Vec<UniversalEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_events(&self, correlation_id: &Uuid) -> Vec<UniversalEvent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:312:5
    |
312 |     pub fn get_links(&self, event_id: &Uuid) -> Vec<EventLink> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:313:9
    |
313 | /         self.links
314 | |             .read()
315 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:312:5
    |
312 |     pub fn get_links(&self, event_id: &Uuid) -> Vec<EventLink> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_links(&self, event_id: &Uuid) -> Vec<EventLink>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:322:5
    |
322 |     pub fn get_all_correlations(&self) -> HashMap<Uuid, Vec<UniversalEvent>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:323:9
    |
323 | /         self.correlations
324 | |             .read()
325 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:322:5
    |
322 |     pub fn get_all_correlations(&self) -> HashMap<Uuid, Vec<UniversalEvent>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_all_correlations(&self) -> HashMap<Uuid, Vec<UniversalEvent>>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:332:5
    |
332 |     pub fn get_stats(&self) -> CorrelationStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:333:25
    |
333 |         let mut stats = self.stats.read().unwrap().clone();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/correlation/mod.rs:332:5
    |
332 |     pub fn get_stats(&self) -> CorrelationStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_stats(&self) -> CorrelationStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: redundant closure
   --> llmspell-events/src/correlation/mod.rs:342:18
    |
342 |             .map(|v| v.len())
    |                  ^^^^^^^^^^^ help: replace the closure with the method itself: `std::vec::Vec::len`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/correlation/mod.rs:356:5
    |
356 |     pub fn clear(&self) {
    |     ^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/correlation/mod.rs:357:9
    |
357 |         self.correlations.write().unwrap().clear();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: unused `self` argument
   --> llmspell-events/src/correlation/mod.rs:393:9
    |
393 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: called `map(<f>).unwrap_or(<a>)` on an `Option` value
   --> llmspell-events/src/correlation/mod.rs:455:39
    |
455 |                     let oldest_time = events.front().map(|e| e.timestamp).unwrap_or(Utc::now());
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`
help: use `map_or(<a>, <f>)` instead
    |
455 -                     let oldest_time = events.front().map(|e| e.timestamp).unwrap_or(Utc::now());
455 +                     let oldest_time = events.front().map_or(Utc::now(), |e| e.timestamp);
    |

warning: it is more concise to loop over references to containers instead of using explicit iteration methods
   --> llmspell-events/src/correlation/mod.rs:465:34
    |
465 |                     for event in events.iter() {
    |                                  ^^^^^^^^^^^^^ help: to write this more concisely, try: `&events`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_iter_loop

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:160:5
    |
160 |     pub fn new(config: FlowControllerConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: FlowControllerConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:184:5
    |
184 | /     pub fn with_notifications(
185 | |         config: FlowControllerConfig,
186 | |     ) -> (Self, mpsc::UnboundedReceiver<BackpressureNotification>) {
    | |__________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
184 ~     #[must_use] pub fn with_notifications(
185 +         config: FlowControllerConfig,
186 ~     ) -> (Self, mpsc::UnboundedReceiver<BackpressureNotification>) {
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-events/src/flow_controller.rs:194:5
    |
194 |     pub async fn can_process(&self, event: &UniversalEvent) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-events/src/flow_controller.rs:205:37
    |
205 |                         limit_rate: self.config.rate_limit.as_ref().unwrap().max_rate,
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:279:5
    |
279 |     pub fn pop_event(&self) -> Option<UniversalEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn pop_event(&self) -> Option<UniversalEvent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:301:5
    |
301 |     pub fn buffer_size(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn buffer_size(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:306:5
    |
306 |     pub fn get_stats(&self) -> FlowStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_stats(&self) -> FlowStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:313:5
    |
313 |     pub fn clear_buffer(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn clear_buffer(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:321:5
    |
321 |     pub fn is_buffer_empty(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_buffer_empty(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:326:5
    |
326 |     pub fn available_tokens(&self) -> Option<f64> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn available_tokens(&self) -> Option<f64>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: redundant closure
   --> llmspell-events/src/flow_controller.rs:330:18
    |
330 |             .map(|bucket| bucket.available_tokens())
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `TokenBucket::available_tokens`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: item in documentation is missing backticks
   --> llmspell-events/src/flow_controller.rs:354:17
    |
354 | /// Builder for FlowController
    |                 ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
354 - /// Builder for FlowController
354 + /// Builder for `FlowController`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:361:5
    |
361 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:368:5
    |
368 |     pub fn with_rate_limit(mut self, max_rate: f64, burst_capacity: f64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_rate_limit(mut self, max_rate: f64, burst_capacity: f64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/flow_controller.rs:368:5
    |
368 | /     pub fn with_rate_limit(mut self, max_rate: f64, burst_capacity: f64) -> Self {
369 | |         self.config.rate_limit = Some(RateLimit {
370 | |             max_rate,
371 | |             burst_capacity,
372 | |         });
373 | |         self
374 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:377:5
    |
377 |     pub fn without_rate_limit(mut self) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn without_rate_limit(mut self) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/flow_controller.rs:377:5
    |
377 | /     pub fn without_rate_limit(mut self) -> Self {
378 | |         self.config.rate_limit = None;
379 | |         self
380 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:383:5
    |
383 |     pub fn with_overflow_config(mut self, overflow_config: OverflowConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_overflow_config(mut self, overflow_config: OverflowConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/flow_controller.rs:383:5
    |
383 | /     pub fn with_overflow_config(mut self, overflow_config: OverflowConfig) -> Self {
384 | |         self.config.overflow_config = overflow_config;
385 | |         self
386 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:389:5
    |
389 |     pub fn with_notifications(mut self, enable: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_notifications(mut self, enable: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/flow_controller.rs:389:5
    |
389 | /     pub fn with_notifications(mut self, enable: bool) -> Self {
390 | |         self.config.enable_notifications = enable;
391 | |         self
392 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:395:5
    |
395 |     pub fn with_stats_interval(mut self, interval: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_stats_interval(mut self, interval: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/flow_controller.rs:395:5
    |
395 | /     pub fn with_stats_interval(mut self, interval: Duration) -> Self {
396 | |         self.config.stats_interval = interval;
397 | |         self
398 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:401:5
    |
401 |     pub fn build(self) -> FlowController {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> FlowController`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/flow_controller.rs:406:5
    |
406 | /     pub fn build_with_notifications(
407 | |         self,
408 | |     ) -> (
409 | |         FlowController,
410 | |         mpsc::UnboundedReceiver<BackpressureNotification>,
411 | |     ) {
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
406 ~     #[must_use] pub fn build_with_notifications(
407 +         self,
408 +     ) -> (
409 +         FlowController,
410 +         mpsc::UnboundedReceiver<BackpressureNotification>,
411 ~     ) {
    |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-events/src/handler.rs:11:5
   |
11 |     fn handle_event(&self, event: UniversalEvent) -> Result<()>;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: returning a `str` unnecessarily tied to the lifetime of arguments
  --> llmspell-events/src/handler.rs:14:23
   |
14 |     fn name(&self) -> &str {
   |                       ^^^^ help: try: `&'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound
   = note: `-W clippy::unnecessary-literal-bound` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_literal_bound)]`

warning: returning a `str` unnecessarily tied to the lifetime of arguments
  --> llmspell-events/src/handler.rs:26:23
   |
26 |     fn name(&self) -> &str {
   |                       ^^^^ help: try: `&'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/metrics.rs:97:5
   |
97 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: used `cloned` where `copied` could be used instead
   --> llmspell-events/src/metrics.rs:192:76
    |
192 |                     let mut sorted_samples: Vec<Duration> = samples.iter().cloned().collect();
    |                                                                            ^^^^^^ help: try: `copied`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cloned_instead_of_copied
    = note: `-W clippy::cloned-instead-of-copied` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cloned_instead_of_copied)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/metrics.rs:279:5
    |
279 |     pub fn get_dashboard_metrics(&self) -> DashboardMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_dashboard_metrics(&self) -> DashboardMetrics`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/metrics.rs:301:5
    |
301 |     pub fn get_metrics(&self) -> EventMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_metrics(&self) -> EventMetrics`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/overflow.rs:44:5
   |
44 |     pub fn is_success(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_success(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/overflow.rs:49:5
   |
49 |     pub fn should_retry(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn should_retry(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/overflow.rs:126:5
    |
126 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-events/src/overflow.rs:185:21
    |
185 |             reason: format!("Buffer full ({}/{}), event rejected", buffer_size, max_size),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
185 -             reason: format!("Buffer full ({}/{}), event rejected", buffer_size, max_size),
185 +             reason: format!("Buffer full ({buffer_size}/{max_size}), event rejected"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/overflow.rs:199:5
    |
199 |     pub fn create(strategy: OverflowStrategy) -> Box<dyn OverflowHandler> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create(strategy: OverflowStrategy) -> Box<dyn OverflowHandler>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/overflow.rs:235:5
    |
235 |     pub fn new(strategy: OverflowStrategy, max_buffer_size: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(strategy: OverflowStrategy, max_buffer_size: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/overflow.rs:252:5
    |
252 |     pub fn is_high_water(&self, size: usize) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_high_water(&self, size: usize) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/overflow.rs:257:5
    |
257 |     pub fn is_low_water(&self, size: usize) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_low_water(&self, size: usize) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/overflow.rs:262:5
    |
262 |     pub fn is_full(&self, size: usize) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_full(&self, size: usize) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-events/src/pattern.rs:16:5
   |
16 |     pub fn new(pattern: &str) -> Result<Self, String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: redundant closure
  --> llmspell-events/src/pattern.rs:24:18
   |
24 |             .map(|stripped| stripped.to_string());
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/pattern.rs:34:5
   |
34 |     pub fn matches(&self, event_type: &str) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn matches(&self, event_type: &str) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/pattern.rs:47:5
   |
47 |     pub fn as_str(&self) -> &str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn as_str(&self) -> &str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/pattern.rs:58:5
   |
58 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/pattern.rs:63:5
   |
63 |     pub fn matches(&self, event_type: &str, pattern: &str) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn matches(&self, event_type: &str, pattern: &str) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-events/src/serialization.rs:12:5
   |
12 |     pub fn to_json(event: &UniversalEvent) -> Result<String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-events/src/serialization.rs:17:5
   |
17 |     pub fn from_json(json: &str) -> Result<UniversalEvent> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-events/src/serialization.rs:22:5
   |
22 |     pub fn to_json_pretty(event: &UniversalEvent) -> Result<String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
  --> llmspell-events/src/storage_adapter.rs:58:41
   |
58 | /// Event storage adapter that uses any StorageBackend
   |                                         ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
58 - /// Event storage adapter that uses any StorageBackend
58 + /// Event storage adapter that uses any `StorageBackend`
   |

warning: item in documentation is missing backticks
  --> llmspell-events/src/storage_adapter.rs:83:18
   |
83 |     /// Format: "pattern:{pattern}:{event_id}"
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
83 -     /// Format: "pattern:{pattern}:{event_id}"
83 +     /// Format: "`pattern:{pattern}:{event_id`}"
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-events/src/storage_adapter.rs:85:9
   |
85 |         format!("pattern:{}:{}", pattern, event_id)
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
85 -         format!("pattern:{}:{}", pattern, event_id)
85 +         format!("pattern:{pattern}:{event_id}")
   |

warning: item in documentation is missing backticks
  --> llmspell-events/src/storage_adapter.rs:89:18
   |
89 |     /// Format: "correlation:{correlation_id}:{event_id}"
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
89 -     /// Format: "correlation:{correlation_id}:{event_id}"
89 +     /// Format: "`correlation:{correlation_id}:{event_id`}"
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-events/src/storage_adapter.rs:91:9
   |
91 |         format!("correlation:{}:{}", correlation_id, event_id)
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
91 -         format!("correlation:{}:{}", correlation_id, event_id)
91 +         format!("correlation:{correlation_id}:{event_id}")
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/src/storage_adapter.rs:195:34
    |
195 |         let correlation_prefix = format!("correlation:{}", correlation_id);
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
195 -         let correlation_prefix = format!("correlation:{}", correlation_id);
195 +         let correlation_prefix = format!("correlation:{correlation_id}");
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/storage_adapter.rs:374:5
    |
374 |     pub fn new(storage: EventStorageAdapter<B>, config: PersistenceConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(storage: EventStorageAdapter<B>, config: PersistenceConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/storage_adapter.rs:383:5
    |
383 |     pub async fn start(&mut self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/storage_adapter.rs:404:5
    |
404 |     pub async fn maybe_store_event(&self, event: &UniversalEvent) -> Result<bool> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/storage_adapter.rs:424:5
    |
424 |     pub fn storage(&self) -> &EventStorageAdapter<B> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn storage(&self) -> &EventStorageAdapter<B>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-events/src/stream.rs:29:43
   |
29 |     /// Create a new event stream from an EventBus
   |                                           ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
29 -     /// Create a new event stream from an EventBus
29 +     /// Create a new event stream from an `EventBus`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/stream.rs:30:5
   |
30 |     pub fn from_bus(bus: &EventBus) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_bus(bus: &EventBus) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/stream.rs:46:5
   |
46 |     pub fn batched(self, batch_size: usize) -> BatchedEventStream {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn batched(self, batch_size: usize) -> BatchedEventStream`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/stream.rs:175:5
    |
175 |     pub fn new(buffer_size: usize, worker_count: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(buffer_size: usize, worker_count: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/stream.rs:183:5
    |
183 | /     pub async fn process_stream<S, F, Fut>(
184 | |         &self,
185 | |         mut stream: S,
186 | |         processor: F,
...   |
190 | |         F: Fn(UniversalEvent) -> Fut + Send + Sync + Clone + 'static,
191 | |         Fut: std::future::Future<Output = Result<(), String>> + Send + 'static,
    | |_______________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/stream.rs:253:5
    |
253 | /     pub fn high_frequency_test_stream(
254 | |         event_count: usize,
255 | |         events_per_second: u64,
256 | |     ) -> Pin<Box<dyn Stream<Item = Result<UniversalEvent, EventStreamError>> + Send>> {
    | |_____________________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
253 ~     #[must_use] pub fn high_frequency_test_stream(
254 +         event_count: usize,
255 +         events_per_second: u64,
256 ~     ) -> Pin<Box<dyn Stream<Item = Result<UniversalEvent, EventStreamError>> + Send>> {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/src/stream.rs:265:21
    |
265 |                     format!("test.high_freq.{}", i),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
265 -                     format!("test.high_freq.{}", i),
265 +                     format!("test.high_freq.{i}"),
    |

warning: matching over `()` is more explicit
   --> llmspell-events/src/stream.rs:297:17
    |
297 |                 _ = &mut timeout => break,
    |                 ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns
    = note: `-W clippy::ignored-unit-patterns` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ignored_unit_patterns)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-events/src/universal_event.rs:31:5
   |
31 |     pub fn as_str(&self) -> &'static str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn as_str(&self) -> &'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-events/src/universal_event.rs:83:33
   |
83 |     /// Event type/name (e.g., "agent.state_changed")
   |                                 ^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
83 -     /// Event type/name (e.g., "agent.state_changed")
83 +     /// Event type/name (e.g., "`agent.state_changed`")
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:127:5
    |
127 |     pub fn with_correlation_id(mut self, correlation_id: Uuid) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_correlation_id(mut self, correlation_id: Uuid) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:127:5
    |
127 | /     pub fn with_correlation_id(mut self, correlation_id: Uuid) -> Self {
128 | |         self.metadata.correlation_id = correlation_id;
129 | |         self
130 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:133:5
    |
133 | /     pub fn with_source(mut self, source: impl Into<String>) -> Self {
134 | |         self.metadata.source = Some(source.into());
135 | |         self
136 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:139:5
    |
139 | /     pub fn with_target(mut self, target: impl Into<String>) -> Self {
140 | |         self.metadata.target = Some(target.into());
141 | |         self
142 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:145:5
    |
145 | /     pub fn with_tag(mut self, tag: impl Into<String>) -> Self {
146 | |         self.metadata.tags.push(tag.into());
147 | |         self
148 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:151:5
    |
151 |     pub fn with_priority(mut self, priority: i32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_priority(mut self, priority: i32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:151:5
    |
151 | /     pub fn with_priority(mut self, priority: i32) -> Self {
152 | |         self.metadata.priority = priority;
153 | |         self
154 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:157:5
    |
157 |     pub fn with_ttl(mut self, ttl: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_ttl(mut self, ttl: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:157:5
    |
157 | /     pub fn with_ttl(mut self, ttl: u64) -> Self {
158 | |         self.metadata.ttl = Some(ttl);
159 | |         self
160 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:163:5
    |
163 |     pub fn is_expired(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_expired(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:176:5
    |
176 |     pub fn age_seconds(&self) -> i64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn age_seconds(&self) -> i64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/universal_event.rs:183:5
    |
183 |     pub fn to_json(&self) -> Result<String, serde_json::Error> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/universal_event.rs:188:5
    |
188 |     pub fn from_json(json: &str) -> Result<Self, serde_json::Error> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:193:5
    |
193 |     pub fn data(&self) -> &Value {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn data(&self) -> &Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-events/src/universal_event.rs:203:5
    |
203 |     pub fn extract_data<T: for<'de> Deserialize<'de>>(&self) -> Result<T, serde_json::Error> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:208:5
    |
208 |     pub fn matches_pattern(&self, pattern: &str) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn matches_pattern(&self, pattern: &str) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-events/src/universal_event.rs:221:17
    |
221 | /// Builder for UniversalEvent
    |                 ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
221 - /// Builder for UniversalEvent
221 + /// Builder for `UniversalEvent`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:241:5
    |
241 |     pub fn data(mut self, data: Value) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn data(mut self, data: Value) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:241:5
    |
241 | /     pub fn data(mut self, data: Value) -> Self {
242 | |         self.data = data;
243 | |         self
244 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:247:5
    |
247 |     pub fn language(mut self, language: Language) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn language(mut self, language: Language) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:247:5
    |
247 | /     pub fn language(mut self, language: Language) -> Self {
248 | |         self.language = language;
249 | |         self
250 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:253:5
    |
253 |     pub fn correlation_id(mut self, id: Uuid) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn correlation_id(mut self, id: Uuid) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:253:5
    |
253 | /     pub fn correlation_id(mut self, id: Uuid) -> Self {
254 | |         self.metadata.correlation_id = id;
255 | |         self
256 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:259:5
    |
259 | /     pub fn source(mut self, source: impl Into<String>) -> Self {
260 | |         self.metadata.source = Some(source.into());
261 | |         self
262 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:265:5
    |
265 | /     pub fn target(mut self, target: impl Into<String>) -> Self {
266 | |         self.metadata.target = Some(target.into());
267 | |         self
268 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:271:5
    |
271 | /     pub fn tag(mut self, tag: impl Into<String>) -> Self {
272 | |         self.metadata.tags.push(tag.into());
273 | |         self
274 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:277:5
    |
277 |     pub fn priority(mut self, priority: i32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn priority(mut self, priority: i32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:277:5
    |
277 | /     pub fn priority(mut self, priority: i32) -> Self {
278 | |         self.metadata.priority = priority;
279 | |         self
280 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:283:5
    |
283 |     pub fn ttl(mut self, ttl: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn ttl(mut self, ttl: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-events/src/universal_event.rs:283:5
    |
283 | /     pub fn ttl(mut self, ttl: u64) -> Self {
284 | |         self.metadata.ttl = Some(ttl);
285 | |         self
286 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-events/src/universal_event.rs:289:5
    |
289 |     pub fn build(self) -> UniversalEvent {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> UniversalEvent`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unused `async` for function with no await statements
   --> llmspell-events/src/bus.rs:142:5
    |
142 | /     pub async fn subscribe(
143 | |         &self,
144 | |         pattern: &str,
145 | |     ) -> Result<mpsc::UnboundedReceiver<UniversalEvent>, SubscribeError> {
...   |
162 | |         Ok(rx)
163 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-events/src/bus.rs:196:5
    |
196 | /     async fn route_event(&self, event: UniversalEvent) {
197 | |         let mut matched_count = 0;
198 | |
199 | |         for subscription_entry in self.subscriptions.iter() {
...   |
222 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-events/src/flow_controller.rs:194:5
    |
194 | /     pub async fn can_process(&self, event: &UniversalEvent) -> bool {
195 | |         let mut bucket_guard = self.token_bucket.write();
196 | |         if let Some(bucket) = bucket_guard.as_mut() {
197 | |             let can_process = bucket.try_consume(1.0);
...   |
216 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-events/src/storage_adapter.rs:383:5
    |
383 | /     pub async fn start(&mut self) -> Result<()> {
384 | |         if !self.config.enabled {
385 | |             return Ok(());
...   |
392 | |         Ok(())
393 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: `llmspell-events` (lib) generated 237 warnings (run `cargo clippy --fix --lib -p llmspell-events` to apply 155 suggestions)
warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/error.rs:158:5
    |
158 |     pub fn is_not_found(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_not_found(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
    = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/error.rs:163:5
    |
163 |     pub fn is_retryable(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_retryable(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/error.rs:171:5
    |
171 |     pub fn is_permanent(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_permanent(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-traits/src/scope.rs:83:5
   |
83 |     pub fn is_global(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_global(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-traits/src/scope.rs:88:5
   |
88 |     pub fn is_user_scope(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_user_scope(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-traits/src/scope.rs:93:5
   |
93 |     pub fn is_session_scope(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_session_scope(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-traits/src/scope.rs:98:5
   |
98 |     pub fn is_agent_scope(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_agent_scope(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:103:5
    |
103 |     pub fn is_tool_scope(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_tool_scope(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:108:5
    |
108 |     pub fn is_workflow_scope(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_workflow_scope(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:113:5
    |
113 |     pub fn is_hook_scope(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_hook_scope(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:118:5
    |
118 |     pub fn is_custom_scope(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_custom_scope(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:123:5
    |
123 |     pub fn identifier(&self) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn identifier(&self) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:126:13
    |
126 |             StateScope::User(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`
help: or try merging the arm patterns and removing the obsolete arm
    |
126 ~             StateScope::User(id) | StateScope::Session(id) => Some(id),
127 ~             StateScope::Agent(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:126:13
    |
126 |             StateScope::User(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
126 ~             StateScope::User(id) | StateScope::Agent(id) => Some(id),
127 |             StateScope::Session(id) => Some(id),
128 ~             StateScope::Tool(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:127:13
    |
127 |             StateScope::Session(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
127 ~             StateScope::Session(id) | StateScope::Agent(id) => Some(id),
128 ~             StateScope::Tool(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:126:13
    |
126 |             StateScope::User(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
126 ~             StateScope::User(id) | StateScope::Tool(id) => Some(id),
127 |             StateScope::Session(id) => Some(id),
128 |             StateScope::Agent(id) => Some(id),
129 ~             StateScope::Workflow(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:127:13
    |
127 |             StateScope::Session(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
127 ~             StateScope::Session(id) | StateScope::Tool(id) => Some(id),
128 |             StateScope::Agent(id) => Some(id),
129 ~             StateScope::Workflow(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:128:13
    |
128 |             StateScope::Agent(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
128 ~             StateScope::Agent(id) | StateScope::Tool(id) => Some(id),
129 ~             StateScope::Workflow(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:126:13
    |
126 |             StateScope::User(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
126 ~             StateScope::User(id) | StateScope::Workflow(id) => Some(id),
127 |             StateScope::Session(id) => Some(id),
128 |             StateScope::Agent(id) => Some(id),
129 |             StateScope::Tool(id) => Some(id),
130 ~             StateScope::Hook(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:127:13
    |
127 |             StateScope::Session(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
127 ~             StateScope::Session(id) | StateScope::Workflow(id) => Some(id),
128 |             StateScope::Agent(id) => Some(id),
129 |             StateScope::Tool(id) => Some(id),
130 ~             StateScope::Hook(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:128:13
    |
128 |             StateScope::Agent(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
128 ~             StateScope::Agent(id) | StateScope::Workflow(id) => Some(id),
129 |             StateScope::Tool(id) => Some(id),
130 ~             StateScope::Hook(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:129:13
    |
129 |             StateScope::Tool(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
129 ~             StateScope::Tool(id) | StateScope::Workflow(id) => Some(id),
130 ~             StateScope::Hook(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:126:13
    |
126 |             StateScope::User(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
126 ~             StateScope::User(id) | StateScope::Hook(id) => Some(id),
127 |             StateScope::Session(id) => Some(id),
...
130 |             StateScope::Workflow(id) => Some(id),
131 ~             StateScope::Custom(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:127:13
    |
127 |             StateScope::Session(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
127 ~             StateScope::Session(id) | StateScope::Hook(id) => Some(id),
128 |             StateScope::Agent(id) => Some(id),
129 |             StateScope::Tool(id) => Some(id),
130 |             StateScope::Workflow(id) => Some(id),
131 ~             StateScope::Custom(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:128:13
    |
128 |             StateScope::Agent(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
128 ~             StateScope::Agent(id) | StateScope::Hook(id) => Some(id),
129 |             StateScope::Tool(id) => Some(id),
130 |             StateScope::Workflow(id) => Some(id),
131 ~             StateScope::Custom(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:129:13
    |
129 |             StateScope::Tool(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
129 ~             StateScope::Tool(id) | StateScope::Hook(id) => Some(id),
130 |             StateScope::Workflow(id) => Some(id),
131 ~             StateScope::Custom(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:130:13
    |
130 |             StateScope::Workflow(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
130 ~             StateScope::Workflow(id) | StateScope::Hook(id) => Some(id),
131 ~             StateScope::Custom(id) => Some(id),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:126:13
    |
126 |             StateScope::User(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
126 ~             StateScope::User(id) | StateScope::Custom(id) => Some(id),
127 |             StateScope::Session(id) => Some(id),
...
131 |             StateScope::Hook(id) => Some(id),
132 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:127:13
    |
127 |             StateScope::Session(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
127 ~             StateScope::Session(id) | StateScope::Custom(id) => Some(id),
128 |             StateScope::Agent(id) => Some(id),
...
131 |             StateScope::Hook(id) => Some(id),
132 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:128:13
    |
128 |             StateScope::Agent(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
128 ~             StateScope::Agent(id) | StateScope::Custom(id) => Some(id),
129 |             StateScope::Tool(id) => Some(id),
130 |             StateScope::Workflow(id) => Some(id),
131 |             StateScope::Hook(id) => Some(id),
132 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:129:13
    |
129 |             StateScope::Tool(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
129 ~             StateScope::Tool(id) | StateScope::Custom(id) => Some(id),
130 |             StateScope::Workflow(id) => Some(id),
131 |             StateScope::Hook(id) => Some(id),
132 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:130:13
    |
130 |             StateScope::Workflow(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
130 ~             StateScope::Workflow(id) | StateScope::Custom(id) => Some(id),
131 |             StateScope::Hook(id) => Some(id),
132 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:131:13
    |
131 |             StateScope::Hook(id) => Some(id),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
131 ~             StateScope::Hook(id) | StateScope::Custom(id) => Some(id),
132 ~             }
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:137:5
    |
137 |     pub fn scope_type(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn scope_type(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:157:5
    |
157 |     pub fn can_access(&self, target_scope: &StateScope) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn can_access(&self, target_scope: &StateScope) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:189:5
    |
189 |     pub fn storage_key(&self, key: &str) -> String {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn storage_key(&self, key: &str) -> String`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:191:35
    |
191 |             StateScope::Global => format!("global:{}", key),
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
191 -             StateScope::Global => format!("global:{}", key),
191 +             StateScope::Global => format!("global:{key}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:192:37
    |
192 |             StateScope::User(id) => format!("user:{}:{}", id, key),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
192 -             StateScope::User(id) => format!("user:{}:{}", id, key),
192 +             StateScope::User(id) => format!("user:{id}:{key}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:193:40
    |
193 |             StateScope::Session(id) => format!("session:{}:{}", id, key),
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
193 -             StateScope::Session(id) => format!("session:{}:{}", id, key),
193 +             StateScope::Session(id) => format!("session:{id}:{key}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:194:38
    |
194 |             StateScope::Agent(id) => format!("agent:{}:{}", id, key),
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
194 -             StateScope::Agent(id) => format!("agent:{}:{}", id, key),
194 +             StateScope::Agent(id) => format!("agent:{id}:{key}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:195:37
    |
195 |             StateScope::Tool(id) => format!("tool:{}:{}", id, key),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
195 -             StateScope::Tool(id) => format!("tool:{}:{}", id, key),
195 +             StateScope::Tool(id) => format!("tool:{id}:{key}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:196:41
    |
196 |             StateScope::Workflow(id) => format!("workflow:{}:{}", id, key),
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
196 -             StateScope::Workflow(id) => format!("workflow:{}:{}", id, key),
196 +             StateScope::Workflow(id) => format!("workflow:{id}:{key}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:197:37
    |
197 |             StateScope::Hook(id) => format!("hook:{}:{}", id, key),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
197 -             StateScope::Hook(id) => format!("hook:{}:{}", id, key),
197 +             StateScope::Hook(id) => format!("hook:{id}:{key}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:198:39
    |
198 |             StateScope::Custom(id) => format!("custom:{}:{}", id, key),
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
198 -             StateScope::Custom(id) => format!("custom:{}:{}", id, key),
198 +             StateScope::Custom(id) => format!("custom:{id}:{key}"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:203:5
    |
203 |     pub fn parse_storage_key(storage_key: &str) -> Option<(StateScope, String)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn parse_storage_key(storage_key: &str) -> Option<(StateScope, String)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:207:58
    |
207 |             ["global", key] => Some((StateScope::Global, key.to_string())),
    |                                                          ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string
    = note: `-W clippy::inefficient-to-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::inefficient_to_string)]`

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:208:57
    |
208 |             ["user", id, key] => Some((StateScope::User(id.to_string()), key.to_string())),
    |                                                         ^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*id).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:208:74
    |
208 |             ["user", id, key] => Some((StateScope::User(id.to_string()), key.to_string())),
    |                                                                          ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:209:63
    |
209 |             ["session", id, key] => Some((StateScope::Session(id.to_string()), key.to_string())),
    |                                                               ^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*id).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:209:80
    |
209 |             ["session", id, key] => Some((StateScope::Session(id.to_string()), key.to_string())),
    |                                                                                ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:210:59
    |
210 |             ["agent", id, key] => Some((StateScope::Agent(id.to_string()), key.to_string())),
    |                                                           ^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*id).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:210:76
    |
210 |             ["agent", id, key] => Some((StateScope::Agent(id.to_string()), key.to_string())),
    |                                                                            ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:211:57
    |
211 |             ["tool", id, key] => Some((StateScope::Tool(id.to_string()), key.to_string())),
    |                                                         ^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*id).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:211:74
    |
211 |             ["tool", id, key] => Some((StateScope::Tool(id.to_string()), key.to_string())),
    |                                                                          ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:212:65
    |
212 |             ["workflow", id, key] => Some((StateScope::Workflow(id.to_string()), key.to_string())),
    |                                                                 ^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*id).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:212:82
    |
212 |             ["workflow", id, key] => Some((StateScope::Workflow(id.to_string()), key.to_string())),
    |                                                                                  ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:213:57
    |
213 |             ["hook", id, key] => Some((StateScope::Hook(id.to_string()), key.to_string())),
    |                                                         ^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*id).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:213:74
    |
213 |             ["hook", id, key] => Some((StateScope::Hook(id.to_string()), key.to_string())),
    |                                                                          ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:214:61
    |
214 |             ["custom", id, key] => Some((StateScope::Custom(id.to_string()), key.to_string())),
    |                                                             ^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*id).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: calling `to_string` on `&&str`
   --> llmspell-state-traits/src/scope.rs:214:78
    |
214 |             ["custom", id, key] => Some((StateScope::Custom(id.to_string()), key.to_string())),
    |                                                                              ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: item in documentation is missing backticks
   --> llmspell-state-traits/src/scope.rs:219:48
    |
219 |     /// Get the prefix for this scope (used by KeyManager)
    |                                                ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
    = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
    |
219 -     /// Get the prefix for this scope (used by KeyManager)
219 +     /// Get the prefix for this scope (used by `KeyManager`)
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:220:5
    |
220 |     pub fn prefix(&self) -> String {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn prefix(&self) -> String`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:223:37
    |
223 |             StateScope::User(id) => format!("user:{}:", id),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
223 -             StateScope::User(id) => format!("user:{}:", id),
223 +             StateScope::User(id) => format!("user:{id}:"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:224:40
    |
224 |             StateScope::Session(id) => format!("session:{}:", id),
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
224 -             StateScope::Session(id) => format!("session:{}:", id),
224 +             StateScope::Session(id) => format!("session:{id}:"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:225:38
    |
225 |             StateScope::Agent(id) => format!("agent:{}:", id),
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
225 -             StateScope::Agent(id) => format!("agent:{}:", id),
225 +             StateScope::Agent(id) => format!("agent:{id}:"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:226:37
    |
226 |             StateScope::Tool(id) => format!("tool:{}:", id),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
226 -             StateScope::Tool(id) => format!("tool:{}:", id),
226 +             StateScope::Tool(id) => format!("tool:{id}:"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:227:41
    |
227 |             StateScope::Workflow(id) => format!("workflow:{}:", id),
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
227 -             StateScope::Workflow(id) => format!("workflow:{}:", id),
227 +             StateScope::Workflow(id) => format!("workflow:{id}:"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:228:37
    |
228 |             StateScope::Hook(id) => format!("hook:{}:", id),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
228 -             StateScope::Hook(id) => format!("hook:{}:", id),
228 +             StateScope::Hook(id) => format!("hook:{id}:"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:229:39
    |
229 |             StateScope::Custom(id) => format!("custom:{}:", id),
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
229 -             StateScope::Custom(id) => format!("custom:{}:", id),
229 +             StateScope::Custom(id) => format!("custom:{id}:"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/scope.rs:234:5
    |
234 |     pub fn parent(&self) -> Option<StateScope> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn parent(&self) -> Option<StateScope>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:237:13
    |
237 |             StateScope::User(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~             StateScope::User(_) | StateScope::Agent(_) => Some(StateScope::Global),
238 |             StateScope::Session(session_id) => {
...
245 |             }
246 ~             StateScope::Tool(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:237:13
    |
237 |             StateScope::User(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~             StateScope::User(_) | StateScope::Tool(_) => Some(StateScope::Global),
238 |             StateScope::Session(session_id) => {
...
246 |             StateScope::Agent(_) => Some(StateScope::Global),
247 ~             StateScope::Workflow(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:246:13
    |
246 |             StateScope::Agent(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
246 ~             StateScope::Agent(_) | StateScope::Tool(_) => Some(StateScope::Global),
247 ~             StateScope::Workflow(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:237:13
    |
237 |             StateScope::User(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~             StateScope::User(_) | StateScope::Workflow(_) => Some(StateScope::Global),
238 |             StateScope::Session(session_id) => {
...
247 |             StateScope::Tool(_) => Some(StateScope::Global),
248 ~             StateScope::Hook(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:246:13
    |
246 |             StateScope::Agent(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
246 ~             StateScope::Agent(_) | StateScope::Workflow(_) => Some(StateScope::Global),
247 |             StateScope::Tool(_) => Some(StateScope::Global),
248 ~             StateScope::Hook(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:247:13
    |
247 |             StateScope::Tool(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
247 ~             StateScope::Tool(_) | StateScope::Workflow(_) => Some(StateScope::Global),
248 ~             StateScope::Hook(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:237:13
    |
237 |             StateScope::User(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~             StateScope::User(_) | StateScope::Hook(_) => Some(StateScope::Global),
238 |             StateScope::Session(session_id) => {
...
248 |             StateScope::Workflow(_) => Some(StateScope::Global),
249 ~             StateScope::Custom(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:246:13
    |
246 |             StateScope::Agent(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
246 ~             StateScope::Agent(_) | StateScope::Hook(_) => Some(StateScope::Global),
247 |             StateScope::Tool(_) => Some(StateScope::Global),
248 |             StateScope::Workflow(_) => Some(StateScope::Global),
249 ~             StateScope::Custom(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:247:13
    |
247 |             StateScope::Tool(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
247 ~             StateScope::Tool(_) | StateScope::Hook(_) => Some(StateScope::Global),
248 |             StateScope::Workflow(_) => Some(StateScope::Global),
249 ~             StateScope::Custom(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:248:13
    |
248 |             StateScope::Workflow(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
248 ~             StateScope::Workflow(_) | StateScope::Hook(_) => Some(StateScope::Global),
249 ~             StateScope::Custom(_) => Some(StateScope::Global),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:237:13
    |
237 |             StateScope::User(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~             StateScope::User(_) | StateScope::Custom(_) => Some(StateScope::Global),
238 |             StateScope::Session(session_id) => {
...
249 |             StateScope::Hook(_) => Some(StateScope::Global),
250 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:246:13
    |
246 |             StateScope::Agent(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
246 ~             StateScope::Agent(_) | StateScope::Custom(_) => Some(StateScope::Global),
247 |             StateScope::Tool(_) => Some(StateScope::Global),
248 |             StateScope::Workflow(_) => Some(StateScope::Global),
249 |             StateScope::Hook(_) => Some(StateScope::Global),
250 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:247:13
    |
247 |             StateScope::Tool(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
247 ~             StateScope::Tool(_) | StateScope::Custom(_) => Some(StateScope::Global),
248 |             StateScope::Workflow(_) => Some(StateScope::Global),
249 |             StateScope::Hook(_) => Some(StateScope::Global),
250 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:248:13
    |
248 |             StateScope::Workflow(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
248 ~             StateScope::Workflow(_) | StateScope::Custom(_) => Some(StateScope::Global),
249 |             StateScope::Hook(_) => Some(StateScope::Global),
250 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-traits/src/scope.rs:249:13
    |
249 |             StateScope::Hook(_) => Some(StateScope::Global),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
249 ~             StateScope::Hook(_) | StateScope::Custom(_) => Some(StateScope::Global),
250 ~             }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:259:37
    |
259 |             StateScope::User(id) => write!(f, "user:{}", id),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
259 -             StateScope::User(id) => write!(f, "user:{}", id),
259 +             StateScope::User(id) => write!(f, "user:{id}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:260:40
    |
260 |             StateScope::Session(id) => write!(f, "session:{}", id),
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
260 -             StateScope::Session(id) => write!(f, "session:{}", id),
260 +             StateScope::Session(id) => write!(f, "session:{id}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:261:38
    |
261 |             StateScope::Agent(id) => write!(f, "agent:{}", id),
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
261 -             StateScope::Agent(id) => write!(f, "agent:{}", id),
261 +             StateScope::Agent(id) => write!(f, "agent:{id}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:262:37
    |
262 |             StateScope::Tool(id) => write!(f, "tool:{}", id),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
262 -             StateScope::Tool(id) => write!(f, "tool:{}", id),
262 +             StateScope::Tool(id) => write!(f, "tool:{id}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:263:41
    |
263 |             StateScope::Workflow(id) => write!(f, "workflow:{}", id),
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
263 -             StateScope::Workflow(id) => write!(f, "workflow:{}", id),
263 +             StateScope::Workflow(id) => write!(f, "workflow:{id}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:264:37
    |
264 |             StateScope::Hook(id) => write!(f, "hook:{}", id),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
264 -             StateScope::Hook(id) => write!(f, "hook:{}", id),
264 +             StateScope::Hook(id) => write!(f, "hook:{id}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-traits/src/scope.rs:265:39
    |
265 |             StateScope::Custom(id) => write!(f, "custom:{}", id),
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
265 -             StateScope::Custom(id) => write!(f, "custom:{}", id),
265 +             StateScope::Custom(id) => write!(f, "custom:{id}"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-traits/src/traits.rs:390:5
    |
390 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: `llmspell-state-traits` (lib) generated 93 warnings (run `cargo clippy --fix --lib -p llmspell-state-traits` to apply 57 suggestions)
warning: long literal lacking separators
   --> llmspell-hooks/src/builtin/cost_tracking.rs:152:34
    |
152 |                 max_tokens: Some(200000),
    |                                  ^^^^^^ help: consider: `200_000`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal
    = note: `-W clippy::unreadable-literal` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unreadable_literal)]`

warning: long literal lacking separators
   --> llmspell-hooks/src/builtin/cost_tracking.rs:161:34
    |
161 |                 max_tokens: Some(200000),
    |                                  ^^^^^^ help: consider: `200_000`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: binding's name is too similar to existing binding
   --> llmspell-hooks/src/collectors/agent_output.rs:136:13
    |
136 |         let content = if let Some(text) = content_value.as_str() {
    |             ^^^^^^^
    |
note: existing binding defined here
   --> llmspell-hooks/src/collectors/agent_output.rs:119:43
    |
119 |     async fn extract_artifact_data(&self, context: &HookContext) -> Result<ArtifactData> {
    |                                           ^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names
    = note: `-W clippy::similar-names` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::similar_names)]`

warning: binding's name is too similar to existing binding
   --> llmspell-hooks/src/collectors/tool_result.rs:138:13
    |
138 |         let content = if let Some(result) = &operation.result {
    |             ^^^^^^^
    |
note: existing binding defined here
   --> llmspell-hooks/src/collectors/tool_result.rs:125:43
    |
125 |     async fn extract_artifact_data(&self, context: &HookContext) -> Result<ArtifactData> {
    |                                           ^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names

warning: long literal lacking separators
  --> llmspell-hooks/src/persistence/retention.rs:75:29
   |
75 |             max_count: Some(100000),
   |                             ^^^^^^ help: consider: `100_000`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: binding's name is too similar to existing binding
   --> llmspell-hooks/src/replay/scheduler.rs:206:13
    |
206 |         let scheduled = scheduler.scheduled.clone();
    |             ^^^^^^^^^
    |
note: existing binding defined here
   --> llmspell-hooks/src/replay/scheduler.rs:198:13
    |
198 |         let scheduler = Self {
    |             ^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names

warning: item in documentation is missing backticks
 --> llmspell-hooks/src/lib.rs:4:7
  |
4 | //! # LLMSpell Hooks
  |       ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
4 - //! # LLMSpell Hooks
4 + //! # `LLMSpell` Hooks
  |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/lib.rs:12:44
   |
12 | //! - **Performance Protection**: Built-in CircuitBreaker prevents slow hooks
   |                                            ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
12 - //! - **Performance Protection**: Built-in CircuitBreaker prevents slow hooks
12 + //! - **Performance Protection**: Built-in `CircuitBreaker` prevents slow hooks
   |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/artifact_hooks.rs:45:27
   |
45 |     /// Convert string to HookPoint
   |                           ^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
45 -     /// Convert string to HookPoint
45 +     /// Convert string to `HookPoint`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/artifact_hooks.rs:46:5
   |
46 |     pub fn to_hook_point(s: &str) -> HookPoint {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn to_hook_point(s: &str) -> HookPoint`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
   = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: this function could have a `#[must_use]` attribute
  --> llmspell-hooks/src/artifact_hooks.rs:52:1
   |
52 | pub fn event_to_hook_point(event: &ArtifactEvent) -> HookPoint {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn event_to_hook_point(event: &ArtifactEvent) -> HookPoint`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-hooks/src/artifact_hooks.rs:90:1
   |
90 | pub fn get_artifact_from_context(context: &crate::context::HookContext) -> Option<ArtifactId> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_artifact_from_context(context: &crate::context::HookContext) -> Option<ArtifactId>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-hooks/src/artifact_hooks.rs:98:1
   |
98 | pub fn is_artifact_hook_point(point: &HookPoint) -> bool {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_artifact_hook_point(point: &HookPoint) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/builtin/caching.rs:94:5
   |
94 |     pub fn hit_ratio(&self) -> f64 {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn hit_ratio(&self) -> f64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:106:5
    |
106 |     pub fn cache_efficiency(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn cache_efficiency(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:129:5
    |
129 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:151:5
    |
151 |     pub fn with_config(config: CachingConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: CachingConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:172:5
    |
172 |     pub fn with_strategy(mut self, strategy: CachingStrategy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_strategy(mut self, strategy: CachingStrategy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/caching.rs:172:5
    |
172 | /     pub fn with_strategy(mut self, strategy: CachingStrategy) -> Self {
173 | |         self.config.strategy = strategy;
174 | |         self
175 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use
    = note: `-W clippy::return-self-not-must-use` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::return_self_not_must_use)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:178:5
    |
178 |     pub fn with_ttl(mut self, ttl: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_ttl(mut self, ttl: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/caching.rs:178:5
    |
178 | /     pub fn with_ttl(mut self, ttl: Duration) -> Self {
179 | |         self.config.default_ttl = ttl;
180 | |         self
181 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:184:5
    |
184 |     pub fn with_max_entries(mut self, max_entries: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_entries(mut self, max_entries: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/caching.rs:184:5
    |
184 | /     pub fn with_max_entries(mut self, max_entries: usize) -> Self {
185 | |         self.config.max_entries = max_entries;
186 | |         self
187 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:190:5
    |
190 |     pub fn with_error_caching(mut self, cache_errors: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_error_caching(mut self, cache_errors: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/caching.rs:190:5
    |
190 | /     pub fn with_error_caching(mut self, cache_errors: bool) -> Self {
191 | |         self.config.cache_errors = cache_errors;
192 | |         self
193 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:196:5
    |
196 |     pub fn with_min_execution_time(mut self, min_time: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_min_execution_time(mut self, min_time: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/caching.rs:196:5
    |
196 | /     pub fn with_min_execution_time(mut self, min_time: Duration) -> Self {
197 | |         self.config.min_execution_time = min_time;
198 | |         self
199 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:202:5
    |
202 |     pub fn cache(&self) -> Arc<Cache> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn cache(&self) -> Arc<Cache>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:207:5
    |
207 |     pub fn cache_stats(&self) -> CacheStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn cache_stats(&self) -> CacheStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/caching.rs:212:5
    |
212 |     pub fn metrics(&self) -> CachingMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/caching.rs:213:9
    |
213 |         self.metrics.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
    = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/caching.rs:212:5
    |
212 |     pub fn metrics(&self) -> CachingMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn metrics(&self) -> CachingMetrics`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function's return value is unnecessary
   --> llmspell-hooks/src/builtin/caching.rs:300:5
    |
300 | /     fn try_cache_result(
301 | |         &self,
302 | |         context: &HookContext,
303 | |         result: &HookResult,
...   |
369 | |         Ok(())
370 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove the return type...
    |
305 -     ) -> Result<()> {
305 +     ) -> () {
    |
help: ...and then remove returned values
    |
307 ~             return ;
308 |         }
309 |
310 |         if !self.should_cache_result(result) {
311 ~             return ;
312 |         }
313 |
314 |         if !self.should_cache_by_execution_time(execution_time) {
315 ~             return ;
316 |         }
...
319 |         if result.is_cancelled() && !self.config.cache_errors {
320 ~             return ;
321 |         }
...
368 |
369 ~         
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/caching.rs:365:17
    |
365 |                 log::warn!("Failed to cache result: {}", e);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
365 -                 log::warn!("Failed to cache result: {}", e);
365 +                 log::warn!("Failed to cache result: {e}");
    |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/builtin/cost_tracking.rs:27:24
   |
27 |     /// Provider name (OpenAI, Anthropic, etc.)
   |                        ^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
27 -     /// Provider name (OpenAI, Anthropic, etc.)
27 +     /// Provider name (`OpenAI`, Anthropic, etc.)
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:221:5
    |
221 |     pub fn average_cost_per_request(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn average_cost_per_request(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:231:5
    |
231 |     pub fn average_tokens_per_request(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn average_tokens_per_request(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:341:5
    |
341 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/cost_tracking.rs:346:5
    |
346 |     pub fn with_config(mut config: CostTrackingConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/cost_tracking.rs:350:29
    |
350 |             .sort_by(|a, b| a.threshold.partial_cmp(&b.threshold).unwrap());
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:346:5
    |
346 |     pub fn with_config(mut config: CostTrackingConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(mut config: CostTrackingConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:372:5
    |
372 |     pub fn with_provider_pricing(mut self, provider: String, pricing: ProviderPricing) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_provider_pricing(mut self, provider: String, pricing: ProviderPricing) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/cost_tracking.rs:372:5
    |
372 | /     pub fn with_provider_pricing(mut self, provider: String, pricing: ProviderPricing) -> Self {
373 | |         self.config.providers.insert(provider, pricing);
374 | |         self
375 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/cost_tracking.rs:378:5
    |
378 |     pub fn with_budget_alert(mut self, alert: BudgetAlert) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/cost_tracking.rs:383:29
    |
383 |             .sort_by(|a, b| a.threshold.partial_cmp(&b.threshold).unwrap());
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:378:5
    |
378 |     pub fn with_budget_alert(mut self, alert: BudgetAlert) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_budget_alert(mut self, alert: BudgetAlert) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/cost_tracking.rs:378:5
    |
378 | /     pub fn with_budget_alert(mut self, alert: BudgetAlert) -> Self {
379 | |         self.config.budget_alerts.push(alert);
380 | |         // Keep alerts sorted by threshold
381 | |         self.config
...   |
384 | |         self
385 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/cost_tracking.rs:388:5
    |
388 |     pub fn metrics(&self) -> CostTrackingMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/cost_tracking.rs:389:9
    |
389 |         self.metrics.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:388:5
    |
388 |     pub fn metrics(&self) -> CostTrackingMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn metrics(&self) -> CostTrackingMetrics`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/cost_tracking.rs:393:5
    |
393 |     pub fn reset_metrics(&self) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/cost_tracking.rs:394:27
    |
394 |         let mut metrics = self.metrics.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:399:5
    |
399 |     pub fn total_cost(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn total_cost(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:404:5
    |
404 |     pub fn component_cost(&self, component_id: &ComponentId) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn component_cost(&self, component_id: &ComponentId) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/cost_tracking.rs:409:5
    |
409 |     pub fn user_cost(&self, user_id: &str) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn user_cost(&self, user_id: &str) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/cost_tracking.rs:536:21
    |
536 |                     log::debug!("CostTrackingHook: Failed to parse token usage: {}", e);
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
536 -                     log::debug!("CostTrackingHook: Failed to parse token usage: {}", e);
536 +                     log::debug!("CostTrackingHook: Failed to parse token usage: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/cost_tracking.rs:549:17
    |
549 |                 log::warn!("CostTrackingHook: Failed to calculate cost: {}", e);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
549 -                 log::warn!("CostTrackingHook: Failed to calculate cost: {}", e);
549 +                 log::warn!("CostTrackingHook: Failed to calculate cost: {e}");
    |

warning: more than 3 bools in a struct
  --> llmspell-hooks/src/builtin/debugging.rs:32:1
   |
32 | / pub struct DebuggingConfig {
33 | |     /// Whether to capture stack traces
34 | |     pub capture_stack_traces: bool,
35 | |     /// Whether to include full context data
...  |
44 | |     pub min_duration_ms: u64,
45 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
   = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/builtin/debugging.rs:68:5
   |
68 |     pub fn new(config: DebuggingConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: DebuggingConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-hooks/src/builtin/debugging.rs:76:5
   |
76 |     pub fn add_trace(&self, trace: DebugTrace) {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-hooks/src/builtin/debugging.rs:77:26
   |
77 |         let mut traces = self.traces.write().unwrap();
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-hooks/src/builtin/debugging.rs:76:36
   |
76 |     pub fn add_trace(&self, trace: DebugTrace) {
   |                                    ^^^^^^^^^^ help: consider taking a reference instead: `&DebugTrace`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
   = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: casting `u64` to `f64` causes a loss of precision (`u64` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-hooks/src/builtin/debugging.rs:81:27
   |
81 |             if duration < self.config.min_duration_ms as f64 {
   |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
   = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/debugging.rs:106:5
    |
106 |     pub fn get_traces(&self) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/debugging.rs:107:9
    |
107 |         self.traces.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:106:5
    |
106 |     pub fn get_traces(&self) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_traces(&self) -> Vec<DebugTrace>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/debugging.rs:111:5
    |
111 |     pub fn get_traces_for_hook_point(&self, hook_point: &HookPoint) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/debugging.rs:112:9
    |
112 | /         self.traces
113 | |             .read()
114 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:111:5
    |
111 |     pub fn get_traces_for_hook_point(&self, hook_point: &HookPoint) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_traces_for_hook_point(&self, hook_point: &HookPoint) -> Vec<DebugTrace>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/debugging.rs:122:5
    |
122 |     pub fn get_traces_for_component(&self, component_name: &str) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/debugging.rs:123:9
    |
123 | /         self.traces
124 | |             .read()
125 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:122:5
    |
122 |     pub fn get_traces_for_component(&self, component_name: &str) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_traces_for_component(&self, component_name: &str) -> Vec<DebugTrace>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/debugging.rs:133:5
    |
133 |     pub fn get_traces_in_range(&self, start: DateTime<Utc>, end: DateTime<Utc>) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/debugging.rs:134:9
    |
134 | /         self.traces
135 | |             .read()
136 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:133:5
    |
133 |     pub fn get_traces_in_range(&self, start: DateTime<Utc>, end: DateTime<Utc>) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_traces_in_range(&self, start: DateTime<Utc>, end: DateTime<Utc>) -> Vec<DebugTrace>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/debugging.rs:144:5
    |
144 |     pub fn clear_traces(&self) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/debugging.rs:145:9
    |
145 |         self.traces.write().unwrap().clear();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/debugging.rs:149:5
    |
149 |     pub fn get_statistics(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/debugging.rs:150:22
    |
150 |         let traces = self.traces.read().unwrap();
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:149:5
    |
149 |     pub fn get_statistics(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_statistics(&self) -> HashMap<String, serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-hooks/src/builtin/debugging.rs:202:30
    |
202 |             let mean = sum / durations.len() as f64;
    |                              ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:262:5
    |
262 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:278:5
    |
278 |     pub fn with_config(config: DebuggingConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: DebuggingConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:294:5
    |
294 |     pub fn with_stack_traces(self, enable: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_stack_traces(self, enable: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/debugging.rs:294:5
    |
294 | /     pub fn with_stack_traces(self, enable: bool) -> Self {
295 | |         let mut config = self.storage.config.clone();
296 | |         config.capture_stack_traces = enable;
297 | |         Self {
...   |
302 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:305:5
    |
305 |     pub fn with_min_duration_ms(self, min_duration_ms: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_min_duration_ms(self, min_duration_ms: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/debugging.rs:305:5
    |
305 | /     pub fn with_min_duration_ms(self, min_duration_ms: u64) -> Self {
306 | |         let mut config = self.storage.config.clone();
307 | |         config.min_duration_ms = min_duration_ms;
308 | |         Self {
...   |
313 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:316:5
    |
316 |     pub fn storage(&self) -> Arc<TraceStorage> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn storage(&self) -> Arc<TraceStorage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:321:5
    |
321 |     pub fn get_traces(&self) -> Vec<DebugTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_traces(&self) -> Vec<DebugTrace>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/debugging.rs:326:5
    |
326 |     pub fn get_statistics(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_statistics(&self) -> HashMap<String, serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-hooks/src/builtin/debugging.rs:445:34
    |
445 |         let execution_duration = duration.as_millis() as f64;
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-hooks/src/builtin/debugging.rs:703:37
    |
703 |                     .sum::<f64>() / traces.len() as f64
    |                                     ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/builtin/logging.rs:68:5
   |
68 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/builtin/logging.rs:84:5
   |
84 |     pub fn with_config(config: LoggingConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: LoggingConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/builtin/logging.rs:99:5
   |
99 |     pub fn with_level(mut self, level: LogLevel) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_level(mut self, level: LogLevel) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/logging.rs:99:5
    |
99  | /     pub fn with_level(mut self, level: LogLevel) -> Self {
100 | |         self.config.level = level;
101 | |         self
102 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/logging.rs:105:5
    |
105 |     pub fn with_context_data(mut self, include: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_context_data(mut self, include: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/logging.rs:105:5
    |
105 | /     pub fn with_context_data(mut self, include: bool) -> Self {
106 | |         self.config.include_context_data = include;
107 | |         self
108 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/logging.rs:111:5
    |
111 |     pub fn with_performance_logging(mut self, enable: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_performance_logging(mut self, enable: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/logging.rs:111:5
    |
111 | /     pub fn with_performance_logging(mut self, enable: bool) -> Self {
112 | |         self.config.log_performance = enable;
113 | |         self
114 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/logging.rs:117:5
    |
117 |     pub fn with_max_data_size(mut self, size: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_data_size(mut self, size: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/logging.rs:117:5
    |
117 | /     pub fn with_max_data_size(mut self, size: usize) -> Self {
118 | |         self.config.max_data_size = size;
119 | |         self
120 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/logging.rs:184:13
    |
184 | /             format!(
185 | |                 "{}, data={}, metadata={}",
186 | |                 base_message, context_data, metadata
187 | |             )
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/logging.rs:194:32
    |
194 |             LogLevel::Trace => trace!("{}", detailed_message),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
194 -             LogLevel::Trace => trace!("{}", detailed_message),
194 +             LogLevel::Trace => trace!("{detailed_message}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/logging.rs:195:32
    |
195 |             LogLevel::Debug => debug!("{}", detailed_message),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
195 -             LogLevel::Debug => debug!("{}", detailed_message),
195 +             LogLevel::Debug => debug!("{detailed_message}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/logging.rs:196:31
    |
196 |             LogLevel::Info => info!("{}", detailed_message),
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
196 -             LogLevel::Info => info!("{}", detailed_message),
196 +             LogLevel::Info => info!("{detailed_message}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/logging.rs:197:31
    |
197 |             LogLevel::Warn => warn!("{}", detailed_message),
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
197 -             LogLevel::Warn => warn!("{}", detailed_message),
197 +             LogLevel::Warn => warn!("{detailed_message}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/logging.rs:198:32
    |
198 |             LogLevel::Error => error!("{}", detailed_message),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
198 -             LogLevel::Error => error!("{}", detailed_message),
198 +             LogLevel::Error => error!("{detailed_message}"),
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/builtin/metrics.rs:40:5
   |
40 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:115:5
    |
115 |     pub fn mean(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn mean(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:125:5
    |
125 |     pub fn percentile(&self, p: f64) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn percentile(&self, p: f64) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-hooks/src/builtin/metrics.rs:151:29
    |
151 | /// Metrics storage for the MetricsHook
    |                             ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
151 - /// Metrics storage for the MetricsHook
151 + /// Metrics storage for the `MetricsHook`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:167:5
    |
167 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/metrics.rs:172:5
    |
172 |     pub fn record_execution(&self, hook_point: &HookPoint, duration: Duration, success: bool) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/metrics.rs:175:30
    |
175 |             let mut counts = self.execution_counts.write().unwrap();
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/metrics.rs:197:5
    |
197 |     pub fn record_custom_metric(&self, name: String, value: f64, labels: HashMap<String, String>) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/metrics.rs:204:27
    |
204 |         let mut metrics = self.custom_metrics.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/metrics.rs:209:5
    |
209 |     pub fn get_execution_count(&self, hook_point: &HookPoint) -> u64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/metrics.rs:210:9
    |
210 | /         self.execution_counts
211 | |             .read()
212 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:209:5
    |
209 |     pub fn get_execution_count(&self, hook_point: &HookPoint) -> u64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_execution_count(&self, hook_point: &HookPoint) -> u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/metrics.rs:219:5
    |
219 |     pub fn get_duration_histogram(&self, hook_point: &HookPoint) -> Option<Histogram> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/metrics.rs:220:9
    |
220 | /         self.duration_histograms
221 | |             .read()
222 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:219:5
    |
219 |     pub fn get_duration_histogram(&self, hook_point: &HookPoint) -> Option<Histogram> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_duration_histogram(&self, hook_point: &HookPoint) -> Option<Histogram>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/metrics.rs:228:5
    |
228 |     pub fn get_success_rate(&self, hook_point: &HookPoint) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/metrics.rs:229:29
    |
229 |           let success_count = self
    |  _____________________________^
230 | |             .success_counts
231 | |             .read()
232 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:228:5
    |
228 |     pub fn get_success_rate(&self, hook_point: &HookPoint) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_success_rate(&self, hook_point: &HookPoint) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/metrics.rs:258:5
    |
258 |     pub fn get_summary(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/metrics.rs:263:26
    |
263 |             let counts = self.execution_counts.read().unwrap();
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:258:5
    |
258 |     pub fn get_summary(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_summary(&self) -> HashMap<String, serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/metrics.rs:267:21
    |
267 |                     format!("{:?}", point),
    |                     ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
267 -                     format!("{:?}", point),
267 +                     format!("{point:?}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/metrics.rs:285:21
    |
285 |                     format!("{:?}", point),
    |                     ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
285 -                     format!("{:?}", point),
285 +                     format!("{point:?}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/metrics.rs:334:39
    |
334 |                 duration_stats.insert(format!("{:?}", point), serde_json::Value::Object(stats));
    |                                       ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
334 -                 duration_stats.insert(format!("{:?}", point), serde_json::Value::Object(stats));
334 +                 duration_stats.insert(format!("{point:?}"), serde_json::Value::Object(stats));
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:355:5
    |
355 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:371:5
    |
371 |     pub fn with_storage(storage: Arc<MetricsStorage>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_storage(storage: Arc<MetricsStorage>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:387:5
    |
387 |     pub fn with_custom_metrics(mut self, enable: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_custom_metrics(mut self, enable: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/metrics.rs:387:5
    |
387 | /     pub fn with_custom_metrics(mut self, enable: bool) -> Self {
388 | |         self.collect_custom_metrics = enable;
389 | |         self
390 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:393:5
    |
393 |     pub fn storage(&self) -> Arc<MetricsStorage> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn storage(&self) -> Arc<MetricsStorage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/metrics.rs:398:5
    |
398 |     pub fn get_summary(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_summary(&self) -> HashMap<String, serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/builtin/rate_limit.rs:25:39
   |
25 |     /// Per-user rate limit (requires user_id in context)
   |                                       ^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
25 -     /// Per-user rate limit (requires user_id in context)
25 +     /// Per-user rate limit (requires `user_id` in context)
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:100:5
    |
100 |     pub fn allowed_ratio(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn allowed_ratio(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:110:5
    |
110 |     pub fn rate_limited_ratio(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn rate_limited_ratio(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:132:5
    |
132 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:155:5
    |
155 |     pub fn with_config(config: RateLimitConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: RateLimitConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:177:5
    |
177 |     pub fn with_strategy(mut self, strategy: RateLimitStrategy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_strategy(mut self, strategy: RateLimitStrategy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/rate_limit.rs:177:5
    |
177 | /     pub fn with_strategy(mut self, strategy: RateLimitStrategy) -> Self {
178 | |         self.config.strategy = strategy;
179 | |         self
180 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:183:5
    |
183 |     pub fn with_bucket_config(mut self, bucket_config: TokenBucketConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_bucket_config(mut self, bucket_config: TokenBucketConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/rate_limit.rs:183:5
    |
183 | /     pub fn with_bucket_config(mut self, bucket_config: TokenBucketConfig) -> Self {
184 | |         self.config.bucket_config = bucket_config.clone();
185 | |         self.rate_limiter = Arc::new(RateLimiter::new(bucket_config));
186 | |         self
187 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:190:5
    |
190 |     pub fn with_rate_per_second(mut self, rate: f64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_rate_per_second(mut self, rate: f64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/rate_limit.rs:190:5
    |
190 | /     pub fn with_rate_per_second(mut self, rate: f64) -> Self {
191 | |         #[allow(clippy::cast_possible_truncation, clippy::cast_sign_loss)]
192 | |         let capacity = rate as usize;
193 | |         self.config.bucket_config.capacity = capacity;
...   |
197 | |         self
198 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:201:5
    |
201 |     pub fn with_burst(mut self, burst_size: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_burst(mut self, burst_size: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/rate_limit.rs:201:5
    |
201 | /     pub fn with_burst(mut self, burst_size: usize) -> Self {
202 | |         self.config.bucket_config.burst_capacity = burst_size;
203 | |         self.config.allow_burst = true;
204 | |         self.rate_limiter = Arc::new(RateLimiter::new(self.config.bucket_config.clone()));
205 | |         self
206 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:209:5
    |
209 |     pub fn with_custom_limit(mut self, key: String, config: TokenBucketConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_custom_limit(mut self, key: String, config: TokenBucketConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/rate_limit.rs:209:5
    |
209 | /     pub fn with_custom_limit(mut self, key: String, config: TokenBucketConfig) -> Self {
210 | |         self.config.custom_limits.insert(key, config);
211 | |         self
212 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:215:5
    |
215 |     pub fn with_rate_limited_action(mut self, action: RateLimitAction) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_rate_limited_action(mut self, action: RateLimitAction) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/rate_limit.rs:215:5
    |
215 | /     pub fn with_rate_limited_action(mut self, action: RateLimitAction) -> Self {
216 | |         self.config.rate_limited_action = action;
217 | |         self
218 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/rate_limit.rs:221:5
    |
221 |     pub fn metrics(&self) -> RateLimitMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/rate_limit.rs:222:9
    |
222 |         self.metrics.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/rate_limit.rs:221:5
    |
221 |     pub fn metrics(&self) -> RateLimitMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn metrics(&self) -> RateLimitMetrics`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/rate_limit.rs:226:5
    |
226 |     pub fn reset_metrics(&self) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/rate_limit.rs:227:27
    |
227 |         let mut metrics = self.metrics.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this function has too many lines (106/100)
   --> llmspell-hooks/src/builtin/rate_limit.rs:335:5
    |
335 | /     async fn execute(&self, context: &mut HookContext) -> Result<HookResult> {
336 | |         let key = self.generate_key(context);
...   |
477 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/rate_limit.rs:405:13
    |
405 | /             log::debug!(
406 | |                 "RateLimitHook: Allowed request for key '{}', {} tokens remaining",
407 | |                 key,
408 | |                 tokens_remaining
409 | |             );
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:124:5
    |
124 |     pub fn retry_rate(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn retry_rate(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:134:5
    |
134 |     pub fn success_rate(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success_rate(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:164:5
    |
164 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:169:5
    |
169 |     pub fn with_config(config: RetryConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: RetryConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:190:5
    |
190 |     pub fn with_max_attempts(mut self, max_attempts: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_attempts(mut self, max_attempts: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/retry.rs:190:5
    |
190 | /     pub fn with_max_attempts(mut self, max_attempts: u32) -> Self {
191 | |         self.config.max_attempts = max_attempts;
192 | |         self
193 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:196:5
    |
196 |     pub fn with_backoff_strategy(mut self, strategy: BackoffStrategy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_backoff_strategy(mut self, strategy: BackoffStrategy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/retry.rs:196:5
    |
196 | /     pub fn with_backoff_strategy(mut self, strategy: BackoffStrategy) -> Self {
197 | |         self.config.backoff_strategy = strategy;
198 | |         self
199 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:202:5
    |
202 |     pub fn with_jitter_strategy(mut self, strategy: JitterStrategy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_jitter_strategy(mut self, strategy: JitterStrategy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/retry.rs:202:5
    |
202 | /     pub fn with_jitter_strategy(mut self, strategy: JitterStrategy) -> Self {
203 | |         self.config.jitter_strategy = strategy;
204 | |         self
205 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:208:5
    |
208 |     pub fn with_retryable_error(mut self, pattern: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_retryable_error(mut self, pattern: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/retry.rs:208:5
    |
208 | /     pub fn with_retryable_error(mut self, pattern: String) -> Self {
209 | |         self.config.retryable_errors.insert(pattern);
210 | |         self
211 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:214:5
    |
214 |     pub fn with_non_retryable_error(mut self, pattern: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_non_retryable_error(mut self, pattern: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/retry.rs:214:5
    |
214 | /     pub fn with_non_retryable_error(mut self, pattern: String) -> Self {
215 | |         self.config.non_retryable_errors.insert(pattern);
216 | |         self
217 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/retry.rs:220:5
    |
220 |     pub fn metrics(&self) -> RetryMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/retry.rs:221:9
    |
221 |         self.metrics.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/retry.rs:220:5
    |
220 |     pub fn metrics(&self) -> RetryMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn metrics(&self) -> RetryMetrics`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/retry.rs:225:5
    |
225 |     pub fn reset_metrics(&self) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/retry.rs:226:27
    |
226 |         let mut metrics = self.metrics.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: casts from `u32` to `f64` can be expressed infallibly using `From`
   --> llmspell-hooks/src/builtin/retry.rs:269:71
    |
269 |                 let delay = base.as_millis() as f64 * multiplier.powf(state.attempts as f64);
    |                                                                       ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `f64::from` instead
    |
269 -                 let delay = base.as_millis() as f64 * multiplier.powf(state.attempts as f64);
269 +                 let delay = base.as_millis() as f64 * multiplier.powf(f64::from(state.attempts));
    |

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-hooks/src/builtin/retry.rs:271:42
    |
271 |                 let delay_ms = delay.min(max.as_millis() as f64) as u64;
    |                                          ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: unused `self` argument
   --> llmspell-hooks/src/builtin/retry.rs:314:18
    |
314 |     fn fibonacci(&self, n: u32) -> u64 {
    |                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: this match arm has an identical body to another arm
   --> llmspell-hooks/src/builtin/retry.rs:317:13
    |
317 |             1 => 1,
    |             ^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`
help: or try merging the arm patterns and removing the obsolete arm
    |
316 -             0 => 1,
317 -             1 => 1,
316 +             1 | 0 => 1,
    |

warning: unused `self` argument
   --> llmspell-hooks/src/builtin/retry.rs:332:27
    |
332 |     fn generate_retry_key(&self, context: &HookContext) -> String {
    |                           ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/retry.rs:379:13
    |
379 |             log::debug!("RetryHook: Error '{}' is not retryable", error);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
379 -             log::debug!("RetryHook: Error '{}' is not retryable", error);
379 +             log::debug!("RetryHook: Error '{error}' is not retryable");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/retry.rs:430:17
    |
430 |                 log::warn!("RetryHook: Max retry duration exceeded for {}", retry_key);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
430 -                 log::warn!("RetryHook: Max retry duration exceeded for {}", retry_key);
430 +                 log::warn!("RetryHook: Max retry duration exceeded for {retry_key}");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/builtin/security.rs:55:48
   |
55 |             SecurityEventType::Custom(name) => write!(f, "CUSTOM:{}", name),
   |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
55 -             SecurityEventType::Custom(name) => write!(f, "CUSTOM:{}", name),
55 +             SecurityEventType::Custom(name) => write!(f, "CUSTOM:{name}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/builtin/security.rs:56:18
   |
56 |             _ => write!(f, "{:?}", self),
   |                  ^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
56 -             _ => write!(f, "{:?}", self),
56 +             _ => write!(f, "{self:?}"),
   |

warning: more than 3 bools in a struct
   --> llmspell-hooks/src/builtin/security.rs:104:1
    |
104 | / pub struct SecurityConfig {
105 | |     /// Whether to enable audit logging
106 | |     pub enable_audit_logging: bool,
107 | |     /// Whether to enable parameter validation
...   |
120 | |     pub max_parameter_length: usize,
121 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:156:5
    |
156 |     pub fn new(config: SecurityConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: SecurityConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:215:5
    |
215 |     pub fn add_event(&self, event: SecurityEvent) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:221:26
    |
221 |         let mut events = self.events.write().unwrap();
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:215:5
    |
215 |     pub fn add_event(&self, event: SecurityEvent) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_event(&self, event: SecurityEvent) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/builtin/security.rs:215:36
    |
215 |     pub fn add_event(&self, event: SecurityEvent) -> bool {
    |                                    ^^^^^^^^^^^^^ help: consider taking a reference instead: `&SecurityEvent`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:245:5
    |
245 |     pub fn add_rule(&self, rule: SecurityRule) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:246:25
    |
246 |         let mut rules = self.rules.write().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:251:5
    |
251 |     pub fn get_events(&self) -> Vec<SecurityEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:252:9
    |
252 |         self.events.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:251:5
    |
251 |     pub fn get_events(&self) -> Vec<SecurityEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_events(&self) -> Vec<SecurityEvent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:256:5
    |
256 |     pub fn get_events_by_severity(&self, min_severity: SecuritySeverity) -> Vec<SecurityEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:257:9
    |
257 | /         self.events
258 | |             .read()
259 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:256:5
    |
256 |     pub fn get_events_by_severity(&self, min_severity: SecuritySeverity) -> Vec<SecurityEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_events_by_severity(&self, min_severity: SecuritySeverity) -> Vec<SecurityEvent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:267:5
    |
267 |     pub fn get_events_by_type(&self, event_type: &SecurityEventType) -> Vec<SecurityEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:268:9
    |
268 | /         self.events
269 | |             .read()
270 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:267:5
    |
267 |     pub fn get_events_by_type(&self, event_type: &SecurityEventType) -> Vec<SecurityEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_events_by_type(&self, event_type: &SecurityEventType) -> Vec<SecurityEvent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:278:5
    |
278 |     pub fn get_rules_for_hook_point(&self, hook_point: &HookPoint) -> Vec<SecurityRule> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:279:9
    |
279 | /         self.rules
280 | |             .read()
281 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:278:5
    |
278 |     pub fn get_rules_for_hook_point(&self, hook_point: &HookPoint) -> Vec<SecurityRule> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_rules_for_hook_point(&self, hook_point: &HookPoint) -> Vec<SecurityRule>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:289:5
    |
289 |     pub fn get_statistics(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:290:22
    |
290 |         let events = self.events.read().unwrap();
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:289:5
    |
289 |     pub fn get_statistics(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_statistics(&self) -> HashMap<String, serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/builtin/security.rs:340:5
    |
340 |     pub fn clear_events(&self) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/builtin/security.rs:341:9
    |
341 |         self.events.write().unwrap().clear();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:353:5
    |
353 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:370:5
    |
370 |     pub fn with_config(config: SecurityConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: SecurityConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:387:5
    |
387 |     pub fn with_audit_logging(self, enable: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_audit_logging(self, enable: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/security.rs:387:5
    |
387 | /     pub fn with_audit_logging(self, enable: bool) -> Self {
388 | |         let mut config = self.storage.config.clone();
389 | |         config.enable_audit_logging = enable;
390 | |         Self {
...   |
394 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:397:5
    |
397 |     pub fn with_min_severity(self, severity: SecuritySeverity) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_min_severity(self, severity: SecuritySeverity) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/security.rs:397:5
    |
397 | /     pub fn with_min_severity(self, severity: SecuritySeverity) -> Self {
398 | |         let mut config = self.storage.config.clone();
399 | |         config.min_severity = severity;
400 | |         Self {
...   |
404 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:407:5
    |
407 |     pub fn with_blocking(self, enable: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_blocking(self, enable: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/builtin/security.rs:407:5
    |
407 | /     pub fn with_blocking(self, enable: bool) -> Self {
408 | |         let mut config = self.storage.config.clone();
409 | |         config.block_on_violations = enable;
410 | |         Self {
...   |
414 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:417:5
    |
417 |     pub fn storage(&self) -> Arc<SecurityStorage> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn storage(&self) -> Arc<SecurityStorage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:422:5
    |
422 |     pub fn get_events(&self) -> Vec<SecurityEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_events(&self) -> Vec<SecurityEvent>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/builtin/security.rs:427:5
    |
427 |     pub fn get_statistics(&self) -> HashMap<String, serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_statistics(&self) -> HashMap<String, serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:457:66
    |
457 |                     user_id: context.get_metadata("user_id").map(|s| s.to_string()),
    |                                                                  ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:458:72
    |
458 |                     session_id: context.get_metadata("session_id").map(|s| s.to_string()),
    |                                                                        ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:459:70
    |
459 |                     source_ip: context.get_metadata("source_ip").map(|s| s.to_string()),
    |                                                                      ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:499:66
    |
499 |                     user_id: context.get_metadata("user_id").map(|s| s.to_string()),
    |                                                                  ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:500:72
    |
500 |                     session_id: context.get_metadata("session_id").map(|s| s.to_string()),
    |                                                                        ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:501:70
    |
501 |                     source_ip: context.get_metadata("source_ip").map(|s| s.to_string()),
    |                                                                      ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/builtin/security.rs:502:34
    |
502 |                     description: format!("Access to sensitive parameter '{}'", key),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
502 -                     description: format!("Access to sensitive parameter '{}'", key),
502 +                     description: format!("Access to sensitive parameter '{key}'"),
    |

warning: unused `self` argument
   --> llmspell-hooks/src/builtin/security.rs:524:27
    |
524 |     fn create_audit_event(&self, context: &HookContext) -> SecurityEvent {
    |                           ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:534:58
    |
534 |             user_id: context.get_metadata("user_id").map(|s| s.to_string()),
    |                                                          ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:535:64
    |
535 |             session_id: context.get_metadata("session_id").map(|s| s.to_string()),
    |                                                                ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:536:62
    |
536 |             source_ip: context.get_metadata("source_ip").map(|s| s.to_string()),
    |                                                              ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:615:58
    |
615 |             user_id: context.get_metadata("user_id").map(|s| s.to_string()),
    |                                                          ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:616:64
    |
616 |             session_id: context.get_metadata("session_id").map(|s| s.to_string()),
    |                                                                ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:617:62
    |
617 |             source_ip: context.get_metadata("source_ip").map(|s| s.to_string()),
    |                                                              ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: casting `u128` to `u64` may truncate the value
   --> llmspell-hooks/src/builtin/security.rs:637:39
    |
637 |             serde_json::Value::Number((duration.as_millis() as u64).into()),
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
    = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
    |
637 -             serde_json::Value::Number((duration.as_millis() as u64).into()),
637 +             serde_json::Value::Number(u64::try_from(duration.as_millis()).into()),
    |

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:657:58
    |
657 |             user_id: context.get_metadata("user_id").map(|s| s.to_string()),
    |                                                          ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:658:64
    |
658 |             session_id: context.get_metadata("session_id").map(|s| s.to_string()),
    |                                                                ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-hooks/src/builtin/security.rs:659:62
    |
659 |             source_ip: context.get_metadata("source_ip").map(|s| s.to_string()),
    |                                                              ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/cache/ttl.rs:84:45
   |
84 |     /// Additional TTL to add on access (if extend_on_access is true)
   |                                             ^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
84 -     /// Additional TTL to add on access (if extend_on_access is true)
84 +     /// Additional TTL to add on access (if `extend_on_access` is true)
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:115:5
    |
115 |     pub fn hit_ratio(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn hit_ratio(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:127:5
    |
127 |     pub fn miss_ratio(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn miss_ratio(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:155:5
    |
155 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:160:5
    |
160 |     pub fn with_config(config: TtlCacheConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: TtlCacheConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:170:5
    |
170 |     pub fn get(&self, key: &K) -> Option<V> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:171:25
    |
171 |         let mut stats = self.stats.write().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:215:5
    |
215 |     pub fn put_with_ttl(&self, key: K, value: V, ttl: Duration) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:216:27
    |
216 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:246:5
    |
246 |     pub fn remove(&self, key: &K) -> Option<V> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:247:27
    |
247 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:259:5
    |
259 |     pub fn contains_key(&self, key: &K) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:260:27
    |
260 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:278:5
    |
278 |     pub fn len(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:279:9
    |
279 |         self.entries.read().unwrap().len()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:278:5
    |
278 |     pub fn len(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn len(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:283:5
    |
283 |     pub fn is_empty(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:284:9
    |
284 |         self.entries.read().unwrap().is_empty()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:283:5
    |
283 |     pub fn is_empty(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_empty(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:288:5
    |
288 |     pub fn clear(&self) {
    |     ^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:289:27
    |
289 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:297:5
    |
297 |     pub fn stats(&self) -> TtlCacheStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:298:9
    |
298 |         self.stats.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:297:5
    |
297 |     pub fn stats(&self) -> TtlCacheStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn stats(&self) -> TtlCacheStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:302:5
    |
302 |     pub fn cleanup_expired(&self) -> u64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:303:27
    |
303 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:302:5
    |
302 |     pub fn cleanup_expired(&self) -> u64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn cleanup_expired(&self) -> u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/ttl.rs:308:5
    |
308 |     pub fn keys(&self) -> Vec<K> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/ttl.rs:309:27
    |
309 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/ttl.rs:308:5
    |
308 |     pub fn keys(&self) -> Vec<K> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn keys(&self) -> Vec<K>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/cache/mod.rs:29:5
   |
29 |     pub fn from_context(context: &HookContext) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_context(context: &HookContext) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/cache/mod.rs:55:5
   |
55 |     pub fn as_cache_key(&self) -> String {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn as_cache_key(&self) -> String`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/cache/mod.rs:75:5
   |
75 |     pub fn new(key: CacheKey, result: HookResult, ttl: Duration) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(key: CacheKey, result: HookResult, ttl: Duration) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/cache/mod.rs:88:5
   |
88 |     pub fn is_expired(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_expired(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:110:5
    |
110 |     pub fn new(max_entries: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(max_entries: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:118:5
    |
118 |     pub fn record_access(&self, key: &str) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:119:25
    |
119 |         let mut queue = self.access_order.write().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:131:5
    |
131 |     pub fn get_eviction_candidates(&self, current_size: usize) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:136:21
    |
136 |         let queue = self.access_order.read().unwrap();
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:131:5
    |
131 |     pub fn get_eviction_candidates(&self, current_size: usize) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_eviction_candidates(&self, current_size: usize) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:144:5
    |
144 |     pub fn remove_key(&self, key: &str) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:145:25
    |
145 |         let mut queue = self.access_order.write().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:165:5
    |
165 |     pub fn hit_ratio(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn hit_ratio(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:177:5
    |
177 |     pub fn miss_ratio(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn miss_ratio(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:201:5
    |
201 |     pub fn new(max_entries: usize, default_ttl: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(max_entries: usize, default_ttl: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:216:5
    |
216 |     pub fn get(&self, key: &CacheKey) -> Option<HookResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:221:29
    |
221 |             let mut stats = self.stats.write().unwrap();
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:216:5
    |
216 |     pub fn get(&self, key: &CacheKey) -> Option<HookResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get(&self, key: &CacheKey) -> Option<HookResult>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:261:5
    |
261 |     pub fn put(&self, key: CacheKey, result: HookResult, ttl: Option<Duration>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:266:27
    |
266 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/cache/mod.rs:261:5
    |
261 |     pub fn put(&self, key: CacheKey, result: HookResult, ttl: Option<Duration>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:295:5
    |
295 |     pub fn remove(&self, key: &CacheKey) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:297:27
    |
297 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:295:5
    |
295 |     pub fn remove(&self, key: &CacheKey) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn remove(&self, key: &CacheKey) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:310:5
    |
310 |     pub fn clear(&self) {
    |     ^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:311:27
    |
311 |         let mut entries = self.entries.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:324:5
    |
324 |     pub fn stats(&self) -> CacheStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:325:9
    |
325 |         self.stats.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:324:5
    |
324 |     pub fn stats(&self) -> CacheStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn stats(&self) -> CacheStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:329:5
    |
329 |     pub fn size(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:330:9
    |
330 |         self.entries.read().unwrap().len()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:329:5
    |
329 |     pub fn size(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn size(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/cache/mod.rs:334:5
    |
334 |     pub fn is_empty(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/cache/mod.rs:335:9
    |
335 |         self.entries.read().unwrap().is_empty()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/cache/mod.rs:334:5
    |
334 |     pub fn is_empty(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_empty(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/circuit_breaker.rs:59:5
   |
59 |     pub fn builder() -> BreakerConfigBuilder {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> BreakerConfigBuilder`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/circuit_breaker.rs:64:5
   |
64 |     pub fn production_optimized() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn production_optimized() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/circuit_breaker.rs:76:5
   |
76 |     pub fn conservative() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn conservative() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/circuit_breaker.rs:96:5
   |
96 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:103:5
    |
103 |     pub fn production_optimized() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn production_optimized() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:110:5
    |
110 |     pub fn conservative() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn conservative() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:159:5
    |
159 |     pub fn build(self) -> BreakerConfig {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> BreakerConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:204:5
    |
204 |     pub fn new(name: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:209:5
    |
209 |     pub fn with_config(name: String, config: BreakerConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(name: String, config: BreakerConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:219:5
    |
219 |     pub fn state(&self) -> BreakerState {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn state(&self) -> BreakerState`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:224:5
    |
224 |     pub fn can_execute(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn can_execute(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-hooks/src/circuit_breaker.rs:239:13
    |
239 |             BreakerState::HalfOpen => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
228 ~             BreakerState::Open => {
229 |                 // Check if we should transition to half-open
...
237 |             }
238 ~             BreakerState::HalfOpen | BreakerState::Closed => true,
    |

warning: casts from `u32` to `u64` can be expressed infallibly using `From`
   --> llmspell-hooks/src/circuit_breaker.rs:257:34
    |
257 |                 if slow_calls >= self.config.slow_call_threshold as u64 {
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `u64::from` instead
    |
257 -                 if slow_calls >= self.config.slow_call_threshold as u64 {
257 +                 if slow_calls >= u64::from(self.config.slow_call_threshold) {
    |

warning: casts from `u32` to `u64` can be expressed infallibly using `From`
   --> llmspell-hooks/src/circuit_breaker.rs:267:29
    |
267 |             if successes >= self.config.success_threshold as u64 {
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `u64::from` instead
    |
267 -             if successes >= self.config.success_threshold as u64 {
267 +             if successes >= u64::from(self.config.success_threshold) {
    |

warning: casts from `u32` to `u64` can be expressed infallibly using `From`
   --> llmspell-hooks/src/circuit_breaker.rs:285:32
    |
285 |                 if failures >= self.config.failure_threshold as u64 {
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `u64::from` instead
    |
285 -                 if failures >= self.config.failure_threshold as u64 {
285 +                 if failures >= u64::from(self.config.failure_threshold) {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:323:5
    |
323 |     pub fn stats(&self) -> CircuitBreakerStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn stats(&self) -> CircuitBreakerStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:362:5
    |
362 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:367:5
    |
367 |     pub fn with_config(default_config: BreakerConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(default_config: BreakerConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:375:5
    |
375 |     pub fn get_or_create(&self, name: &str) -> Arc<CircuitBreaker> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_or_create(&self, name: &str) -> Arc<CircuitBreaker>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:388:5
    |
388 |     pub fn create_custom(&self, name: &str, config: BreakerConfig) -> Arc<CircuitBreaker> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_custom(&self, name: &str, config: BreakerConfig) -> Arc<CircuitBreaker>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/circuit_breaker.rs:395:5
    |
395 |     pub fn all_stats(&self) -> Vec<(String, CircuitBreakerStats)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn all_stats(&self) -> Vec<(String, CircuitBreakerStats)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/collectors/agent_output.rs:17:5
   |
17 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/collectors/agent_output.rs:21:5
   |
21 |     pub fn with_config(config: CollectionConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: CollectionConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/collectors/agent_output.rs:167:13
    |
167 |             format!("{}_error_{}.{}", agent_name, timestamp, extension)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
167 -             format!("{}_error_{}.{}", agent_name, timestamp, extension)
167 +             format!("{agent_name}_error_{timestamp}.{extension}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/collectors/agent_output.rs:169:13
    |
169 |             format!("{}_output_{}.{}", agent_name, timestamp, extension)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
169 -             format!("{}_output_{}.{}", agent_name, timestamp, extension)
169 +             format!("{agent_name}_output_{timestamp}.{extension}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/collectors/agent_output.rs:205:23
    |
205 |             tags.push(format!("model:{}", model));
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
205 -             tags.push(format!("model:{}", model));
205 +             tags.push(format!("model:{model}"));
    |

warning: returning a `str` unnecessarily tied to the lifetime of arguments
   --> llmspell-hooks/src/collectors/agent_output.rs:217:32
    |
217 |     fn artifact_type(&self) -> &str {
    |                                ^^^^ help: try: `&'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound
    = note: `-W clippy::unnecessary-literal-bound` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_literal_bound)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/collectors/tool_result.rs:17:5
   |
17 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/collectors/tool_result.rs:21:5
   |
21 |     pub fn with_config(config: CollectionConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: CollectionConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/collectors/tool_result.rs:165:13
    |
165 |             format!("{}_error_{}.json", tool_name, timestamp)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
165 -             format!("{}_error_{}.json", tool_name, timestamp)
165 +             format!("{tool_name}_error_{timestamp}.json")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/collectors/tool_result.rs:167:13
    |
167 |             format!("{}_result_{}.json", tool_name, timestamp)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
167 -             format!("{}_result_{}.json", tool_name, timestamp)
167 +             format!("{tool_name}_result_{timestamp}.json")
    |

warning: returning a `str` unnecessarily tied to the lifetime of arguments
   --> llmspell-hooks/src/collectors/tool_result.rs:197:32
    |
197 |     fn artifact_type(&self) -> &str {
    |                                ^^^^ help: try: `&'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound

warning: this function could have a `#[must_use]` attribute
  --> llmspell-hooks/src/collectors/mod.rs:75:1
   |
75 | pub fn is_size_acceptable(size: usize, config: &CollectionConfig) -> bool {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_size_acceptable(size: usize, config: &CollectionConfig) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-hooks/src/collectors/mod.rs:80:1
   |
80 | pub fn should_sample(config: &CollectionConfig) -> bool {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn should_sample(config: &CollectionConfig) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: adding items after statements is confusing, since items exist from the start of the scope
  --> llmspell-hooks/src/collectors/mod.rs:89:5
   |
89 |     use rand::Rng;
   |     ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements
   = note: `-W clippy::items-after-statements` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::items_after_statements)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/context.rs:54:5
   |
54 |     pub fn new(point: HookPoint, component_id: ComponentId) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(point: HookPoint, component_id: ComponentId) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/context.rs:69:5
   |
69 |     pub fn with_language(mut self, language: Language) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_language(mut self, language: Language) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-hooks/src/context.rs:69:5
   |
69 | /     pub fn with_language(mut self, language: Language) -> Self {
70 | |         self.language = language;
71 | |         self
72 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/context.rs:75:5
   |
75 |     pub fn with_correlation_id(mut self, id: Uuid) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_correlation_id(mut self, id: Uuid) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-hooks/src/context.rs:75:5
   |
75 | /     pub fn with_correlation_id(mut self, id: Uuid) -> Self {
76 | |         self.correlation_id = id;
77 | |         self
78 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/context.rs:81:5
   |
81 |     pub fn with_operation(mut self, operation: OperationContext) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_operation(mut self, operation: OperationContext) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-hooks/src/context.rs:81:5
   |
81 | /     pub fn with_operation(mut self, operation: OperationContext) -> Self {
82 | |         self.operation = Some(operation);
83 | |         self
84 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/context.rs:87:5
   |
87 |     pub fn child(&self, point: HookPoint) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn child(&self, point: HookPoint) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-hooks/src/context.rs:87:5
   |
87 | /     pub fn child(&self, point: HookPoint) -> Self {
88 | |         let mut child = Self::new(point, self.component_id.clone());
89 | |         child.correlation_id = self.correlation_id;
90 | |         child.language = self.language;
91 | |         child.parent_context = Some(Box::new(self.clone()));
92 | |         child
93 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:101:5
    |
101 |     pub fn get_data(&self, key: &str) -> Option<&JsonValue> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_data(&self, key: &str) -> Option<&JsonValue>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:111:5
    |
111 |     pub fn get_metadata(&self, key: &str) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_metadata(&self, key: &str) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: redundant closure
   --> llmspell-hooks/src/context.rs:112:36
    |
112 |         self.metadata.get(key).map(|s| s.as_str())
    |                                    ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::String::as_str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:116:5
    |
116 |     pub fn is_error(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_error(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:127:5
    |
127 |     pub fn error_message(&self) -> Option<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn error_message(&self) -> Option<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:136:5
    |
136 |     pub fn operation_parameters(&self) -> Option<&JsonValue> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn operation_parameters(&self) -> Option<&JsonValue>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:148:5
    |
148 |     pub fn operation_result(&self) -> Option<&JsonValue> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn operation_result(&self) -> Option<&JsonValue>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-hooks/src/context.rs:164:26
    |
164 | /// Builder for creating HookContext with fluent API
    |                          ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
164 - /// Builder for creating HookContext with fluent API
164 + /// Builder for creating `HookContext` with fluent API
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:170:5
    |
170 |     pub fn new(point: HookPoint, component_id: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(point: HookPoint, component_id: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:176:5
    |
176 |     pub fn language(mut self, language: Language) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn language(mut self, language: Language) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/context.rs:176:5
    |
176 | /     pub fn language(mut self, language: Language) -> Self {
177 | |         self.context.language = language;
178 | |         self
179 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:181:5
    |
181 |     pub fn correlation_id(mut self, id: Uuid) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn correlation_id(mut self, id: Uuid) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/context.rs:181:5
    |
181 | /     pub fn correlation_id(mut self, id: Uuid) -> Self {
182 | |         self.context.correlation_id = id;
183 | |         self
184 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:186:5
    |
186 |     pub fn data(mut self, key: String, value: JsonValue) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn data(mut self, key: String, value: JsonValue) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/context.rs:186:5
    |
186 | /     pub fn data(mut self, key: String, value: JsonValue) -> Self {
187 | |         self.context.data.insert(key, value);
188 | |         self
189 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:191:5
    |
191 |     pub fn metadata(mut self, key: String, value: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn metadata(mut self, key: String, value: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/context.rs:191:5
    |
191 | /     pub fn metadata(mut self, key: String, value: String) -> Self {
192 | |         self.context.metadata.insert(key, value);
193 | |         self
194 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:196:5
    |
196 |     pub fn operation(mut self, operation: OperationContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn operation(mut self, operation: OperationContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/context.rs:196:5
    |
196 | /     pub fn operation(mut self, operation: OperationContext) -> Self {
197 | |         self.context.operation = Some(operation);
198 | |         self
199 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:201:5
    |
201 |     pub fn parent(mut self, parent: HookContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn parent(mut self, parent: HookContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/context.rs:201:5
    |
201 | /     pub fn parent(mut self, parent: HookContext) -> Self {
202 | |         self.context.parent_context = Some(Box::new(parent));
203 | |         self
204 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/context.rs:206:5
    |
206 |     pub fn build(self) -> HookContext {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> HookContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/coordination/dependency_graph.rs:118:17
    |
118 |                 write!(f, "Circular dependency detected: {:?}", cycle)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
118 -                 write!(f, "Circular dependency detected: {:?}", cycle)
118 +                 write!(f, "Circular dependency detected: {cycle:?}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/coordination/dependency_graph.rs:123:18
    |
123 |               } => write!(
    |  __________________^
124 | |                 f,
125 | |                 "Component {:?} depends on missing component {:?}",
126 | |                 component, missing_dependency
127 | |             ),
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/coordination/dependency_graph.rs:129:17
    |
129 | /                 write!(
130 | |                     f,
131 | |                     "Invalid dependency from {:?} to {:?}: {}",
132 | |                     from, to, reason
133 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/dependency_graph.rs:143:5
    |
143 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/dependency_graph.rs:152:5
    |
152 |     pub fn add_node(&mut self, node: DependencyNode) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/dependency_graph.rs:175:5
    |
175 | /     pub fn add_dependency(
176 | |         &mut self,
177 | |         component: &ComponentId,
178 | |         depends_on: &ComponentId,
179 | |         hook_point: HookPoint,
180 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/dependency_graph.rs:188:5
    |
188 | /     pub fn add_dependency_with_options(
189 | |         &mut self,
190 | |         component: &ComponentId,
191 | |         depends_on: &ComponentId,
...   |
194 | |         reason: Option<String>,
195 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/coordination/dependency_graph.rs:192:21
    |
192 |         hook_point: HookPoint,
    |                     ^^^^^^^^^ help: consider taking a reference instead: `&HookPoint`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/dependency_graph.rs:249:5
    |
249 | /     pub fn remove_dependency(
250 | |         &mut self,
251 | |         component: &ComponentId,
252 | |         depends_on: &ComponentId,
253 | |         hook_point: HookPoint,
254 | |     ) -> Result<bool> {
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/coordination/dependency_graph.rs:253:21
    |
253 |         hook_point: HookPoint,
    |                     ^^^^^^^^^ help: consider taking a reference instead: `&HookPoint`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/dependency_graph.rs:280:5
    |
280 |     pub fn get_execution_order(&self) -> Result<ExecutionOrder> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/dependency_graph.rs:285:5
    |
285 |     pub fn get_execution_order_for_hook(&self, hook_point: HookPoint) -> Result<ExecutionOrder> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/coordination/dependency_graph.rs:285:60
    |
285 |     pub fn get_execution_order_for_hook(&self, hook_point: HookPoint) -> Result<ExecutionOrder> {
    |                                                            ^^^^^^^^^ help: consider taking a reference instead: `&HookPoint`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/dependency_graph.rs:331:5
    |
331 |     pub fn detect_cycles(&self) -> Result<(), DependencyError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/dependency_graph.rs:480:5
    |
480 |     pub fn new(component_id: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(component_id: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/dependency_graph.rs:490:5
    |
490 |     pub fn add_hook_point(mut self, hook_point: HookPoint) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_hook_point(mut self, hook_point: HookPoint) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/coordination/dependency_graph.rs:490:5
    |
490 | /     pub fn add_hook_point(mut self, hook_point: HookPoint) -> Self {
491 | |         self.hook_points.insert(hook_point);
492 | |         self
493 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/dependency_graph.rs:496:5
    |
496 |     pub fn with_priority(mut self, priority: i32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_priority(mut self, priority: i32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/coordination/dependency_graph.rs:496:5
    |
496 | /     pub fn with_priority(mut self, priority: i32) -> Self {
497 | |         self.priority = priority;
498 | |         self
499 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/coordination/dependency_graph.rs:502:5
    |
502 | /     pub fn with_metadata(mut self, key: impl Into<String>, value: impl Into<String>) -> Self {
503 | |         self.metadata.insert(key.into(), value.into());
504 | |         self
505 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/coordination/event_correlation.rs:61:5
   |
61 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/coordination/event_correlation.rs:66:5
   |
66 |     pub fn from_uuid(uuid: Uuid) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_uuid(uuid: Uuid) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/coordination/event_correlation.rs:71:5
   |
71 |     pub fn as_uuid(&self) -> Uuid {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn as_uuid(&self) -> Uuid`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/coordination/event_correlation.rs:76:5
   |
76 |     pub fn create_child(&self) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_child(&self) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-hooks/src/coordination/event_correlation.rs:76:5
   |
76 | /     pub fn create_child(&self) -> Self {
77 | |         // Simply create a new UUID for child - they should be unique
78 | |         Self::new()
79 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/event_correlation.rs:225:5
    |
225 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/event_correlation.rs:230:5
    |
230 |     pub fn with_config(config: CorrelatorConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: CorrelatorConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/event_correlation.rs:269:5
    |
269 | /     pub async fn start_chain_trace(
270 | |         &self,
271 | |         correlation_id: CorrelationId,
272 | |         components: Vec<ComponentId>,
273 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-hooks/src/coordination/event_correlation.rs:280:9
    |
280 |         trace.components = components.clone();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `trace.components.clone_from(&components)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones
    = note: `-W clippy::assigning-clones` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::assigning_clones)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/event_correlation.rs:298:5
    |
298 | /     pub async fn record_event(
299 | |         &self,
300 | |         correlation_id: &CorrelationId,
301 | |         component_id: &ComponentId,
302 | |         hook_point: HookPoint,
303 | |         message: impl Into<String>,
304 | |     ) -> Result<Uuid> {
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/event_correlation.rs:319:5
    |
319 | /     pub async fn record_event_with_details(
320 | |         &self,
321 | |         correlation_id: &CorrelationId,
322 | |         component_id: &ComponentId,
...   |
327 | |         data: HashMap<String, serde_json::Value>,
328 | |     ) -> Result<Uuid> {
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/event_correlation.rs:403:5
    |
403 |     pub async fn complete_trace(&self, correlation_id: &CorrelationId) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/event_correlation.rs:423:5
    |
423 | /     pub async fn fail_trace(
424 | |         &self,
425 | |         correlation_id: &CorrelationId,
426 | |         error: impl Into<String>,
427 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/event_correlation.rs:449:5
    |
449 |     pub async fn get_trace(&self, correlation_id: &CorrelationId) -> Result<EventTrace> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/event_correlation.rs:478:5
    |
478 | /     pub async fn analyze_trace_performance(
479 | |         &self,
480 | |         correlation_id: &CorrelationId,
481 | |     ) -> Result<TraceAnalysis> {
    | |______________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/mod.rs:179:5
    |
179 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/mod.rs:184:5
    |
184 |     pub fn with_config(config: CoordinatorConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: CoordinatorConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/mod.rs:195:5
    |
195 | /     pub async fn register_chain(
196 | |         &self,
197 | |         name: impl Into<String>,
198 | |         mut chain: ExecutionChain,
199 | |     ) -> Result<Uuid> {
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-hooks/src/coordination/mod.rs:201:9
    |
201 |         chain.name = name.clone();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `chain.name.clone_from(&name)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/mod.rs:225:5
    |
225 | /     pub async fn start_chain_execution(
226 | |         &self,
227 | |         chain_name: &str,
228 | |         _initial_context: HookContext,
229 | |     ) -> Result<CorrelationId> {
    | |______________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/mod.rs:268:5
    |
268 | /     pub async fn execute_next_component(
269 | |         &self,
270 | |         correlation_id: &CorrelationId,
271 | |         hook_context: HookContext,
272 | |     ) -> Result<(HookResult, Option<CrossComponentContext>)> {
    | |____________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/coordination/mod.rs:302:5
    |
302 |     pub async fn cleanup_chain(&self, chain_name: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/mod.rs:318:5
    |
318 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/mod.rs:330:5
    |
330 |     pub fn add_component(mut self, component_id: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_component(mut self, component_id: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/coordination/mod.rs:330:5
    |
330 | /     pub fn add_component(mut self, component_id: ComponentId) -> Self {
331 | |         self.components.push(component_id);
332 | |         self
333 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/coordination/mod.rs:336:5
    |
336 | /     pub fn with_name(mut self, name: impl Into<String>) -> Self {
337 | |         self.name = name.into();
338 | |         self
339 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/coordination/mod.rs:342:5
    |
342 | /     pub fn with_metadata(mut self, key: impl Into<String>, value: impl Into<String>) -> Self {
343 | |         self.metadata.insert(key.into(), value.into());
344 | |         self
345 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/mod.rs:348:5
    |
348 |     pub fn get_next_component(&self, current_index: usize) -> Option<&ComponentId> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_next_component(&self, current_index: usize) -> Option<&ComponentId>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/coordination/mod.rs:353:5
    |
353 |     pub fn is_last_component(&self, current_index: usize) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_last_component(&self, current_index: usize) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/distributed/mod.rs:12:9
   |
12 | //! - **DistributedHookContext**: Extended context for network-aware hooks
   |         ^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
12 - //! - **DistributedHookContext**: Extended context for network-aware hooks
12 + //! - **`DistributedHookContext`**: Extended context for network-aware hooks
   |

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-hooks/src/distributed/context.rs:41:5
   |
41 | /     pub fn with_address(mut self, address: impl Into<String>) -> Self {
42 | |         self.network_address = Some(address.into());
43 | |         self
44 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-hooks/src/distributed/context.rs:47:5
   |
47 | /     pub fn with_capability(mut self, key: impl Into<String>, value: impl Into<String>) -> Self {
48 | |         self.capabilities.insert(key.into(), value.into());
49 | |         self
50 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/distributed/context.rs:53:5
   |
53 |     pub fn unique_id(&self) -> String {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn unique_id(&self) -> String`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:126:5
    |
126 |     pub fn with_broadcast(mut self, broadcast: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_broadcast(mut self, broadcast: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:126:5
    |
126 | /     pub fn with_broadcast(mut self, broadcast: bool) -> Self {
127 | |         self.broadcast = broadcast;
128 | |         self
129 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:132:5
    |
132 |     pub fn with_target(mut self, agent: RemoteAgentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_target(mut self, agent: RemoteAgentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:132:5
    |
132 | /     pub fn with_target(mut self, agent: RemoteAgentId) -> Self {
133 | |         self.target_agents.insert(agent);
134 | |         self
135 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:138:5
    |
138 |     pub fn with_max_hops(mut self, hops: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_hops(mut self, hops: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:138:5
    |
138 | /     pub fn with_max_hops(mut self, hops: u32) -> Self {
139 | |         self.max_hops = hops;
140 | |         self
141 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:144:5
    |
144 |     pub fn with_await_remote(mut self, await_remote: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_await_remote(mut self, await_remote: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:144:5
    |
144 | /     pub fn with_await_remote(mut self, await_remote: bool) -> Self {
145 | |         self.await_remote = await_remote;
146 | |         self
147 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:150:5
    |
150 |     pub fn with_timeout(mut self, timeout: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_timeout(mut self, timeout: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:150:5
    |
150 | /     pub fn with_timeout(mut self, timeout: Duration) -> Self {
151 | |         self.remote_timeout = timeout;
152 | |         self
153 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:156:5
    |
156 |     pub fn can_propagate(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn can_propagate(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:207:5
    |
207 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:212:5
    |
212 | /     pub fn with_auth_token(mut self, token: impl Into<String>) -> Self {
213 | |         self.auth_token = Some(token.into());
214 | |         self
215 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:218:5
    |
218 |     pub fn with_trusted_agent(mut self, agent: RemoteAgentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_trusted_agent(mut self, agent: RemoteAgentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:218:5
    |
218 | /     pub fn with_trusted_agent(mut self, agent: RemoteAgentId) -> Self {
219 | |         self.trusted_agents.insert(agent);
220 | |         self
221 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:224:5
    |
224 | /     pub fn with_allowed_hook_point(mut self, hook_point: impl Into<String>) -> Self {
225 | |         self.allowed_hook_points.insert(hook_point.into());
226 | |         self
227 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:230:5
    |
230 |     pub fn is_agent_trusted(&self, agent: &RemoteAgentId) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_agent_trusted(&self, agent: &RemoteAgentId) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:235:5
    |
235 |     pub fn is_hook_point_allowed(&self, hook_point: &str) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_hook_point_allowed(&self, hook_point: &str) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:240:5
    |
240 |     pub fn is_timestamp_valid(&self, max_age: Duration) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_timestamp_valid(&self, max_age: Duration) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:301:5
    |
301 |     pub fn from_local(base_context: HookContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_local(base_context: HookContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:315:5
    |
315 |     pub fn with_source_agent(mut self, agent: RemoteAgentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_source_agent(mut self, agent: RemoteAgentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:315:5
    |
315 | /     pub fn with_source_agent(mut self, agent: RemoteAgentId) -> Self {
316 | |         self.source_agent = Some(agent);
317 | |         self
318 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:321:5
    |
321 |     pub fn with_target_agent(mut self, agent: RemoteAgentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_target_agent(mut self, agent: RemoteAgentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:321:5
    |
321 | /     pub fn with_target_agent(mut self, agent: RemoteAgentId) -> Self {
322 | |         self.target_agents.push(agent);
323 | |         self
324 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:327:5
    |
327 |     pub fn with_propagation_flags(mut self, flags: PropagationFlags) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_propagation_flags(mut self, flags: PropagationFlags) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:327:5
    |
327 | /     pub fn with_propagation_flags(mut self, flags: PropagationFlags) -> Self {
328 | |         self.propagation_flags = flags;
329 | |         self
330 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:333:5
    |
333 |     pub fn with_security_context(mut self, context: SecurityContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_security_context(mut self, context: SecurityContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:333:5
    |
333 | /     pub fn with_security_context(mut self, context: SecurityContext) -> Self {
334 | |         self.security_context = context;
335 | |         self
336 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:339:5
    |
339 | /     pub fn with_metadata(mut self, key: impl Into<String>, value: impl Into<String>) -> Self {
340 | |         self.distributed_metadata.insert(key.into(), value.into());
341 | |         self
342 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:345:5
    |
345 |     pub fn is_remote_execution(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_remote_execution(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:350:5
    |
350 |     pub fn should_propagate(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn should_propagate(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:361:5
    |
361 |     pub fn successful_remote_results(&self) -> Vec<&RemoteExecutionResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn successful_remote_results(&self) -> Vec<&RemoteExecutionResult>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:366:5
    |
366 |     pub fn all_remote_succeeded(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn all_remote_succeeded(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:371:5
    |
371 |     pub fn create_propagated_context(&self) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_propagated_context(&self) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:371:5
    |
371 | /     pub fn create_propagated_context(&self) -> Self {
372 | |         let mut propagated = self.clone();
373 | |         propagated.propagation_flags.increment_hops();
374 | |         propagated.remote_results.clear();
375 | |         propagated
376 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-hooks/src/distributed/context.rs:379:17
    |
379 | /// Builder for DistributedHookContext
    |                 ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
379 - /// Builder for DistributedHookContext
379 + /// Builder for `DistributedHookContext`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:386:5
    |
386 |     pub fn new(base_context: HookContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(base_context: HookContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:393:5
    |
393 |     pub fn source_agent(mut self, agent: RemoteAgentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn source_agent(mut self, agent: RemoteAgentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:393:5
    |
393 | /     pub fn source_agent(mut self, agent: RemoteAgentId) -> Self {
394 | |         self.context.source_agent = Some(agent);
395 | |         self
396 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:399:5
    |
399 |     pub fn target_agent(mut self, agent: RemoteAgentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn target_agent(mut self, agent: RemoteAgentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:399:5
    |
399 | /     pub fn target_agent(mut self, agent: RemoteAgentId) -> Self {
400 | |         self.context.target_agents.push(agent);
401 | |         self
402 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:405:5
    |
405 |     pub fn propagation_flags(mut self, flags: PropagationFlags) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn propagation_flags(mut self, flags: PropagationFlags) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:405:5
    |
405 | /     pub fn propagation_flags(mut self, flags: PropagationFlags) -> Self {
406 | |         self.context.propagation_flags = flags;
407 | |         self
408 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:411:5
    |
411 |     pub fn security_context(mut self, context: SecurityContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn security_context(mut self, context: SecurityContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:411:5
    |
411 | /     pub fn security_context(mut self, context: SecurityContext) -> Self {
412 | |         self.context.security_context = context;
413 | |         self
414 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:417:5
    |
417 | /     pub fn metadata(mut self, key: impl Into<String>, value: impl Into<String>) -> Self {
418 | |         self.context
419 | |             .distributed_metadata
420 | |             .insert(key.into(), value.into());
421 | |         self
422 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:425:5
    |
425 |     pub fn network_correlation_id(mut self, id: Uuid) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn network_correlation_id(mut self, id: Uuid) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/distributed/context.rs:425:5
    |
425 | /     pub fn network_correlation_id(mut self, id: Uuid) -> Self {
426 | |         self.context.network_correlation_id = id;
427 | |         self
428 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/distributed/context.rs:431:5
    |
431 |     pub fn build(self) -> DistributedHookContext {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> DistributedHookContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/executor.rs:90:5
   |
90 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/executor.rs:95:5
   |
95 |     pub fn with_config(config: HookExecutorConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: HookExecutorConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/executor.rs:115:5
    |
115 | /     pub async fn execute_hook(
116 | |         &self,
117 | |         hook: &dyn Hook,
118 | |         context: &mut HookContext,
119 | |     ) -> Result<HookResult> {
    | |___________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (109/100)
   --> llmspell-hooks/src/executor.rs:115:5
    |
115 | /     pub async fn execute_hook(
116 | |         &self,
117 | |         hook: &dyn Hook,
118 | |         context: &mut HookContext,
...   |
315 | |         result
316 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/executor.rs:145:47
    |
145 |                   return Ok(HookResult::Skipped(format!(
    |  _______________________________________________^
146 | |                     "Circuit breaker open for hook: {}",
147 | |                     hook_name
148 | |                 )));
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/executor.rs:319:5
    |
319 | /     pub async fn execute_hooks(
320 | |         &self,
321 | |         hooks: &[Arc<dyn Hook>],
322 | |         context: &mut HookContext,
323 | |     ) -> Result<Vec<HookResult>> {
    | |________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:414:5
    |
414 |     pub fn get_metrics(&self, hook_name: &str) -> Option<PerformanceMetrics> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_metrics(&self, hook_name: &str) -> Option<PerformanceMetrics>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:419:5
    |
419 |     pub fn get_all_metrics(&self) -> HashMap<String, PerformanceMetrics> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_all_metrics(&self) -> HashMap<String, PerformanceMetrics>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:424:5
    |
424 |     pub fn is_within_overhead_target(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_within_overhead_target(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:457:5
    |
457 | /     pub fn get_circuit_breaker_stats(
458 | |         &self,
459 | |     ) -> Vec<(String, crate::circuit_breaker::CircuitBreakerStats)> {
    | |___________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
457 ~     #[must_use] pub fn get_circuit_breaker_stats(
458 +         &self,
459 ~     ) -> Vec<(String, crate::circuit_breaker::CircuitBreakerStats)> {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:464:5
    |
464 |     pub fn generate_performance_report(&self) -> crate::performance::PerformanceReport {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_performance_report(&self) -> crate::performance::PerformanceReport`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:475:5
    |
475 |     pub fn is_persistence_enabled(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_persistence_enabled(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:485:5
    |
485 |     pub fn is_correlation_tracking_enabled(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_correlation_tracking_enabled(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:490:5
    |
490 |     pub fn correlation_tracker(&self) -> Option<Arc<EventCorrelationTracker>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn correlation_tracker(&self) -> Option<Arc<EventCorrelationTracker>>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/executor.rs:495:5
    |
495 | /     pub async fn execute_artifact_hooks(
496 | |         &self,
497 | |         artifact_event: &llmspell_core::events::ArtifactEvent,
498 | |         hooks: &[Arc<dyn Hook>],
499 | |     ) -> Result<Vec<HookResult>> {
    | |________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
   --> llmspell-hooks/src/executor.rs:582:17
    |
582 | /// Builder for HookExecutor
    |                 ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
582 - /// Builder for HookExecutor
582 + /// Builder for `HookExecutor`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:588:5
    |
588 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:594:5
    |
594 |     pub fn with_circuit_breaker(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_circuit_breaker(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/executor.rs:594:5
    |
594 | /     pub fn with_circuit_breaker(mut self, enabled: bool) -> Self {
595 | |         self.config.enable_circuit_breaker = enabled;
596 | |         self
597 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:599:5
    |
599 |     pub fn with_performance_monitoring(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_performance_monitoring(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/executor.rs:599:5
    |
599 | /     pub fn with_performance_monitoring(mut self, enabled: bool) -> Self {
600 | |         self.config.enable_performance_monitoring = enabled;
601 | |         self
602 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:604:5
    |
604 |     pub fn with_max_execution_time(mut self, duration: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_execution_time(mut self, duration: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/executor.rs:604:5
    |
604 | /     pub fn with_max_execution_time(mut self, duration: Duration) -> Self {
605 | |         self.config.max_execution_time = duration;
606 | |         self
607 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:609:5
    |
609 |     pub fn with_overhead_target(mut self, target: f64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_overhead_target(mut self, target: f64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/executor.rs:609:5
    |
609 | /     pub fn with_overhead_target(mut self, target: f64) -> Self {
610 | |         self.config.performance_overhead_target = target;
611 | |         self
612 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:614:5
    |
614 |     pub fn with_breaker_config(mut self, config: BreakerConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_breaker_config(mut self, config: BreakerConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/executor.rs:614:5
    |
614 | /     pub fn with_breaker_config(mut self, config: BreakerConfig) -> Self {
615 | |         self.config.breaker_config = config;
616 | |         self
617 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:619:5
    |
619 |     pub fn with_persistence(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_persistence(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/executor.rs:619:5
    |
619 | /     pub fn with_persistence(mut self, enabled: bool) -> Self {
620 | |         self.config.enable_persistence = enabled;
621 | |         self
622 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/executor.rs:624:5
    |
624 |     pub fn build(self) -> HookExecutor {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> HookExecutor`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/performance.rs:84:5
   |
84 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/performance.rs:89:5
   |
89 |     pub fn with_config(config: PerformanceConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: PerformanceConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/performance.rs:98:5
   |
98 |     pub fn start_execution(&self, hook_name: &str) -> ExecutionTimer {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn start_execution(&self, hook_name: &str) -> ExecutionTimer`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/performance.rs:108:5
    |
108 |     pub fn record_execution(&self, hook_name: &str, duration: Duration) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/performance.rs:119:35
    |
119 |         let cutoff = Utc::now() - chrono::Duration::from_std(self.config.retention_period).unwrap();
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/performance.rs:143:5
    |
143 |     pub fn get_metrics(&self, hook_name: &str) -> Option<PerformanceMetrics> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_metrics(&self, hook_name: &str) -> Option<PerformanceMetrics>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: called `map(<f>).unwrap_or(<a>)` on an `Option` value
   --> llmspell-hooks/src/performance.rs:151:31
    |
151 |           let execution_count = self
    |  _______________________________^
152 | |             .counters
153 | |             .read()
154 | |             .get(hook_name)
155 | |             .map(|c| c.load(Ordering::Relaxed))
156 | |             .unwrap_or(0);
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`
help: use `map_or(<a>, <f>)` instead
    |
155 -             .map(|c| c.load(Ordering::Relaxed))
155 +             .map_or(0, |c| c.load(Ordering::Relaxed));
    |

warning: unnecessary boolean `not` operation
   --> llmspell-hooks/src/performance.rs:172:28
    |
172 |           let avg_duration = if !hook_samples.is_empty() {
    |  ____________________________^
173 | |             #[allow(clippy::cast_possible_truncation)]
174 | |             let len_u32 = hook_samples.len() as u32;
175 | |             total_duration / len_u32
176 | |         } else {
177 | |             Duration::ZERO
178 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
    = note: `-W clippy::if-not-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::if_not_else)]`
help: try
    |
172 ~         let avg_duration = if hook_samples.is_empty() {
173 +             Duration::ZERO
174 +         } else {
175 +             #[allow(clippy::cast_possible_truncation)]
176 +             let len_u32 = hook_samples.len() as u32;
177 +             total_duration / len_u32
178 ~         };
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/performance.rs:223:5
    |
223 |     pub fn get_all_metrics(&self) -> HashMap<String, PerformanceMetrics> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_all_metrics(&self) -> HashMap<String, PerformanceMetrics>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/performance.rs:247:5
    |
247 |     pub fn is_within_threshold(&self, hook_name: &str, threshold: Duration) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_within_threshold(&self, hook_name: &str, threshold: Duration) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/performance.rs:256:5
    |
256 |     pub fn get_slow_hooks(&self, threshold: Duration) -> Vec<(String, PerformanceMetrics)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_slow_hooks(&self, threshold: Duration) -> Vec<(String, PerformanceMetrics)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/performance.rs:284:5
    |
284 |     pub fn complete(mut self) -> Duration {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn complete(mut self) -> Duration`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/performance.rs:315:5
    |
315 |     pub fn generate_report(&self, slow_threshold: Duration) -> PerformanceReport {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_report(&self, slow_threshold: Duration) -> PerformanceReport`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/inspector.rs:102:5
    |
102 | /     pub async fn query_executions(
103 | |         &self,
104 | |         query: InspectionQuery,
105 | |     ) -> Result<Vec<SerializedHookExecution>> {
    | |_____________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/inspector.rs:133:5
    |
133 | /     pub async fn analyze_executions(
134 | |         &self,
135 | |         executions: &[SerializedHookExecution],
136 | |     ) -> Result<ExecutionAnalysis> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: casts from `i32` to `f64` can be expressed infallibly using `From`
   --> llmspell-hooks/src/persistence/inspector.rs:208:26
    |
208 |         let error_rate = *result_counts.get("Cancel").unwrap_or(&0) as f64 / total_exec_f64;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `f64::from` instead
    |
208 -         let error_rate = *result_counts.get("Cancel").unwrap_or(&0) as f64 / total_exec_f64;
208 +         let error_rate = f64::from(*result_counts.get("Cancel").unwrap_or(&0)) / total_exec_f64;
    |

warning: casts from `i32` to `f64` can be expressed infallibly using `From`
   --> llmspell-hooks/src/persistence/inspector.rs:211:13
    |
211 |             *result_counts.get("Modified").unwrap_or(&0) as f64 / total_exec_f64;
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `f64::from` instead
    |
211 -             *result_counts.get("Modified").unwrap_or(&0) as f64 / total_exec_f64;
211 +             f64::from(*result_counts.get("Modified").unwrap_or(&0)) / total_exec_f64;
    |

warning: casts from `i32` to `f64` can be expressed infallibly using `From`
   --> llmspell-hooks/src/persistence/inspector.rs:213:33
    |
213 |         let cancellation_rate = *result_counts.get("Cancel").unwrap_or(&0) as f64 / total_exec_f64;
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `f64::from` instead
    |
213 -         let cancellation_rate = *result_counts.get("Cancel").unwrap_or(&0) as f64 / total_exec_f64;
213 +         let cancellation_rate = f64::from(*result_counts.get("Cancel").unwrap_or(&0)) / total_exec_f64;
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/inspector.rs:245:5
    |
245 | /     pub async fn detect_patterns(
246 | |         &self,
247 | |         executions: &[SerializedHookExecution],
248 | |     ) -> Result<Vec<ExecutionPattern>> {
    | |______________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/inspector.rs:270:5
    |
270 | /     pub async fn compare_executions(
271 | |         &self,
272 | |         set_a: &[SerializedHookExecution],
273 | |         set_b: &[SerializedHookExecution],
274 | |     ) -> Result<ComparisonResult> {
    | |_________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: unused `self` argument
   --> llmspell-hooks/src/persistence/inspector.rs:311:9
    |
311 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-hooks/src/persistence/inspector.rs:342:9
    |
342 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-hooks/src/persistence/inspector.rs:375:9
    |
375 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-hooks/src/persistence/inspector.rs:408:9
    |
408 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/persistence/replay.rs:58:5
   |
58 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-hooks/src/persistence/replay.rs:65:5
   |
65 | /     pub async fn replay_execution(
66 | |         &mut self,
67 | |         hook: &dyn ReplayableHook,
68 | |         execution: &SerializedHookExecution,
69 | |         options: &ReplayOptions,
70 | |     ) -> Result<HookResult> {
   | |___________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/replay.rs:124:5
    |
124 | /     pub async fn replay_executions(
125 | |         &mut self,
126 | |         hooks: &[(Box<dyn ReplayableHook>, SerializedHookExecution)],
127 | |         options: &ReplayOptions,
128 | |     ) -> Result<Vec<HookResult>> {
    | |________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/persistence/replay.rs:156:5
    |
156 |     pub fn get_statistics(&self) -> (u64, u64, u64, Duration) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_statistics(&self) -> (u64, u64, u64, Duration)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/replay_manager.rs:166:5
    |
166 |     pub async fn start_replay_session(&self, config: ReplaySessionConfig) -> Result<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/replay_manager.rs:186:5
    |
186 | /     pub async fn replay_by_correlation(
187 | |         &self,
188 | |         session_name: &str,
189 | |         correlation_id: Uuid,
190 | |         options: ReplayOptions,
191 | |     ) -> Result<Vec<HookResult>> {
    | |________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/replay_manager.rs:215:5
    |
215 | /     pub async fn replay_executions(
216 | |         &self,
217 | |         session_name: &str,
218 | |         executions: Vec<SerializedHookExecution>,
219 | |         options: ReplayOptions,
220 | |     ) -> Result<Vec<HookResult>> {
    | |________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: strict comparison of `f32` or `f64`
   --> llmspell-hooks/src/persistence/replay_manager.rs:290:39
    |
290 |         if options.simulate_timing && session.config.speed_multiplier != 1.0 {
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider comparing them within some margin of error: `(session.config.speed_multiplier - 1.0).abs() > error_margin`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#float_cmp
    = note: `-W clippy::float-cmp` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::float_cmp)]`

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/persistence/replay_manager.rs:348:5
    |
348 |     pub async fn build_timeline(&self, correlation_id: Uuid) -> Result<ReplayTimeline> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/persistence/replay_manager.rs:364:26
    |
364 |         let start_time = executions.first().unwrap().timestamp;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/replay_manager.rs:348:5
    |
348 |     pub async fn build_timeline(&self, correlation_id: Uuid) -> Result<ReplayTimeline> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: unused `self` argument
   --> llmspell-hooks/src/persistence/replay_manager.rs:420:21
    |
420 |     fn should_break(&self, session: &ReplaySession, execution: &SerializedHookExecution) -> bool {
    |                     ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/replay_manager.rs:456:5
    |
456 |     pub fn add_breakpoint(&self, session_name: &str, breakpoint: ReplayBreakpoint) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/persistence/replay_manager.rs:467:5
    |
467 |     pub fn get_session(&self, session_name: &str) -> Option<ReplaySession> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_session(&self, session_name: &str) -> Option<ReplaySession>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/replay_manager.rs:472:5
    |
472 |     pub fn end_session(&self, session_name: &str) -> Result<ReplaySession> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/persistence/retention.rs:46:5
   |
46 |     pub fn retain_all() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn retain_all() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/persistence/retention.rs:59:5
   |
59 |     pub fn short_term() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn short_term() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/persistence/retention.rs:72:5
   |
72 |     pub fn long_term() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn long_term() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/persistence/retention.rs:111:5
    |
111 |     pub fn new(default_policy: RetentionPolicy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(default_policy: RetentionPolicy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/retention.rs:134:5
    |
134 |     pub async fn apply_retention_policies(&self, hook_id: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/retention.rs:159:5
    |
159 |     pub async fn apply_all_retention_policies(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/persistence/retention.rs:168:26
    |
168 |                 .context(format!("Failed to apply retention for hook: {}", hook_id))?;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
168 -                 .context(format!("Failed to apply retention for hook: {}", hook_id))?;
168 +                 .context(format!("Failed to apply retention for hook: {hook_id}"))?;
    |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/persistence/storage.rs:18:27
   |
18 |     /// Hook type (e.g., "rate_limit", "cost_tracking", "security")
   |                           ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
18 -     /// Hook type (e.g., "rate_limit", "cost_tracking", "security")
18 +     /// Hook type (e.g., "`rate_limit`", "cost_tracking", "security")
   |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/persistence/storage.rs:18:41
   |
18 |     /// Hook type (e.g., "rate_limit", "cost_tracking", "security")
   |                                         ^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
18 -     /// Hook type (e.g., "rate_limit", "cost_tracking", "security")
18 +     /// Hook type (e.g., "rate_limit", "`cost_tracking`", "security")
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/persistence/storage.rs:42:5
   |
42 | /     pub fn new(
43 | |         hook_type: String,
44 | |         triggering_component: ComponentType,
45 | |         component_id: String,
46 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
42 ~     #[must_use] pub fn new(
43 +         hook_type: String,
44 +         triggering_component: ComponentType,
45 +         component_id: String,
46 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/persistence/storage.rs:74:5
   |
74 |     pub fn get_property(&self, key: &str) -> Option<&serde_json::Value> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_property(&self, key: &str) -> Option<&serde_json::Value>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/persistence/storage.rs:111:5
    |
111 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/persistence/storage.rs:116:5
    |
116 | /     pub fn with_persistent_state(mut self, state_manager: Arc<dyn StateManager>) -> Self {
117 | |         self.persistent_state_manager = Some(state_manager);
118 | |         self
119 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/storage.rs:127:5
    |
127 | /     pub async fn store_metadata(
128 | |         &self,
129 | |         correlation_id: &Uuid,
130 | |         metadata: &HookMetadata,
131 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/storage.rs:172:5
    |
172 |     pub async fn load_metadata(&self, correlation_id: &Uuid) -> Result<Option<HookMetadata>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/persistence/storage.rs:192:48
    |
192 |                 let scope = StateScope::Custom(format!("hook_metadata_{}", hook_type));
    |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
192 -                 let scope = StateScope::Custom(format!("hook_metadata_{}", hook_type));
192 +                 let scope = StateScope::Custom(format!("hook_metadata_{hook_type}"));
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/storage.rs:212:5
    |
212 |     pub async fn delete_metadata(&self, correlation_id: &Uuid) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/storage.rs:219:5
    |
219 |     pub async fn list_metadata_keys(&self, prefix: &str) -> Result<Vec<String>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/persistence/storage.rs:230:5
    |
230 |     pub fn get_statistics(&self) -> StorageStatistics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_statistics(&self) -> StorageStatistics`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unused `self` argument
   --> llmspell-hooks/src/persistence/storage.rs:240:30
    |
240 |     fn generate_metadata_key(&self, correlation_id: &Uuid) -> String {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/persistence/storage.rs:241:9
    |
241 |         format!("hook_metadata:{}", correlation_id)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
241 -         format!("hook_metadata:{}", correlation_id)
241 +         format!("hook_metadata:{correlation_id}")
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/persistence/storage_backend.rs:75:5
   |
75 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/storage_backend.rs:357:5
    |
357 |     pub async fn new(root_path: impl AsRef<Path>, compression_enabled: bool) -> Result<Self> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/persistence/storage_backend.rs:395:19
    |
395 |             .join(format!("{}.{}", id_str, extension))
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
395 -             .join(format!("{}.{}", id_str, extension))
395 +             .join(format!("{id_str}.{extension}"))
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/mod.rs:117:5
    |
117 | /     pub async fn persist_execution(
118 | |         &self,
119 | |         hook: &dyn ReplayableHook,
120 | |         context: &HookContext,
...   |
123 | |         metadata: HookMetadata,
124 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/mod.rs:162:5
    |
162 | /     pub async fn get_executions_with_metadata(
163 | |         &self,
164 | |         correlation_id: Uuid,
165 | |     ) -> Result<Vec<(SerializedHookExecution, HookMetadata)>> {
    | |_____________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/mod.rs:183:5
    |
183 |     pub async fn get_storage_statistics(&self) -> Result<StorageStats> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/persistence/mod.rs:188:5
    |
188 |     pub async fn archive_old_executions(&self, older_than: SystemTime) -> Result<u64> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/priority.rs:13:56
   |
13 |     /// Lower priority values execute first (HIGHEST = i32::MIN executes before HIGH = -100)
   |                                                        ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
13 -     /// Lower priority values execute first (HIGHEST = i32::MIN executes before HIGH = -100)
13 +     /// Lower priority values execute first (HIGHEST = `i32::MIN` executes before HIGH = -100)
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/priority.rs:14:5
   |
14 |     pub fn compare(a: &Priority, b: &Priority) -> Ordering {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn compare(a: &Priority, b: &Priority) -> Ordering`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/priority.rs:27:5
   |
27 |     pub fn is_in_range(priority: &Priority, min: &Priority, max: &Priority) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_in_range(priority: &Priority, min: &Priority, max: &Priority) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/priority.rs:32:5
   |
32 |     pub fn get_bucket(priority: &Priority) -> PriorityBucket {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_bucket(priority: &Priority) -> PriorityBucket`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/priority.rs:55:5
   |
55 |     pub fn name(&self) -> &'static str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn name(&self) -> &'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/priority.rs:66:5
   |
66 |     pub fn range(&self) -> (Priority, Priority) {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn range(&self) -> (Priority, Priority)`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/priority.rs:94:5
   |
94 |     pub fn new(base: i32) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(base: i32) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/priority.rs:99:5
   |
99 |     pub fn offset(self, offset: i32) -> Priority {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn offset(self, offset: i32) -> Priority`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/priority.rs:104:5
    |
104 |     pub fn before(self, distance: u32) -> Priority {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn before(self, distance: u32) -> Priority`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: casting `u32` to `i32` may wrap around the value
   --> llmspell-hooks/src/priority.rs:105:43
    |
105 |         Priority(self.base.saturating_sub(distance as i32))
    |                                           ^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap
    = note: `-W clippy::cast-possible-wrap` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_wrap)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/priority.rs:109:5
    |
109 |     pub fn after(self, distance: u32) -> Priority {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn after(self, distance: u32) -> Priority`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: casting `u32` to `i32` may wrap around the value
   --> llmspell-hooks/src/priority.rs:110:43
    |
110 |         Priority(self.base.saturating_add(distance as i32))
    |                                           ^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/priority.rs:117:5
    |
117 |     pub fn builder(self) -> PriorityBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder(self) -> PriorityBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/priority.rs:122:5
    |
122 |     pub fn is_higher_than(&self, other: &Priority) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_higher_than(&self, other: &Priority) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/priority.rs:127:5
    |
127 |     pub fn is_lower_than(&self, other: &Priority) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_lower_than(&self, other: &Priority) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/priority.rs:132:5
    |
132 |     pub fn distance_from(&self, other: &Priority) -> u32 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn distance_from(&self, other: &Priority) -> u32`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:25:5
   |
25 |     pub fn new(config: TokenBucketConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: TokenBucketConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: casting `f64` to `u64` may truncate the value
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:46:36
   |
46 |             self.total_consumed += requested as u64;
   |                                    ^^^^^^^^^^^^^^^^
   |
   = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation

warning: casting `f64` to `u64` may lose the sign of the value
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:46:36
   |
46 |             self.total_consumed += requested as u64;
   |                                    ^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
   = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: casting `f64` to `u64` may truncate the value
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:57:32
   |
57 |         self.total_consumed += requested as u64;
   |                                ^^^^^^^^^^^^^^^^
   |
   = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation

warning: casting `f64` to `u64` may lose the sign of the value
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:57:32
   |
57 |         self.total_consumed += requested as u64;
   |                                ^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:68:5
   |
68 |     pub fn get_state(&self) -> BucketState {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_state(&self) -> BucketState`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: casting `i64` to `f64` causes a loss of precision (`i64` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:71:31
   |
71 |         let elapsed_seconds = elapsed.num_milliseconds() as f64 / 1000.0;
   |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `f64` to `i64` may truncate the value
  --> llmspell-hooks/src/rate_limiter/token_bucket.rs:78:50
   |
78 |             now + chrono::Duration::milliseconds((time_until_next_refill * 1000.0) as i64);
   |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-hooks/src/rate_limiter/token_bucket.rs:117:34
    |
117 |             let total_capacity = (self.config.capacity + self.config.burst_capacity) as f64;
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `f64` to `u64` may truncate the value
   --> llmspell-hooks/src/rate_limiter/token_bucket.rs:124:40
    |
124 |                 self.total_refilled += actual_refilled as u64;
    |                                        ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation

warning: casting `f64` to `u64` may lose the sign of the value
   --> llmspell-hooks/src/rate_limiter/token_bucket.rs:124:40
    |
124 |                 self.total_refilled += actual_refilled as u64;
    |                                        ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/rate_limiter/mod.rs:97:5
   |
97 |     pub fn new(bucket_config: TokenBucketConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(bucket_config: TokenBucketConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/rate_limiter/mod.rs:106:5
    |
106 |     pub fn with_config(config: RateLimiterConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: RateLimiterConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/rate_limiter/mod.rs:115:5
    |
115 |     pub fn try_acquire(&self, key: &str, tokens: f64) -> (bool, f64) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/rate_limiter/mod.rs:121:36
    |
121 |             let mut access_times = self.access_times.write().unwrap();
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/rate_limiter/mod.rs:115:5
    |
115 |     pub fn try_acquire(&self, key: &str, tokens: f64) -> (bool, f64) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn try_acquire(&self, key: &str, tokens: f64) -> (bool, f64)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/rate_limiter/mod.rs:138:5
    |
138 |     pub fn force_acquire(&self, key: &str, tokens: f64) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/rate_limiter/mod.rs:140:32
    |
140 |         let mut bucket_guard = bucket.write().unwrap();
    |                                ^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/rate_limiter/mod.rs:138:5
    |
138 |     pub fn force_acquire(&self, key: &str, tokens: f64) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn force_acquire(&self, key: &str, tokens: f64) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/rate_limiter/mod.rs:145:5
    |
145 |     pub fn get_bucket_state(&self, key: &str) -> BucketState {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/rate_limiter/mod.rs:147:28
    |
147 |         let bucket_guard = bucket.read().unwrap();
    |                            ^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/rate_limiter/mod.rs:145:5
    |
145 |     pub fn get_bucket_state(&self, key: &str) -> BucketState {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_bucket_state(&self, key: &str) -> BucketState`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/rate_limiter/mod.rs:152:5
    |
152 |     pub fn reset_bucket(&self, key: &str) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/rate_limiter/mod.rs:153:23
    |
153 |         let buckets = self.buckets.read().unwrap();
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/rate_limiter/mod.rs:161:5
    |
161 |     pub fn reset_all(&self) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/rate_limiter/mod.rs:162:23
    |
162 |         let buckets = self.buckets.read().unwrap();
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-hooks/src/rate_limiter/mod.rs:170:5
    |
170 |     pub fn get_statistics(&self) -> HashMap<String, BucketState> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-hooks/src/rate_limiter/mod.rs:171:23
    |
171 |         let buckets = self.buckets.read().unwrap();
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/rate_limiter/mod.rs:170:5
    |
170 |     pub fn get_statistics(&self) -> HashMap<String, BucketState> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_statistics(&self) -> HashMap<String, BucketState>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/rate_limiter/mod.rs:241:17
    |
241 |                 log::debug!("Cleaned up old rate limiter bucket: {}", key);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
241 -                 log::debug!("Cleaned up old rate limiter bucket: {}", key);
241 +                 log::debug!("Cleaned up old rate limiter bucket: {key}");
    |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/registry.rs:14:23
   |
14 | /// Configuration for HookRegistry
   |                       ^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
14 - /// Configuration for HookRegistry
14 + /// Configuration for `HookRegistry`
   |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/registry.rs:35:17
   |
35 | /// Builder for HookRegistryConfig
   |                 ^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
35 - /// Builder for HookRegistryConfig
35 + /// Builder for `HookRegistryConfig`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/registry.rs:43:5
   |
43 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/registry.rs:71:5
   |
71 |     pub fn build(self) -> HookRegistryConfig {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> HookRegistryConfig`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/registry.rs:94:28
   |
94 |     /// Hooks organized by HookPoint
   |                            ^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
94 -     /// Hooks organized by HookPoint
94 +     /// Hooks organized by `HookPoint`
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:113:5
    |
113 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:118:5
    |
118 |     pub fn with_config(config: HookRegistryConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: HookRegistryConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/registry.rs:118:32
    |
118 |     pub fn with_config(config: HookRegistryConfig) -> Self {
    |                                ^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&HookRegistryConfig`
    |
help: or consider marking this type as `Copy`
   --> llmspell-hooks/src/registry.rs:16:1
    |
16  | pub struct HookRegistryConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: item in documentation is missing backticks
   --> llmspell-hooks/src/registry.rs:133:34
    |
133 |     /// Create a new builder for HookRegistry configuration
    |                                  ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
133 -     /// Create a new builder for HookRegistry configuration
133 +     /// Create a new builder for `HookRegistry` configuration
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:134:5
    |
134 |     pub fn builder() -> HookRegistryConfigBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> HookRegistryConfigBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/registry.rs:139:5
    |
139 | /     pub fn register(
140 | |         &self,
141 | |         point: HookPoint,
142 | |         hook: impl Hook + 'static,
143 | |     ) -> Result<(), RegistryError> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/registry.rs:148:5
    |
148 |     pub fn register_arc(&self, point: HookPoint, hook: ArcHook) -> Result<(), RegistryError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/registry.rs:148:39
    |
148 |     pub fn register_arc(&self, point: HookPoint, hook: ArcHook) -> Result<(), RegistryError> {
    |                                       ^^^^^^^^^ help: consider taking a reference instead: `&HookPoint`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/registry.rs:148:56
    |
148 |     pub fn register_arc(&self, point: HookPoint, hook: ArcHook) -> Result<(), RegistryError> {
    |                                                        ^^^^^^^ help: consider taking a reference instead: `&ArcHook`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/registry.rs:188:5
    |
188 | /     pub fn register_bulk(
189 | |         &self,
190 | |         registrations: Vec<(HookPoint, ArcHook)>,
191 | |     ) -> Result<(), RegistryError> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/registry.rs:199:5
    |
199 |     pub fn unregister(&self, point: &HookPoint, hook_name: &str) -> Result<(), RegistryError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:222:5
    |
222 |     pub fn get_hooks(&self, point: &HookPoint) -> Vec<ArcHook> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hooks(&self, point: &HookPoint) -> Vec<ArcHook>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:227:5
    |
227 |     pub fn get_hooks_by_language(&self, point: &HookPoint, language: Language) -> Vec<ArcHook> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hooks_by_language(&self, point: &HookPoint, language: Language) -> Vec<ArcHook>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:232:5
    |
232 | /     pub fn get_hooks_by_priority_range(
233 | |         &self,
234 | |         point: &HookPoint,
235 | |         min: Priority,
236 | |         max: Priority,
237 | |     ) -> Vec<ArcHook> {
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
232 ~     #[must_use] pub fn get_hooks_by_priority_range(
233 +         &self,
234 +         point: &HookPoint,
235 +         min: Priority,
236 +         max: Priority,
237 ~     ) -> Vec<ArcHook> {
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/registry.rs:267:5
    |
267 | /     pub fn set_hook_enabled(
268 | |         &self,
269 | |         point: &HookPoint,
270 | |         hook_name: &str,
271 | |         enabled: bool,
272 | |     ) -> Result<(), RegistryError> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:306:5
    |
306 |     pub fn is_global_enabled(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_global_enabled(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:326:5
    |
326 |     pub fn stats(&self) -> RegistryStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn stats(&self) -> RegistryStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:360:5
    |
360 |     pub fn get_hook_names(&self, point: &HookPoint) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hook_names(&self, point: &HookPoint) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:373:5
    |
373 |     pub fn has_hook(&self, point: &HookPoint, hook_name: &str) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_hook(&self, point: &HookPoint, hook_name: &str) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: called `map(<f>).unwrap_or(false)` on an `Option` value
   --> llmspell-hooks/src/registry.rs:374:9
    |
374 | /         self.hooks
375 | |             .get(point)
376 | |             .map(|hooks| hooks.iter().any(|e| e.metadata.name == hook_name))
377 | |             .unwrap_or(false)
    | |_____________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
help: use `is_some_and(<f>)` instead
    |
376 -             .map(|hooks| hooks.iter().any(|e| e.metadata.name == hook_name))
376 +             .is_some_and(|hooks| hooks.iter().any(|e| e.metadata.name == hook_name))
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/registry.rs:381:5
    |
381 |     pub fn get_hook_points(&self) -> Vec<HookPoint> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hook_points(&self) -> Vec<HookPoint>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/replay/comparator.rs:100:5
    |
100 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/replay/comparator.rs:107:5
    |
107 |     pub fn with_config(config: ComparatorConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(config: ComparatorConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/replay/comparator.rs:112:5
    |
112 |     pub fn compare(&self, original: &HookResult, replayed: &HookResult) -> ComparisonResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn compare(&self, original: &HookResult, replayed: &HookResult) -> ComparisonResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function has too many lines (190/100)
   --> llmspell-hooks/src/replay/comparator.rs:112:5
    |
112 | /     pub fn compare(&self, original: &HookResult, replayed: &HookResult) -> ComparisonResult {
113 | |         let mut differences = Vec::new();
114 | |         let mut difference_type = None;
...   |
315 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this match arm has an identical body to another arm
   --> llmspell-hooks/src/replay/comparator.rs:121:13
    |
121 | /             (HookResult::Modified(orig_data), HookResult::Modified(repl_data)) => {
122 | |                 self.compare_values("", orig_data, repl_data, &mut differences);
123 | |                 if !differences.is_empty() {
124 | |                     difference_type = Some(DifferenceType::DataMismatch);
125 | |                 }
126 | |             }
    | |_____________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
121 ~             (HookResult::Modified(orig_data), HookResult::Modified(repl_data)) | (HookResult::Replace(orig_data), HookResult::Replace(repl_data)) => {
122 |                 self.compare_values("", orig_data, repl_data, &mut differences);
...
150 |             }
151 ~             (
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:170:54
    |
170 |                         original: Some(Value::String(format!("{:?}", orig_delay))),
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
170 -                         original: Some(Value::String(format!("{:?}", orig_delay))),
170 +                         original: Some(Value::String(format!("{orig_delay:?}"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:171:54
    |
171 |                         replayed: Some(Value::String(format!("{:?}", repl_delay))),
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
171 -                         replayed: Some(Value::String(format!("{:?}", repl_delay))),
171 +                         replayed: Some(Value::String(format!("{repl_delay:?}"))),
    |

warning: unnecessary `!=` operation
   --> llmspell-hooks/src/replay/comparator.rs:197:17
    |
197 | /                 if orig_results.len() != repl_results.len() {
198 | |                     differences.push(Difference {
199 | |                         path: "fork_count".to_string(),
200 | |                         original: Some(Value::Number(orig_results.len().into())),
...   |
235 | |                 }
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
197 ~                 if orig_results.len() == repl_results.len() {
198 +                     // Compare operation structures
199 +                     for (i, (orig_op, repl_op)) in
200 +                         orig_results.iter().zip(repl_results.iter()).enumerate()
201 +                     {
202 +                         if orig_op.id != repl_op.id {
203 +                             differences.push(Difference {
204 +                                 path: format!("fork[{}].id", i),
205 +                                 original: Some(Value::String(orig_op.id.clone())),
206 +                                 replayed: Some(Value::String(repl_op.id.clone())),
207 +                                 description: "Operation IDs differ".to_string(),
208 +                                 severity: DifferenceSeverity::Major,
209 +                             });
210 +                         }
211 +                         if orig_op.operation_type != repl_op.operation_type {
212 +                             differences.push(Difference {
213 +                                 path: format!("fork[{}].operation_type", i),
214 +                                 original: Some(Value::String(orig_op.operation_type.clone())),
215 +                                 replayed: Some(Value::String(repl_op.operation_type.clone())),
216 +                                 description: "Operation types differ".to_string(),
217 +                                 severity: DifferenceSeverity::Major,
218 +                             });
219 +                         }
220 +                         self.compare_values(
221 +                             &format!("fork[{}].parameters", i),
222 +                             &orig_op.parameters,
223 +                             &repl_op.parameters,
224 +                             &mut differences,
225 +                         );
226 +                     }
227 +                 } else {
228 +                     differences.push(Difference {
229 +                         path: "fork_count".to_string(),
230 +                         original: Some(Value::Number(orig_results.len().into())),
231 +                         replayed: Some(Value::Number(repl_results.len().into())),
232 +                         description: "Fork result counts differ".to_string(),
233 +                         severity: DifferenceSeverity::Major,
234 +                     });
235 +                 }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:212:39
    |
212 | ...                   path: format!("fork[{}].id", i),
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
212 -                                 path: format!("fork[{}].id", i),
212 +                                 path: format!("fork[{i}].id"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:221:39
    |
221 | ...                   path: format!("fork[{}].operation_type", i),
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
221 -                                 path: format!("fork[{}].operation_type", i),
221 +                                 path: format!("fork[{i}].operation_type"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:229:30
    |
229 | ...                   &format!("fork[{}].parameters", i),
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
229 -                             &format!("fork[{}].parameters", i),
229 +                             &format!("fork[{i}].parameters"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:262:54
    |
262 |                         original: Some(Value::String(format!("{:?}", orig_ttl))),
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
262 -                         original: Some(Value::String(format!("{:?}", orig_ttl))),
262 +                         original: Some(Value::String(format!("{orig_ttl:?}"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:263:54
    |
263 |                         replayed: Some(Value::String(format!("{:?}", repl_ttl))),
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
263 -                         replayed: Some(Value::String(format!("{:?}", repl_ttl))),
263 +                         replayed: Some(Value::String(format!("{repl_ttl:?}"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:288:50
    |
288 |                     original: Some(Value::String(format!("{:?}", original))),
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
288 -                     original: Some(Value::String(format!("{:?}", original))),
288 +                     original: Some(Value::String(format!("{original:?}"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:289:50
    |
289 |                     replayed: Some(Value::String(format!("{:?}", replayed))),
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
289 -                     replayed: Some(Value::String(format!("{:?}", replayed))),
289 +                     replayed: Some(Value::String(format!("{replayed:?}"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:336:25
    |
336 |                         format!("{}.{}", path, key)
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
336 -                         format!("{}.{}", path, key)
336 +                         format!("{path}.{key}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:411:23
    |
411 |                 path: format!("{}.length", path),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
411 -                 path: format!("{}.length", path),
411 +                 path: format!("{path}.length"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:420:29
    |
420 |             let item_path = format!("{}[{}]", path, i);
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
420 -             let item_path = format!("{}[{}]", path, i);
420 +             let item_path = format!("{path}[{i}]");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:441:50
    |
441 |                     original: Some(Value::String(format!("{} occurrences", orig_count))),
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
441 -                     original: Some(Value::String(format!("{} occurrences", orig_count))),
441 +                     original: Some(Value::String(format!("{orig_count} occurrences"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:442:50
    |
442 |                     replayed: Some(Value::String(format!("{} occurrences", repl_count))),
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
442 -                     replayed: Some(Value::String(format!("{} occurrences", repl_count))),
442 +                     replayed: Some(Value::String(format!("{repl_count} occurrences"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:443:34
    |
443 |                     description: format!("Element count mismatch for {:?}", value),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
443 -                     description: format!("Element count mismatch for {:?}", value),
443 +                     description: format!("Element count mismatch for {value:?}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:454:50
    |
454 |                     replayed: Some(Value::String(format!("{} occurrences", repl_count))),
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
454 -                     replayed: Some(Value::String(format!("{} occurrences", repl_count))),
454 +                     replayed: Some(Value::String(format!("{repl_count} occurrences"))),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/src/replay/comparator.rs:455:34
    |
455 |                     description: format!("New element in replayed: {:?}", value),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
455 -                     description: format!("New element in replayed: {:?}", value),
455 +                     description: format!("New element in replayed: {value:?}"),
    |

warning: unused `self` argument
   --> llmspell-hooks/src/replay/comparator.rs:463:29
    |
463 |     fn count_array_elements(&self, array: &[Value]) -> HashMap<String, usize> {
    |                             ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-hooks/src/replay/comparator.rs:473:29
    |
473 |     fn calculate_similarity(&self, differences: &[Difference]) -> f64 {
    |                             ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-hooks/src/replay/comparator.rs:494:9
    |
494 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-hooks/src/replay/manager.rs:98:5
   |
98 |     pub async fn replay(&self, request: ReplayRequest) -> Result<ReplayResponse> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: unused `self` argument
   --> llmspell-hooks/src/replay/manager.rs:248:9
    |
248 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: calling `to_string` on `&&str`
   --> llmspell-hooks/src/replay/manager.rs:258:29
    |
258 |                     .insert(key.to_string(), modification.value.clone());
    |                             ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string
    = note: `-W clippy::inefficient-to-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::inefficient_to_string)]`

warning: calling `to_string` on `&&str`
   --> llmspell-hooks/src/replay/manager.rs:263:45
    |
263 |                     context.metadata.insert(key.to_string(), value.clone());
    |                                             ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/replay/manager.rs:289:5
    |
289 |     pub async fn batch_replay(&self, request: BatchReplayRequest) -> Result<BatchReplayResponse> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/replay/manager.rs:373:5
    |
373 | /     pub async fn schedule_replay(
374 | |         &self,
375 | |         request: ReplayRequest,
376 | |         schedule: crate::replay::ReplaySchedule,
377 | |     ) -> Result<Uuid> {
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/replay/manager.rs:382:5
    |
382 |     pub fn get_active_replays(&self) -> Vec<(Uuid, ReplayState)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_active_replays(&self) -> Vec<(Uuid, ReplayState)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/replay/manager.rs:391:5
    |
391 |     pub fn cancel_replay(&self, replay_id: Uuid) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-hooks/src/replay/manager.rs:406:5
    |
406 | /     fn get_hook(&self, hook_id: &str) -> Result<Option<Arc<dyn ReplayableHook>>> {
407 | |         Ok(self.hook_registry.read().get(hook_id).cloned())
408 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
406 -     fn get_hook(&self, hook_id: &str) -> Result<Option<Arc<dyn ReplayableHook>>> {
406 +     fn get_hook(&self, hook_id: &str) -> std::option::Option<std::sync::Arc<(dyn traits::ReplayableHook + 'static)>> {
    |
help: ...and then change returning expressions
    |
407 -         Ok(self.hook_registry.read().get(hook_id).cloned())
407 +         self.hook_registry.read().get(hook_id).cloned()
    |

warning: unused `self` argument
   --> llmspell-hooks/src/replay/manager.rs:412:9
    |
412 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unchecked subtraction of a 'Duration' from an 'Instant'
   --> llmspell-hooks/src/replay/manager.rs:421:22
    |
421 |         let cutoff = Instant::now() - older_than;
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Instant::now().checked_sub(older_than).unwrap()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unchecked_duration_subtraction
    = note: `-W clippy::unchecked-duration-subtraction` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unchecked_duration_subtraction)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/replay/scheduler.rs:195:5
    |
195 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/replay/scheduler.rs:218:5
    |
218 |     pub async fn schedule(&self, request: ReplayRequest, schedule: ReplaySchedule) -> Result<Uuid> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/replay/scheduler.rs:232:5
    |
232 |     pub async fn cancel(&self, id: Uuid) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/replay/scheduler.rs:246:5
    |
246 |     pub fn get_scheduled(&self) -> Vec<ScheduledReplay> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_scheduled(&self) -> Vec<ScheduledReplay>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/replay/scheduler.rs:251:5
    |
251 |     pub fn get_scheduled_replay(&self, id: Uuid) -> Option<ScheduledReplay> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_scheduled_replay(&self, id: Uuid) -> Option<ScheduledReplay>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/replay/scheduler.rs:256:5
    |
256 |     pub async fn stop(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-hooks/src/replay/scheduler.rs:308:5
    |
308 | /     fn handle_schedule(
309 | |         scheduled: &Arc<RwLock<HashMap<Uuid, ScheduledReplay>>>,
310 | |         queue: &Arc<RwLock<BinaryHeap<ScheduledReplay>>>,
311 | |         request: ReplayRequest,
...   |
321 | |         Ok(id)
322 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
313 -     ) -> Result<Uuid> {
313 +     ) -> uuid::Uuid {
    |
help: ...and then change returning expressions
    |
321 -         Ok(id)
321 +         id
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/result.rs:50:5
   |
50 |     pub fn should_continue(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn should_continue(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/result.rs:55:5
   |
55 |     pub fn is_cancelled(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_cancelled(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/result.rs:60:5
   |
60 |     pub fn requires_special_handling(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn requires_special_handling(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/result.rs:65:5
   |
65 |     pub fn description(&self) -> String {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn description(&self) -> String`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/result.rs:69:43
   |
69 |             HookResult::Cancel(reason) => format!("Cancelled: {}", reason),
   |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
69 -             HookResult::Cancel(reason) => format!("Cancelled: {}", reason),
69 +             HookResult::Cancel(reason) => format!("Cancelled: {reason}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/result.rs:70:45
   |
70 |             HookResult::Redirect(target) => format!("Redirect to: {}", target),
   |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
70 -             HookResult::Redirect(target) => format!("Redirect to: {}", target),
70 +             HookResult::Redirect(target) => format!("Redirect to: {target}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/result.rs:76:17
   |
76 |                 format!("Retry after {:?} (max {} attempts)", delay, max_attempts)
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
76 -                 format!("Retry after {:?} (max {} attempts)", delay, max_attempts)
76 +                 format!("Retry after {delay:?} (max {max_attempts} attempts)")
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/result.rs:87:17
   |
87 |                 format!("Cache with key '{}' for {:?}", key, ttl)
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
87 -                 format!("Cache with key '{}' for {:?}", key, ttl)
87 +                 format!("Cache with key '{key}' for {ttl:?}")
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/result.rs:89:44
   |
89 |             HookResult::Skipped(reason) => format!("Skipped: {}", reason),
   |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
89 -             HookResult::Skipped(reason) => format!("Skipped: {}", reason),
89 +             HookResult::Skipped(reason) => format!("Skipped: {reason}"),
   |

warning: item in documentation is missing backticks
  --> llmspell-hooks/src/result.rs:94:26
   |
94 | /// Builder for creating HookResult::Retry
   |                          ^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
94 - /// Builder for creating HookResult::Retry
94 + /// Builder for creating `HookResult::Retry`
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/result.rs:107:5
    |
107 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/result.rs:114:5
    |
114 |     pub fn with_delay(mut self, delay: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_delay(mut self, delay: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/result.rs:114:5
    |
114 | /     pub fn with_delay(mut self, delay: Duration) -> Self {
115 | |         self.delay = delay;
116 | |         self
117 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/result.rs:119:5
    |
119 |     pub fn with_max_attempts(mut self, attempts: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_attempts(mut self, attempts: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/result.rs:119:5
    |
119 | /     pub fn with_max_attempts(mut self, attempts: u32) -> Self {
120 | |         self.max_attempts = attempts;
121 | |         self
122 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/result.rs:124:5
    |
124 |     pub fn build(self) -> HookResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> HookResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-hooks/src/result.rs:132:26
    |
132 | /// Builder for creating HookResult::Fork
    |                          ^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
132 - /// Builder for creating HookResult::Fork
132 + /// Builder for creating `HookResult::Fork`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/result.rs:144:5
    |
144 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/result.rs:150:5
    |
150 | /     pub fn add_operation(
151 | |         mut self,
152 | |         id: String,
153 | |         operation_type: String,
154 | |         parameters: JsonValue,
155 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
150 ~     #[must_use] pub fn add_operation(
151 +         mut self,
152 +         id: String,
153 +         operation_type: String,
154 +         parameters: JsonValue,
155 ~     ) -> Self {
    |

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/result.rs:150:5
    |
150 | /     pub fn add_operation(
151 | |         mut self,
152 | |         id: String,
153 | |         operation_type: String,
...   |
161 | |         self
162 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/result.rs:164:5
    |
164 |     pub fn build(self) -> HookResult {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> HookResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/selective/registry.rs:30:5
   |
30 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-hooks/src/selective/registry.rs:92:5
   |
92 |     pub fn enabled_features(&self) -> &HashSet<String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn enabled_features(&self) -> &HashSet<String>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-hooks/src/selective/registry.rs:205:33
    |
205 |     /// Lazy hooks organized by HookPoint
    |                                 ^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
205 -     /// Lazy hooks organized by HookPoint
205 +     /// Lazy hooks organized by `HookPoint`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/selective/registry.rs:219:5
    |
219 |     pub fn new(features: HookFeatures) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(features: HookFeatures) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/selective/registry.rs:224:5
    |
224 |     pub fn with_config(features: HookFeatures, config: SelectiveRegistryConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(features: HookFeatures, config: SelectiveRegistryConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/selective/registry.rs:244:5
    |
244 | /     pub fn register_with_features(
245 | |         &self,
246 | |         point: HookPoint,
247 | |         factory: impl Fn() -> Box<dyn Hook> + Send + Sync + 'static,
248 | |         required_features: &[impl AsRef<str>],
249 | |     ) -> Result<(), RegistryError> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-hooks/src/selective/registry.rs:246:16
    |
246 |         point: HookPoint,
    |                ^^^^^^^^^ help: consider taking a reference instead: `&HookPoint`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/selective/registry.rs:310:5
    |
310 | /     pub fn register(
311 | |         &self,
312 | |         point: HookPoint,
313 | |         factory: impl Fn() -> Box<dyn Hook> + Send + Sync + 'static,
314 | |     ) -> Result<(), RegistryError> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/selective/registry.rs:319:5
    |
319 |     pub fn preload_hook(&self, hook_name: &str) -> Result<(), RegistryError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/selective/registry.rs:336:5
    |
336 |     pub fn get_hooks(&self, point: &HookPoint) -> Vec<ArcHook> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hooks(&self, point: &HookPoint) -> Vec<ArcHook>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/selective/registry.rs:341:5
    |
341 |     pub fn get_hooks_by_language(&self, point: &HookPoint, language: Language) -> Vec<ArcHook> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hooks_by_language(&self, point: &HookPoint, language: Language) -> Vec<ArcHook>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this could be rewritten as `let...else`
   --> llmspell-hooks/src/selective/registry.rs:356:9
    |
356 | /         let hooks = match self.hooks.get(point) {
357 | |             Some(hooks) => hooks,
358 | |             None => return Vec::new(),
359 | |         };
    | |__________^ help: consider writing: `let Some(hooks) = self.hooks.get(point) else { return Vec::new() };`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else
    = note: `-W clippy::manual-let-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::manual_let_else)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-hooks/src/selective/registry.rs:456:5
    |
456 |     pub fn set_hook_enabled(&self, hook_name: &str, enabled: bool) -> Result<(), RegistryError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/selective/registry.rs:485:5
    |
485 |     pub fn features(&self) -> HookFeatures {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn features(&self) -> HookFeatures`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/selective/registry.rs:523:5
    |
523 |     pub fn stats(&self) -> SelectiveRegistryStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn stats(&self) -> SelectiveRegistryStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/selective/registry.rs:548:5
    |
548 |     pub fn memory_usage_estimate(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn memory_usage_estimate(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-hooks/src/traits.rs:60:5
   |
60 |     fn serialize_context(&self, ctx: &HookContext) -> Result<Vec<u8>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-hooks/src/traits.rs:65:5
   |
65 |     fn deserialize_context(&self, data: &[u8]) -> Result<HookContext> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-hooks/src/traits.rs:127:5
    |
127 | /     pub fn with_metadata(mut self, metadata: HookMetadata) -> Self {
128 | |         self.metadata = metadata;
129 | |         self
130 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/types.rs:77:40
   |
77 |             HookPoint::Custom(name) => write!(f, "custom:{}", name),
   |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
77 -             HookPoint::Custom(name) => write!(f, "custom:{}", name),
77 +             HookPoint::Custom(name) => write!(f, "custom:{name}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-hooks/src/types.rs:78:18
   |
78 |             _ => write!(f, "{:?}", self),
   |                  ^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
78 -             _ => write!(f, "{:?}", self),
78 +             _ => write!(f, "{self:?}"),
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-hooks/src/types.rs:112:5
    |
112 |     pub fn new(component_type: ComponentType, name: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(component_type: ComponentType, name: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/coordination/event_correlation.rs:544:5
    |
544 | /     async fn cleanup_expired_traces(&self, traces: &mut HashMap<CorrelationId, EventTrace>) {
545 | |         let retention_cutoff = SystemTime::now() - self.config.trace_retention;
546 | |         let initial_count = traces.len();
...   |
560 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/coordination/event_correlation.rs:563:5
    |
563 | /     async fn collect_event_metrics(&self, _component_id: &ComponentId) -> EventMetrics {
564 | |         // This would collect actual system metrics in a real implementation
565 | |         EventMetrics {
566 | |             memory_usage: None, // Would use a memory profiler
...   |
571 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/coordination/mod.rs:268:5
    |
268 | /     pub async fn execute_next_component(
269 | |         &self,
270 | |         correlation_id: &CorrelationId,
271 | |         hook_context: HookContext,
...   |
283 | |         Ok((HookResult::Continue, None))
284 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/persistence/inspector.rs:133:5
    |
133 | /     pub async fn analyze_executions(
134 | |         &self,
135 | |         executions: &[SerializedHookExecution],
136 | |     ) -> Result<ExecutionAnalysis> {
...   |
241 | |         })
242 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/persistence/inspector.rs:245:5
    |
245 | /     pub async fn detect_patterns(
246 | |         &self,
247 | |         executions: &[SerializedHookExecution],
248 | |     ) -> Result<Vec<ExecutionPattern>> {
...   |
266 | |         Ok(patterns)
267 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/persistence/replay_manager.rs:166:5
    |
166 | /     pub async fn start_replay_session(&self, config: ReplaySessionConfig) -> Result<String> {
167 | |         let session_name = config.name.clone();
168 | |         let session = ReplaySession {
169 | |             config,
...   |
182 | |         Ok(session_name)
183 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/persistence/replay_manager.rs:440:5
    |
440 | /     async fn handle_breakpoint(
441 | |         &self,
442 | |         _session: &mut ReplaySession,
443 | |         execution: &SerializedHookExecution,
...   |
452 | |         Ok(())
453 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/persistence/retention.rs:134:5
    |
134 | /     pub async fn apply_retention_policies(&self, hook_id: &str) -> Result<()> {
135 | |         let policy = self.get_policy(hook_id);
136 | |
137 | |         info!(
...   |
155 | |         Ok(())
156 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/persistence/storage.rs:212:5
    |
212 | /     pub async fn delete_metadata(&self, correlation_id: &Uuid) -> Result<()> {
213 | |         let key = self.generate_metadata_key(correlation_id);
214 | |         self.metadata_cache.write().remove(&key);
215 | |         Ok(())
216 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/persistence/storage.rs:219:5
    |
219 | /     pub async fn list_metadata_keys(&self, prefix: &str) -> Result<Vec<String>> {
220 | |         let cache = self.metadata_cache.read();
221 | |         let keys: Vec<String> = cache
222 | |             .keys()
...   |
226 | |         Ok(keys)
227 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-hooks/src/replay/scheduler.rs:340:5
    |
340 | /     async fn check_and_execute_replays(
341 | |         scheduled: &Arc<RwLock<HashMap<Uuid, ScheduledReplay>>>,
342 | |         queue: &Arc<RwLock<BinaryHeap<ScheduledReplay>>>,
343 | |     ) {
...   |
387 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: `llmspell-hooks` (lib) generated 686 warnings (run `cargo clippy --fix --lib -p llmspell-hooks` to apply 414 suggestions)
warning: unnecessary hashes around raw string literal
  --> llmspell-state-persistence/src/sensitive_data.rs:20:20
   |
20 |         Regex::new(r#"eyJ[a-zA-Z0-9_-]+\.eyJ[a-zA-Z0-9_-]+\.[a-zA-Z0-9_-]+"#).unwrap(),
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_raw_string_hashes
   = note: `-W clippy::needless-raw-string-hashes` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_raw_string_hashes)]`
help: remove all the hashes around the string literal
   |
20 -         Regex::new(r#"eyJ[a-zA-Z0-9_-]+\.eyJ[a-zA-Z0-9_-]+\.[a-zA-Z0-9_-]+"#).unwrap(),
20 +         Regex::new(r"eyJ[a-zA-Z0-9_-]+\.eyJ[a-zA-Z0-9_-]+\.[a-zA-Z0-9_-]+").unwrap(),
   |

warning: item in documentation is missing backticks
 --> llmspell-state-persistence/src/lib.rs:7:48
  |
7 | //! - Multiple storage backends (Memory, Sled, RocksDB)
  |                                                ^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
7 - //! - Multiple storage backends (Memory, Sled, RocksDB)
7 + //! - Multiple storage backends (Memory, Sled, `RocksDB`)
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/agent_state.rs:97:5
   |
97 |     pub fn new(agent_id: String, agent_type: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(agent_id: String, agent_type: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
   = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/agent_state.rs:192:5
    |
192 |     pub fn safe_to_storage_bytes(&self) -> StateResult<Vec<u8>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/agent_state.rs:201:5
    |
201 |     pub fn safe_from_storage_bytes(bytes: &[u8]) -> StateResult<Self> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/agent_state.rs:210:5
    |
210 |     pub fn fast_to_bytes(&self) -> StateResult<Vec<u8>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/agent_state.rs:218:5
    |
218 |     pub fn fast_from_bytes(bytes: &[u8]) -> StateResult<Self> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/agent_state.rs:233:5
    |
233 |     fn get_persistent_state(&self) -> StateResult<PersistentAgentState>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/agent_state.rs:236:5
    |
236 |     fn apply_persistent_state(&self, state: PersistentAgentState) -> StateResult<()>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backend_adapter.rs:12:1
   |
12 | / pub async fn create_storage_backend(
13 | |     backend_type: &StorageBackendType,
14 | | ) -> StateResult<Arc<dyn StorageBackend>> {
   | |_________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backend_adapter.rs:51:5
   |
51 |     pub async fn store<T: StorageSerialize>(&self, key: &str, value: &T) -> StateResult<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backend_adapter.rs:64:5
   |
64 |     pub async fn load<T: StorageSerialize>(&self, key: &str) -> StateResult<Option<T>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backend_adapter.rs:79:5
   |
79 |     pub async fn delete(&self, key: &str) -> StateResult<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backend_adapter.rs:88:5
   |
88 |     pub async fn exists(&self, key: &str) -> StateResult<bool> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backend_adapter.rs:97:5
   |
97 |     pub async fn list_keys(&self, prefix: &str) -> StateResult<Vec<String>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backend_adapter.rs:120:5
    |
120 |     pub async fn clear_namespace(&self) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/backend_adapter.rs:134:33
    |
134 |     /// Fast store method using UnifiedSerializer for benchmark data
    |                                 ^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
134 -     /// Fast store method using UnifiedSerializer for benchmark data
134 +     /// Fast store method using `UnifiedSerializer` for benchmark data
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backend_adapter.rs:135:5
    |
135 |     pub async fn store_fast<T: Serialize>(&self, key: &str, value: &T) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/backend_adapter.rs:145:32
    |
145 |     /// Fast load method using UnifiedSerializer
    |                                ^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
145 -     /// Fast load method using UnifiedSerializer
145 +     /// Fast load method using `UnifiedSerializer`
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backend_adapter.rs:146:5
    |
146 | /     pub async fn load_fast<T: for<'de> Deserialize<'de>>(
147 | |         &self,
148 | |         key: &str,
149 | |     ) -> StateResult<Option<T>> {
    | |_______________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backup/atomic.rs:88:5
   |
88 | /     pub fn new(
89 | |         backup_id: String,
90 | |         state_manager: Arc<StateManager>,
91 | |         parent_backup: Option<String>,
92 | |     ) -> Result<Self> {
   | |_____________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/atomic.rs:104:5
    |
104 |     pub fn builder(backup_id: String) -> AtomicBackupBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder(backup_id: String) -> AtomicBackupBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/atomic.rs:116:5
    |
116 |     pub async fn capture(&self) -> Result<Vec<u8>, StateError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/atomic.rs:228:37
    |
228 |                     let entry_key = format!("{}:{}", scope, key);
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
228 -                     let entry_key = format!("{}:{}", scope, key);
228 +                     let entry_key = format!("{scope}:{key}");
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/atomic.rs:245:27
    |
245 |     fn serialize_snapshot(&self, snapshot: &StateSnapshot) -> Result<Vec<u8>, StateError> {
    |                           ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/atomic.rs:251:5
    |
251 |     pub async fn restore(&self, snapshot_data: &[u8]) -> Result<(), StateError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: matching over `()` is more explicit
   --> llmspell-state-persistence/src/backup/atomic.rs:272:20
    |
272 |                 Ok(_) => {
    |                    ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns
    = note: `-W clippy::ignored-unit-patterns` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ignored_unit_patterns)]`

warning: matching over `()` is more explicit
   --> llmspell-state-persistence/src/backup/atomic.rs:291:20
    |
291 |                 Ok(_) => {
    |                    ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/atomic.rs:309:5
    |
309 | /     pub async fn restore_with_progress<F>(
310 | |         &self,
311 | |         snapshot_data: &[u8],
312 | |         mut progress_callback: F,
313 | |     ) -> Result<(), StateError>
314 | |     where
315 | |         F: FnMut(usize, usize) + Send,
    | |______________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: matching over `()` is more explicit
   --> llmspell-state-persistence/src/backup/atomic.rs:340:20
    |
340 |                 Ok(_) => {
    |                    ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns

warning: matching over `()` is more explicit
   --> llmspell-state-persistence/src/backup/atomic.rs:362:20
    |
362 |                 Ok(_) => {
    |                    ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/atomic.rs:400:5
    |
400 |     pub fn with_parent(mut self, parent_id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_parent(mut self, parent_id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/backup/atomic.rs:400:5
    |
400 | /     pub fn with_parent(mut self, parent_id: String) -> Self {
401 | |         self.parent_backup = Some(parent_id);
402 | |         self
403 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use
    = note: `-W clippy::return-self-not-must-use` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::return_self_not_must_use)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/atomic.rs:406:5
    |
406 |     pub fn include_scopes(mut self, scopes: Vec<StateScope>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn include_scopes(mut self, scopes: Vec<StateScope>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/backup/atomic.rs:406:5
    |
406 | /     pub fn include_scopes(mut self, scopes: Vec<StateScope>) -> Self {
407 | |         self.include_scopes = Some(scopes);
408 | |         self
409 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/atomic.rs:412:5
    |
412 |     pub fn exclude_scopes(mut self, scopes: Vec<StateScope>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn exclude_scopes(mut self, scopes: Vec<StateScope>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/backup/atomic.rs:412:5
    |
412 | /     pub fn exclude_scopes(mut self, scopes: Vec<StateScope>) -> Self {
413 | |         self.exclude_scopes = Some(scopes);
414 | |         self
415 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/atomic.rs:418:5
    |
418 |     pub fn include_patterns(mut self, patterns: Vec<String>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn include_patterns(mut self, patterns: Vec<String>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/backup/atomic.rs:418:5
    |
418 | /     pub fn include_patterns(mut self, patterns: Vec<String>) -> Self {
419 | |         self.include_patterns = Some(patterns);
420 | |         self
421 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/atomic.rs:424:5
    |
424 |     pub fn exclude_patterns(mut self, patterns: Vec<String>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn exclude_patterns(mut self, patterns: Vec<String>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/backup/atomic.rs:424:5
    |
424 | /     pub fn exclude_patterns(mut self, patterns: Vec<String>) -> Self {
425 | |         self.exclude_patterns = Some(patterns);
426 | |         self
427 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/atomic.rs:430:5
    |
430 |     pub fn build(self, state_manager: Arc<StateManager>) -> Result<AtomicBackup, StateError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/cleanup.rs:32:5
   |
32 |     pub fn new(backup_dir: PathBuf, dry_run: bool) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(backup_dir: PathBuf, dry_run: bool) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backup/cleanup.rs:41:5
   |
41 | /     pub async fn execute_cleanup(
42 | |         &self,
43 | |         decisions: Vec<RetentionDecision>,
44 | |         backup_index: &HashMap<BackupId, BackupMetadata>,
45 | |     ) -> Result<CleanupResult, StateError> {
   | |__________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/cleanup.rs:125:48
    |
125 |         let backup_path = self.backup_dir.join(format!("{}.backup", backup_id));
    |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
125 -         let backup_path = self.backup_dir.join(format!("{}.backup", backup_id));
125 +         let backup_path = self.backup_dir.join(format!("{backup_id}.backup"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/cleanup.rs:126:50
    |
126 |         let metadata_path = self.backup_dir.join(format!("{}.meta", backup_id));
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
126 -         let metadata_path = self.backup_dir.join(format!("{}.meta", backup_id));
126 +         let metadata_path = self.backup_dir.join(format!("{backup_id}.meta"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/cleanup.rs:147:46
    |
147 |             .map_err(|e| StateError::storage(format!("Failed to delete backup file: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
147 -             .map_err(|e| StateError::storage(format!("Failed to delete backup file: {}", e)))?;
147 +             .map_err(|e| StateError::storage(format!("Failed to delete backup file: {e}")))?;
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/cleanup.rs:152:37
    |
152 |                 StateError::storage(format!("Failed to delete metadata file: {}", e))
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
152 -                 StateError::storage(format!("Failed to delete metadata file: {}", e))
152 +                 StateError::storage(format!("Failed to delete metadata file: {e}"))
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/cleanup.rs:160:30
    |
160 |     fn generate_operation_id(&self) -> String {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/cleanup.rs:174:5
    |
174 |     pub async fn rollback_operation(&self, operation_id: &str) -> Result<(), StateError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/cleanup.rs:210:5
    |
210 |     pub fn is_success(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_success(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/cleanup.rs:239:5
    |
239 |     pub fn new(interval: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(interval: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backup/compression.rs:19:5
   |
19 |     pub fn new(level: u32) -> Result<Self, StateError> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/compression.rs:29:5
   |
29 |     pub fn as_u32(&self) -> u32 {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn as_u32(&self) -> u32`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/compression.rs:34:5
   |
34 |     pub fn fast() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn fast() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/compression.rs:39:5
   |
39 |     pub fn default_level() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn default_level() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/compression.rs:44:5
   |
44 |     pub fn best() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn best() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/compression.rs:63:5
   |
63 |     pub fn new(compression_type: CompressionType, level: CompressionLevel) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(compression_type: CompressionType, level: CompressionLevel) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/backup/compression.rs:71:5
   |
71 |     pub fn compress(&self, data: &[u8]) -> Result<Vec<u8>, StateError> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/compression.rs:106:5
    |
106 |     pub fn decompress(&self, data: &[u8]) -> Result<Vec<u8>, StateError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:133:46
    |
133 |             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
133 -             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))?;
133 +             .map_err(|e| StateError::storage(format!("Compression error: {e}")))?;
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:136:46
    |
136 |             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
136 -             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))
136 +             .map_err(|e| StateError::storage(format!("Compression error: {e}")))
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/compression.rs:140:24
    |
140 |     fn decompress_gzip(&self, data: &[u8]) -> Result<Vec<u8>, StateError> {
    |                        ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:147:46
    |
147 |             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
147 -             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))?;
147 +             .map_err(|e| StateError::storage(format!("Decompression error: {e}")))?;
    |

warning: casting `u32` to `i32` may wrap around the value
   --> llmspell-state-persistence/src/backup/compression.rs:153:32
    |
153 |         zstd::encode_all(data, self.compression_level.0 as i32)
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap
    = note: `-W clippy::cast-possible-wrap` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_wrap)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:154:46
    |
154 |             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
154 -             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))
154 +             .map_err(|e| StateError::storage(format!("Compression error: {e}")))
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/compression.rs:158:24
    |
158 |     fn decompress_zstd(&self, data: &[u8]) -> Result<Vec<u8>, StateError> {
    |                        ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:160:46
    |
160 |             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
160 -             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))
160 +             .map_err(|e| StateError::storage(format!("Decompression error: {e}")))
    |

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-state-persistence/src/backup/compression.rs:168:13
    |
168 |             4..=6 => 3, // Default
    |             ^^^^^^^^^^^^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-state-persistence/src/backup/compression.rs:170:13
    |
170 |             _ => 3,
    |             ^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:178:42
    |
178 |         .map_err(|e| StateError::storage(format!("Compression error: {}", e)))
    |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
178 -         .map_err(|e| StateError::storage(format!("Compression error: {}", e)))
178 +         .map_err(|e| StateError::storage(format!("Compression error: {e}")))
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/compression.rs:182:23
    |
182 |     fn decompress_lz4(&self, data: &[u8]) -> Result<Vec<u8>, StateError> {
    |                       ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:184:46
    |
184 |             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
184 -             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))
184 +             .map_err(|e| StateError::storage(format!("Decompression error: {e}")))
    |

warning: casting `u32` to `i32` may wrap around the value
   --> llmspell-state-persistence/src/backup/compression.rs:191:22
    |
191 |             quality: self.compression_level.0 as i32,
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:196:46
    |
196 |             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
196 -             .map_err(|e| StateError::storage(format!("Compression error: {}", e)))?;
196 +             .map_err(|e| StateError::storage(format!("Compression error: {e}")))?;
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/compression.rs:202:26
    |
202 |     fn decompress_brotli(&self, data: &[u8]) -> Result<Vec<u8>, StateError> {
    |                          ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/compression.rs:205:46
    |
205 |             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
205 -             .map_err(|e| StateError::storage(format!("Decompression error: {}", e)))?;
205 +             .map_err(|e| StateError::storage(format!("Decompression error: {e}")))?;
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/compression.rs:211:5
    |
211 |     pub fn analyze_compression(&self, data: &[u8]) -> CompressionAnalysis {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn analyze_compression(&self, data: &[u8]) -> CompressionAnalysis`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this could be rewritten as `let...else`
   --> llmspell-state-persistence/src/backup/compression.rs:215:9
    |
215 | /         let compressed = match self.compress(data) {
216 | |             Ok(c) => c,
217 | |             Err(_) => {
218 | |                 return CompressionAnalysis {
...   |
229 | |         };
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else
    = note: `-W clippy::manual-let-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::manual_let_else)]`
help: consider writing
    |
215 ~         let Ok(compressed) = self.compress(data) else {
216 +                 return CompressionAnalysis {
217 +                     original_size,
218 +                     compressed_size: original_size,
219 +                     compression_ratio: 0.0,
220 +                     compression_time_ms: 0,
221 +                     estimated_decompression_time_ms: 0,
222 +                     algorithm: self.compression_type,
223 +                     level: self.compression_level,
224 +                     is_compressible: false,
225 +                 };
226 +             };
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/compression.rs:278:1
    |
278 | / pub fn find_optimal_compression(
279 | |     data: &[u8],
280 | |     max_time_ms: u64,
281 | | ) -> Result<(CompressionType, CompressionLevel), StateError> {
    | |____________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/backup/events.rs:144:20
    |
144 |     /// Convert to UniversalEvent for EventBus
    |                    ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
144 -     /// Convert to UniversalEvent for EventBus
144 +     /// Convert to `UniversalEvent` for EventBus
    |

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/backup/events.rs:144:39
    |
144 |     /// Convert to UniversalEvent for EventBus
    |                                       ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
144 -     /// Convert to UniversalEvent for EventBus
144 +     /// Convert to UniversalEvent for `EventBus`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:145:5
    |
145 |     pub fn to_universal_event(&self) -> UniversalEvent {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn to_universal_event(&self) -> UniversalEvent`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:188:5
    |
188 |     pub fn correlation_id(&self) -> Uuid {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn correlation_id(&self) -> Uuid`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:216:5
    |
216 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:223:5
    |
223 |     pub fn with_correlation_id(correlation_id: Uuid) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_correlation_id(correlation_id: Uuid) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:228:5
    |
228 | /     pub fn backup_started(
229 | |         &self,
230 | |         backup_id: BackupId,
231 | |         backup_type: BackupType,
232 | |         parent_id: Option<BackupId>,
233 | |     ) -> BackupEvent {
    | |____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
228 ~     #[must_use] pub fn backup_started(
229 +         &self,
230 +         backup_id: BackupId,
231 +         backup_type: BackupType,
232 +         parent_id: Option<BackupId>,
233 ~     ) -> BackupEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:243:5
    |
243 | /     pub fn backup_progress(
244 | |         &self,
245 | |         backup_id: BackupId,
246 | |         entries_processed: usize,
...   |
249 | |         compression_ratio: Option<f64>,
250 | |     ) -> BackupEvent {
    | |____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
243 ~     #[must_use] pub fn backup_progress(
244 +         &self,
245 +         backup_id: BackupId,
246 +         entries_processed: usize,
247 +         total_entries: usize,
248 +         bytes_processed: u64,
249 +         compression_ratio: Option<f64>,
250 ~     ) -> BackupEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:262:5
    |
262 | /     pub fn restore_started(
263 | |         &self,
264 | |         backup_id: BackupId,
265 | |         restore_chain: Vec<BackupId>,
266 | |         dry_run: bool,
267 | |     ) -> BackupEvent {
    | |____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
262 ~     #[must_use] pub fn restore_started(
263 +         &self,
264 +         backup_id: BackupId,
265 +         restore_chain: Vec<BackupId>,
266 +         dry_run: bool,
267 ~     ) -> BackupEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:277:5
    |
277 | /     pub fn restore_progress(
278 | |         &self,
279 | |         backup_id: BackupId,
280 | |         current_backup_index: usize,
...   |
283 | |         total_entries: usize,
284 | |     ) -> BackupEvent {
    | |____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
277 ~     #[must_use] pub fn restore_progress(
278 +         &self,
279 +         backup_id: BackupId,
280 +         current_backup_index: usize,
281 +         total_backups: usize,
282 +         entries_restored: usize,
283 +         total_entries: usize,
284 ~     ) -> BackupEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:296:5
    |
296 | /     pub fn cleanup_started(
297 | |         &self,
298 | |         total_backups: usize,
299 | |         retention_policy: String,
300 | |         dry_run: bool,
301 | |     ) -> BackupEvent {
    | |____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
296 ~     #[must_use] pub fn cleanup_started(
297 +         &self,
298 +         total_backups: usize,
299 +         retention_policy: String,
300 +         dry_run: bool,
301 ~     ) -> BackupEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:311:5
    |
311 | /     pub fn backup_deleted(
312 | |         &self,
313 | |         backup_id: BackupId,
314 | |         size_freed: u64,
315 | |         reason: String,
316 | |     ) -> BackupEvent {
    | |____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
311 ~     #[must_use] pub fn backup_deleted(
312 +         &self,
313 +         backup_id: BackupId,
314 +         size_freed: u64,
315 +         reason: String,
316 ~     ) -> BackupEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/events.rs:326:5
    |
326 | /     pub fn cleanup_completed(
327 | |         &self,
328 | |         evaluated_count: usize,
329 | |         deleted_count: usize,
...   |
332 | |         duration: Duration,
333 | |     ) -> BackupEvent {
    | |____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
326 ~     #[must_use] pub fn cleanup_completed(
327 +         &self,
328 +         evaluated_count: usize,
329 +         deleted_count: usize,
330 +         retained_count: usize,
331 +         space_freed: u64,
332 +         duration: Duration,
333 ~     ) -> BackupEvent {
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/manager.rs:158:5
    |
158 |     pub fn new(config: BackupConfig, state_manager: Arc<StateManager>) -> Result<Self> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/manager.rs:176:5
    |
176 |     pub async fn create_backup(&self, incremental: bool) -> BackupResult<BackupStatus> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:209:43
    |
209 |                   StateError::serialization(format!(
    |  ___________________________________________^
210 | |                     "Failed to deserialize snapshot for metadata: {}",
211 | |                     e
212 | |                 ))
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: casts from `u8` to `u32` can be expressed infallibly using `From`
   --> llmspell-state-persistence/src/backup/manager.rs:221:24
    |
221 |                 level: self.config.compression_level as u32,
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `u32::from` instead
    |
221 -                 level: self.config.compression_level as u32,
221 +                 level: u32::from(self.config.compression_level),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:234:46
    |
234 |             .map_err(|e| StateError::storage(format!("Failed to write backup file: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
234 -             .map_err(|e| StateError::storage(format!("Failed to write backup file: {}", e)))?;
234 +             .map_err(|e| StateError::storage(format!("Failed to write backup file: {e}")))?;
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/manager.rs:290:5
    |
290 | /     pub async fn restore_backup(
291 | |         &self,
292 | |         backup_id: &str,
293 | |         options: RestoreOptions,
294 | |     ) -> BackupResult<()> {
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/manager.rs:342:5
    |
342 |     pub async fn list_backups(&self) -> BackupResult<Vec<BackupStatus>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/manager.rs:367:5
    |
367 |     pub async fn validate_backup(&self, backup_id: &str) -> BackupResult<BackupValidation> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:377:29
    |
377 |                 errors.push(format!("Failed to load metadata: {}", e));
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
377 -                 errors.push(format!("Failed to load metadata: {}", e));
377 +                 errors.push(format!("Failed to load metadata: {e}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:394:29
    |
394 |                 errors.push(format!("Failed to read backup file: {}", e));
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
394 -                 errors.push(format!("Failed to read backup file: {}", e));
394 +                 errors.push(format!("Failed to read backup file: {e}"));
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/manager.rs:435:27
    |
435 |     fn generate_backup_id(&self) -> BackupId {
    |                           ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: use of `format!` to build up a string from an iterator
   --> llmspell-state-persistence/src/backup/manager.rs:440:37
    |
440 |           let random_suffix: String = (0..8)
    |  _____________________________________^
441 | |             .map(|_| format!("{:x}", rand::random::<u8>()))
442 | |             .collect();
    | |______________________^
    |
help: call `fold` instead
   --> llmspell-state-persistence/src/backup/manager.rs:441:14
    |
441 |             .map(|_| format!("{:x}", rand::random::<u8>()))
    |              ^^^
help: ... and use the `write!` macro here
   --> llmspell-state-persistence/src/backup/manager.rs:441:22
    |
441 |             .map(|_| format!("{:x}", rand::random::<u8>()))
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = note: this can be written more efficiently by appending to a `String` directly
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_collect
    = note: `-W clippy::format-collect` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::format_collect)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:443:9
    |
443 |         format!("backup_{}_{}", timestamp, random_suffix)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
443 -         format!("backup_{}_{}", timestamp, random_suffix)
443 +         format!("backup_{timestamp}_{random_suffix}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:457:37
    |
457 |         self.config.backup_dir.join(format!("{}.backup", backup_id))
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
457 -         self.config.backup_dir.join(format!("{}.backup", backup_id))
457 +         self.config.backup_dir.join(format!("{backup_id}.backup"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:465:48
    |
465 |             .ok_or_else(|| StateError::storage(format!("Backup not found: {}", backup_id)))
    |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
465 -             .ok_or_else(|| StateError::storage(format!("Backup not found: {}", backup_id)))
465 +             .ok_or_else(|| StateError::storage(format!("Backup not found: {backup_id}")))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:471:39
    |
471 |             StateError::serialization(format!("Failed to serialize metadata: {}", e))
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
471 -             StateError::serialization(format!("Failed to serialize metadata: {}", e))
471 +             StateError::serialization(format!("Failed to serialize metadata: {e}"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:475:46
    |
475 |             .map_err(|e| StateError::storage(format!("Failed to write metadata file: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
475 -             .map_err(|e| StateError::storage(format!("Failed to write metadata file: {}", e)))?;
475 +             .map_err(|e| StateError::storage(format!("Failed to write metadata file: {e}")))?;
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/manager.rs:479:28
    |
479 |     fn calculate_checksums(&self, data: &[u8]) -> HashMap<String, String> {
    |                            ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:484:48
    |
484 |         checksums.insert("sha256".to_string(), format!("{:x}", hash));
    |                                                ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
484 -         checksums.insert("sha256".to_string(), format!("{:x}", hash));
484 +         checksums.insert("sha256".to_string(), format!("{hash:x}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/manager.rs:566:46
    |
566 |             .map_err(|e| StateError::storage(format!("Failed to read backup: {}", e)))?;
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
566 -             .map_err(|e| StateError::storage(format!("Failed to read backup: {}", e)))?;
566 +             .map_err(|e| StateError::storage(format!("Failed to read backup: {e}")))?;
    |

warning: this function's return value is unnecessary
   --> llmspell-state-persistence/src/backup/manager.rs:618:5
    |
618 | /     fn load_backup_index(&mut self) -> Result<()> {
619 | |         // Load existing backup metadata from disk
620 | |         let mut loaded_backups = Vec::new();
...   |
650 | |         Ok(())
651 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove the return type...
    |
618 -     fn load_backup_index(&mut self) -> Result<()> {
618 +     fn load_backup_index(&mut self) -> () {
    |
help: ...and then remove returned values
    |
650 -         Ok(())
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/manager.rs:654:5
    |
654 |     pub async fn apply_retention_policies(&self) -> BackupResult<RetentionReport> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/manager.rs:776:5
    |
776 |     pub async fn cleanup_backups(&self) -> BackupResult<RetentionReport> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/recovery.rs:97:5
   |
97 |     pub fn new(backup_manager: Arc<BackupManager>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(backup_manager: Arc<BackupManager>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/recovery.rs:106:5
    |
106 | /     pub async fn recover(
107 | |         &mut self,
108 | |         target_backup: &str,
109 | |         options: AdvancedRecoveryOptions,
110 | |     ) -> Result<RecoveryStatus, StateError> {
    | |___________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/recovery.rs:139:40
    |
139 |                     status.errors.push(format!("Validation failed: {}", e));
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
139 -                     status.errors.push(format!("Validation failed: {}", e));
139 +                     status.errors.push(format!("Validation failed: {e}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/recovery.rs:159:31
    |
159 |                         .push(format!("Rollback point creation failed: {}", e));
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
159 -                         .push(format!("Rollback point creation failed: {}", e));
159 +                         .push(format!("Rollback point creation failed: {e}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/recovery.rs:197:35
    |
197 | ...                   .push(format!("Rollback failed: {}", rollback_err));
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
197 -                             .push(format!("Rollback failed: {}", rollback_err));
197 +                             .push(format!("Rollback failed: {rollback_err}"));
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/backup/recovery.rs:277:5
    |
277 |     pub async fn rollback(&mut self) -> Result<(), StateError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/retention.rs:55:5
   |
55 |     pub fn new(max_age: Duration) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(max_age: Duration) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: returning a `str` unnecessarily tied to the lifetime of arguments
  --> llmspell-state-persistence/src/backup/retention.rs:82:23
   |
82 |     fn name(&self) -> &str {
   |                       ^^^^ help: try: `&'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound
   = note: `-W clippy::unnecessary-literal-bound` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_literal_bound)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/backup/retention.rs:93:5
   |
93 |     pub fn new(max_count: usize) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(max_count: usize) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: returning a `str` unnecessarily tied to the lifetime of arguments
   --> llmspell-state-persistence/src/backup/retention.rs:124:23
    |
124 |     fn name(&self) -> &str {
    |                       ^^^^ help: try: `&'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/retention.rs:133:5
    |
133 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unused `self` argument
   --> llmspell-state-persistence/src/backup/retention.rs:170:9
    |
170 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/backup/retention.rs:204:21
    |
204 |             reason: format!("Importance: {:?}", priority),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
204 -             reason: format!("Importance: {:?}", priority),
204 +             reason: format!("Importance: {priority:?}"),
    |

warning: returning a `str` unnecessarily tied to the lifetime of arguments
   --> llmspell-state-persistence/src/backup/retention.rs:208:23
    |
208 |     fn name(&self) -> &str {
    |                       ^^^^ help: try: `&'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/retention.rs:219:5
    |
219 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/backup/retention.rs:225:5
    |
225 |     pub fn add_policy(mut self, policy: Box<dyn RetentionPolicy>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_policy(mut self, policy: Box<dyn RetentionPolicy>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/backup/retention.rs:225:5
    |
225 | /     pub fn add_policy(mut self, policy: Box<dyn RetentionPolicy>) -> Self {
226 | |         self.policies.push(policy);
227 | |         self
228 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: returning a `str` unnecessarily tied to the lifetime of arguments
   --> llmspell-state-persistence/src/backup/retention.rs:278:23
    |
278 |     fn name(&self) -> &str {
    |                       ^^^^ help: try: `&'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_literal_bound

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/circular_ref.rs:22:5
   |
22 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/circular_ref.rs:27:5
   |
27 |     pub fn check_value(&mut self, value: &Value) -> Result<(), CircularReferenceError> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/circular_ref.rs:55:38
   |
55 |                     let field_path = format!("{}.{}", path, key);
   |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
55 -                     let field_path = format!("{}.{}", path, key);
55 +                     let field_path = format!("{path}.{key}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/circular_ref.rs:67:37
   |
67 |                     let elem_path = format!("{}[{}]", path, idx);
   |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
67 -                     let elem_path = format!("{}[{}]", path, idx);
67 +                     let elem_path = format!("{path}[{idx}]");
   |

warning: unused `self` argument
  --> llmspell-state-persistence/src/circular_ref.rs:81:20
   |
81 |     fn hash_object(&self, map: &serde_json::Map<String, Value>) -> u64 {
   |                    ^^^^^
   |
   = help: consider refactoring to an associated function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/circular_ref.rs:105:5
    |
105 |     fn check_circular_references(&self) -> Result<(), CircularReferenceError>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/circular_ref.rs:121:1
    |
121 | pub fn safe_serialize<T: Serialize>(value: &T) -> Result<Vec<u8>, String> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/circular_ref.rs:124:20
    |
124 |         return Err(format!("Circular reference detected: {}", e));
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
124 -         return Err(format!("Circular reference detected: {}", e));
124 +         return Err(format!("Circular reference detected: {e}"));
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/circular_ref.rs:132:1
    |
132 | pub fn safe_to_json<T: Serialize>(value: &T) -> Result<Value, String> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/circular_ref.rs:135:20
    |
135 |         return Err(format!("Circular reference detected: {}", e));
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
135 -         return Err(format!("Circular reference detected: {}", e));
135 +         return Err(format!("Circular reference detected: {e}"));
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/config.rs:37:5
   |
37 |     pub fn builder() -> PersistenceConfigBuilder {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> PersistenceConfigBuilder`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/config.rs:50:5
   |
50 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/config.rs:113:5
    |
113 |     pub fn build(self) -> PersistenceConfig {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> PersistenceConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/config.rs:195:5
    |
195 |     pub fn v1() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn v1() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/config.rs:288:5
    |
288 |     pub fn extension(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn extension(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/hooks.rs:134:1
    |
134 | pub fn aggregate_hook_results(results: &[HookResult]) -> HookResult {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn aggregate_hook_results(results: &[HookResult]) -> HookResult`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/key_manager.rs:11:5
   |
11 |     pub fn validate_key(key: &str) -> StateResult<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: single-character string constant used as pattern
  --> llmspell-state-persistence/src/key_manager.rs:25:47
   |
25 |         if key.contains("..") || key.contains("\\") || key.contains("//") {
   |                                               ^^^^ help: consider using a `char`: `'\\'`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_char_pattern
   = note: `-W clippy::single-char-pattern` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_char_pattern)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/key_manager.rs:49:5
   |
49 |     pub fn create_scoped_key(scope: &StateScope, key: &str) -> StateResult<String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/key_manager.rs:66:5
   |
66 |     pub fn extract_key(scoped_key: &str, scope: &StateScope) -> Option<String> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn extract_key(scoped_key: &str, scope: &StateScope) -> Option<String>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/key_manager.rs:76:5
   |
76 |     pub fn belongs_to_scope(scoped_key: &str, scope: &StateScope) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn belongs_to_scope(scoped_key: &str, scope: &StateScope) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-state-persistence/src/key_manager.rs:87:5
   |
87 |     pub fn generate_internal_key(prefix: &str, id: &str) -> String {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-state-persistence/src/key_manager.rs:88:25
   |
88 |           let timestamp = std::time::SystemTime::now()
   |  _________________________^
89 | |             .duration_since(std::time::UNIX_EPOCH)
90 | |             .unwrap()
   | |_____________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
   = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/key_manager.rs:87:5
   |
87 |     pub fn generate_internal_key(prefix: &str, id: &str) -> String {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_internal_key(prefix: &str, id: &str) -> String`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/key_manager.rs:93:9
   |
93 |         format!("__{}:{}:{}", prefix, id, timestamp)
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
93 -         format!("__{}:{}:{}", prefix, id, timestamp)
93 +         format!("__{prefix}:{id}:{timestamp}")
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/key_manager.rs:97:5
   |
97 |     pub fn sanitize_key(key: &str) -> String {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sanitize_key(key: &str) -> String`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/key_manager.rs:121:5
    |
121 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/key_manager.rs:140:5
    |
140 | /     pub fn has_permission(
141 | |         &self,
142 | |         agent_id: &str,
143 | |         scope: &StateScope,
144 | |         permission: &StatePermission,
145 | |     ) -> bool {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
140 ~     #[must_use] pub fn has_permission(
141 +         &self,
142 +         agent_id: &str,
143 +         scope: &StateScope,
144 +         permission: &StatePermission,
145 ~     ) -> bool {
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/manager.rs:56:5
   |
56 |     pub fn new(storage_adapter: Arc<StateStorageAdapter>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(storage_adapter: Arc<StateStorageAdapter>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/manager.rs:60:5
   |
60 | /     pub async fn persist_hook_execution(
61 | |         &self,
62 | |         hook: &dyn ReplayableHook,
63 | |         context: &HookContext,
64 | |         result: &HookResult,
65 | |         duration: Duration,
66 | |     ) -> StateResult<()> {
   | |________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/manager.rs:89:5
   |
89 | /     pub async fn get_hook_executions_by_correlation(
90 | |         &self,
91 | |         correlation_id: Uuid,
92 | |     ) -> StateResult<Vec<SerializedHookExecution>> {
   | |__________________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/manager.rs:93:22
   |
93 |         let prefix = format!("hook_history:{}:", correlation_id);
   |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
93 -         let prefix = format!("hook_history:{}:", correlation_id);
93 +         let prefix = format!("hook_history:{correlation_id}:");
   |

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/manager.rs:107:14
    |
107 | /// Enhanced StateManager with persistent backend
    |              ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
107 - /// Enhanced StateManager with persistent backend
107 + /// Enhanced `StateManager` with persistent backend
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:150:5
    |
150 |     pub async fn new() -> StateResult<Self> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:159:5
    |
159 |     pub async fn new_benchmark() -> StateResult<Self> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:199:5
    |
199 | /     pub async fn with_backend(
200 | |         backend_type: crate::config::StorageBackendType,
201 | |         config: PersistenceConfig,
202 | |     ) -> StateResult<Self> {
    | |__________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:274:5
    |
274 | /     pub async fn set_with_hooks(
275 | |         &self,
276 | |         scope: StateScope,
277 | |         key: &str,
278 | |         value: Value,
279 | |     ) -> StateResult<()> {
    | |________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: unnecessary boolean `not` operation
   --> llmspell-state-persistence/src/manager.rs:337:27
    |
337 |           let pre_results = if !before_hooks.is_empty() {
    |  ___________________________^
338 | |             self.hook_executor
339 | |                 .execute_hooks(&before_hooks, &mut hook_context)
340 | |                 .await
...   |
343 | |             vec![]
344 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
    = note: `-W clippy::if-not-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::if_not_else)]`
help: try
    |
337 ~         let pre_results = if before_hooks.is_empty() {
338 +             vec![]
339 +         } else {
340 +             self.hook_executor
341 +                 .execute_hooks(&before_hooks, &mut hook_context)
342 +                 .await
343 +                 .map_err(|e| StateError::hook_error(e.to_string()))?
344 ~         };
    |

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-state-persistence/src/manager.rs:348:13
    |
348 | /             HookResult::Continue => value,
349 | |             HookResult::Modified(new_data) => new_data
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-state-persistence/src/manager.rs:358:13
    |
358 |             _ => value,
    |             ^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: unnecessary boolean `not` operation
   --> llmspell-state-persistence/src/manager.rs:463:27
    |
463 |           let pre_results = if !hooks_to_execute.is_empty() {
    |  ___________________________^
464 | |             self.hook_executor
465 | |                 .execute_hooks(&hooks_to_execute, &mut hook_context)
466 | |                 .await
...   |
469 | |             vec![]
470 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
463 ~         let pre_results = if hooks_to_execute.is_empty() {
464 +             vec![]
465 +         } else {
466 +             self.hook_executor
467 +                 .execute_hooks(&hooks_to_execute, &mut hook_context)
468 +                 .await
469 +                 .map_err(|e| StateError::hook_error(e.to_string()))?
470 ~         };
    |

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-state-persistence/src/manager.rs:474:13
    |
474 | /             HookResult::Continue => value,
475 | |             HookResult::Modified(new_data) => new_data
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-state-persistence/src/manager.rs:484:13
    |
484 |             _ => value,
    |             ^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:552:5
    |
552 |     pub async fn set(&self, scope: StateScope, key: &str, value: Value) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:557:5
    |
557 | /     pub async fn set_with_class(
558 | |         &self,
559 | |         scope: StateScope,
560 | |         key: &str,
561 | |         value: Value,
562 | |         class: Option<StateClass>,
563 | |     ) -> StateResult<()> {
    | |________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:660:5
    |
660 |     pub async fn get(&self, scope: StateScope, key: &str) -> StateResult<Option<Value>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:665:5
    |
665 | /     pub async fn get_with_class(
666 | |         &self,
667 | |         scope: StateScope,
668 | |         key: &str,
669 | |         class: Option<StateClass>,
670 | |     ) -> StateResult<Option<Value>> {
    | |___________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:755:5
    |
755 |     pub async fn delete(&self, scope: StateScope, key: &str) -> StateResult<bool> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:773:5
    |
773 |     pub async fn list_keys(&self, scope: StateScope) -> StateResult<Vec<String>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:796:5
    |
796 |     pub async fn clear_scope(&self, scope: StateScope) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/manager.rs:845:5
    |
845 | /     pub async fn save_agent_state(
846 | |         &self,
847 | |         agent_state: &crate::agent_state::PersistentAgentState,
848 | |     ) -> StateResult<()> {
    | |________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1079:5
     |
1079 | /     pub async fn load_agent_state(
1080 | |         &self,
1081 | |         agent_id: &str,
1082 | |     ) -> StateResult<Option<crate::agent_state::PersistentAgentState>> {
     | |______________________________________________________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1088:19
     |
1088 |         let key = format!("agent_state:{}", agent_id);
     |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1088 -         let key = format!("agent_state:{}", agent_id);
1088 +         let key = format!("agent_state:{agent_id}");
     |

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1105:5
     |
1105 |     pub async fn delete_agent_state(&self, agent_id: &str) -> StateResult<bool> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1106:19
     |
1106 |         let key = format!("agent_state:{}", agent_id);
     |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1106 -         let key = format!("agent_state:{}", agent_id);
1106 +         let key = format!("agent_state:{agent_id}");
     |

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1193:5
     |
1193 |     pub async fn list_agent_states(&self) -> StateResult<Vec<String>> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: redundant closure
    --> llmspell-state-persistence/src/manager.rs:1200:56
     |
1200 |             .filter_map(|k| k.strip_prefix(prefix).map(|s| s.to_string()))
     |                                                        ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
     = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1205:5
     |
1205 | /     pub async fn get_agent_metadata(
1206 | |         &self,
1207 | |         agent_id: &str,
1208 | |     ) -> StateResult<Option<crate::agent_state::AgentMetadata>> {
     | |_______________________________________________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1242:5
     |
1242 | /     pub async fn load_agent_state_fast(
1243 | |         &self,
1244 | |         agent_id: &str,
1245 | |     ) -> StateResult<Option<crate::agent_state::PersistentAgentState>> {
     | |______________________________________________________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1253:23
     |
1253 |             let key = format!("agent_state:{}", agent_id);
     |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1253 -             let key = format!("agent_state:{}", agent_id);
1253 +             let key = format!("agent_state:{agent_id}");
     |

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1263:5
     |
1263 |     pub async fn get_scoped(&self, scope: StateScope, key: &str) -> StateResult<Option<Value>> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1268:5
     |
1268 |     pub async fn set_scoped(&self, scope: StateScope, key: &str, value: Value) -> StateResult<()> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1273:5
     |
1273 |     pub async fn delete_scoped(&self, scope: StateScope, key: &str) -> StateResult<bool> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1278:5
     |
1278 |     pub async fn list_keys_in_scope(&self, scope: StateScope) -> StateResult<Vec<String>> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1283:5
     |
1283 |     pub async fn exists_in_scope(&self, scope: StateScope, key: &str) -> StateResult<bool> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1303:5
     |
1303 |     pub async fn get_all_in_scope(&self, scope: StateScope) -> StateResult<HashMap<String, Value>> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1317:5
     |
1317 |     pub async fn clear_scope_count(&self, scope: StateScope) -> StateResult<usize> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1329:5
     |
1329 | /     pub async fn copy_scope(
1330 | |         &self,
1331 | |         from_scope: StateScope,
1332 | |         to_scope: StateScope,
1333 | |     ) -> StateResult<usize> {
     | |___________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1345:5
     |
1345 | /     pub async fn move_scope(
1346 | |         &self,
1347 | |         from_scope: StateScope,
1348 | |         to_scope: StateScope,
1349 | |     ) -> StateResult<usize> {
     | |___________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: unused `self` argument
    --> llmspell-state-persistence/src/manager.rs:1357:9
     |
1357 |         &self,
     |         ^^^^^
     |
     = help: consider refactoring to an associated function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: it is more idiomatic to use `Option<&T>` instead of `&Option<T>`
    --> llmspell-state-persistence/src/manager.rs:1356:5
     |
1356 | /     fn create_state_change_event(
1357 | |         &self,
1358 | |         event_type: &str,
1359 | |         scope: &StateScope,
1360 | |         key: &str,
1361 | |         old_value: &Option<Value>,
     | |                    -------------- help: change this to: `Option<&Value>`
...    |
1376 | |             .with_tag("state_change")
1377 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ref_option
     = note: `-W clippy::ref-option` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::ref_option)]`

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1392:5
     |
1392 | /     pub fn save_agent_state_benchmark_sync(
1393 | |         &self,
1394 | |         agent_state: &crate::agent_state::PersistentAgentState,
1395 | |     ) -> StateResult<()> {
     | |________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1404:5
     |
1404 |     pub fn enable_async_hooks(&mut self) -> StateResult<()> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1415:5
     |
1415 |     pub async fn disable_async_hooks(&mut self) -> StateResult<()> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
    --> llmspell-state-persistence/src/manager.rs:1428:48
     |
1428 |     /// Start async hook processing (alias for enable_async_hooks for compatibility)
     |                                                ^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
     |
1428 -     /// Start async hook processing (alias for enable_async_hooks for compatibility)
1428 +     /// Start async hook processing (alias for `enable_async_hooks` for compatibility)
     |

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1429:5
     |
1429 |     pub async fn start_async_hooks(&mut self) -> StateResult<()> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
    --> llmspell-state-persistence/src/manager.rs:1433:47
     |
1433 |     /// Stop async hook processing (alias for disable_async_hooks for compatibility)
     |                                               ^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
     |
1433 -     /// Stop async hook processing (alias for disable_async_hooks for compatibility)
1433 +     /// Stop async hook processing (alias for `disable_async_hooks` for compatibility)
     |

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1434:5
     |
1434 |     pub async fn stop_async_hooks(&mut self) -> StateResult<()> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1440:5
     |
1440 |     pub async fn wait_for_hooks(&self, timeout: Duration) -> StateResult<()> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1460:5
     |
1460 | /     pub fn configure_hook_batching(
1461 | |         &mut self,
1462 | |         _batch_size: usize,
1463 | |         _batch_timeout: Duration,
1464 | |     ) -> StateResult<()> {
     | |________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1471:5
     |
1471 | /     pub async fn set_with_async_hooks_public(
1472 | |         &self,
1473 | |         key: &str,
1474 | |         value: Value,
1475 | |         class: StateClass,
1476 | |         hooks: Vec<Arc<dyn Hook>>,
1477 | |     ) -> StateResult<()> {
     | |________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1512:5
     |
1512 | /     pub async fn save_agent_state_with_hooks(
1513 | |         &self,
1514 | |         agent_id: &str,
1515 | |         agent_state: Value,
1516 | |         hooks: Vec<Arc<dyn Hook>>,
1517 | |     ) -> StateResult<()> {
     | |________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: calling `ToolUsageStats::default()` is more clear than this expression
    --> llmspell-state-persistence/src/manager.rs:1522:31
     |
1522 |             tool_usage_stats: Default::default(),
     |                               ^^^^^^^^^^^^^^^^^^ help: try: `ToolUsageStats::default()`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
     = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: docs for function which may panic missing `# Panics` section
    --> llmspell-state-persistence/src/manager.rs:1596:5
     |
1596 | /     pub async fn track_artifact_in_state(
1597 | |         &self,
1598 | |         scope: StateScope,
1599 | |         key: &str,
1600 | |         artifact_id: ArtifactId,
1601 | |         operation: StateOperation,
1602 | |     ) -> StateResult<()> {
     | |________________________^
     |
note: first possible panic found here
    --> llmspell-state-persistence/src/manager.rs:1637:26
     |
1637 |               "timestamp": SystemTime::now()
     |  __________________________^
1638 | |                 .duration_since(SystemTime::UNIX_EPOCH)
1639 | |                 .unwrap()
     | |_________________________^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-state-persistence/src/manager.rs:1596:5
     |
1596 | /     pub async fn track_artifact_in_state(
1597 | |         &self,
1598 | |         scope: StateScope,
1599 | |         key: &str,
1600 | |         artifact_id: ArtifactId,
1601 | |         operation: StateOperation,
1602 | |     ) -> StateResult<()> {
     | |________________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1605:66
     |
1605 |             StateScope::Agent(id) => CoreComponentId::from_name(&format!("agent:{}", id)),
     |                                                                  ^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1605 -             StateScope::Agent(id) => CoreComponentId::from_name(&format!("agent:{}", id)),
1605 +             StateScope::Agent(id) => CoreComponentId::from_name(&format!("agent:{id}")),
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1606:65
     |
1606 |             StateScope::Tool(id) => CoreComponentId::from_name(&format!("tool:{}", id)),
     |                                                                 ^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1606 -             StateScope::Tool(id) => CoreComponentId::from_name(&format!("tool:{}", id)),
1606 +             StateScope::Tool(id) => CoreComponentId::from_name(&format!("tool:{id}")),
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1607:69
     |
1607 |             StateScope::Workflow(id) => CoreComponentId::from_name(&format!("workflow:{}", id)),
     |                                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1607 -             StateScope::Workflow(id) => CoreComponentId::from_name(&format!("workflow:{}", id)),
1607 +             StateScope::Workflow(id) => CoreComponentId::from_name(&format!("workflow:{id}")),
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1608:67
     |
1608 |             StateScope::Custom(id) => CoreComponentId::from_name(&format!("custom:{}", id)),
     |                                                                   ^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1608 -             StateScope::Custom(id) => CoreComponentId::from_name(&format!("custom:{}", id)),
1608 +             StateScope::Custom(id) => CoreComponentId::from_name(&format!("custom:{id}")),
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1610:68
     |
1610 |             StateScope::Session(id) => CoreComponentId::from_name(&format!("session:{}", id)),
     |                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1610 -             StateScope::Session(id) => CoreComponentId::from_name(&format!("session:{}", id)),
1610 +             StateScope::Session(id) => CoreComponentId::from_name(&format!("session:{id}")),
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1611:65
     |
1611 |             StateScope::User(id) => CoreComponentId::from_name(&format!("user:{}", id)),
     |                                                                 ^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1611 -             StateScope::User(id) => CoreComponentId::from_name(&format!("user:{}", id)),
1611 +             StateScope::User(id) => CoreComponentId::from_name(&format!("user:{id}")),
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1612:65
     |
1612 |             StateScope::Hook(id) => CoreComponentId::from_name(&format!("hook:{}", id)),
     |                                                                 ^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1612 -             StateScope::Hook(id) => CoreComponentId::from_name(&format!("hook:{}", id)),
1612 +             StateScope::Hook(id) => CoreComponentId::from_name(&format!("hook:{id}")),
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-state-persistence/src/manager.rs:1633:28
     |
1633 |         let artifact_key = format!("artifact:{}:{}", key, artifact_id_str);
     |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1633 -         let artifact_key = format!("artifact:{}:{}", key, artifact_id_str);
1633 +         let artifact_key = format!("artifact:{key}:{artifact_id_str}");
     |

warning: item in documentation is missing backticks
  --> llmspell-state-persistence/src/migration/engine.rs:49:52
   |
49 | /// Migration engine that integrates with existing StateManager infrastructure
   |                                                    ^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
49 - /// Migration engine that integrates with existing StateManager infrastructure
49 + /// Migration engine that integrates with existing `StateManager` infrastructure
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/engine.rs:76:5
   |
76 | /     pub fn new(
77 | |         storage_adapter: Arc<StateStorageAdapter>,
78 | |         schema_registry: SchemaRegistry,
79 | |         hook_executor: Arc<HookExecutor>,
80 | |         correlation_tracker: Arc<EventCorrelationTracker>,
81 | |         event_bus: Arc<EventBus>,
82 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
76 ~     #[must_use] pub fn new(
77 +         storage_adapter: Arc<StateStorageAdapter>,
78 +         schema_registry: SchemaRegistry,
79 +         hook_executor: Arc<HookExecutor>,
80 +         correlation_tracker: Arc<EventCorrelationTracker>,
81 +         event_bus: Arc<EventBus>,
82 ~     ) -> Self {
   |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/engine.rs:97:5
    |
97  | /     pub async fn migrate(
98  | |         &self,
99  | |         from_version: &SemanticVersion,
100 | |         to_version: &SemanticVersion,
101 | |         config: MigrationConfig,
102 | |     ) -> StateResult<MigrationResult> {
    | |_____________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (114/100)
   --> llmspell-state-persistence/src/migration/engine.rs:97:5
    |
97  | /     pub async fn migrate(
98  | |         &self,
99  | |         from_version: &SemanticVersion,
100 | |         to_version: &SemanticVersion,
...   |
247 | |         Ok(result)
248 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: matching over `()` is more explicit
   --> llmspell-state-persistence/src/migration/engine.rs:212:28
    |
212 |                         Ok(_) => {
    |                            ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/engine.rs:221:46
    |
221 | ...                   result.add_error(format!("Rollback failed: {}", rollback_err));
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
221 -                             result.add_error(format!("Rollback failed: {}", rollback_err));
221 +                             result.add_error(format!("Rollback failed: {rollback_err}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/engine.rs:278:17
    |
278 |                 format!("migration_step_{}", step_index),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
278 -                 format!("migration_step_{}", step_index),
278 +                 format!("migration_step_{step_index}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/engine.rs:318:25
    |
318 |                 reason: format!("Failed to list keys: {}", e),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
318 -                 reason: format!("Failed to list keys: {}", e),
318 +                 reason: format!("Failed to list keys: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/engine.rs:340:41
    |
340 | ...                   reason: format!("Transformation failed for key '{}': {}", key, e),
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
340 -                                 reason: format!("Transformation failed for key '{}': {}", key, e),
340 +                                 reason: format!("Transformation failed for key '{key}': {e}"),
    |

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/migration/engine.rs:524:46
    |
524 |     /// Emit typed migration event using new MigrationEvent system
    |                                              ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
524 -     /// Emit typed migration event using new MigrationEvent system
524 +     /// Emit typed migration event using new `MigrationEvent` system
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/engine.rs:591:5
    |
591 |     pub fn get_active_migrations(&self) -> HashMap<Uuid, MigrationContext> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_active_migrations(&self) -> HashMap<Uuid, MigrationContext>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/engine.rs:597:5
    |
597 |     pub async fn cancel_migration(&self, migration_id: Uuid) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/engine.rs:603:44
    |
603 |               Err(StateError::MigrationError(format!(
    |  ____________________________________________^
604 | |                 "Migration {} not found or already completed",
605 | |                 migration_id
606 | |             )))
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:132:5
    |
132 |     pub fn migration_id(&self) -> Uuid {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn migration_id(&self) -> Uuid`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:149:5
    |
149 |     pub fn event_type(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn event_type(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:166:5
    |
166 |     pub fn is_error(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_error(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:180:5
    |
180 |     pub fn is_completion(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_completion(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:191:5
    |
191 |     pub fn create_metadata(&self, correlation_id: Uuid) -> EventMetadata {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_metadata(&self, correlation_id: Uuid) -> EventMetadata`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/migration/events.rs:226:13
    |
226 | /// Convert MigrationEvent to UniversalEvent for existing event system integration
    |             ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
226 - /// Convert MigrationEvent to UniversalEvent for existing event system integration
226 + /// Convert `MigrationEvent` to UniversalEvent for existing event system integration
    |

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/migration/events.rs:226:31
    |
226 | /// Convert MigrationEvent to UniversalEvent for existing event system integration
    |                               ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
226 - /// Convert MigrationEvent to UniversalEvent for existing event system integration
226 + /// Convert MigrationEvent to `UniversalEvent` for existing event system integration
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:257:5
    |
257 |     pub fn new(migration_id: Uuid) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(migration_id: Uuid) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:261:5
    |
261 | /     pub fn migration_started(
262 | |         &self,
263 | |         from_version: SemanticVersion,
264 | |         to_version: SemanticVersion,
265 | |         total_steps: usize,
266 | |         dry_run: bool,
267 | |     ) -> MigrationEvent {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
261 ~     #[must_use] pub fn migration_started(
262 +         &self,
263 +         from_version: SemanticVersion,
264 +         to_version: SemanticVersion,
265 +         total_steps: usize,
266 +         dry_run: bool,
267 ~     ) -> MigrationEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:277:5
    |
277 |     pub fn step_started(&self, step_index: usize, step_description: String) -> MigrationEvent {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn step_started(&self, step_index: usize, step_description: String) -> MigrationEvent`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:285:5
    |
285 | /     pub fn step_completed(
286 | |         &self,
287 | |         step_index: usize,
288 | |         items_processed: usize,
289 | |         duration: Duration,
290 | |     ) -> MigrationEvent {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
285 ~     #[must_use] pub fn step_completed(
286 +         &self,
287 +         step_index: usize,
288 +         items_processed: usize,
289 +         duration: Duration,
290 ~     ) -> MigrationEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:299:5
    |
299 | /     pub fn step_failed(
300 | |         &self,
301 | |         step_index: usize,
302 | |         error: String,
303 | |         items_processed: usize,
304 | |     ) -> MigrationEvent {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
299 ~     #[must_use] pub fn step_failed(
300 +         &self,
301 +         step_index: usize,
302 +         error: String,
303 +         items_processed: usize,
304 ~     ) -> MigrationEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:313:5
    |
313 | /     pub fn migration_completed(
314 | |         &self,
315 | |         from_version: SemanticVersion,
316 | |         to_version: SemanticVersion,
...   |
319 | |         steps_completed: usize,
320 | |     ) -> MigrationEvent {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
313 ~     #[must_use] pub fn migration_completed(
314 +         &self,
315 +         from_version: SemanticVersion,
316 +         to_version: SemanticVersion,
317 +         total_duration: Duration,
318 +         items_migrated: usize,
319 +         steps_completed: usize,
320 ~     ) -> MigrationEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:331:5
    |
331 | /     pub fn migration_failed(
332 | |         &self,
333 | |         from_version: SemanticVersion,
334 | |         to_version: SemanticVersion,
...   |
337 | |         rollback_initiated: bool,
338 | |     ) -> MigrationEvent {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
331 ~     #[must_use] pub fn migration_failed(
332 +         &self,
333 +         from_version: SemanticVersion,
334 +         to_version: SemanticVersion,
335 +         error: String,
336 +         items_processed: usize,
337 +         rollback_initiated: bool,
338 ~     ) -> MigrationEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:349:5
    |
349 | /     pub fn validation_event(
350 | |         &self,
351 | |         phase: ValidationPhase,
352 | |         result: ValidationResult,
353 | |         items_validated: usize,
354 | |         duration: Duration,
355 | |     ) -> MigrationEvent {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
349 ~     #[must_use] pub fn validation_event(
350 +         &self,
351 +         phase: ValidationPhase,
352 +         result: ValidationResult,
353 +         items_validated: usize,
354 +         duration: Duration,
355 ~     ) -> MigrationEvent {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/events.rs:365:5
    |
365 | /     pub fn backup_event(
366 | |         &self,
367 | |         backup_type: BackupType,
368 | |         backup_size_bytes: usize,
369 | |         duration: Duration,
370 | |     ) -> MigrationEvent {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
365 ~     #[must_use] pub fn backup_event(
366 +         &self,
367 +         backup_type: BackupType,
368 +         backup_size_bytes: usize,
369 +         duration: Duration,
370 ~     ) -> MigrationEvent {
    |

warning: item in documentation is missing backticks
  --> llmspell-state-persistence/src/migration/planner.rs:37:58
   |
37 | /// Enhanced migration step with more detail than legacy MigrationStep
   |                                                          ^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
37 - /// Enhanced migration step with more detail than legacy MigrationStep
37 + /// Enhanced migration step with more detail than legacy `MigrationStep`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/planner.rs:52:5
   |
52 |     pub fn from_legacy(legacy: &LegacyMigrationStep) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_legacy(legacy: &LegacyMigrationStep) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/planner.rs:66:5
   |
66 |     pub fn to_legacy(&self) -> LegacyMigrationStep {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn to_legacy(&self) -> LegacyMigrationStep`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-state-persistence/src/migration/planner.rs:76:50
   |
76 | /// Enhanced migration plan that integrates with StateManager
   |                                                  ^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
76 - /// Enhanced migration plan that integrates with StateManager
76 + /// Enhanced migration plan that integrates with `StateManager`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/planner.rs:93:5
   |
93 | /     pub fn from_schema_plan(
94 | |         schema_plan: SchemaMigrationPlan,
95 | |         compatibility: CompatibilityResult,
96 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
93 ~     #[must_use] pub fn from_schema_plan(
94 +         schema_plan: SchemaMigrationPlan,
95 +         compatibility: CompatibilityResult,
96 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:128:5
    |
128 |     pub fn is_safe(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_safe(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:133:5
    |
133 |     pub fn has_breaking_changes(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_breaking_changes(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:137:5
    |
137 |     pub fn get_affected_fields(&self) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_affected_fields(&self) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/migration/planner.rs:146:44
    |
146 | /// Migration planner that integrates with StateManager
    |                                            ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
146 - /// Migration planner that integrates with StateManager
146 + /// Migration planner that integrates with `StateManager`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:153:5
    |
153 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:160:5
    |
160 |     pub fn with_registry(schema_registry: SchemaRegistry) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_registry(schema_registry: SchemaRegistry) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/planner.rs:168:5
    |
168 |     pub fn register_schema(&mut self, schema: EnhancedStateSchema) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/planner.rs:179:5
    |
179 | /     pub fn create_migration_plan(
180 | |         &mut self,
181 | |         from_version: &SemanticVersion,
182 | |         to_version: &SemanticVersion,
183 | |     ) -> StateResult<MigrationPlan> {
    | |___________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/planner.rs:189:25
    |
189 |                 reason: format!("Source schema {} not found", from_version),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
189 -                 reason: format!("Source schema {} not found", from_version),
189 +                 reason: format!("Source schema {from_version} not found"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/planner.rs:194:25
    |
194 |                 reason: format!("Target schema {} not found", to_version),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
194 -                 reason: format!("Target schema {} not found", to_version),
194 +                 reason: format!("Target schema {to_version} not found"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/planner.rs:219:5
    |
219 |     pub fn validate_plan(&self, plan: &MigrationPlan) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/planner.rs:269:5
    |
269 | /     pub fn find_migration_paths(
270 | |         &self,
271 | |         from_version: &SemanticVersion,
272 | |     ) -> StateResult<Vec<SemanticVersion>> {
    | |__________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:277:5
    |
277 | /     pub fn is_migration_possible(
278 | |         &self,
279 | |         from_version: &SemanticVersion,
280 | |         to_version: &SemanticVersion,
281 | |     ) -> bool {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
277 ~     #[must_use] pub fn is_migration_possible(
278 +         &self,
279 +         from_version: &SemanticVersion,
280 +         to_version: &SemanticVersion,
281 ~     ) -> bool {
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/planner.rs:294:5
    |
294 | /     pub fn estimate_complexity(
295 | |         &self,
296 | |         from_version: &SemanticVersion,
297 | |         to_version: &SemanticVersion,
298 | |     ) -> StateResult<MigrationComplexity> {
    | |_________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/planner.rs:327:35
    |
327 |     fn calculate_complexity_score(&self, compatibility: &CompatibilityResult) -> u32 {
    |                                   ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: casting `usize` to `u32` may truncate the value on targets with 64-bit wide pointers
   --> llmspell-state-persistence/src/migration/planner.rs:336:18
    |
336 |         score += compatibility.breaking_changes.len() as u32 * 50;
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
    = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
    |
336 -         score += compatibility.breaking_changes.len() as u32 * 50;
336 +         score += u32::try_from(compatibility.breaking_changes.len()) * 50;
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:350:5
    |
350 |     pub fn schema_registry(&self) -> &SchemaRegistry {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn schema_registry(&self) -> &SchemaRegistry`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:373:5
    |
373 |     pub fn is_simple(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_simple(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/planner.rs:378:5
    |
378 |     pub fn is_complex(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_complex(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/transforms.rs:84:5
   |
84 |     pub fn source_fields(&self) -> Vec<&str> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn source_fields(&self) -> Vec<&str>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
  --> llmspell-state-persistence/src/migration/transforms.rs:87:13
   |
87 |             FieldTransform::Convert { from_field, .. } => vec![from_field],
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: try changing either arm body
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
   |
86 -             FieldTransform::Copy { from_field, .. } => vec![from_field],
87 -             FieldTransform::Convert { from_field, .. } => vec![from_field],
86 +             FieldTransform::Convert { from_field, .. } | FieldTransform::Copy { from_field, .. } => vec![from_field],
   |

warning: this match arm has an identical body to another arm
  --> llmspell-state-persistence/src/migration/transforms.rs:90:13
   |
90 |             FieldTransform::Split { from_field, .. } => vec![from_field],
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: try changing either arm body
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
   |
86 ~             FieldTransform::Convert { from_field, .. } => vec![from_field],
87 |             FieldTransform::Default { .. } => vec![],
88 |             FieldTransform::Remove { field } => vec![field],
89 ~             FieldTransform::Split { from_field, .. } | FieldTransform::Copy { from_field, .. } => vec![from_field],
   |

warning: this match arm has an identical body to another arm
  --> llmspell-state-persistence/src/migration/transforms.rs:87:13
   |
87 |             FieldTransform::Convert { from_field, .. } => vec![from_field],
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: try changing either arm body
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
   |
87 ~             FieldTransform::Convert { from_field, .. } | FieldTransform::Split { from_field, .. } => vec![from_field],
88 |             FieldTransform::Default { .. } => vec![],
89 |             FieldTransform::Remove { field } => vec![field],
90 ~             FieldTransform::Merge { from_fields, .. } => {
   |

warning: redundant closure
  --> llmspell-state-persistence/src/migration/transforms.rs:92:40
   |
92 |                 from_fields.iter().map(|s| s.as_str()).collect()
   |                                        ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::String::as_str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-state-persistence/src/migration/transforms.rs:95:40
   |
95 |                 from_fields.iter().map(|s| s.as_str()).collect()
   |                                        ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::String::as_str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/transforms.rs:101:5
    |
101 |     pub fn target_fields(&self) -> Vec<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn target_fields(&self) -> Vec<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-state-persistence/src/migration/transforms.rs:104:13
    |
104 |             FieldTransform::Convert { to_field, .. } => vec![to_field],
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
103 -             FieldTransform::Copy { to_field, .. } => vec![to_field],
104 -             FieldTransform::Convert { to_field, .. } => vec![to_field],
103 +             FieldTransform::Convert { to_field, .. } | FieldTransform::Copy { to_field, .. } => vec![to_field],
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-persistence/src/migration/transforms.rs:110:13
    |
110 |             FieldTransform::Merge { to_field, .. } => vec![to_field],
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
103 ~             FieldTransform::Convert { to_field, .. } => vec![to_field],
104 |             FieldTransform::Default { field, .. } => vec![field],
...
108 |             }
109 ~             FieldTransform::Merge { to_field, .. } | FieldTransform::Copy { to_field, .. } => vec![to_field],
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-persistence/src/migration/transforms.rs:104:13
    |
104 |             FieldTransform::Convert { to_field, .. } => vec![to_field],
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
104 ~             FieldTransform::Convert { to_field, .. } | FieldTransform::Merge { to_field, .. } => vec![to_field],
105 |             FieldTransform::Default { field, .. } => vec![field],
...
109 |             }
110 ~             FieldTransform::Custom { to_fields, .. } => {
    |

warning: redundant closure
   --> llmspell-state-persistence/src/migration/transforms.rs:108:38
    |
108 |                 to_fields.iter().map(|s| s.as_str()).collect()
    |                                      ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::String::as_str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-state-persistence/src/migration/transforms.rs:112:38
    |
112 |                 to_fields.iter().map(|s| s.as_str()).collect()
    |                                      ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::String::as_str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/transforms.rs:132:5
    |
132 |     pub fn new(id: String, description: String, from_version: u32, to_version: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(id: String, description: String, from_version: u32, to_version: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/transforms.rs:187:5
    |
187 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: calling `SensitiveDataConfig::default()` is more clear than this expression
   --> llmspell-state-persistence/src/migration/transforms.rs:189:67
    |
189 |             sensitive_data_protector: SensitiveDataProtector::new(Default::default()),
    |                                                                   ^^^^^^^^^^^^^^^^^^ help: try: `SensitiveDataConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `to_string` on `&&str`
   --> llmspell-state-persistence/src/migration/transforms.rs:213:32
    |
213 |                     obj.insert(part.to_string(), Value::Object(serde_json::Map::new()));
    |                                ^^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*part).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string
    = note: `-W clippy::inefficient-to-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::inefficient_to_string)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/transforms.rs:272:5
    |
272 |     pub fn with_sensitive_data_config(config: crate::sensitive_data::SensitiveDataConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_sensitive_data_config(config: crate::sensitive_data::SensitiveDataConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/transforms.rs:279:5
    |
279 | /     pub fn transform_state(
280 | |         &self,
281 | |         state: &mut SerializableState,
282 | |         transformation: &StateTransformation,
283 | |     ) -> StateResult<TransformationResult> {
    | |__________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/transforms.rs:308:38
    |
308 |                     result.add_error(format!("Transform failed: {}", e));
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
308 -                     result.add_error(format!("Transform failed: {}", e));
308 +                     result.add_error(format!("Transform failed: {e}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/transforms.rs:334:34
    |
334 |                 result.add_error(format!("Validation failed: {}", e));
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
334 -                 result.add_error(format!("Validation failed: {}", e));
334 +                 result.add_error(format!("Validation failed: {e}"));
    |

warning: this function has too many lines (108/100)
   --> llmspell-state-persistence/src/migration/transforms.rs:346:5
    |
346 | /     fn apply_field_transform(
347 | |         &self,
348 | |         source: &Value,
349 | |         target: &mut Value,
...   |
472 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/transforms.rs:476:9
    |
476 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/transforms.rs:534:9
    |
534 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: you seem to be trying to use `match` for an equality check. Consider using `if`
   --> llmspell-state-persistence/src/migration/transforms.rs:539:9
    |
539 | /         match splitter {
540 | |             "comma_split" => {
541 | |                 if let Some(s) = value.as_str() {
542 | |                     let parts: Vec<&str> = s.split(',').map(|s| s.trim()).collect();
...   |
567 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
    = note: `-W clippy::single-match-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_match_else)]`
help: try
    |
539 ~         if splitter == "comma_split" {
540 +             if let Some(s) = value.as_str() {
541 +                 let parts: Vec<&str> = s.split(',').map(|s| s.trim()).collect();
542 +                 let mut result = Vec::new();
543 +                 for (i, field) in to_fields.iter().enumerate() {
544 +                     let value = if i < parts.len() {
545 +                         Value::String(parts[i].to_string())
546 +                     } else {
547 +                         Value::Null
548 +                     };
549 +                     result.push((field.clone(), value));
550 +                 }
551 +                 Ok(result)
552 +             } else {
553 +                 Err(TransformationError::FieldTransformFailed {
554 +                     field: "unknown".to_string(),
555 +                     reason: "Value is not a string for comma_split".to_string(),
556 +                 })
557 +             }
558 +         } else {
559 +             debug!("Unknown splitter '{}', using identity split", splitter);
560 +             Ok(to_fields
561 +                 .iter()
562 +                 .map(|f| (f.clone(), value.clone()))
563 +                 .collect())
564 +         }
    |

warning: redundant closure
   --> llmspell-state-persistence/src/migration/transforms.rs:542:61
    |
542 |                     let parts: Vec<&str> = s.split(',').map(|s| s.trim()).collect();
    |                                                             ^^^^^^^^^^^^ help: replace the closure with the method itself: `str::trim`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/transforms.rs:571:21
    |
571 |     fn merge_values(&self, values: &[&Value], merger: &str) -> Result<Value, TransformationError> {
    |                     ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/transforms.rs:571:5
    |
571 | /     fn merge_values(&self, values: &[&Value], merger: &str) -> Result<Value, TransformationError> {
572 | |         match merger {
573 | |             "concat_strings" => {
574 | |                 let strings: Vec<String> = values
...   |
598 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
571 -     fn merge_values(&self, values: &[&Value], merger: &str) -> Result<Value, TransformationError> {
571 +     fn merge_values(&self, values: &[&Value], merger: &str) -> serde_json::Value {
    |
help: ...and then change returning expressions
    |
579 ~                 Value::String(strings.join(" "))
580 |             }
581 |             "sum_numbers" => {
582 |                 let sum: f64 = values.iter().filter_map(|v| v.as_f64()).sum();
583 ~                 Value::Number(serde_json::Number::from_f64(sum).unwrap())
584 |             }
...
587 |                     if !value.is_null() {
588 ~                         return (*value).clone();
589 |                     }
590 |                 }
591 ~                 Value::Null
592 |             }
593 |             _ => {
594 |                 debug!("Unknown merger '{}', using first value", merger);
595 ~                 values.first().copied().unwrap_or(&Value::Null).clone()
    |

warning: redundant closure
   --> llmspell-state-persistence/src/migration/transforms.rs:577:26
    |
577 |                     .map(|s| s.to_string())
    |                          ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/transforms.rs:602:9
    |
602 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/transforms.rs:601:5
    |
601 | /     fn apply_custom_transform(
602 | |         &self,
603 | |         _source_values: &HashMap<String, &Value>,
604 | |         transformer: &str,
...   |
612 | |         Ok(vec![])
613 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
606 -     ) -> Result<Vec<Value>, TransformationError> {
606 +     ) -> std::vec::Vec<serde_json::Value> {
    |
help: ...and then change returning expressions
    |
612 -         Ok(vec![])
612 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/transforms.rs:617:9
    |
617 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function has too many lines (109/100)
   --> llmspell-state-persistence/src/migration/transforms.rs:616:5
    |
616 | /     fn apply_validation_rule(
617 | |         &self,
618 | |         data: &Value,
619 | |         rule: &ValidationRule,
...   |
733 | |         Ok(())
734 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/transforms.rs:755:5
    |
755 |     pub fn new(transformation_id: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(transformation_id: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/transforms.rs:779:5
    |
779 |     pub fn has_errors(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_errors(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/transforms.rs:783:5
    |
783 |     pub fn has_warnings(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_warnings(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:114:5
    |
114 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:142:5
    |
142 |     pub fn has_errors(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_errors(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:146:5
    |
146 |     pub fn has_warnings(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_warnings(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:150:5
    |
150 |     pub fn is_critical(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_critical(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:180:5
    |
180 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:189:5
    |
189 |     pub fn strict() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn strict() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:198:5
    |
198 |     pub fn permissive() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn permissive() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:259:5
    |
259 |     pub fn get_enabled_rules(&self) -> Vec<&ValidationRule> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_enabled_rules(&self) -> Vec<&ValidationRule>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/migration/validator.rs:270:55
    |
270 | /// Migration validator that integrates with existing StateManager
    |                                                       ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
270 - /// Migration validator that integrates with existing StateManager
270 + /// Migration validator that integrates with existing `StateManager`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:278:5
    |
278 |     pub fn new(rules: ValidationRules) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(rules: ValidationRules) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/validator.rs:285:5
    |
285 |     pub fn with_schema_registry(rules: ValidationRules, schema_registry: SchemaRegistry) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_schema_registry(rules: ValidationRules, schema_registry: SchemaRegistry) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/validator.rs:293:5
    |
293 | /     pub fn validate_pre_migration(
294 | |         &self,
295 | |         data: &[SerializableState],
296 | |         source_schema: &EnhancedStateSchema,
297 | |     ) -> StateResult<ValidationResult> {
    | |______________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/validator.rs:320:34
    |
320 |                         message: format!("Maximum issue limit reached ({})", max_issues),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
320 -                         message: format!("Maximum issue limit reached ({})", max_issues),
320 +                         message: format!("Maximum issue limit reached ({max_issues})"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/migration/validator.rs:339:5
    |
339 | /     pub fn validate_post_migration(
340 | |         &self,
341 | |         data: &[SerializableState],
342 | |         target_schema: &EnhancedStateSchema,
343 | |     ) -> StateResult<ValidationResult> {
    | |______________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/validator.rs:367:34
    |
367 |                         message: format!("Maximum issue limit reached ({})", max_issues),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
367 -                         message: format!("Maximum issue limit reached ({})", max_issues),
367 +                         message: format!("Maximum issue limit reached ({max_issues})"),
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:386:5
    |
386 | /     fn validate_state_item(
387 | |         &self,
388 | |         state: &SerializableState,
389 | |         schema: &EnhancedStateSchema,
...   |
416 | |         Ok(result)
417 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
391 -     ) -> StateResult<ValidationResult> {
391 +     ) -> migration::validator::ValidationResult {
    |
help: ...and then change returning expressions
    |
416 -         Ok(result)
416 +         result
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/validator.rs:407:38
    |
407 | ...                   message: format!("Validation rule execution failed: {}", e),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
407 -                             message: format!("Validation rule execution failed: {}", e),
407 +                             message: format!("Validation rule execution failed: {e}"),
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:466:9
    |
466 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:465:5
    |
465 | /     fn validate_schema_conformance(
466 | |         &self,
467 | |         state: &SerializableState,
468 | |         schema: &EnhancedStateSchema,
...   |
488 | |         Ok(issues)
489 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
470 -     ) -> StateResult<Vec<ValidationIssue>> {
470 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
488 -         Ok(issues)
488 +         issues
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:493:9
    |
493 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:492:5
    |
492 | /     fn validate_required_fields(
493 | |         &self,
494 | |         state: &SerializableState,
495 | |         schema: &EnhancedStateSchema,
...   |
520 | |         Ok(issues)
521 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
497 -     ) -> StateResult<Vec<ValidationIssue>> {
497 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
520 -         Ok(issues)
520 +         issues
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/validator.rs:507:34
    |
507 |                         message: format!("Required field '{}' is missing", field_name),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
507 -                         message: format!("Required field '{}' is missing", field_name),
507 +                         message: format!("Required field '{field_name}' is missing"),
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:524:5
    |
524 | /     fn validate_field_types(
525 | |         &self,
526 | |         state: &SerializableState,
527 | |         schema: &EnhancedStateSchema,
...   |
558 | |         Ok(issues)
559 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
529 -     ) -> StateResult<Vec<ValidationIssue>> {
529 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
558 -         Ok(issues)
558 +         issues
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/validator.rs:543:38
    |
543 |   ...                   message: format!(
    |  ________________________________^
544 | | ...                       "Type mismatch: expected '{}', got '{}'",
545 | | ...                       expected_type, actual_type
546 | | ...                   ),
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/migration/validator.rs:547:43
    |
547 |   ...                   details: Some(format!(
    |  _____________________________________^
548 | | ...                       "Field '{}' value: {:?}",
549 | | ...                       field_name, field_value
550 | | ...                   )),
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:563:9
    |
563 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:562:5
    |
562 | /     fn validate_value_ranges(
563 | |         &self,
564 | |         _state: &SerializableState,
565 | |         _schema: &EnhancedStateSchema,
...   |
568 | |         Ok(vec![])
569 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
567 -     ) -> StateResult<Vec<ValidationIssue>> {
567 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
568 -         Ok(vec![])
568 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:572:9
    |
572 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:571:5
    |
571 | /     fn validate_field_lengths(
572 | |         &self,
573 | |         _state: &SerializableState,
574 | |         _schema: &EnhancedStateSchema,
...   |
577 | |         Ok(vec![])
578 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
576 -     ) -> StateResult<Vec<ValidationIssue>> {
576 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
577 -         Ok(vec![])
577 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:581:9
    |
581 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:580:5
    |
580 | /     fn validate_field_patterns(
581 | |         &self,
582 | |         _state: &SerializableState,
583 | |         _schema: &EnhancedStateSchema,
...   |
586 | |         Ok(vec![])
587 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
585 -     ) -> StateResult<Vec<ValidationIssue>> {
585 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
586 -         Ok(vec![])
586 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:590:9
    |
590 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:589:5
    |
589 | /     fn validate_custom(
590 | |         &self,
591 | |         _state: &SerializableState,
592 | |         _schema: &EnhancedStateSchema,
...   |
600 | |         Ok(vec![])
601 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
595 -     ) -> StateResult<Vec<ValidationIssue>> {
595 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
600 -         Ok(vec![])
600 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:604:9
    |
604 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:603:5
    |
603 | /     fn validate_referential_integrity(
604 | |         &self,
605 | |         _state: &SerializableState,
606 | |         _schema: &EnhancedStateSchema,
...   |
609 | |         Ok(vec![])
610 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
608 -     ) -> StateResult<Vec<ValidationIssue>> {
608 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
609 -         Ok(vec![])
609 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:613:9
    |
613 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:612:5
    |
612 | /     fn validate_uniqueness(
613 | |         &self,
614 | |         _state: &SerializableState,
615 | |         _schema: &EnhancedStateSchema,
...   |
618 | |         Ok(vec![])
619 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
617 -     ) -> StateResult<Vec<ValidationIssue>> {
617 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
618 -         Ok(vec![])
618 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:622:9
    |
622 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/migration/validator.rs:621:5
    |
621 | /     fn validate_cross_field(
622 | |         &self,
623 | |         _state: &SerializableState,
624 | |         _schema: &EnhancedStateSchema,
...   |
627 | |         Ok(vec![])
628 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
626 -     ) -> StateResult<Vec<ValidationIssue>> {
626 +     ) -> std::vec::Vec<migration::validator::ValidationIssue> {
    |
help: ...and then change returning expressions
    |
627 -         Ok(vec![])
627 +         vec![]
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:631:30
    |
631 |     fn rule_applies_to_phase(&self, _rule: &ValidationRule, _phase: &str) -> bool {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:635:23
    |
635 |     fn get_value_type(&self, value: &Value) -> String {
    |                       ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-state-persistence/src/migration/validator.rs:646:25
    |
646 |     fn types_compatible(&self, expected: &str, actual: &str) -> bool {
    |                         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/mod.rs:48:5
   |
48 | /     pub fn new(
49 | |         from_version: SemanticVersion,
50 | |         to_version: SemanticVersion,
51 | |         total_steps: usize,
52 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
48 ~     #[must_use] pub fn new(
49 +         from_version: SemanticVersion,
50 +         to_version: SemanticVersion,
51 +         total_steps: usize,
52 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/mod.rs:93:5
   |
93 |     pub fn is_successful(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_successful(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/migration/mod.rs:97:5
   |
97 |     pub fn is_failed(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_failed(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/mod.rs:149:5
    |
149 | /     pub fn new(
150 | |         config: MigrationConfig,
151 | |         schema_registry: SchemaRegistry,
152 | |         total_steps: usize,
153 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
149 ~     #[must_use] pub fn new(
150 +         config: MigrationConfig,
151 +         schema_registry: SchemaRegistry,
152 +         total_steps: usize,
153 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/mod.rs:164:5
    |
164 |     pub fn progress(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn progress(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/mod.rs:176:5
    |
176 |     pub fn elapsed_time(&self) -> std::time::Duration {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn elapsed_time(&self) -> std::time::Duration`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/migration/mod.rs:184:5
    |
184 |     pub fn get_metadata(&self, key: &str) -> Option<&serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_metadata(&self, key: &str) -> Option<&serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/async_hooks.rs:77:5
   |
77 |     pub fn new(hook_executor: Arc<HookExecutor>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(hook_executor: Arc<HookExecutor>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/performance/async_hooks.rs:95:5
   |
95 |     pub fn start(&mut self) -> StateResult<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/async_hooks.rs:160:5
    |
160 |     pub async fn stop(&mut self) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/async_hooks.rs:173:5
    |
173 |     pub fn queue_hook_event(&self, event: HookEvent) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/async_hooks.rs:181:5
    |
181 |     pub fn queue_hook_events(&self, events: Vec<HookEvent>) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/async_hooks.rs:192:5
    |
192 |     pub fn queue_depth(&self) -> u64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn queue_depth(&self) -> u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/async_hooks.rs:197:5
    |
197 |     pub fn stats(&self) -> HookProcessorStatsSnapshot {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn stats(&self) -> HookProcessorStatsSnapshot`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/async_hooks.rs:216:5
    |
216 |     pub async fn wait_for_drain(&self, timeout: Duration) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/async_hooks.rs:242:5
    |
242 |     pub fn average_processing_time_micros(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn average_processing_time_micros(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/async_hooks.rs:255:5
    |
255 |     pub fn success_rate(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success_rate(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/async_hooks.rs:277:5
    |
277 |     pub fn new(batch_size: usize, batch_timeout: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(batch_size: usize, batch_timeout: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-state-persistence/src/performance/fast_path.rs:13:16
   |
13 |     /// Enable MessagePack for better performance than JSON
   |                ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
13 -     /// Enable MessagePack for better performance than JSON
13 +     /// Enable `MessagePack` for better performance than JSON
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/fast_path.rs:48:5
   |
48 |     pub fn new(config: FastPathConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: FastPathConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/performance/fast_path.rs:56:5
   |
56 |     pub fn serialize_trusted(&self, value: &Value) -> StateResult<Vec<u8>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/performance/fast_path.rs:59:43
   |
59 |                 StateError::serialization(format!("MessagePack serialization failed: {}", e))
   |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
59 -                 StateError::serialization(format!("MessagePack serialization failed: {}", e))
59 +                 StateError::serialization(format!("MessagePack serialization failed: {e}"))
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/performance/fast_path.rs:63:56
   |
63 |                 .map_err(|e| StateError::serialization(format!("JSON serialization failed: {}", e)))
   |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
63 -                 .map_err(|e| StateError::serialization(format!("JSON serialization failed: {}", e)))
63 +                 .map_err(|e| StateError::serialization(format!("JSON serialization failed: {e}")))
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/performance/fast_path.rs:68:5
   |
68 |     pub fn deserialize_trusted(&self, bytes: &[u8]) -> StateResult<Value> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/performance/fast_path.rs:71:43
   |
71 |                 StateError::serialization(format!("MessagePack deserialization failed: {}", e))
   |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
71 -                 StateError::serialization(format!("MessagePack deserialization failed: {}", e))
71 +                 StateError::serialization(format!("MessagePack deserialization failed: {e}"))
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/performance/fast_path.rs:75:43
   |
75 |                 StateError::serialization(format!("JSON deserialization failed: {}", e))
   |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
75 -                 StateError::serialization(format!("JSON deserialization failed: {}", e))
75 +                 StateError::serialization(format!("JSON deserialization failed: {e}"))
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/performance/fast_path.rs:81:5
   |
81 |     pub fn store_ephemeral(&self, scope: &StateScope, key: &str, value: Value) -> StateResult<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/performance/fast_path.rs:86:25
   |
86 |         let cache_key = format!("{}:{}", scope, key);
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
86 -         let cache_key = format!("{}:{}", scope, key);
86 +         let cache_key = format!("{scope}:{key}");
   |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/fast_path.rs:103:5
    |
103 |     pub fn get_ephemeral(&self, scope: &StateScope, key: &str) -> StateResult<Option<Value>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/performance/fast_path.rs:108:25
    |
108 |         let cache_key = format!("{}:{}", scope, key);
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
108 -         let cache_key = format!("{}:{}", scope, key);
108 +         let cache_key = format!("{scope}:{key}");
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-persistence/src/performance/fast_path.rs:138:13
    |
138 |             Value::Bool(_) => 4,
    |             ^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
137 -             Value::Null => 4,
138 -             Value::Bool(_) => 4,
137 +             Value::Bool(_) | Value::Null => 4,
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/fast_path.rs:157:5
    |
157 |     pub fn maybe_compress(&self, data: Vec<u8>) -> StateResult<Vec<u8>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-state-persistence/src/performance/fast_path.rs:162:9
    |
162 |         use flate2::write::GzEncoder;
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements
    = note: `-W clippy::items-after-statements` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::items_after_statements)]`

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-state-persistence/src/performance/fast_path.rs:163:9
    |
163 |         use flate2::Compression;
    |         ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-state-persistence/src/performance/fast_path.rs:164:9
    |
164 |         use std::io::Write;
    |         ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/performance/fast_path.rs:169:56
    |
169 |             .map_err(|e| StateError::compression_error(format!("Compression failed: {}", e)))?;
    |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
169 -             .map_err(|e| StateError::compression_error(format!("Compression failed: {}", e)))?;
169 +             .map_err(|e| StateError::compression_error(format!("Compression failed: {e}")))?;
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/performance/fast_path.rs:173:56
    |
173 |             .map_err(|e| StateError::compression_error(format!("Compression finish failed: {}", e)))
    |                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
173 -             .map_err(|e| StateError::compression_error(format!("Compression finish failed: {}", e)))
173 +             .map_err(|e| StateError::compression_error(format!("Compression finish failed: {e}")))
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/fast_path.rs:177:5
    |
177 |     pub fn maybe_decompress(&self, data: &[u8]) -> StateResult<Vec<u8>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/performance/fast_path.rs:186:47
    |
186 |                 StateError::compression_error(format!("Decompression failed: {}", e))
    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
186 -                 StateError::compression_error(format!("Decompression failed: {}", e))
186 +                 StateError::compression_error(format!("Decompression failed: {e}"))
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/fast_path.rs:204:5
    |
204 |     pub fn utilization_percent(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn utilization_percent(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-state-persistence/src/performance/lockfree_agent.rs:13:39
   |
13 | /// Lock-free agent state store using SkipMap for concurrent access
   |                                       ^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
13 - /// Lock-free agent state store using SkipMap for concurrent access
13 + /// Lock-free agent state store using `SkipMap` for concurrent access
   |

warning: item in documentation is missing backticks
  --> llmspell-state-persistence/src/performance/lockfree_agent.rs:15:33
   |
15 |     /// Agent states indexed by agent_id
   |                                 ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
15 -     /// Agent states indexed by agent_id
15 +     /// Agent states indexed by `agent_id`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/lockfree_agent.rs:40:5
   |
40 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/lockfree_agent.rs:45:5
   |
45 |     pub fn get(&self, agent_id: &str) -> Option<Arc<VersionedAgentState>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get(&self, agent_id: &str) -> Option<Arc<VersionedAgentState>>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/performance/lockfree_agent.rs:50:5
   |
50 | /     pub fn update<F>(&self, agent_id: &str, update_fn: F) -> StateResult<Arc<VersionedAgentState>>
51 | |     where
52 | |         F: Fn(Option<&PersistentAgentState>) -> StateResult<PersistentAgentState>,
   | |__________________________________________________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: called `map(<f>).unwrap_or(<a>)` on an `Option` value
  --> llmspell-state-persistence/src/performance/lockfree_agent.rs:60:35
   |
60 |             let current_version = current.as_ref().map(|e| e.value().version).unwrap_or(0);
   |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
   = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`
help: use `map_or(<a>, <f>)` instead
   |
60 -             let current_version = current.as_ref().map(|e| e.value().version).unwrap_or(0);
60 +             let current_version = current.as_ref().map_or(0, |e| e.value().version);
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/performance/lockfree_agent.rs:91:51
   |
91 |                   return Err(StateError::lock_error(format!(
   |  ___________________________________________________^
92 | |                     "Failed to update agent state after {} retries",
93 | |                     max_retries
94 | |                 )));
   | |_________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:103:5
    |
103 |     pub fn remove(&self, agent_id: &str) -> Option<Arc<VersionedAgentState>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn remove(&self, agent_id: &str) -> Option<Arc<VersionedAgentState>>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:110:5
    |
110 |     pub fn list_agents(&self) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn list_agents(&self) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:118:5
    |
118 |     pub fn agent_count(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn agent_count(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:128:5
    |
128 |     pub fn memory_stats(&self) -> AgentStoreStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn memory_stats(&self) -> AgentStoreStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:194:9
    |
194 |         Value::Bool(_) => 4,
    |         ^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
193 -         Value::Null => 4,
194 -         Value::Bool(_) => 4,
193 +         Value::Bool(_) | Value::Null => 4,
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:215:5
    |
215 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:223:5
    |
223 |     pub fn save_fast(&self, state: &PersistentAgentState) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:232:5
    |
232 |     pub fn save_benchmark(&self, state: &PersistentAgentState) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:242:5
    |
242 |     pub fn load_fast(&self, agent_id: &str) -> StateResult<Option<PersistentAgentState>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:250:5
    |
250 |     pub fn update_field(&self, agent_id: &str, field: &str, value: Value) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-state-persistence/src/performance/lockfree_agent.rs:250:68
    |
250 |     pub fn update_field(&self, agent_id: &str, field: &str, value: Value) -> StateResult<()> {
    |                                                                    ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
    = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/state_class.rs:37:5
   |
37 |     pub fn requires_circular_check(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn requires_circular_check(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/state_class.rs:45:5
   |
45 |     pub fn requires_redaction(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn requires_redaction(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/state_class.rs:53:5
   |
53 |     pub fn should_persist(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn should_persist(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/state_class.rs:61:5
   |
61 |     pub fn should_execute_hooks(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn should_execute_hooks(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/state_class.rs:69:5
   |
69 |     pub fn target_overhead_percent(&self) -> f64 {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn target_overhead_percent(&self) -> f64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/state_class.rs:79:5
   |
79 |     pub fn infer_from_key(key: &str) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn infer_from_key(key: &str) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/state_class.rs:123:5
    |
123 |     pub fn benchmark() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn benchmark() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/state_class.rs:133:5
    |
133 |     pub fn production() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn production() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/state_class.rs:149:5
    |
149 |     pub fn classify_key(&self, key: &str) -> StateClass {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn classify_key(&self, key: &str) -> StateClass`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unused `self` argument
   --> llmspell-state-persistence/src/performance/state_class.rs:170:24
    |
170 |     fn matches_pattern(&self, key: &str, pattern: &str) -> bool {
    |                        ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: item in documentation is missing backticks
  --> llmspell-state-persistence/src/performance/unified_serialization.rs:17:24
   |
17 |     /// Whether to use MessagePack (true) or JSON (false)
   |                        ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
17 -     /// Whether to use MessagePack (true) or JSON (false)
17 +     /// Whether to use `MessagePack` (true) or JSON (false)
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/unified_serialization.rs:26:5
   |
26 |     pub fn new(sensitive_config: SensitiveDataConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(sensitive_config: SensitiveDataConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/performance/unified_serialization.rs:35:5
   |
35 |     pub fn fast() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn fast() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/performance/unified_serialization.rs:44:5
   |
44 |     pub fn serialize<T: Serialize>(&self, value: &T) -> StateResult<Vec<u8>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/performance/unified_serialization.rs:59:5
   |
59 |     pub fn deserialize<T: for<'de> Deserialize<'de>>(&self, data: &[u8]) -> StateResult<T> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: reference as raw pointer
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:106:46
    |
106 |                 let obj_id = format!("{:p}", map as *const _);
    |                                              ^^^^^^^^^^^^^^^ help: try: `std::ptr::from_ref(map)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ref_as_ptr
    = note: `-W clippy::ref-as-ptr` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ref_as_ptr)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:134:31
    |
134 |                     path.push(format!("[{}]", i));
    |                               ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
134 -                     path.push(format!("[{}]", i));
134 +                     path.push(format!("[{i}]"));
    |

warning: this match arm has an identical body to another arm
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:168:13
    |
168 |             Value::Number(_) => Value::String(self.sensitive_config.redaction_text.clone()),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
167 -             Value::String(_) => Value::String(self.sensitive_config.redaction_text.clone()),
168 -             Value::Number(_) => Value::String(self.sensitive_config.redaction_text.clone()),
167 +             Value::Number(_) | Value::String(_) => Value::String(self.sensitive_config.redaction_text.clone()),
    |

warning: item in documentation is missing backticks
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:174:17
    |
174 | /// Builder for UnifiedSerializer with fluent API
    |                 ^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
174 - /// Builder for UnifiedSerializer with fluent API
174 + /// Builder for `UnifiedSerializer` with fluent API
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:182:5
    |
182 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:190:5
    |
190 |     pub fn with_sensitive_config(mut self, config: SensitiveDataConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_sensitive_config(mut self, config: SensitiveDataConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:190:5
    |
190 | /     pub fn with_sensitive_config(mut self, config: SensitiveDataConfig) -> Self {
191 | |         self.sensitive_config = Some(config);
192 | |         self
193 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:195:5
    |
195 |     pub fn use_json(mut self) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn use_json(mut self) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:195:5
    |
195 | /     pub fn use_json(mut self) -> Self {
196 | |         self.use_msgpack = false;
197 | |         self
198 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:200:5
    |
200 |     pub fn skip_validation(mut self) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn skip_validation(mut self) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:200:5
    |
200 | /     pub fn skip_validation(mut self) -> Self {
201 | |         self.skip_validation = true;
202 | |         self
203 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:205:5
    |
205 |     pub fn build(self) -> UnifiedSerializer {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> UnifiedSerializer`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/performance/unified_serialization.rs:231:5
    |
231 |     pub fn serialize<T: Serialize>(&mut self, value: &T) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/compatibility.rs:82:5
   |
82 | /     pub fn check_compatibility(
83 | |         from_schema: &EnhancedStateSchema,
84 | |         to_schema: &EnhancedStateSchema,
85 | |     ) -> CompatibilityResult {
   | |____________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
82 ~     #[must_use] pub fn check_compatibility(
83 +         from_schema: &EnhancedStateSchema,
84 +         to_schema: &EnhancedStateSchema,
85 ~     ) -> CompatibilityResult {
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:116:5
    |
116 | /     pub fn is_compatible(
117 | |         from_schema: &EnhancedStateSchema,
118 | |         to_schema: &EnhancedStateSchema,
119 | |     ) -> bool {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
116 ~     #[must_use] pub fn is_compatible(
117 +         from_schema: &EnhancedStateSchema,
118 +         to_schema: &EnhancedStateSchema,
119 ~     ) -> bool {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:125:5
    |
125 | /     pub fn is_safe_upgrade(
126 | |         from_schema: &EnhancedStateSchema,
127 | |         to_schema: &EnhancedStateSchema,
128 | |     ) -> bool {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
125 ~     #[must_use] pub fn is_safe_upgrade(
126 +         from_schema: &EnhancedStateSchema,
127 +         to_schema: &EnhancedStateSchema,
128 ~     ) -> bool {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:139:42
    |
139 |               result.breaking_changes.push(format!(
    |  __________________________________________^
140 | |                 "Major version change: {} -> {}",
141 | |                 from_version, to_version
142 | |             ));
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:146:42
    |
146 |               result.breaking_changes.push(format!(
    |  __________________________________________^
147 | |                 "Downgrade detected: {} -> {}",
148 | |                 from_version, to_version
149 | |             ));
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:152:34
    |
152 |               result.warnings.push(format!(
    |  __________________________________^
153 | |                 "Minor version upgrade: {} -> {}",
154 | |                 from_version, to_version
155 | |             ));
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:174:27
    |
174 |                     .push(format!("Required field '{}' was removed", removed_field));
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
174 -                     .push(format!("Required field '{}' was removed", removed_field));
174 +                     .push(format!("Required field '{removed_field}' was removed"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:178:27
    |
178 |                     .push(format!("Optional field '{}' was removed", removed_field));
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
178 -                     .push(format!("Optional field '{}' was removed", removed_field));
178 +                     .push(format!("Optional field '{removed_field}' was removed"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:195:46
    |
195 |                   result.breaking_changes.push(format!(
    |  ______________________________________________^
196 | |                     "Required field '{}' was added without default value",
197 | |                     added_field
198 | |                 ));
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:202:27
    |
202 |                     .push(format!("Field '{}' was added", added_field));
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
202 -                     .push(format!("Field '{}' was added", added_field));
202 +                     .push(format!("Field '{added_field}' was added"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:255:46
    |
255 |                   result.breaking_changes.push(format!(
    |  ______________________________________________^
256 | |                     "Field '{}' changed from optional to required",
257 | |                     field_name
258 | |                 ));
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:261:38
    |
261 |                   result.warnings.push(format!(
    |  ______________________________________^
262 | |                     "Field '{}' changed from required to optional",
263 | |                     field_name
264 | |                 ));
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:284:23
    |
284 |                 .push(format!("Field '{}' default value changed", field_name));
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
284 -                 .push(format!("Field '{}' default value changed", field_name));
284 +                 .push(format!("Field '{field_name}' default value changed"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:292:23
    |
292 |                 .push(format!("Field '{}' validators changed", field_name));
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
292 -                 .push(format!("Field '{}' validators changed", field_name));
292 +                 .push(format!("Field '{field_name}' validators changed"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:321:23
    |
321 |                 .push(format!("Dependency on schema {} was removed", removed_dep));
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
321 -                 .push(format!("Dependency on schema {} was removed", removed_dep));
321 +                 .push(format!("Dependency on schema {removed_dep} was removed"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/compatibility.rs:328:23
    |
328 |                 .push(format!("Dependency on schema {} was added", added_dep));
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
328 -                 .push(format!("Dependency on schema {} was added", added_dep));
328 +                 .push(format!("Dependency on schema {added_dep} was added"));
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:366:5
    |
366 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:383:5
    |
383 | /     pub fn get_result(
384 | |         &self,
385 | |         from: &SemanticVersion,
386 | |         to: &SemanticVersion,
387 | |     ) -> Option<&CompatibilityResult> {
    | |_____________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
383 ~     #[must_use] pub fn get_result(
384 +         &self,
385 +         from: &SemanticVersion,
386 +         to: &SemanticVersion,
387 ~     ) -> Option<&CompatibilityResult> {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:392:5
    |
392 |     pub fn has_upgrade_path(&self, from: &SemanticVersion, to: &SemanticVersion) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_upgrade_path(&self, from: &SemanticVersion, to: &SemanticVersion) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:402:5
    |
402 | /     pub fn find_upgrade_path(
403 | |         &self,
404 | |         from: &SemanticVersion,
405 | |         to: &SemanticVersion,
406 | |     ) -> Option<Vec<SemanticVersion>> {
    | |_____________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
402 ~     #[must_use] pub fn find_upgrade_path(
403 +         &self,
404 +         from: &SemanticVersion,
405 +         to: &SemanticVersion,
406 ~     ) -> Option<Vec<SemanticVersion>> {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:443:5
    |
443 |     pub fn get_compatible_targets(&self, from: &SemanticVersion) -> Vec<SemanticVersion> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_compatible_targets(&self, from: &SemanticVersion) -> Vec<SemanticVersion>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/compatibility.rs:457:5
    |
457 |     pub fn get_stats(&self) -> CompatibilityStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_stats(&self) -> CompatibilityStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/migration.rs:101:5
    |
101 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/schema/migration.rs:114:5
    |
114 | /     pub fn create_migration_plan(
115 | |         &mut self,
116 | |         from_version: &SemanticVersion,
117 | |         to_version: &SemanticVersion,
118 | |     ) -> Result<MigrationPlan, MigrationPlannerError> {
    | |_____________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:125:26
    |
125 |                 details: format!("Source schema {} not found", from_version),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
125 -                 details: format!("Source schema {} not found", from_version),
125 +                 details: format!("Source schema {from_version} not found"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:131:26
    |
131 |                 details: format!("Target schema {} not found", to_version),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
131 -                 details: format!("Target schema {} not found", to_version),
131 +                 details: format!("Target schema {to_version} not found"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:165:30
    |
165 |                 description: format!("Migrate from {} to {}", step_from, step_to),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
165 -                 description: format!("Migrate from {} to {}", step_from, step_to),
165 +                 description: format!("Migrate from {step_from} to {step_to}"),
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/schema/migration.rs:261:30
    |
261 |     fn is_migration_possible(&self, from: &SemanticVersion, to: &SemanticVersion) -> bool {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:280:26
    |
280 |                 details: format!("Schema {} not found", from),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
280 -                 details: format!("Schema {} not found", from),
280 +                 details: format!("Schema {from} not found"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:288:30
    |
288 |                     details: format!("Schema {} not found", to),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
288 -                     details: format!("Schema {} not found", to),
288 +                     details: format!("Schema {to} not found"),
    |

warning: unused `self` argument
   --> llmspell-state-persistence/src/schema/migration.rs:299:9
    |
299 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/schema/migration.rs:298:5
    |
298 | /     fn create_data_transformation(
299 | |         &self,
300 | |         from_version: &SemanticVersion,
301 | |         to_version: &SemanticVersion,
...   |
399 | |         })
400 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
303 -     ) -> Result<DataTransformation, MigrationPlannerError> {
303 +     ) -> schema::migration::DataTransformation {
    |
help: ...and then change returning expressions
    |
393 ~         DataTransformation {
394 +             transformation_id,
395 +             description,
396 +             field_mappings,
397 +             custom_logic: None,
398 +             validation_rules,
399 +         }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:304:33
    |
304 |         let transformation_id = format!("transform_{}_{}", from_version, to_version);
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
304 -         let transformation_id = format!("transform_{}_{}", from_version, to_version);
304 +         let transformation_id = format!("transform_{from_version}_{to_version}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:305:27
    |
305 |         let description = format!("Transform data from {} to {}", from_version, to_version);
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
305 -         let description = format!("Transform data from {} to {}", from_version, to_version);
305 +         let description = format!("Transform data from {from_version} to {to_version}");
    |

warning: unnecessary `!=` operation
   --> llmspell-state-persistence/src/schema/migration.rs:337:21
    |
337 | /                     if old_field.field_type != new_field.field_type {
338 | |                         field_mappings.insert(
339 | |                             field_name.clone(),
340 | |                             FieldMapping::Transform {
...   |
356 | |                         );
357 | |                     }
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
337 ~                     if old_field.field_type == new_field.field_type {
338 +                         field_mappings.insert(
339 +                             field_name.clone(),
340 +                             FieldMapping::Direct {
341 +                                 from_field: field_name.clone(),
342 +                                 to_field: field_name.clone(),
343 +                             },
344 +                         );
345 +                     } else {
346 +                         field_mappings.insert(
347 +                             field_name.clone(),
348 +                             FieldMapping::Transform {
349 +                                 from_field: field_name.clone(),
350 +                                 to_field: field_name.clone(),
351 +                                 transformation: format!(
352 +                                     "convert_{}_to_{}",
353 +                                     old_field.field_type, new_field.field_type
354 +                                 ),
355 +                             },
356 +                         );
357 +                     }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:365:45
    |
365 | ...                   transformation: format!("convert_{}_to_{}", old_type, new_type),
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
365 -                             transformation: format!("convert_{}_to_{}", old_type, new_type),
365 +                             transformation: format!("convert_{old_type}_to_{new_type}"),
    |

warning: wildcard matches only a single variant and will also match any future added variants
   --> llmspell-state-persistence/src/schema/migration.rs:390:13
    |
390 |             _ => {}
    |             ^ help: try: `RiskLevel::Low`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_wildcard_for_single_variants
    = note: `-W clippy::match-wildcard-for-single-variants` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_wildcard_for_single_variants)]`

warning: unused `self` argument
   --> llmspell-state-persistence/src/schema/migration.rs:404:9
    |
404 |         &mut self,
    |         ^^^^^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-state-persistence/src/schema/migration.rs:403:5
    |
403 | /     fn create_rollback_plan(
404 | |         &mut self,
405 | |         from_version: &SemanticVersion,
406 | |         to_version: &SemanticVersion,
...   |
424 | |         })
425 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
407 -     ) -> Result<MigrationPlan, MigrationPlannerError> {
407 +     ) -> schema::migration::MigrationPlan {
    |
help: ...and then change returning expressions
    |
409 ~         MigrationPlan {
410 +             from_version: from_version.clone(),
411 +             to_version: to_version.clone(),
412 +             steps: vec![MigrationStep {
413 +                 from_version: from_version.major,
414 +                 to_version: to_version.major,
415 +                 migration_type: "rollback".to_string(),
416 +                 description: format!("Rollback from {} to {}", from_version, to_version),
417 +             }],
418 +             estimated_duration: std::time::Duration::from_secs(300), // 5 minutes default
419 +             risk_level: RiskLevel::High,                             // Rollbacks are always risky
420 +             requires_backup: true,
421 +             data_transformations: vec![],
422 +             rollback_plan: None, // No nested rollback plans
423 +             warnings: vec!["Rollback may cause data loss".to_string()],
424 +         }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:416:30
    |
416 |                 description: format!("Rollback from {} to {}", from_version, to_version),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
416 -                 description: format!("Rollback from {} to {}", from_version, to_version),
416 +                 description: format!("Rollback from {from_version} to {to_version}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/schema/migration.rs:476:5
    |
476 |     pub fn validate_plan(&self, plan: &MigrationPlan) -> Result<(), MigrationPlannerError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/migration.rs:511:29
    |
511 |                     reason: format!("Transformation {} has no field mappings", i),
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
511 -                     reason: format!("Transformation {} has no field mappings", i),
511 +                     reason: format!("Transformation {i} has no field mappings"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/migration.rs:520:5
    |
520 |     pub fn get_migration_stats(&self) -> MigrationStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_migration_stats(&self) -> MigrationStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unnecessary boolean `not` operation
   --> llmspell-state-persistence/src/schema/migration.rs:532:44
    |
532 |           let average_migration_complexity = if !self.compatibility_cache.is_empty() {
    |  ____________________________________________^
533 | |             self.compatibility_cache
534 | |                 .values()
535 | |                 .map(|r| r.field_changes.len())
...   |
539 | |             0.0
540 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
532 ~         let average_migration_complexity = if self.compatibility_cache.is_empty() {
533 +             0.0
534 +         } else {
535 +             self.compatibility_cache
536 +                 .values()
537 +                 .map(|r| r.field_changes.len())
538 +                 .sum::<usize>() as f64
539 +                 / self.compatibility_cache.len() as f64
540 ~         };
    |

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-state-persistence/src/schema/migration.rs:533:13
    |
533 | /             self.compatibility_cache
534 | |                 .values()
535 | |                 .map(|r| r.field_changes.len())
536 | |                 .sum::<usize>() as f64
    | |______________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-state-persistence/src/schema/migration.rs:537:19
    |
537 |                 / self.compatibility_cache.len() as f64
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/registry.rs:56:5
   |
56 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-state-persistence/src/schema/registry.rs:66:5
   |
66 | /     pub fn register_schema(
67 | |         &self,
68 | |         schema: EnhancedStateSchema,
69 | |         metadata: Option<SchemaVersion>,
70 | |     ) -> Result<(), SchemaRegistryError> {
   | |________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/schema/registry.rs:112:5
    |
112 |     pub fn register_named_schema(&self, name: String, version: SemanticVersion) -> StateResult<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/registry.rs:117:55
    |
117 |                   return Err(StateError::MigrationError(format!(
    |  _______________________________________________________^
118 | |                     "Cannot register named schema '{}': version {} not found",
119 | |                     name, version
120 | |                 )));
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:130:5
    |
130 |     pub fn get_schema(&self, version: &SemanticVersion) -> Option<Arc<EnhancedStateSchema>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_schema(&self, version: &SemanticVersion) -> Option<Arc<EnhancedStateSchema>>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:136:5
    |
136 |     pub fn get_schema_by_name(&self, name: &str) -> Option<Arc<EnhancedStateSchema>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_schema_by_name(&self, name: &str) -> Option<Arc<EnhancedStateSchema>>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:145:5
    |
145 |     pub fn get_current_schema(&self) -> Option<Arc<EnhancedStateSchema>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_current_schema(&self) -> Option<Arc<EnhancedStateSchema>>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:154:5
    |
154 |     pub fn get_schema_metadata(&self, version: &SemanticVersion) -> Option<SchemaVersion> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_schema_metadata(&self, version: &SemanticVersion) -> Option<SchemaVersion>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:160:5
    |
160 |     pub fn list_versions(&self) -> Vec<SemanticVersion> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn list_versions(&self) -> Vec<SemanticVersion>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:166:5
    |
166 |     pub fn list_named_schemas(&self) -> HashMap<String, SemanticVersion> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn list_named_schemas(&self) -> HashMap<String, SemanticVersion>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:172:5
    |
172 |     pub fn find_compatible_schemas(&self, version: &SemanticVersion) -> Vec<SemanticVersion> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn find_compatible_schemas(&self, version: &SemanticVersion) -> Vec<SemanticVersion>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:182:5
    |
182 | /     pub fn find_migration_candidates(
183 | |         &self,
184 | |         from_version: &SemanticVersion,
185 | |     ) -> Vec<SemanticVersion> {
    | |_____________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
182 ~     #[must_use] pub fn find_migration_candidates(
183 +         &self,
184 +         from_version: &SemanticVersion,
185 ~     ) -> Vec<SemanticVersion> {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:195:5
    |
195 |     pub fn get_latest_in_major(&self, major: u32) -> Option<SemanticVersion> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_latest_in_major(&self, major: u32) -> Option<SemanticVersion>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:201:5
    |
201 |     pub fn has_version(&self, version: &SemanticVersion) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_version(&self, version: &SemanticVersion) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/schema/registry.rs:207:5
    |
207 |     pub fn remove_schema(&self, version: &SemanticVersion) -> Result<(), SchemaRegistryError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/schema/registry.rs:239:5
    |
239 |     pub fn set_current_version(&self, version: SemanticVersion) -> Result<(), SchemaRegistryError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/registry.rs:253:5
    |
253 |     pub fn get_stats(&self) -> RegistryStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_stats(&self) -> RegistryStats`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unused `self` argument
   --> llmspell-state-persistence/src/schema/registry.rs:280:24
    |
280 |     fn validate_schema(&self, schema: &EnhancedStateSchema) -> Result<(), SchemaRegistryError> {
    |                        ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/registry.rs:305:30
    |
305 |                     details: format!("Field '{}' must have a type", field_name),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
305 -                     details: format!("Field '{}' must have a type", field_name),
305 +                     details: format!("Field '{field_name}' must have a type"),
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/version.rs:30:5
   |
30 |     pub fn new(major: u32, minor: u32, patch: u32) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(major: u32, minor: u32, patch: u32) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/version.rs:40:5
   |
40 |     pub fn with_pre_release(mut self, pre_release: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_pre_release(mut self, pre_release: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-state-persistence/src/schema/version.rs:40:5
   |
40 | /     pub fn with_pre_release(mut self, pre_release: String) -> Self {
41 | |         self.pre_release = Some(pre_release);
42 | |         self
43 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/version.rs:45:5
   |
45 |     pub fn with_build(mut self, build: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_build(mut self, build: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-state-persistence/src/schema/version.rs:45:5
   |
45 | /     pub fn with_build(mut self, build: String) -> Self {
46 | |         self.build = Some(build);
47 | |         self
48 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/version.rs:50:5
   |
50 |     pub fn is_compatible_with(&self, other: &Self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_compatible_with(&self, other: &Self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/version.rs:64:5
   |
64 |     pub fn is_breaking_change_from(&self, other: &Self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_breaking_change_from(&self, other: &Self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/schema/version.rs:89:13
   |
89 |             write!(f, "-{}", pre)?;
   |             ^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
89 -             write!(f, "-{}", pre)?;
89 +             write!(f, "-{pre}")?;
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-state-persistence/src/schema/version.rs:93:13
   |
93 |             write!(f, "+{}", build)?;
   |             ^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
93 -             write!(f, "+{}", build)?;
93 +             write!(f, "+{build}")?;
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/version.rs:126:52
    |
126 |               return Err(VersionError::InvalidFormat(format!(
    |  ____________________________________________________^
127 | |                 "Expected format 'major.minor.patch', got: {}",
128 | |                 s
129 | |             )));
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/version.rs:199:5
    |
199 |     pub fn new(version: SemanticVersion) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(version: SemanticVersion) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/version.rs:209:5
    |
209 |     pub fn with_description(mut self, description: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_description(mut self, description: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-state-persistence/src/schema/version.rs:209:5
    |
209 | /     pub fn with_description(mut self, description: String) -> Self {
210 | |         self.description = Some(description);
211 | |         self
212 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/version.rs:222:5
    |
222 |     pub fn is_breaking_change_from(&self, other: &Self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_breaking_change_from(&self, other: &Self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/schema/version.rs:226:5
    |
226 |     pub fn has_deprecated_fields(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_deprecated_fields(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/schema/version.rs:236:13
    |
236 |             write!(f, " ({})", desc)?;
    |             ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
236 -             write!(f, " ({})", desc)?;
236 +             write!(f, " ({desc})")?;
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/mod.rs:32:5
   |
32 |     pub fn new(version: SemanticVersion) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(version: SemanticVersion) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/mod.rs:45:5
   |
45 |     pub fn from_legacy(legacy: StateSchema) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_legacy(legacy: StateSchema) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/schema/mod.rs:58:5
   |
58 |     pub fn to_legacy(&self) -> StateSchema {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn to_legacy(&self) -> StateSchema`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-state-persistence/src/sensitive_data.rs:86:5
   |
86 |     pub fn disabled() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn disabled() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/sensitive_data.rs:135:5
    |
135 |     pub fn new(config: SensitiveDataConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: SensitiveDataConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/sensitive_data.rs:142:5
    |
142 |     pub fn with_default() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_default() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-state-persistence/src/sensitive_data.rs:264:13
    |
264 |             *s = self.config.redaction_text.clone();
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `s.clone_from(&self.config.redaction_text)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones
    = note: `-W clippy::assigning-clones` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::assigning_clones)]`

warning: unused `self` argument
   --> llmspell-state-persistence/src/sensitive_data.rs:268:20
    |
268 |     fn hash_string(&self, s: &str) -> String {
    |                    ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this method could have a `#[must_use]` attribute
   --> llmspell-state-persistence/src/sensitive_data.rs:282:5
    |
282 |     pub fn redaction_map(&self) -> &HashMap<String, String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn redaction_map(&self) -> &HashMap<String, String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/sensitive_data.rs:325:5
    |
325 |     fn redact_sensitive_data(&mut self, config: &SensitiveDataConfig) -> Result<(), String>;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/sensitive_data.rs:332:26
    |
332 |             .map_err(|e| format!("Failed to serialize for redaction: {}", e))?;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
332 -             .map_err(|e| format!("Failed to serialize for redaction: {}", e))?;
332 +             .map_err(|e| format!("Failed to serialize for redaction: {e}"))?;
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/sensitive_data.rs:340:26
    |
340 |             .map_err(|e| format!("Failed to deserialize after redaction: {}", e))?;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
340 -             .map_err(|e| format!("Failed to deserialize after redaction: {}", e))?;
340 +             .map_err(|e| format!("Failed to deserialize after redaction: {e}"))?;
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-state-persistence/src/sensitive_data.rs:347:1
    |
347 | / pub fn safe_serialize_with_redaction<T: Serialize + Clone>(
348 | |     value: &T,
349 | |     config: &SensitiveDataConfig,
350 | | ) -> Result<Vec<u8>, String> {
    | |____________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/sensitive_data.rs:353:49
    |
353 |         serde_json::to_value(value).map_err(|e| format!("Serialization failed: {}", e))?;
    |                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
353 -         serde_json::to_value(value).map_err(|e| format!("Serialization failed: {}", e))?;
353 +         serde_json::to_value(value).map_err(|e| format!("Serialization failed: {e}"))?;
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/src/sensitive_data.rs:360:49
    |
360 |     serde_json::to_vec(&json_value).map_err(|e| format!("Final serialization failed: {}", e))
    |                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
360 -     serde_json::to_vec(&json_value).map_err(|e| format!("Final serialization failed: {}", e))
360 +     serde_json::to_vec(&json_value).map_err(|e| format!("Final serialization failed: {e}"))
    |

warning: unused `async` for function with no await statements
   --> llmspell-state-persistence/src/backup/manager.rs:489:5
    |
489 | /     async fn compress_backup(&self, data: &[u8]) -> BackupResult<Vec<u8>> {
490 | |         let compressor = BackupCompression::new(
491 | |             self.config.compression_type,
492 | |             CompressionLevel::new(self.config.compression_level.into())?,
493 | |         );
494 | |         compressor.compress(data)
495 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-state-persistence/src/backup/manager.rs:497:5
    |
497 | /     async fn get_current_schema_version(&self) -> BackupResult<String> {
498 | |         // TODO: Get actual schema version from state manager
499 | |         Ok("1.0.0".to_string())
500 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
    --> llmspell-state-persistence/src/manager.rs:1429:5
     |
1429 | /     pub async fn start_async_hooks(&mut self) -> StateResult<()> {
1430 | |         self.enable_async_hooks()
1431 | |     }
     | |_____^
     |
     = help: consider removing the `async` from this function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-state-persistence/src/migration/engine.rs:579:5
    |
579 | /     async fn rollback_migration(
580 | |         &self,
581 | |         _plan: &MigrationPlan,
582 | |         _context: &MigrationContext,
...   |
587 | |         Ok(())
588 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-state-persistence/src/migration/engine.rs:597:5
    |
597 | /     pub async fn cancel_migration(&self, migration_id: Uuid) -> StateResult<()> {
598 | |         let mut active = self.active_migrations.write();
599 | |         if active.remove(&migration_id).is_some() {
600 | |             info!("Migration {} cancelled", migration_id);
...   |
608 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: this type has been superceded by `LazyLock` in the standard library
  --> llmspell-state-persistence/src/sensitive_data.rs:11:26
   |
11 | static API_KEY_PATTERNS: Lazy<Vec<Regex>> = Lazy::new(|| {
   |                          ^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#non_std_lazy_statics
   = note: `-W clippy::non-std-lazy-statics` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::non_std_lazy_statics)]`
help: use `std::sync::LazyLock` instead
   |
11 - static API_KEY_PATTERNS: Lazy<Vec<Regex>> = Lazy::new(|| {
11 + static API_KEY_PATTERNS: std::sync::LazyLock<Vec<Regex>> = std::sync::LazyLock::new(|| {
   |

warning: this type has been superceded by `LazyLock` in the standard library
  --> llmspell-state-persistence/src/sensitive_data.rs:32:31
   |
32 | static SENSITIVE_FIELD_NAMES: Lazy<Vec<&'static str>> = Lazy::new(|| {
   |                               ^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#non_std_lazy_statics
help: use `std::sync::LazyLock` instead
   |
32 - static SENSITIVE_FIELD_NAMES: Lazy<Vec<&'static str>> = Lazy::new(|| {
32 + static SENSITIVE_FIELD_NAMES: std::sync::LazyLock<Vec<&'static str>> = std::sync::LazyLock::new(|| {
   |

warning: `llmspell-state-persistence` (lib) generated 542 warnings (run `cargo clippy --fix --lib -p llmspell-state-persistence` to apply 325 suggestions)
warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-security/src/sandbox/file_sandbox.rs:19:5
   |
19 |     pub fn new(context: SandboxContext) -> Result<Self> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
   = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-security/src/sandbox/file_sandbox.rs:27:5
   |
27 |     pub fn validate_path(&self, path: &Path) -> Result<PathBuf> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:107:5
    |
107 |     pub async fn read_file(&mut self, path: &Path) -> Result<Vec<u8>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:116:25
    |
116 |                 reason: format!("IO error: {}", e),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
116 -                 reason: format!("IO error: {}", e),
116 +                 reason: format!("IO error: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:127:5
    |
127 |     pub async fn write_file(&mut self, path: &Path, contents: &[u8]) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:138:34
    |
138 |                         message: format!("Cannot create parent directory: {}", e),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
138 -                         message: format!("Cannot create parent directory: {}", e),
138 +                         message: format!("Cannot create parent directory: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:148:25
    |
148 |                 reason: format!("IO error: {}", e),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
148 -                 reason: format!("IO error: {}", e),
148 +                 reason: format!("IO error: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:159:5
    |
159 |     pub async fn append_file(&mut self, path: &Path, contents: &[u8]) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:179:5
    |
179 |     pub async fn create_dir(&mut self, path: &Path) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:188:25
    |
188 |                 reason: format!("IO error: {}", e),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
188 -                 reason: format!("IO error: {}", e),
188 +                 reason: format!("IO error: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:199:5
    |
199 |     pub async fn delete_file(&mut self, path: &Path) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:208:25
    |
208 |                 reason: format!("IO error: {}", e),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
208 -                 reason: format!("IO error: {}", e),
208 +                 reason: format!("IO error: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:219:5
    |
219 |     pub async fn list_dir(&mut self, path: &Path) -> Result<Vec<PathBuf>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:229:25
    |
229 |                 reason: format!("IO error: {}", e),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
229 -                 reason: format!("IO error: {}", e),
229 +                 reason: format!("IO error: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:243:30
    |
243 |                     message: format!("Error reading directory entry: {}", e),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
243 -                     message: format!("Error reading directory entry: {}", e),
243 +                     message: format!("Error reading directory entry: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:254:5
    |
254 |     pub async fn file_exists(&mut self, path: &Path) -> Result<bool> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/file_sandbox.rs:260:5
    |
260 |     pub async fn file_metadata(&mut self, path: &Path) -> Result<fs::Metadata> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/file_sandbox.rs:269:25
    |
269 |                 reason: format!("IO error: {}", e),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
269 -                 reason: format!("IO error: {}", e),
269 +                 reason: format!("IO error: {e}"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-security/src/sandbox/file_sandbox.rs:280:5
    |
280 |     pub fn get_violations(&self) -> &[SandboxViolation] {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_violations(&self) -> &[SandboxViolation]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
    = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: unchecked subtraction of a 'Duration' from an 'Instant'
  --> llmspell-security/src/sandbox/network_sandbox.rs:57:28
   |
57 |         let window_start = now - Duration::from_secs(self.config.window_seconds);
   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `now.checked_sub(Duration::from_secs(self.config.window_seconds)).unwrap()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unchecked_duration_subtraction
   = note: `-W clippy::unchecked-duration-subtraction` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unchecked_duration_subtraction)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-security/src/sandbox/network_sandbox.rs:84:5
   |
84 |     pub fn new(context: SandboxContext) -> Result<Self> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-security/src/sandbox/network_sandbox.rs:94:5
   |
94 |     pub fn with_rate_limit(mut self, config: RateLimitConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_rate_limit(mut self, config: RateLimitConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-security/src/sandbox/network_sandbox.rs:94:5
   |
94 | /     pub fn with_rate_limit(mut self, config: RateLimitConfig) -> Self {
95 | |         self.default_rate_limit = config;
96 | |         self
97 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use
   = note: `-W clippy::return-self-not-must-use` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::return_self_not_must_use)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/network_sandbox.rs:100:5
    |
100 |     pub async fn validate_request(&mut self, url: &str, method: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: unused `self` argument
   --> llmspell-security/src/sandbox/network_sandbox.rs:127:23
    |
127 |     fn extract_domain(&self, url: &str) -> Result<String> {
    |                       ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/network_sandbox.rs:140:26
    |
140 |                 message: format!("Invalid URL format: {}", url),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
140 -                 message: format!("Invalid URL format: {}", url),
140 +                 message: format!("Invalid URL format: {url}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/network_sandbox.rs:160:25
    |
160 |                 reason: format!("Rate limit exceeded for domain: {}", domain),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
160 -                 reason: format!("Rate limit exceeded for domain: {}", domain),
160 +                 reason: format!("Rate limit exceeded for domain: {domain}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/network_sandbox.rs:174:5
    |
174 |     pub async fn get(&mut self, url: &str) -> Result<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/network_sandbox.rs:185:5
    |
185 |     pub async fn post(&mut self, url: &str, body: &str) -> Result<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/network_sandbox.rs:199:5
    |
199 |     pub async fn put(&mut self, url: &str, body: &str) -> Result<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/network_sandbox.rs:212:5
    |
212 |     pub async fn delete(&mut self, url: &str) -> Result<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/network_sandbox.rs:226:12
    |
226 |           Ok(format!(
    |  ____________^
227 | |             "{{\"mock_response\": true, \"url\": \"{}\", \"method\": \"{}\", \"status\": 200}}",
228 | |             url, method
229 | |         ))
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: casting `usize` to `u32` may truncate the value on targets with 64-bit wide pointers
   --> llmspell-security/src/sandbox/network_sandbox.rs:241:38
    |
241 |                     recent_requests: limiter.requests.len() as u32,
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
    = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
    |
241 -                     recent_requests: limiter.requests.len() as u32,
241 +                     recent_requests: u32::try_from(limiter.requests.len()),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-security/src/sandbox/network_sandbox.rs:255:5
    |
255 |     pub fn get_violations(&self) -> &[SandboxViolation] {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_violations(&self) -> &[SandboxViolation]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-security/src/sandbox/resource_monitor.rs:54:5
   |
54 |     pub fn new(context: SandboxContext) -> Result<Self> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-security/src/sandbox/resource_monitor.rs:65:5
   |
65 |     pub async fn start(&mut self) -> Result<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: casts from `u32` to `f64` can be expressed infallibly using `From`
   --> llmspell-security/src/sandbox/resource_monitor.rs:125:39
    |
125 |                     let ops_per_sec = current.file_operations as f64
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `f64::from` instead
    |
125 -                     let ops_per_sec = current.file_operations as f64
125 +                     let ops_per_sec = f64::from(current.file_operations)
    |

warning: casts from `u32` to `f64` can be expressed infallibly using `From`
   --> llmspell-security/src/sandbox/resource_monitor.rs:128:37
    |
128 |                     let limit_f64 = limit as f64;
    |                                     ^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `f64::from` instead
    |
128 -                     let limit_f64 = limit as f64;
128 +                     let limit_f64 = f64::from(limit);
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/resource_monitor.rs:146:5
    |
146 |     pub async fn stop(&mut self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/resource_monitor.rs:170:5
    |
170 |     pub async fn record_network_usage(&self, bytes: u64) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/resource_monitor.rs:206:5
    |
206 |     pub async fn record_file_operation(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: casts from `u32` to `f64` can be expressed infallibly using `From`
   --> llmspell-security/src/sandbox/resource_monitor.rs:218:31
    |
218 |             let ops_per_sec = usage.file_operations as f64 / duration;
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `f64::from` instead
    |
218 -             let ops_per_sec = usage.file_operations as f64 / duration;
218 +             let ops_per_sec = f64::from(usage.file_operations) / duration;
    |

warning: casts from `u32` to `f64` can be expressed infallibly using `From`
   --> llmspell-security/src/sandbox/resource_monitor.rs:221:29
    |
221 |             let limit_f64 = limit as f64;
    |                             ^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `f64::from` instead
    |
221 -             let limit_f64 = limit as f64;
221 +             let limit_f64 = f64::from(limit);
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/resource_monitor.rs:242:5
    |
242 |     pub async fn record_custom_usage(&self, resource: &str, amount: u64) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/resource_monitor.rs:258:33
    |
258 |                         reason: format!("Custom resource '{}' exceeded limit", resource),
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
258 -                         reason: format!("Custom resource '{}' exceeded limit", resource),
258 +                         reason: format!("Custom resource '{resource}' exceeded limit"),
    |

warning: redundant closure
   --> llmspell-security/src/sandbox/resource_monitor.rs:296:36
    |
296 |         self.violations.iter().map(|v| v.to_string()).collect()
    |                                    ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/resource_monitor.rs:355:5
    |
355 |     pub async fn reset_counters(&mut self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-security/src/sandbox/mod.rs:40:5
   |
40 | /     pub fn new(
41 | |         id: String,
42 | |         security_requirements: SecurityRequirements,
43 | |         resource_limits: ResourceLimits,
44 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
40 ~     #[must_use] pub fn new(
41 +         id: String,
42 +         security_requirements: SecurityRequirements,
43 +         resource_limits: ResourceLimits,
44 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-security/src/sandbox/mod.rs:60:5
   |
60 |     pub fn is_path_allowed(&self, path: &Path) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_path_allowed(&self, path: &Path) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-security/src/sandbox/mod.rs:79:5
   |
79 |     pub fn is_domain_allowed(&self, domain: &str) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_domain_allowed(&self, domain: &str) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-security/src/sandbox/mod.rs:96:5
   |
96 |     pub fn is_env_var_allowed(&self, var: &str) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_env_var_allowed(&self, var: &str) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/mod.rs:117:5
    |
117 |     pub fn new(context: SandboxContext) -> Result<Self> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-security/src/sandbox/mod.rs:131:5
    |
131 |     pub fn context(&self) -> &SandboxContext {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn context(&self) -> &SandboxContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-security/src/sandbox/mod.rs:136:5
    |
136 |     pub fn file_sandbox(&self) -> &FileSandbox {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn file_sandbox(&self) -> &FileSandbox`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-security/src/sandbox/mod.rs:141:5
    |
141 |     pub fn network_sandbox(&self) -> &NetworkSandbox {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn network_sandbox(&self) -> &NetworkSandbox`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-security/src/sandbox/mod.rs:146:5
    |
146 |     pub fn resource_monitor(&self) -> &ResourceMonitor {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn resource_monitor(&self) -> &ResourceMonitor`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/mod.rs:151:5
    |
151 |     pub async fn start_monitoring(&mut self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-security/src/sandbox/mod.rs:156:5
    |
156 |     pub async fn stop_monitoring(&mut self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/mod.rs:205:17
    |
205 | /                 write!(
206 | |                     f,
207 | |                     "File access violation: {} on '{}' - {}",
208 | |                     operation, path, reason
209 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/mod.rs:216:17
    |
216 | /                 write!(
217 | |                     f,
218 | |                     "Network access violation: {} to '{}' - {}",
219 | |                     operation, domain, reason
220 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/mod.rs:228:17
    |
228 | /                 write!(
229 | |                     f,
230 | |                     "Resource limit violation: {} exceeded limit {} with {} - {}",
231 | |                     resource, limit, actual, reason
232 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-security/src/sandbox/mod.rs:235:17
    |
235 | /                 write!(
236 | |                     f,
237 | |                     "Environment access violation: '{}' - {}",
238 | |                     variable, reason
239 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/file_sandbox.rs:254:5
    |
254 | /     pub async fn file_exists(&mut self, path: &Path) -> Result<bool> {
255 | |         let safe_path = self.validate_path(path)?;
256 | |         Ok(safe_path.exists())
257 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/resource_monitor.rs:273:5
    |
273 | /     async fn collect_system_usage() -> ResourceUsage {
274 | |         // In a real implementation, this would use system APIs to get actual usage
275 | |         // For testing, we'll simulate some usage
276 | |         let now = Instant::now();
...   |
287 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/resource_monitor.rs:290:5
    |
290 | /     pub async fn has_violations(&self) -> bool {
291 | |         !self.violations.is_empty()
292 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/resource_monitor.rs:295:5
    |
295 | /     pub async fn get_violations(&self) -> Vec<String> {
296 | |         self.violations.iter().map(|v| v.to_string()).collect()
297 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/resource_monitor.rs:319:5
    |
319 | /     async fn calculate_memory_efficiency(&self, usage: &ResourceUsage) -> f64 {
320 | |         if let Some(limit) = self.context.resource_limits.max_memory_bytes {
321 | |             #[allow(clippy::cast_precision_loss)]
322 | |             let efficiency = 1.0 - (usage.memory_bytes as f64 / limit as f64).min(1.0);
...   |
327 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/resource_monitor.rs:330:5
    |
330 | /     async fn calculate_cpu_efficiency(&self, usage: &ResourceUsage) -> f64 {
331 | |         if let Some(limit) = self.context.resource_limits.max_cpu_time_ms {
332 | |             #[allow(clippy::cast_precision_loss)]
333 | |             let efficiency = 1.0 - (usage.cpu_time_ms as f64 / limit as f64).min(1.0);
...   |
338 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/resource_monitor.rs:341:5
    |
341 | /     async fn calculate_network_efficiency(&self, usage: &ResourceUsage) -> f64 {
342 | |         if let Some(limit) = self.context.resource_limits.max_network_bps {
343 | |             let duration = self.start_time.elapsed().as_secs_f64().max(1.0);
344 | |             #[allow(clippy::cast_precision_loss)]
...   |
352 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: `llmspell-security` (lib) generated 69 warnings (run `cargo clippy --fix --lib -p llmspell-security` to apply 33 suggestions)
warning: long literal lacking separators
  --> llmspell-providers/src/rig.rs:96:48
   |
96 |                     "gpt-4" | "gpt-4-turbo" => 128000,
   |                                                ^^^^^^ help: consider: `128_000`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal
   = note: `-W clippy::unreadable-literal` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unreadable_literal)]`

warning: long literal lacking separators
   --> llmspell-providers/src/rig.rs:101:60
    |
101 |                     "claude-3-opus" | "claude-3-sonnet" => 200000,
    |                                                            ^^^^^^ help: consider: `200_000`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: long literal lacking separators
   --> llmspell-providers/src/rig.rs:102:37
    |
102 |                     "claude-2.1" => 100000,
    |                                     ^^^^^^ help: consider: `100_000`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: long literal lacking separators
   --> llmspell-providers/src/rig.rs:103:26
    |
103 |                     _ => 100000,
    |                          ^^^^^^ help: consider: `100_000`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: this match arm has an identical body to the `_` wildcard arm
  --> llmspell-providers/src/abstraction.rs:73:13
   |
73 | /             "openai" | "anthropic" | "cohere" => name_str.clone(),
74 | |             _ => name_str.clone(), // Default to name for unknown providers
   | |____________^ help: try removing the arm
   |
   = help: or try changing either arm body
note: `_` wildcard arm here
  --> llmspell-providers/src/abstraction.rs:74:13
   |
74 |             _ => name_str.clone(), // Default to name for unknown providers
   |             ^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
   = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: item in documentation is missing backticks
   --> llmspell-providers/src/abstraction.rs:108:19
    |
108 |     /// Format: "{name}/{provider_type}/{model}"
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
    = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
    |
108 -     /// Format: "{name}/{provider_type}/{model}"
108 +     /// Format: "{`name}/{provider_type}/{model`}"
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-providers/src/abstraction.rs:110:5
    |
110 |     pub fn instance_name(&self) -> String {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn instance_name(&self) -> String`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
    = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:115:5
    |
115 |     pub fn from_env(name: &str) -> Result<Self, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:119:37
    |
119 |         let api_key = std::env::var(format!("{}API_KEY", env_prefix))
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
119 -         let api_key = std::env::var(format!("{}API_KEY", env_prefix))
119 +         let api_key = std::env::var(format!("{env_prefix}API_KEY"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:138:38
    |
138 |         let endpoint = std::env::var(format!("{}ENDPOINT", env_prefix)).ok();
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
138 -         let endpoint = std::env::var(format!("{}ENDPOINT", env_prefix)).ok();
138 +         let endpoint = std::env::var(format!("{env_prefix}ENDPOINT")).ok();
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:140:27
    |
140 |             std::env::var(format!("{}MODEL", env_prefix)).unwrap_or_else(|_| "default".to_string());
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
140 -             std::env::var(format!("{}MODEL", env_prefix)).unwrap_or_else(|_| "default".to_string());
140 +             std::env::var(format!("{env_prefix}MODEL")).unwrap_or_else(|_| "default".to_string());
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:143:43
    |
143 |         let provider_type = std::env::var(format!("{}PROVIDER_TYPE", env_prefix))
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
143 -         let provider_type = std::env::var(format!("{}PROVIDER_TYPE", env_prefix))
143 +         let provider_type = std::env::var(format!("{env_prefix}PROVIDER_TYPE"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:152:41
    |
152 |             timeout_secs: std::env::var(format!("{}TIMEOUT", env_prefix))
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
152 -             timeout_secs: std::env::var(format!("{}TIMEOUT", env_prefix))
152 +             timeout_secs: std::env::var(format!("{env_prefix}TIMEOUT"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:155:40
    |
155 |             max_retries: std::env::var(format!("{}MAX_RETRIES", env_prefix))
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
155 -             max_retries: std::env::var(format!("{}MAX_RETRIES", env_prefix))
155 +             max_retries: std::env::var(format!("{env_prefix}MAX_RETRIES"))
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-providers/src/abstraction.rs:206:5
    |
206 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:224:5
    |
224 | /     pub fn create(
225 | |         &self,
226 | |         config: ProviderConfig,
227 | |     ) -> Result<Box<dyn ProviderInstance>, LLMSpellError> {
    | |_________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-providers/src/abstraction.rs:240:5
    |
240 |     pub fn available_providers(&self) -> Vec<&str> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn available_providers(&self) -> Vec<&str>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: redundant closure
   --> llmspell-providers/src/abstraction.rs:241:35
    |
241 |         self.factories.keys().map(|s| s.as_str()).collect()
    |                                   ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::String::as_str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-providers/src/abstraction.rs:260:5
    |
260 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:281:5
    |
281 |     pub async fn init_provider(&self, config: ProviderConfig) -> Result<(), LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:304:5
    |
304 | /     pub async fn get_provider(
305 | |         &self,
306 | |         name: Option<&str>,
307 | |     ) -> Result<Arc<Box<dyn ProviderInstance>>, LLMSpellError> {
    | |______________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:327:26
    |
327 |                 message: format!("Provider not found: {}", provider_name),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
327 -                 message: format!("Provider not found: {}", provider_name),
327 +                 message: format!("Provider not found: {provider_name}"),
    |

warning: item in documentation is missing backticks
   --> llmspell-providers/src/abstraction.rs:332:49
    |
332 |     /// Create and initialize a provider from a ModelSpecifier
    |                                                 ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
332 -     /// Create and initialize a provider from a ModelSpecifier
332 +     /// Create and initialize a provider from a `ModelSpecifier`
    |

warning: item in documentation is missing backticks
   --> llmspell-providers/src/abstraction.rs:335:22
    |
335 |     /// - Parses the ModelSpecifier to determine provider and model
    |                      ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
335 -     /// - Parses the ModelSpecifier to determine provider and model
335 +     /// - Parses the `ModelSpecifier` to determine provider and model
    |

warning: item in documentation is missing backticks
   --> llmspell-providers/src/abstraction.rs:341:20
    |
341 |     /// * `spec` - ModelSpecifier containing provider/model information
    |                    ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
341 -     /// * `spec` - ModelSpecifier containing provider/model information
341 +     /// * `spec` - `ModelSpecifier` containing provider/model information
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:369:5
    |
369 | /     pub async fn create_agent_from_spec(
370 | |         &self,
371 | |         spec: ModelSpecifier,
372 | |         base_url_override: Option<&str>,
373 | |         api_key: Option<&str>,
374 | |     ) -> Result<Arc<Box<dyn ProviderInstance>>, LLMSpellError> {
    | |______________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: you seem to be trying to use `match` for destructuring a single pattern. Consider using `if let`
   --> llmspell-providers/src/abstraction.rs:376:29
    |
376 |           let provider_name = match &spec.provider {
    |  _____________________________^
377 | |             Some(provider) => provider.clone(),
378 | |             None => {
...   |
403 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
    = note: `-W clippy::single-match-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_match_else)]`
help: try
    |
376 ~         let provider_name = if let Some(provider) = &spec.provider { provider.clone() } else {
377 +             // If no provider specified, try to use default
378 +             let default = self.default_provider.read().await;
379 +             if let Some(default_provider) = default.as_ref() {
380 +                 // Extract provider name from hierarchical format "name/provider_type/model"
381 +                 // We want the provider_type (second part)
382 +                 let parts: Vec<&str> = default_provider.split('/').collect();
383 +                 if parts.len() >= 2 {
384 +                     parts[1].to_string() // Return the provider_type
385 +                 } else {
386 +                     return Err(LLMSpellError::Configuration {
387 +                         message:
388 +                             "No provider specified and no valid default provider available"
389 +                                 .to_string(),
390 +                         source: None,
391 +                     });
392 +                 }
393 +             } else {
394 +                 return Err(LLMSpellError::Configuration {
395 +                     message: "No provider specified and no default provider configured"
396 +                         .to_string(),
397 +                     source: None,
398 +                 });
399 +             }
400 ~         };
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:469:5
    |
469 | /     pub async fn get_default_provider(
470 | |         &self,
471 | |     ) -> Result<Arc<Box<dyn ProviderInstance>>, LLMSpellError> {
    | |______________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:476:5
    |
476 |     pub async fn set_default_provider(&self, name: impl Into<String>) -> Result<(), LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:482:26
    |
482 |                 message: format!("Cannot set default: provider '{}' not initialized", name),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
482 -                 message: format!("Cannot set default: provider '{}' not initialized", name),
482 +                 message: format!("Cannot set default: provider '{name}' not initialized"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/abstraction.rs:493:5
    |
493 | /     pub async fn query_capabilities(
494 | |         &self,
495 | |         name: Option<&str>,
496 | |     ) -> Result<ProviderCapabilities, LLMSpellError> {
    | |____________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/abstraction.rs:515:26
    |
515 |                 message: format!("Provider not found: {}", provider_name),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
515 -                 message: format!("Provider not found: {}", provider_name),
515 +                 message: format!("Provider not found: {provider_name}"),
    |

warning: redundant closure
   --> llmspell-providers/src/abstraction.rs:533:18
    |
533 |             .map(|s| s.to_string())
    |                  ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: item in documentation is missing backticks
 --> llmspell-providers/src/model_specifier.rs:1:14
  |
1 | //! ABOUTME: ModelSpecifier for parsing provider/model syntax
  |              ^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: ModelSpecifier for parsing provider/model syntax
1 + //! ABOUTME: `ModelSpecifier` for parsing provider/model syntax
  |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:20:22
   |
20 |     /// Create a new ModelSpecifier with just a model name
   |                      ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
20 -     /// Create a new ModelSpecifier with just a model name
20 +     /// Create a new `ModelSpecifier` with just a model name
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:29:22
   |
29 |     /// Create a new ModelSpecifier with provider and model
   |                      ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
29 -     /// Create a new ModelSpecifier with provider and model
29 +     /// Create a new `ModelSpecifier` with provider and model
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:38:22
   |
38 |     /// Create a new ModelSpecifier with provider, model, and base URL
   |                      ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
38 -     /// Create a new ModelSpecifier with provider, model, and base URL
38 +     /// Create a new `ModelSpecifier` with provider, model, and base URL
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:54:22
   |
54 |     /// - "model" -> ModelSpecifier { provider: None, model: "model", base_url: None }
   |                      ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
54 -     /// - "model" -> ModelSpecifier { provider: None, model: "model", base_url: None }
54 +     /// - "model" -> `ModelSpecifier` { provider: None, model: "model", base_url: None }
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:54:71
   |
54 |     /// - "model" -> ModelSpecifier { provider: None, model: "model", base_url: None }
   |                                                                       ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
54 -     /// - "model" -> ModelSpecifier { provider: None, model: "model", base_url: None }
54 +     /// - "model" -> ModelSpecifier { provider: None, model: "model", `base_url`: None }
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:55:31
   |
55 |     /// - "provider/model" -> ModelSpecifier { provider: Some("provider"), model: "model", base_url: None }
   |                               ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
55 -     /// - "provider/model" -> ModelSpecifier { provider: Some("provider"), model: "model", base_url: None }
55 +     /// - "provider/model" -> `ModelSpecifier` { provider: Some("provider"), model: "model", base_url: None }
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:55:92
   |
55 |     /// - "provider/model" -> ModelSpecifier { provider: Some("provider"), model: "model", base_url: None }
   |                                                                                            ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
55 -     /// - "provider/model" -> ModelSpecifier { provider: Some("provider"), model: "model", base_url: None }
55 +     /// - "provider/model" -> ModelSpecifier { provider: Some("provider"), model: "model", `base_url`: None }
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:56:43
   |
56 |     /// - "provider/subprovider/model" -> ModelSpecifier { provider: Some("provider/subprovider"), model: "model", base_url: None }
   |                                           ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
56 -     /// - "provider/subprovider/model" -> ModelSpecifier { provider: Some("provider/subprovider"), model: "model", base_url: None }
56 +     /// - "provider/subprovider/model" -> `ModelSpecifier` { provider: Some("provider/subprovider"), model: "model", base_url: None }
   |

warning: item in documentation is missing backticks
  --> llmspell-providers/src/model_specifier.rs:56:116
   |
56 |     /// - "provider/subprovider/model" -> ModelSpecifier { provider: Some("provider/subprovider"), model: "model", base_url: None }
   |                                                                                                                    ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
56 -     /// - "provider/subprovider/model" -> ModelSpecifier { provider: Some("provider/subprovider"), model: "model", base_url: None }
56 +     /// - "provider/subprovider/model" -> ModelSpecifier { provider: Some("provider/subprovider"), model: "model", `base_url`: None }
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-providers/src/model_specifier.rs:74:5
   |
74 |     pub fn parse(spec: &str) -> Result<Self, LLMSpellError> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/model_specifier.rs:106:30
    |
106 |                     message: format!("Invalid model specification format: '{}'", spec),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
106 -                     message: format!("Invalid model specification format: '{}'", spec),
106 +                     message: format!("Invalid model specification format: '{spec}'"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/model_specifier.rs:127:5
    |
127 |     pub fn parse_with_base_url(spec: &str, base_url: Option<&str>) -> Result<Self, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: redundant closure
   --> llmspell-providers/src/model_specifier.rs:129:44
    |
129 |         model_spec.base_url = base_url.map(|url| url.to_string());
    |                                            ^^^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this method could have a `#[must_use]` attribute
   --> llmspell-providers/src/model_specifier.rs:134:5
    |
134 |     pub fn provider_or_default<'a>(&'a self, default: &'a str) -> &'a str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn provider_or_default<'a>(&'a self, default: &'a str) -> &'a str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-providers/src/model_specifier.rs:139:5
    |
139 |     pub fn has_provider(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_provider(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-providers/src/model_specifier.rs:144:5
    |
144 |     pub fn has_base_url(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn has_base_url(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-providers/src/rig.rs:30:5
   |
30 |     pub fn new(config: ProviderConfig) -> Result<Self, LLMSpellError> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-providers/src/rig.rs:105:17
    |
105 | /                 "cohere" => 4096,
106 | |                 _ => 4096,
    | |________________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-providers/src/rig.rs:106:17
    |
106 |                 _ => 4096,
    |                 ^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-providers/src/rig.rs:102:21
    |
102 | /                     "claude-2.1" => 100000,
103 | |                     _ => 100000,
    | |____________________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-providers/src/rig.rs:103:21
    |
103 |                     _ => 100000,
    |                     ^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: calling `HashMap::default()` is more clear than this expression
   --> llmspell-providers/src/rig.rs:110:30
    |
110 |             custom_features: Default::default(),
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `HashMap::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: redundant closure
   --> llmspell-providers/src/rig.rs:117:23
    |
117 |             .and_then(|v| v.as_u64())
    |                       ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:139:30
    |
139 |                     message: format!("OpenAI completion failed: {}", e),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
139 -                     message: format!("OpenAI completion failed: {}", e),
139 +                     message: format!("OpenAI completion failed: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:147:38
    |
147 | ...                   message: format!("Unexpected tool call response: {}", name),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
147 -                             message: format!("Unexpected tool call response: {}", name),
147 +                             message: format!("Unexpected tool call response: {name}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:159:30
    |
159 |                     message: format!("Anthropic completion failed: {}", e),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
159 -                     message: format!("Anthropic completion failed: {}", e),
159 +                     message: format!("Anthropic completion failed: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:167:38
    |
167 | ...                   message: format!("Unexpected tool call response: {}", name),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
167 -                             message: format!("Unexpected tool call response: {}", name),
167 +                             message: format!("Unexpected tool call response: {name}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:179:30
    |
179 |                     message: format!("Cohere completion failed: {}", e),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
179 -                     message: format!("Cohere completion failed: {}", e),
179 +                     message: format!("Cohere completion failed: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:187:38
    |
187 | ...                   message: format!("Unexpected tool call response: {}", name),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
187 -                             message: format!("Unexpected tool call response: {}", name),
187 +                             message: format!("Unexpected tool call response: {name}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:214:35
    |
214 |                     .map(|(k, v)| format!("{}: {}", k, v))
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
214 -                     .map(|(k, v)| format!("{}: {}", k, v))
214 +                     .map(|(k, v)| format!("{k}: {v}"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:218:26
    |
218 |                 prompt = format!("{}\n\n{}", context_text, prompt);
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
218 -                 prompt = format!("{}\n\n{}", context_text, prompt);
218 +                 prompt = format!("{context_text}\n\n{prompt}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/rig.rs:260:26
    |
260 |                 message: format!("Provider validation failed: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
260 -                 message: format!("Provider validation failed: {}", e),
260 +                 message: format!("Provider validation failed: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-providers/src/rig.rs:278:1
    |
278 | / pub fn create_rig_provider(
279 | |     config: ProviderConfig,
280 | | ) -> Result<Box<dyn ProviderInstance>, LLMSpellError> {
    | |_____________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: redundant else block
   --> llmspell-workflows/src/conditional.rs:643:26
    |
643 |                           } else {
    |  __________________________^
644 | |                             warn!(
645 | |                                 "All retries exhausted for step {}, stopping branch",
646 | |                                 step.name
647 | |                             );
648 | |                             break;
649 | |                         }
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_else
    = note: `-W clippy::redundant-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_else)]`
help: remove the `else` block and move the contents out
    |
643 ~                         }
644 +                         warn!(
645 +                             "All retries exhausted for step {}, stopping branch",
646 +                             step.name
647 +                         );
648 +                         break;
    |

warning: redundant else block
   --> llmspell-workflows/src/conditions.rs:644:26
    |
644 |                           } else {
    |  __________________________^
645 | |                             return Some(ConditionResult::success_false(format!(
646 | |                                 "Custom: shared_data.{} is {:?}, expected {}",
647 | |                                 key, actual_value, right
648 | |                             )));
649 | |                         }
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_else
help: remove the `else` block and move the contents out
    |
644 ~                         }
645 +                         return Some(ConditionResult::success_false(format!(
646 +                             "Custom: shared_data.{} is {:?}, expected {}",
647 +                             key, actual_value, right
648 +                         )));
    |

warning: redundant else block
   --> llmspell-workflows/src/conditions.rs:685:30
    |
685 |   ...                   } else {
    |  ________________________^
686 | | ...                       return Some(ConditionResult::success_false(description));
687 | | ...                   }
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_else
help: remove the `else` block and move the contents out
    |
685 ~                             }
686 +                             return Some(ConditionResult::success_false(description));
    |

warning: redundant else block
   --> llmspell-workflows/src/conditions.rs:693:30
    |
693 |   ...                   } else {
    |  ________________________^
694 | | ...                       return Some(ConditionResult::success_false(description));
695 | | ...                   }
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_else
help: remove the `else` block and move the contents out
    |
693 ~                             }
694 +                             return Some(ConditionResult::success_false(description));
    |

warning: this `continue` expression is redundant
   --> llmspell-workflows/src/loop.rs:582:29
    |
582 | ...                   continue;
    |                       ^^^^^^^^
    |
    = help: consider dropping the `continue` expression
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_continue
    = note: `-W clippy::needless-continue` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_continue)]`

warning: this `continue` expression is redundant
   --> llmspell-workflows/src/loop.rs:586:29
    |
586 | ...                   continue;
    |                       ^^^^^^^^
    |
    = help: consider dropping the `continue` expression
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_continue

warning: this `continue` expression is redundant
   --> llmspell-workflows/src/sequential.rs:245:25
    |
245 |                         continue;
    |                         ^^^^^^^^
    |
    = help: consider dropping the `continue` expression
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_continue

warning: this `continue` expression is redundant
   --> llmspell-workflows/src/sequential.rs:253:29
    |
253 | ...                   continue;
    |                       ^^^^^^^^
    |
    = help: consider dropping the `continue` expression
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_continue

warning: redundant else block
   --> llmspell-workflows/src/sequential.rs:254:26
    |
254 |                           } else {
    |  __________________________^
255 | |                             warn!(
256 | |                                 "All retries exhausted for step {}, stopping workflow",
257 | |                                 step.name
...   |
270 | |                             ));
271 | |                         }
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_else
help: remove the `else` block and move the contents out
    |
254 ~                         }
255 +                         warn!(
256 +                             "All retries exhausted for step {}, stopping workflow",
257 +                             step.name
258 +                         );
259 +                         self.state_manager.complete_execution(false).await?;
260 +                         return Ok(SequentialWorkflowResult::failure(
261 +                             self.name.clone(),
262 +                             successful_steps,
263 +                             failed_steps,
264 +                             start_time.elapsed(),
265 +                             format!(
266 +                                 "Workflow stopped after retries exhausted at step {}: {}",
267 +                                 index + 1,
268 +                                 step.name
269 +                             ),
270 +                         ));
    |

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/adapters.rs:16:17
   |
16 |     /// Convert AgentInput to WorkflowInput
   |                 ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
   = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
   |
16 -     /// Convert AgentInput to WorkflowInput
16 +     /// Convert `AgentInput` to WorkflowInput
   |

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/adapters.rs:16:31
   |
16 |     /// Convert AgentInput to WorkflowInput
   |                               ^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
16 -     /// Convert AgentInput to WorkflowInput
16 +     /// Convert AgentInput to `WorkflowInput`
   |

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/adapters.rs:18:52
   |
18 |     /// Extracts workflow-specific parameters from AgentInput:
   |                                                    ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
18 -     /// Extracts workflow-specific parameters from AgentInput:
18 +     /// Extracts workflow-specific parameters from `AgentInput`:
   |

warning: redundant closure
  --> llmspell-workflows/src/adapters.rs:27:23
   |
27 |             .and_then(|v| v.as_u64())
   |                       ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
   = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: redundant closure
  --> llmspell-workflows/src/adapters.rs:33:31
   |
33 |                     .and_then(|v| v.as_u64())
   |                               ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/adapters.rs:70:17
   |
70 |     /// Convert WorkflowInput back to AgentInput
   |                 ^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
70 -     /// Convert WorkflowInput back to AgentInput
70 +     /// Convert `WorkflowInput` back to AgentInput
   |

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/adapters.rs:70:39
   |
70 |     /// Convert WorkflowInput back to AgentInput
   |                                       ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
70 -     /// Convert WorkflowInput back to AgentInput
70 +     /// Convert WorkflowInput back to `AgentInput`
   |

warning: called `map(<f>).unwrap_or_else(<g>)` on an `Option` value
  --> llmspell-workflows/src/adapters.rs:75:20
   |
75 |           let text = workflow_input
   |  ____________________^
76 | |             .input
77 | |             .get("text")
78 | |             .and_then(|v| v.as_str())
...  |
82 | |                 workflow_input.input.to_string()
83 | |             });
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
   = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`

warning: redundant closure
  --> llmspell-workflows/src/adapters.rs:79:18
   |
79 |             .map(|s| s.to_string())
   |                  ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:116:17
    |
116 |     /// Convert WorkflowOutput to AgentOutput
    |                 ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
116 -     /// Convert WorkflowOutput to AgentOutput
116 +     /// Convert `WorkflowOutput` to AgentOutput
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:116:35
    |
116 |     /// Convert WorkflowOutput to AgentOutput
    |                                   ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
116 -     /// Convert WorkflowOutput to AgentOutput
116 +     /// Convert WorkflowOutput to `AgentOutput`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/adapters.rs:119:5
    |
119 |     pub fn to_agent_output(workflow_output: WorkflowOutput) -> AgentOutput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn to_agent_output(workflow_output: WorkflowOutput) -> AgentOutput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
    = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: casting `u128` to `u64` may truncate the value
   --> llmspell-workflows/src/adapters.rs:140:37
    |
140 |             execution_time_ms: Some(workflow_output.duration.as_millis() as u64),
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
    = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
    |
140 -             execution_time_ms: Some(workflow_output.duration.as_millis() as u64),
140 +             execution_time_ms: Some(u64::try_from(workflow_output.duration.as_millis())),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/adapters.rs:160:35
    |
160 |             metadata.extra.insert(format!("context_{}", key), value);
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
160 -             metadata.extra.insert(format!("context_{}", key), value);
160 +             metadata.extra.insert(format!("context_{key}"), value);
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:185:17
    |
185 |     /// Convert AgentOutput back to WorkflowOutput
    |                 ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
185 -     /// Convert AgentOutput back to WorkflowOutput
185 +     /// Convert `AgentOutput` back to WorkflowOutput
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:185:37
    |
185 |     /// Convert AgentOutput back to WorkflowOutput
    |                                     ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
185 -     /// Convert AgentOutput back to WorkflowOutput
185 +     /// Convert AgentOutput back to `WorkflowOutput`
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-workflows/src/adapters.rs:188:5
    |
188 |     pub fn from_agent_output(agent_output: AgentOutput, duration: Duration) -> WorkflowOutput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-workflows/src/adapters.rs:217:35
    |
217 |                 let context_key = key.strip_prefix("context_").unwrap().to_string();
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
    = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/adapters.rs:188:5
    |
188 |     pub fn from_agent_output(agent_output: AgentOutput, duration: Duration) -> WorkflowOutput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_agent_output(agent_output: AgentOutput, duration: Duration) -> WorkflowOutput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-workflows/src/adapters.rs:188:44
    |
188 |     pub fn from_agent_output(agent_output: AgentOutput, duration: Duration) -> WorkflowOutput {
    |                                            ^^^^^^^^^^^ help: consider taking a reference instead: `&AgentOutput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
    = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: redundant closure
   --> llmspell-workflows/src/adapters.rs:194:23
    |
194 |             .and_then(|v| v.as_bool())
    |                       ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: unnecessary boolean `not` operation
   --> llmspell-workflows/src/adapters.rs:198:21
    |
198 |           let error = if !success {
    |  _____________________^
199 | |             Some(agent_output.text.clone())
200 | |         } else {
201 | |             None
202 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
    = note: `-W clippy::if-not-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::if_not_else)]`
help: try
    |
198 ~         let error = if success {
199 +             None
200 +         } else {
201 +             Some(agent_output.text.clone())
202 ~         };
    |

warning: boolean to int conversion using if
   --> llmspell-workflows/src/adapters.rs:227:27
    |
227 |             steps_failed: if success { 0 } else { 1 },
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace with from: `usize::from(!success)`
    |
    = note: `!success as usize` or `(!success).into()` can also be valid options
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_to_int_with_if
    = note: `-W clippy::bool-to-int-with-if` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::bool_to_int_with_if)]`

warning: usage of wildcard import
   --> llmspell-workflows/src/adapters.rs:236:9
    |
236 |     use super::*;
    |         ^^^^^^^^ help: try: `super::{AgentInput, AgentOutput, Duration, WorkflowInput, WorkflowInputAdapter, WorkflowOutput, WorkflowOutputAdapter}`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports
    = note: `-W clippy::wildcard-imports` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::wildcard_imports)]`

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:238:17
    |
238 |     /// Convert AgentInput to WorkflowInput
    |                 ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
238 -     /// Convert AgentInput to WorkflowInput
238 +     /// Convert `AgentInput` to WorkflowInput
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:238:31
    |
238 |     /// Convert AgentInput to WorkflowInput
    |                               ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
238 -     /// Convert AgentInput to WorkflowInput
238 +     /// Convert AgentInput to `WorkflowInput`
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-workflows/src/adapters.rs:239:5
    |
239 |     pub fn agent_to_workflow_input(input: AgentInput) -> WorkflowInput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn agent_to_workflow_input(input: AgentInput) -> WorkflowInput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:243:17
    |
243 |     /// Convert WorkflowInput to AgentInput
    |                 ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
243 -     /// Convert WorkflowInput to AgentInput
243 +     /// Convert `WorkflowInput` to AgentInput
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:243:34
    |
243 |     /// Convert WorkflowInput to AgentInput
    |                                  ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
243 -     /// Convert WorkflowInput to AgentInput
243 +     /// Convert WorkflowInput to `AgentInput`
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-workflows/src/adapters.rs:244:5
    |
244 |     pub fn workflow_to_agent_input(input: WorkflowInput) -> AgentInput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn workflow_to_agent_input(input: WorkflowInput) -> AgentInput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:248:17
    |
248 |     /// Convert WorkflowOutput to AgentOutput
    |                 ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
248 -     /// Convert WorkflowOutput to AgentOutput
248 +     /// Convert `WorkflowOutput` to AgentOutput
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:248:35
    |
248 |     /// Convert WorkflowOutput to AgentOutput
    |                                   ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
248 -     /// Convert WorkflowOutput to AgentOutput
248 +     /// Convert WorkflowOutput to `AgentOutput`
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-workflows/src/adapters.rs:249:5
    |
249 |     pub fn workflow_to_agent_output(output: WorkflowOutput) -> AgentOutput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn workflow_to_agent_output(output: WorkflowOutput) -> AgentOutput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:253:17
    |
253 |     /// Convert AgentOutput to WorkflowOutput
    |                 ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
253 -     /// Convert AgentOutput to WorkflowOutput
253 +     /// Convert `AgentOutput` to WorkflowOutput
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/adapters.rs:253:32
    |
253 |     /// Convert AgentOutput to WorkflowOutput
    |                                ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
253 -     /// Convert AgentOutput to WorkflowOutput
253 +     /// Convert AgentOutput to `WorkflowOutput`
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-workflows/src/adapters.rs:254:5
    |
254 |     pub fn agent_to_workflow_output(output: AgentOutput, duration: Duration) -> WorkflowOutput {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn agent_to_workflow_output(output: AgentOutput, duration: Duration) -> WorkflowOutput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditional.rs:48:5
   |
48 |     pub fn new(name: String, condition: Condition) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, condition: Condition) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditional.rs:59:5
   |
59 |     pub fn default(name: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn default(name: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditional.rs:70:5
   |
70 |     pub fn with_step(mut self, step: WorkflowStep) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_step(mut self, step: WorkflowStep) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/conditional.rs:70:5
   |
70 | /     pub fn with_step(mut self, step: WorkflowStep) -> Self {
71 | |         self.steps.push(step);
72 | |         self
73 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use
   = note: `-W clippy::return-self-not-must-use` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::return_self_not_must_use)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditional.rs:76:5
   |
76 |     pub fn with_steps(mut self, steps: Vec<WorkflowStep>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_steps(mut self, steps: Vec<WorkflowStep>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/conditional.rs:76:5
   |
76 | /     pub fn with_steps(mut self, steps: Vec<WorkflowStep>) -> Self {
77 | |         self.steps.extend(steps);
78 | |         self
79 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:101:5
    |
101 | /     pub fn success(
102 | |         branch_id: ComponentId,
103 | |         branch_name: String,
104 | |         condition_result: ConditionResult,
105 | |         step_results: Vec<StepResult>,
106 | |         duration: Duration,
107 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
101 ~     #[must_use] pub fn success(
102 +         branch_id: ComponentId,
103 +         branch_name: String,
104 +         condition_result: ConditionResult,
105 +         step_results: Vec<StepResult>,
106 +         duration: Duration,
107 ~     ) -> Self {
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/conditional.rs:136:34
    |
136 |     /// Create a new builder for ConditionalWorkflowConfig
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
136 -     /// Create a new builder for ConditionalWorkflowConfig
136 +     /// Create a new builder for `ConditionalWorkflowConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:137:5
    |
137 |     pub fn builder() -> ConditionalConfigBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> ConditionalConfigBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/conditional.rs:157:17
    |
157 | /// Builder for ConditionalWorkflowConfig
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
157 - /// Builder for ConditionalWorkflowConfig
157 + /// Builder for `ConditionalWorkflowConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:164:5
    |
164 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:171:5
    |
171 |     pub fn execute_all_matching(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn execute_all_matching(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:171:5
    |
171 | /     pub fn execute_all_matching(mut self, enabled: bool) -> Self {
172 | |         self.config.execute_all_matching = enabled;
173 | |         self
174 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:177:5
    |
177 |     pub fn execute_default_on_no_match(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn execute_default_on_no_match(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:177:5
    |
177 | /     pub fn execute_default_on_no_match(mut self, enabled: bool) -> Self {
178 | |         self.config.execute_default_on_no_match = enabled;
179 | |         self
180 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:183:5
    |
183 |     pub fn max_branches_to_evaluate(mut self, max: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn max_branches_to_evaluate(mut self, max: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:183:5
    |
183 | /     pub fn max_branches_to_evaluate(mut self, max: usize) -> Self {
184 | |         self.config.max_branches_to_evaluate = max;
185 | |         self
186 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:189:5
    |
189 |     pub fn condition_evaluation_timeout_ms(mut self, timeout_ms: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn condition_evaluation_timeout_ms(mut self, timeout_ms: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:189:5
    |
189 | /     pub fn condition_evaluation_timeout_ms(mut self, timeout_ms: u64) -> Self {
190 | |         self.config.condition_evaluation_timeout_ms = timeout_ms;
191 | |         self
192 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:195:5
    |
195 |     pub fn short_circuit_evaluation(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn short_circuit_evaluation(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:195:5
    |
195 | /     pub fn short_circuit_evaluation(mut self, enabled: bool) -> Self {
196 | |         self.config.short_circuit_evaluation = enabled;
197 | |         self
198 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/conditional.rs:200:25
    |
200 |     /// Build the final ConditionalWorkflowConfig with validation
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
200 -     /// Build the final ConditionalWorkflowConfig with validation
200 +     /// Build the final `ConditionalWorkflowConfig` with validation
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:201:5
    |
201 |     pub fn build(self) -> Result<ConditionalWorkflowConfig> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:250:5
    |
250 |     pub fn new(name: String, workflow_config: WorkflowConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, workflow_config: WorkflowConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-workflows/src/conditional.rs:250:47
    |
250 |     pub fn new(name: String, workflow_config: WorkflowConfig) -> Self {
    |                                               ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:287:5
    |
287 | /     pub fn new_with_hooks(
288 | |         name: String,
289 | |         workflow_config: WorkflowConfig,
290 | |         workflow_executor: Arc<WorkflowExecutor>,
291 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
287 ~     #[must_use] pub fn new_with_hooks(
288 +         name: String,
289 +         workflow_config: WorkflowConfig,
290 +         workflow_executor: Arc<WorkflowExecutor>,
291 ~     ) -> Self {
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-workflows/src/conditional.rs:289:26
    |
289 |         workflow_config: WorkflowConfig,
    |                          ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:331:5
    |
331 |     pub fn builder(name: String) -> ConditionalWorkflowBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder(name: String) -> ConditionalWorkflowBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:346:5
    |
346 |     pub fn name(&self) -> &str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn name(&self) -> &str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:351:5
    |
351 |     pub fn branch_count(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn branch_count(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:356:5
    |
356 |     pub async fn execute_workflow(&self) -> Result<ConditionalWorkflowResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (183/100)
   --> llmspell-workflows/src/conditional.rs:356:5
    |
356 | /     pub async fn execute_workflow(&self) -> Result<ConditionalWorkflowResult> {
357 | |         let start_time = Instant::now();
358 | |         info!("Starting conditional workflow: {}", self.name);
...   |
571 | |         })
572 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:671:5
    |
671 |     pub async fn get_status(&self) -> Result<WorkflowStatus> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:676:5
    |
676 |     pub async fn get_execution_stats(&self) -> Result<ExecutionStats> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:681:5
    |
681 |     pub async fn cancel(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:687:5
    |
687 |     pub async fn reset(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:693:5
    |
693 |     pub async fn get_shared_data(&self, key: &str) -> Result<Option<serde_json::Value>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditional.rs:698:5
    |
698 |     pub async fn set_shared_data(&self, key: String, value: serde_json::Value) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditional.rs:836:21
    |
836 | /                     format!(
837 | |                         "Conditional workflow error in step '{}': {}",
838 | |                         step_name, message
839 | |                     )
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditional.rs:841:21
    |
841 |                     format!("Conditional workflow error: {}", message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
841 -                     format!("Conditional workflow error: {}", message)
841 +                     format!("Conditional workflow error: {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditional.rs:846:21
    |
846 |                     format!("Validation error in field '{}': {}", field_name, message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
846 -                     format!("Validation error in field '{}': {}", field_name, message)
846 +                     format!("Validation error in field '{field_name}': {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditional.rs:848:21
    |
848 |                     format!("Validation error: {}", message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
848 -                     format!("Validation error: {}", message)
848 +                     format!("Validation error: {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditional.rs:851:18
    |
851 |             _ => format!("Conditional workflow error: {}", error),
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
851 -             _ => format!("Conditional workflow error: {}", error),
851 +             _ => format!("Conditional workflow error: {error}"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:931:5
    |
931 |     pub fn new(name: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:943:5
    |
943 |     pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:943:5
    |
943 | /     pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self {
944 | |         self.workflow_config = config;
945 | |         self
946 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:949:5
    |
949 |     pub fn with_conditional_config(mut self, config: ConditionalWorkflowConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_conditional_config(mut self, config: ConditionalWorkflowConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:949:5
    |
949 | /     pub fn with_conditional_config(mut self, config: ConditionalWorkflowConfig) -> Self {
950 | |         self.conditional_config = config;
951 | |         self
952 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:955:5
    |
955 |     pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:955:5
    |
955 | /     pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self {
956 | |         self.error_strategy = Some(strategy);
957 | |         self
958 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:961:5
    |
961 |     pub fn add_branch(mut self, branch: ConditionalBranch) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_branch(mut self, branch: ConditionalBranch) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:961:5
    |
961 | /     pub fn add_branch(mut self, branch: ConditionalBranch) -> Self {
962 | |         self.branches.push(branch);
963 | |         self
964 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:967:5
    |
967 |     pub fn add_branches(mut self, branches: Vec<ConditionalBranch>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_branches(mut self, branches: Vec<ConditionalBranch>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:967:5
    |
967 | /     pub fn add_branches(mut self, branches: Vec<ConditionalBranch>) -> Self {
968 | |         self.branches.extend(branches);
969 | |         self
970 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/conditional.rs:972:40
    |
972 |     /// Enable hook integration with a WorkflowExecutor
    |                                        ^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
972 -     /// Enable hook integration with a WorkflowExecutor
972 +     /// Enable hook integration with a `WorkflowExecutor`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:973:5
    |
973 |     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditional.rs:973:5
    |
973 | /     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
974 | |         self.workflow_executor = Some(workflow_executor);
975 | |         self
976 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditional.rs:979:5
    |
979 |     pub fn build(mut self) -> ConditionalWorkflow {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(mut self) -> ConditionalWorkflow`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/conditional.rs:1010:5
     |
1010 | /     pub fn timeout(
1011 | |         workflow_name: String,
1012 | |         executed_branches: Vec<BranchExecutionResult>,
1013 | |         duration: Duration,
1014 | |     ) -> Self {
     | |_____________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
     |
1010 ~     #[must_use] pub fn timeout(
1011 +         workflow_name: String,
1012 +         executed_branches: Vec<BranchExecutionResult>,
1013 +         duration: Duration,
1014 ~     ) -> Self {
     |

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/conditional.rs:1027:5
     |
1027 |     pub fn total_steps(&self) -> usize {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn total_steps(&self) -> usize`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/conditional.rs:1035:5
     |
1035 |     pub fn successful_steps(&self) -> usize {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn successful_steps(&self) -> usize`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/conditional.rs:1044:5
     |
1044 |     pub fn failed_steps(&self) -> usize {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn failed_steps(&self) -> usize`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/conditional.rs:1049:5
     |
1049 |     pub fn success_rate(&self) -> f64 {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success_rate(&self) -> f64`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/conditional.rs:1062:5
     |
1062 |     pub fn generate_report(&self) -> String {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_report(&self) -> String`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:49:5
   |
49 |     pub fn shared_data_equals(key: String, expected_value: serde_json::Value) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn shared_data_equals(key: String, expected_value: serde_json::Value) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:57:5
   |
57 |     pub fn shared_data_exists(key: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn shared_data_exists(key: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:62:5
   |
62 |     pub fn step_result_equals(step_id: ComponentId, expected_output: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn step_result_equals(step_id: ComponentId, expected_output: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:70:5
   |
70 |     pub fn step_succeeded(step_id: ComponentId) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn step_succeeded(step_id: ComponentId) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:75:5
   |
75 |     pub fn step_failed(step_id: ComponentId) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn step_failed(step_id: ComponentId) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:80:5
   |
80 |     pub fn and(conditions: Vec<Condition>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn and(conditions: Vec<Condition>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:85:5
   |
85 |     pub fn or(conditions: Vec<Condition>) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn or(conditions: Vec<Condition>) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:90:5
   |
90 |     pub fn not_condition(condition: Condition) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn not_condition(condition: Condition) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/conditions.rs:97:5
   |
97 |     pub fn custom(expression: String, description: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn custom(expression: String, description: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:118:5
    |
118 |     pub fn success_true(description: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success_true(description: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:127:5
    |
127 |     pub fn success_false(description: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success_false(description: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:136:5
    |
136 |     pub fn error(description: String, error: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn error(description: String, error: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:145:5
    |
145 |     pub fn is_success(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_success(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:150:5
    |
150 |     pub fn is_error(&self) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_error(&self) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:170:5
    |
170 |     pub fn new(execution_id: ComponentId) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(execution_id: ComponentId) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:180:5
    |
180 |     pub fn with_shared_data(mut self, shared_data: HashMap<String, serde_json::Value>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_shared_data(mut self, shared_data: HashMap<String, serde_json::Value>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditions.rs:180:5
    |
180 | /     pub fn with_shared_data(mut self, shared_data: HashMap<String, serde_json::Value>) -> Self {
181 | |         self.shared_data = shared_data;
182 | |         self
183 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:186:5
    |
186 | /     pub fn with_step_outputs(
187 | |         mut self,
188 | |         step_outputs: HashMap<ComponentId, serde_json::Value>,
189 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
186 ~     #[must_use] pub fn with_step_outputs(
187 +         mut self,
188 +         step_outputs: HashMap<ComponentId, serde_json::Value>,
189 ~     ) -> Self {
    |

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditions.rs:186:5
    |
186 | /     pub fn with_step_outputs(
187 | |         mut self,
188 | |         step_outputs: HashMap<ComponentId, serde_json::Value>,
189 | |     ) -> Self {
190 | |         self.step_outputs = step_outputs;
191 | |         self
192 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:195:5
    |
195 |     pub fn with_step_results(mut self, step_results: HashMap<ComponentId, StepResult>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_step_results(mut self, step_results: HashMap<ComponentId, StepResult>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/conditions.rs:195:5
    |
195 | /     pub fn with_step_results(mut self, step_results: HashMap<ComponentId, StepResult>) -> Self {
196 | |         self.step_results = step_results;
197 | |         self
198 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:201:5
    |
201 |     pub fn get_shared_data(&self, key: &str) -> Option<&serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_shared_data(&self, key: &str) -> Option<&serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:206:5
    |
206 |     pub fn get_step_output(&self, step_id: ComponentId) -> Option<&serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_step_output(&self, step_id: ComponentId) -> Option<&serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:211:5
    |
211 |     pub fn get_step_result(&self, step_id: ComponentId) -> Option<&StepResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_step_result(&self, step_id: ComponentId) -> Option<&StepResult>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/conditions.rs:224:5
    |
224 |     pub fn new(evaluation_timeout: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(evaluation_timeout: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/conditions.rs:229:5
    |
229 | /     pub async fn evaluate(
230 | |         &self,
231 | |         condition: &Condition,
232 | |         context: &ConditionEvaluationContext,
233 | |     ) -> Result<ConditionResult> {
    | |________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:318:27
    |
318 |         let description = format!("Shared data '{}' equals {:?}", key, expected_value);
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
318 -         let description = format!("Shared data '{}' equals {:?}", key, expected_value);
318 +         let description = format!("Shared data '{key}' equals {expected_value:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:326:55
    |
326 |                       Ok(ConditionResult::success_false(format!(
    |  _______________________________________________________^
327 | |                         "Shared data '{}' is {:?}, expected {:?}",
328 | |                         key, actual_value, expected_value
329 | |                     )))
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:332:55
    |
332 |               None => Ok(ConditionResult::success_false(format!(
    |  _______________________________________________________^
333 | |                 "Shared data key '{}' does not exist",
334 | |                 key
335 | |             ))),
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:345:27
    |
345 |         let description = format!("Shared data '{}' exists", key);
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
345 -         let description = format!("Shared data '{}' exists", key);
345 +         let description = format!("Shared data '{key}' exists");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:351:47
    |
351 |               Ok(ConditionResult::success_false(format!(
    |  _______________________________________________^
352 | |                 "Shared data key '{}' does not exist",
353 | |                 key
354 | |             )))
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:365:27
    |
365 |         let description = format!("Step {:?} output equals '{}'", step_id, expected_output);
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
365 -         let description = format!("Step {:?} output equals '{}'", step_id, expected_output);
365 +         let description = format!("Step {step_id:?} output equals '{expected_output}'");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:378:55
    |
378 |               None => Ok(ConditionResult::success_false(format!(
    |  _______________________________________________________^
379 | |                 "Step {:?} result not found",
380 | |                 step_id
381 | |             ))),
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:391:27
    |
391 |         let description = format!("Step {:?} succeeded", step_id);
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
391 -         let description = format!("Step {:?} succeeded", step_id);
391 +         let description = format!("Step {step_id:?} succeeded");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:398:55
    |
398 |                       Ok(ConditionResult::success_false(format!(
    |  _______________________________________________________^
399 | |                         "Step {:?} failed",
400 | |                         step_id
401 | |                     )))
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:404:55
    |
404 |               None => Ok(ConditionResult::success_false(format!(
    |  _______________________________________________________^
405 | |                 "Step {:?} result not found",
406 | |                 step_id
407 | |             ))),
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:417:27
    |
417 |         let description = format!("Step {:?} failed", step_id);
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
417 -         let description = format!("Step {:?} failed", step_id);
417 +         let description = format!("Step {step_id:?} failed");
    |

warning: unnecessary boolean `not` operation
   --> llmspell-workflows/src/conditions.rs:421:17
    |
421 | /                 if !step_result.success {
422 | |                     Ok(ConditionResult::success_true(description))
423 | |                 } else {
424 | |                     Ok(ConditionResult::success_false(format!(
...   |
427 | |                     )))
428 | |                 }
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
421 ~                 if step_result.success {
422 +                     Ok(ConditionResult::success_false(format!(
423 +                         "Step {:?} succeeded",
424 +                         step_id
425 +                     )))
426 +                 } else {
427 +                     Ok(ConditionResult::success_true(description))
428 +                 }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:424:55
    |
424 |                       Ok(ConditionResult::success_false(format!(
    |  _______________________________________________________^
425 | |                         "Step {:?} succeeded",
426 | |                         step_id
427 | |                     )))
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:430:55
    |
430 |               None => Ok(ConditionResult::success_false(format!(
    |  _______________________________________________________^
431 | |                 "Step {:?} result not found",
432 | |                 step_id
433 | |             ))),
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: unnecessary boolean `not` operation
   --> llmspell-workflows/src/conditions.rs:512:9
    |
512 | /         if !errors.is_empty() {
513 | |             Ok(ConditionResult::error(
514 | |                 description,
515 | |                 format!("OR condition errors: {}", errors.join(", ")),
...   |
521 | |             )))
522 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
512 ~         if errors.is_empty() {
513 +             Ok(ConditionResult::success_false(format!(
514 +                 "All {} OR conditions are false",
515 +                 conditions.len()
516 +             )))
517 +         } else {
518 +             Ok(ConditionResult::error(
519 +                 description,
520 +                 format!("OR condition errors: {}", errors.join(", ")),
521 +             ))
522 +         }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:577:17
    |
577 |                 format!("Unsupported custom expression: {}", expression),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
577 -                 format!("Unsupported custom expression: {}", expression),
577 +                 format!("Unsupported custom expression: {expression}"),
    |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/conditions.rs:611:45
    |
611 |     /// Parse shared data expressions like "shared_data.key == 'value'"
    |                                             ^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
611 -     /// Parse shared data expressions like "shared_data.key == 'value'"
611 +     /// Parse shared data expressions like "`shared_data.key` == 'value'"
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:634:25
    |
634 |                         format!("Cannot parse value: {}", right),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
634 -                         format!("Cannot parse value: {}", right),
634 +                         format!("Cannot parse value: {right}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:638:35
    |
638 |                 let description = format!("Custom: shared_data.{} == {}", key, right);
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
638 -                 let description = format!("Custom: shared_data.{} == {}", key, right);
638 +                 let description = format!("Custom: shared_data.{key} == {right}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:645:72
    |
645 |   ...                   return Some(ConditionResult::success_false(format!(
    |  __________________________________________________________________^
646 | | ...                       "Custom: shared_data.{} is {:?}, expected {}",
647 | | ...                       key, actual_value, right
648 | | ...                   )));
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:652:68
    |
652 |                           return Some(ConditionResult::success_false(format!(
    |  ____________________________________________________________________^
653 | |                             "Custom: shared_data.{} does not exist",
654 | |                             key
655 | |                         )));
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/conditions.rs:664:45
    |
664 |     /// Parse step result expressions like "step_result.step_id.success"
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
664 -     /// Parse step result expressions like "step_result.step_id.success"
664 +     /// Parse step result expressions like "`step_result.step_id.success`"
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:682:47
    |
682 | ...                   let description = format!("Custom: step.{}.success", step_id_str);
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
682 -                             let description = format!("Custom: step.{}.success", step_id_str);
682 +                             let description = format!("Custom: step.{step_id_str}.success");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:690:47
    |
690 | ...                   let description = format!("Custom: step.{}.failed", step_id_str);
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
690 -                             let description = format!("Custom: step.{}.failed", step_id_str);
690 +                             let description = format!("Custom: step.{step_id_str}.failed");
    |

warning: unnecessary boolean `not` operation
   --> llmspell-workflows/src/conditions.rs:691:29
    |
691 | / ...                   if !first_result.success {
692 | | ...                       return Some(ConditionResult::success_true(description));
693 | | ...                   } else {
694 | | ...                       return Some(ConditionResult::success_false(description));
695 | | ...                   }
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
691 ~                             if first_result.success {
692 +                                 return Some(ConditionResult::success_false(description));
693 +                             } else {
694 +                                 return Some(ConditionResult::success_true(description));
695 +                             }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/conditions.rs:700:33
    |
700 | ...                   format!("Unknown step property: {}", property),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
700 -                                 format!("Unknown step property: {}", property),
700 +                                 format!("Unknown step property: {property}"),
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/error_handling.rs:17:5
   |
17 |     pub fn new(default_strategy: ErrorStrategy) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(default_strategy: ErrorStrategy) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-workflows/src/error_handling.rs:22:5
   |
22 | /     pub async fn handle_step_failure(
23 | |         &self,
24 | |         step_result: &StepResult,
25 | |         strategy: Option<&ErrorStrategy>,
26 | |     ) -> Result<ErrorAction> {
   | |____________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-workflows/src/error_handling.rs:73:5
   |
73 | /     pub async fn analyze_workflow_error(
74 | |         &self,
75 | |         error: &LLMSpellError,
76 | |         completed_steps: &[StepResult],
77 | |         remaining_steps: usize,
78 | |     ) -> Result<WorkflowErrorAnalysis> {
   | |______________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-workflows/src/error_handling.rs:93:13
   |
93 |             completed_steps.len() as f64 / (completed_steps.len() + remaining_steps) as f64
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
   = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-workflows/src/error_handling.rs:93:44
   |
93 |             completed_steps.len() as f64 / (completed_steps.len() + remaining_steps) as f64
   |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `f64` to `u32` may truncate the value
   --> llmspell-workflows/src/error_handling.rs:104:34
    |
104 |             progress_percentage: (progress * 100.0) as u32,
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation

warning: casting `f64` to `u32` may lose the sign of the value
   --> llmspell-workflows/src/error_handling.rs:104:34
    |
104 |             progress_percentage: (progress * 100.0) as u32,
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
    = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/error_handling.rs:119:5
    |
119 | /     pub fn calculate_retry_delay(
120 | |         &self,
121 | |         strategy: &ErrorStrategy,
122 | |         attempt: u32,
123 | |         exponential_backoff: bool,
124 | |     ) -> Duration {
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
119 ~     #[must_use] pub fn calculate_retry_delay(
120 +         &self,
121 +         strategy: &ErrorStrategy,
122 +         attempt: u32,
123 +         exponential_backoff: bool,
124 ~     ) -> Duration {
    |

warning: unused `self` argument
   --> llmspell-workflows/src/error_handling.rs:139:9
    |
139 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-workflows/src/error_handling.rs:140:21
    |
140 |         error_type: &WorkflowErrorType,
    |                     ^^^^^^^^^^^^^^^^^^ help: consider passing by value instead: `WorkflowErrorType`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref
    = note: `-W clippy::trivially-copy-pass-by-ref` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::trivially_copy_pass_by_ref)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/error_handling.rs:220:5
    |
220 |     pub fn generate_report(&self) -> String {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_report(&self) -> String`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/executor.rs:109:31
    |
109 | /// Default implementation of WorkflowExecutor
    |                               ^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
109 - /// Default implementation of WorkflowExecutor
109 + /// Default implementation of `WorkflowExecutor`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/executor.rs:120:5
    |
120 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: you seem to be trying to use `match` for destructuring a single pattern. Consider using `if let`
   --> llmspell-workflows/src/executor.rs:220:13
    |
220 | /             match tokio::time::timeout(timeout, agent.execute(agent_input, exec_context)).await {
221 | |                 Ok(result) => result,
222 | |                 Err(_) => {
223 | |                     #[allow(clippy::cast_possible_truncation)]
...   |
230 | |             }
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
    = note: `-W clippy::single-match-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_match_else)]`
help: try
    |
220 ~             if let Ok(result) = tokio::time::timeout(timeout, agent.execute(agent_input, exec_context)).await { result } else {
221 +                 #[allow(clippy::cast_possible_truncation)]
222 +                 let timeout_ms = timeout.as_millis() as u64;
223 +                 return Err(LLMSpellError::Timeout {
224 +                     message: format!("Workflow execution timed out: {}", workflow_name),
225 +                     duration_ms: Some(timeout_ms),
226 +                 });
227 +             }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/executor.rs:226:34
    |
226 |                         message: format!("Workflow execution timed out: {}", workflow_name),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
226 -                         message: format!("Workflow execution timed out: {}", workflow_name),
226 +                         message: format!("Workflow execution timed out: {workflow_name}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/executor.rs:297:26
    |
297 |                 message: format!("No active execution found: {}", execution_id),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
297 -                 message: format!("No active execution found: {}", execution_id),
297 +                 message: format!("No active execution found: {execution_id}"),
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/factory.rs:73:5
   |
73 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-workflows/src/factory.rs:78:5
   |
78 | /     pub async fn create_from_type(
79 | |         &self,
80 | |         workflow_type: &str,
81 | |         name: String,
82 | |         config: WorkflowConfig,
83 | |         type_config: serde_json::Value,
84 | |     ) -> Result<Arc<dyn BaseAgent + Send + Sync>> {
   | |_________________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/factory.rs:92:30
   |
92 |                     message: format!("Unknown workflow type: {}", workflow_type),
   |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
92 -                     message: format!("Unknown workflow type: {}", workflow_type),
92 +                     message: format!("Unknown workflow type: {workflow_type}"),
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/factory.rs:130:38
    |
130 | ...                   message: format!("Invalid parallel config: {}", e),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
130 -                             message: format!("Invalid parallel config: {}", e),
130 +                             message: format!("Invalid parallel config: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/factory.rs:147:38
    |
147 | ...                   message: format!("Invalid loop config: {}", e),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
147 -                             message: format!("Invalid loop config: {}", e),
147 +                             message: format!("Invalid loop config: {e}"),
    |

warning: this match arm has an identical body to another arm
   --> llmspell-workflows/src/factory.rs:173:13
    |
173 |             WorkflowType::Conditional => WorkflowConfig::default(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`
help: or try merging the arm patterns and removing the obsolete arm
    |
168 ~             WorkflowType::Parallel => WorkflowConfig {
169 |                 continue_on_error: true,
170 |                 ..Default::default()
171 |             },
172 ~             WorkflowType::Conditional | WorkflowType::Sequential => WorkflowConfig::default(),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/factory.rs:200:5
    |
200 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/factory.rs:217:5
    |
217 |     pub fn get_template(&self, template_name: &str) -> Option<&WorkflowTemplate> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_template(&self, template_name: &str) -> Option<&WorkflowTemplate>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/factory.rs:222:5
    |
222 |     pub fn list_templates(&self) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn list_templates(&self) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/factory.rs:227:5
    |
227 | /     pub async fn create_from_template(
228 | |         &self,
229 | |         template_name: &str,
230 | |         workflow_name: String,
231 | |     ) -> Result<Arc<dyn BaseAgent + Send + Sync>> {
    | |_________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/factory.rs:236:30
    |
236 |                     message: format!("Workflow template '{}' not found", template_name),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
236 -                     message: format!("Workflow template '{}' not found", template_name),
236 +                     message: format!("Workflow template '{template_name}' not found"),
    |

warning: missing `#[must_use]` attribute on a method returning `Self`
 --> llmspell-workflows/src/hooks/builder.rs:7:5
  |
7 |     fn with_logging_hooks(self) -> Self;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/hooks/builder.rs:10:5
   |
10 |     fn with_lifecycle_hooks(self) -> Self;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
 --> llmspell-workflows/src/hooks/integration.rs:1:44
  |
1 | //! ABOUTME: Integration of llmspell-hooks HookExecutor with workflow infrastructure
  |                                            ^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: Integration of llmspell-hooks HookExecutor with workflow infrastructure
1 + //! ABOUTME: Integration of llmspell-hooks `HookExecutor` with workflow infrastructure
  |

warning: item in documentation is missing backticks
 --> llmspell-workflows/src/hooks/integration.rs:2:23
  |
2 | //! ABOUTME: Provides WorkflowExecutor that orchestrates hook execution for workflows
  |                       ^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides WorkflowExecutor that orchestrates hook execution for workflows
2 + //! ABOUTME: Provides `WorkflowExecutor` that orchestrates hook execution for workflows
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/hooks/integration.rs:91:5
   |
91 | /     pub fn new(
92 | |         component_id: HookComponentId,
93 | |         workflow_metadata: ComponentMetadata,
94 | |         workflow_state: WorkflowState,
95 | |         workflow_type: String,
96 | |         execution_phase: WorkflowExecutionPhase,
97 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
91 ~     #[must_use] pub fn new(
92 +         component_id: HookComponentId,
93 +         workflow_metadata: ComponentMetadata,
94 +         workflow_state: WorkflowState,
95 +         workflow_type: String,
96 +         execution_phase: WorkflowExecutionPhase,
97 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/hooks/integration.rs:151:5
    |
151 |     pub fn with_step_context(mut self, step_context: StepContext) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_step_context(mut self, step_context: StepContext) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/hooks/integration.rs:151:5
    |
151 | /     pub fn with_step_context(mut self, step_context: StepContext) -> Self {
152 | |         self.step_context = Some(step_context);
153 | |         self
154 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/hooks/integration.rs:157:5
    |
157 |     pub fn with_shared_data(mut self, shared_data: HashMap<String, JsonValue>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_shared_data(mut self, shared_data: HashMap<String, JsonValue>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/hooks/integration.rs:157:5
    |
157 | /     pub fn with_shared_data(mut self, shared_data: HashMap<String, JsonValue>) -> Self {
158 | |         self.shared_data = shared_data;
159 | |         self
160 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/hooks/integration.rs:163:5
    |
163 |     pub fn with_pattern_context(mut self, key: String, value: JsonValue) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_pattern_context(mut self, key: String, value: JsonValue) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/hooks/integration.rs:163:5
    |
163 | /     pub fn with_pattern_context(mut self, key: String, value: JsonValue) -> Self {
164 | |         self.pattern_context.insert(key, value);
165 | |         self
166 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/hooks/integration.rs:169:5
    |
169 |     pub fn get_hook_point(&self) -> HookPoint {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hook_point(&self) -> HookPoint`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/hooks/integration.rs:192:5
    |
192 | /     pub fn new(
193 | |         config: WorkflowLifecycleConfig,
194 | |         hook_executor: Option<Arc<HookExecutor>>,
195 | |         hook_registry: Option<Arc<HookRegistry>>,
196 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
192 ~     #[must_use] pub fn new(
193 +         config: WorkflowLifecycleConfig,
194 +         hook_executor: Option<Arc<HookExecutor>>,
195 +         hook_registry: Option<Arc<HookRegistry>>,
196 ~     ) -> Self {
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/hooks/integration.rs:228:5
    |
228 | /     pub async fn execute_workflow_hooks(
229 | |         &self,
230 | |         workflow_context: WorkflowHookContext,
231 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/hooks/integration.rs:290:29
    |
290 |                     .insert(format!("pattern_{}", key), value.clone());
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
290 -                     .insert(format!("pattern_{}", key), value.clone());
290 +                     .insert(format!("pattern_{key}"), value.clone());
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/hooks/integration.rs:350:5
    |
350 | /     pub async fn execute_step_hooks(
351 | |         &self,
352 | |         workflow_metadata: ComponentMetadata,
353 | |         workflow_state: WorkflowState,
...   |
356 | |         _is_pre_execution: bool,
357 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/hooks/integration.rs:378:5
    |
378 | /     pub async fn execute_state_change_hooks(
379 | |         &self,
380 | |         workflow_metadata: ComponentMetadata,
381 | |         old_state: WorkflowState,
382 | |         new_state: WorkflowState,
383 | |         workflow_type: String,
384 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/hooks/integration.rs:401:31
    |
401 |             JsonValue::String(format!("{:?}", old_state)),
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
401 -             JsonValue::String(format!("{:?}", old_state)),
401 +             JsonValue::String(format!("{old_state:?}")),
    |

warning: unused `self` argument
   --> llmspell-workflows/src/hooks/integration.rs:408:24
    |
408 |     fn log_audit_event(&self, context: &WorkflowHookContext) {
    |                        ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/hooks/lifecycle.rs:35:5
   |
35 |     pub fn as_str(&self) -> &str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn as_str(&self) -> &str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/hooks/lifecycle.rs:59:5
   |
59 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-workflows/src/hooks/lifecycle.rs:73:5
   |
73 | /     pub async fn execute(
74 | |         &self,
75 | |         point: &HookPoint,
76 | |         _context: &HookContext,
77 | |     ) -> Result<HookResult, Box<dyn std::error::Error + Send + Sync>> {
   | |_____________________________________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/hooks/lifecycle.rs:96:5
   |
96 |     pub fn create_logging_hook(level: tracing::Level) -> HookFn {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_logging_hook(level: tracing::Level) -> HookFn`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/hooks/lifecycle.rs:100:21
    |
100 |                     debug!("Hook: {} - {}", context.hook_point, context.workflow_name)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `debug!("Hook: {} - {}", context.hook_point, context.workflow_name);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
    = note: `-W clippy::semicolon-if-nothing-returned` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::semicolon_if_nothing_returned)]`

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/hooks/lifecycle.rs:103:21
    |
103 |                     info!("Hook: {} - {}", context.hook_point, context.workflow_name)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `info!("Hook: {} - {}", context.hook_point, context.workflow_name);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/hooks/types.rs:47:26
   |
47 |     /// Step output (for after_step hooks)
   |                          ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
47 -     /// Step output (for after_step hooks)
47 +     /// Step output (for `after_step` hooks)
   |

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/hooks/types.rs:50:28
   |
50 |     /// Step duration (for after_step hooks)
   |                            ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
50 -     /// Step duration (for after_step hooks)
50 +     /// Step duration (for `after_step` hooks)
   |

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/loop.rs:101:34
    |
101 |     /// Create a new builder for LoopConfig
    |                                  ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
101 -     /// Create a new builder for LoopConfig
101 +     /// Create a new builder for `LoopConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:102:5
    |
102 |     pub fn builder() -> LoopConfigBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> LoopConfigBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/loop.rs:107:17
    |
107 | /// Builder for LoopConfig
    |                 ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
107 - /// Builder for LoopConfig
107 + /// Builder for `LoopConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:120:5
    |
120 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:133:5
    |
133 |     pub fn iterator(mut self, iterator: LoopIterator) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn iterator(mut self, iterator: LoopIterator) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:133:5
    |
133 | /     pub fn iterator(mut self, iterator: LoopIterator) -> Self {
134 | |         self.iterator = Some(iterator);
135 | |         self
136 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:139:5
    |
139 |     pub fn add_step(mut self, step: TraitWorkflowStep) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_step(mut self, step: TraitWorkflowStep) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:139:5
    |
139 | /     pub fn add_step(mut self, step: TraitWorkflowStep) -> Self {
140 | |         self.body.push(step);
141 | |         self
142 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:145:5
    |
145 |     pub fn body(mut self, steps: Vec<TraitWorkflowStep>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn body(mut self, steps: Vec<TraitWorkflowStep>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:145:5
    |
145 | /     pub fn body(mut self, steps: Vec<TraitWorkflowStep>) -> Self {
146 | |         self.body = steps;
147 | |         self
148 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:151:5
    |
151 |     pub fn add_break_condition(mut self, condition: BreakCondition) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_break_condition(mut self, condition: BreakCondition) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:151:5
    |
151 | /     pub fn add_break_condition(mut self, condition: BreakCondition) -> Self {
152 | |         self.break_conditions.push(condition);
153 | |         self
154 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:157:5
    |
157 |     pub fn aggregation(mut self, aggregation: ResultAggregation) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn aggregation(mut self, aggregation: ResultAggregation) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:157:5
    |
157 | /     pub fn aggregation(mut self, aggregation: ResultAggregation) -> Self {
158 | |         self.aggregation = aggregation;
159 | |         self
160 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:163:5
    |
163 |     pub fn continue_on_error(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn continue_on_error(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:163:5
    |
163 | /     pub fn continue_on_error(mut self, enabled: bool) -> Self {
164 | |         self.continue_on_error = enabled;
165 | |         self
166 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:169:5
    |
169 |     pub fn timeout(mut self, timeout: Option<Duration>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn timeout(mut self, timeout: Option<Duration>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:169:5
    |
169 | /     pub fn timeout(mut self, timeout: Option<Duration>) -> Self {
170 | |         self.timeout = timeout;
171 | |         self
172 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:175:5
    |
175 |     pub fn iteration_delay(mut self, delay: Option<Duration>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn iteration_delay(mut self, delay: Option<Duration>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/loop.rs:175:5
    |
175 | /     pub fn iteration_delay(mut self, delay: Option<Duration>) -> Self {
176 | |         self.iteration_delay = delay;
177 | |         self
178 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/loop.rs:180:25
    |
180 |     /// Build the final LoopConfig with validation
    |                         ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
180 -     /// Build the final LoopConfig with validation
180 +     /// Build the final `LoopConfig` with validation
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/loop.rs:181:5
    |
181 |     pub fn build(self) -> Result<LoopConfig> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:234:5
    |
234 | /     pub fn success(
235 | |         workflow_name: String,
236 | |         total_iterations: usize,
237 | |         completed_iterations: usize,
...   |
240 | |         duration: Duration,
241 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
234 ~     #[must_use] pub fn success(
235 +         workflow_name: String,
236 +         total_iterations: usize,
237 +         completed_iterations: usize,
238 +         aggregated_results: HashMap<String, Value>,
239 +         break_reason: Option<String>,
240 +         duration: Duration,
241 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:254:5
    |
254 | /     pub fn failure(
255 | |         workflow_name: String,
256 | |         total_iterations: usize,
257 | |         completed_iterations: usize,
...   |
260 | |         error: String,
261 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
254 ~     #[must_use] pub fn failure(
255 +         workflow_name: String,
256 +         total_iterations: usize,
257 +         completed_iterations: usize,
258 +         aggregated_results: HashMap<String, Value>,
259 +         duration: Duration,
260 +         error: String,
261 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:297:5
    |
297 |     pub fn new(name: String, config: LoopConfig, workflow_config: WorkflowConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, config: LoopConfig, workflow_config: WorkflowConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-workflows/src/loop.rs:297:67
    |
297 |     pub fn new(name: String, config: LoopConfig, workflow_config: WorkflowConfig) -> Self {
    |                                                                   ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:328:5
    |
328 | /     pub fn new_with_hooks(
329 | |         name: String,
330 | |         config: LoopConfig,
331 | |         workflow_config: WorkflowConfig,
332 | |         workflow_executor: Arc<WorkflowExecutor>,
333 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
328 ~     #[must_use] pub fn new_with_hooks(
329 +         name: String,
330 +         config: LoopConfig,
331 +         workflow_config: WorkflowConfig,
332 +         workflow_executor: Arc<WorkflowExecutor>,
333 ~     ) -> Self {
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-workflows/src/loop.rs:331:26
    |
331 |         workflow_config: WorkflowConfig,
    |                          ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:366:5
    |
366 |     pub fn builder(name: String) -> LoopWorkflowBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder(name: String) -> LoopWorkflowBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/loop.rs:371:5
    |
371 |     pub fn name(&self) -> &str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn name(&self) -> &str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: single-character string constant used as pattern
   --> llmspell-workflows/src/loop.rs:417:32
    |
417 |         if expression.contains(">") {
    |                                ^^^ help: consider using a `char`: `'>'`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_char_pattern
    = note: `-W clippy::single-char-pattern` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_char_pattern)]`

warning: unused `self` argument
   --> llmspell-workflows/src/loop.rs:436:9
    |
436 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/loop.rs:657:5
    |
657 |     pub async fn execute_workflow(&self) -> Result<LoopWorkflowResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (198/100)
   --> llmspell-workflows/src/loop.rs:657:5
    |
657 | /     pub async fn execute_workflow(&self) -> Result<LoopWorkflowResult> {
658 | |         let start_time = Instant::now();
659 | |         info!("Starting loop workflow: {}", self.name);
...   |
889 | |         ))
890 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/loop.rs:794:29
    |
794 | ...                   format!("iteration_{}", iteration),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
794 -                             format!("iteration_{}", iteration),
794 +                             format!("iteration_{iteration}"),
    |

warning: this function has too many lines (108/100)
    --> llmspell-workflows/src/loop.rs:899:5
     |
899  | /     async fn execute(&self, input: AgentInput, _context: ExecutionContext) -> Result<AgentOutput> {
...    |
1021 | |         Ok(AgentOutput::text(output_text).with_metadata(metadata))
1022 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/loop.rs:912:17
    |
912 |                 format!(" (broke early: {})", reason)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
912 -                 format!(" (broke early: {})", reason)
912 +                 format!(" (broke early: {reason})")
    |

warning: variables can be used directly in the `format!` string
    --> llmspell-workflows/src/loop.rs:1092:21
     |
1092 |                     format!("Loop workflow error in step '{}': {}", step_name, message)
     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1092 -                     format!("Loop workflow error in step '{}': {}", step_name, message)
1092 +                     format!("Loop workflow error in step '{step_name}': {message}")
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-workflows/src/loop.rs:1094:21
     |
1094 |                     format!("Loop workflow error: {}", message)
     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1094 -                     format!("Loop workflow error: {}", message)
1094 +                     format!("Loop workflow error: {message}")
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-workflows/src/loop.rs:1099:21
     |
1099 |                     format!("Validation error in field '{}': {}", field_name, message)
     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1099 -                     format!("Validation error in field '{}': {}", field_name, message)
1099 +                     format!("Validation error in field '{field_name}': {message}")
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-workflows/src/loop.rs:1101:21
     |
1101 |                     format!("Validation error: {}", message)
     |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1101 -                     format!("Validation error: {}", message)
1101 +                     format!("Validation error: {message}")
     |

warning: variables can be used directly in the `format!` string
    --> llmspell-workflows/src/loop.rs:1104:18
     |
1104 |             _ => format!("Loop workflow error: {}", error),
     |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
     |
1104 -             _ => format!("Loop workflow error: {}", error),
1104 +             _ => format!("Loop workflow error: {error}"),
     |

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1204:5
     |
1204 | /     pub fn description(mut self, desc: impl Into<String>) -> Self {
1205 | |         self.description = desc.into();
1206 | |         self
1207 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1209:5
     |
1209 |     pub fn with_collection<T: Into<Value>>(mut self, values: Vec<T>) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_collection<T: Into<Value>>(mut self, values: Vec<T>) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1209:5
     |
1209 | /     pub fn with_collection<T: Into<Value>>(mut self, values: Vec<T>) -> Self {
1210 | |         self.iterator = Some(LoopIterator::Collection {
1211 | |             values: values.into_iter().map(|v| v.into()).collect(),
1212 | |         });
1213 | |         self
1214 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: redundant closure
    --> llmspell-workflows/src/loop.rs:1211:44
     |
1211 |             values: values.into_iter().map(|v| v.into()).collect(),
     |                                            ^^^^^^^^^^^^ help: replace the closure with the method itself: `std::convert::Into::into`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1216:5
     |
1216 |     pub fn with_range(mut self, start: i64, end: i64, step: i64) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_range(mut self, start: i64, end: i64, step: i64) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1216:5
     |
1216 | /     pub fn with_range(mut self, start: i64, end: i64, step: i64) -> Self {
1217 | |         self.iterator = Some(LoopIterator::Range { start, end, step });
1218 | |         self
1219 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1221:5
     |
1221 | /     pub fn with_while_condition(
1222 | |         mut self,
1223 | |         condition: impl Into<String>,
1224 | |         max_iterations: usize,
...    |
1230 | |         self
1231 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1233:5
     |
1233 |     pub fn add_step(mut self, step: TraitWorkflowStep) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_step(mut self, step: TraitWorkflowStep) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1233:5
     |
1233 | /     pub fn add_step(mut self, step: TraitWorkflowStep) -> Self {
1234 | |         self.body.push(step);
1235 | |         self
1236 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1238:5
     |
1238 | /     pub fn add_break_condition(
1239 | |         mut self,
1240 | |         expression: impl Into<String>,
1241 | |         message: Option<String>,
...    |
1247 | |         self
1248 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1250:5
     |
1250 |     pub fn with_aggregation(mut self, aggregation: ResultAggregation) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_aggregation(mut self, aggregation: ResultAggregation) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1250:5
     |
1250 | /     pub fn with_aggregation(mut self, aggregation: ResultAggregation) -> Self {
1251 | |         self.aggregation = aggregation;
1252 | |         self
1253 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1255:5
     |
1255 |     pub fn continue_on_error(mut self, continue_on_error: bool) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn continue_on_error(mut self, continue_on_error: bool) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1255:5
     |
1255 | /     pub fn continue_on_error(mut self, continue_on_error: bool) -> Self {
1256 | |         self.continue_on_error = continue_on_error;
1257 | |         self
1258 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1260:5
     |
1260 |     pub fn with_timeout(mut self, timeout: Duration) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_timeout(mut self, timeout: Duration) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1260:5
     |
1260 | /     pub fn with_timeout(mut self, timeout: Duration) -> Self {
1261 | |         self.timeout = Some(timeout);
1262 | |         self
1263 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1265:5
     |
1265 |     pub fn with_iteration_delay(mut self, delay: Duration) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_iteration_delay(mut self, delay: Duration) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1265:5
     |
1265 | /     pub fn with_iteration_delay(mut self, delay: Duration) -> Self {
1266 | |         self.iteration_delay = Some(delay);
1267 | |         self
1268 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1270:5
     |
1270 |     pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1270:5
     |
1270 | /     pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self {
1271 | |         self.workflow_config = config;
1272 | |         self
1273 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1275:5
     |
1275 |     pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1275:5
     |
1275 | /     pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self {
1276 | |         self.workflow_config.default_error_strategy = strategy;
1277 | |         self
1278 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
    --> llmspell-workflows/src/loop.rs:1280:40
     |
1280 |     /// Enable hook integration with a WorkflowExecutor
     |                                        ^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
     |
1280 -     /// Enable hook integration with a WorkflowExecutor
1280 +     /// Enable hook integration with a `WorkflowExecutor`
     |

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/loop.rs:1281:5
     |
1281 |     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/loop.rs:1281:5
     |
1281 | /     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
1282 | |         self.workflow_executor = Some(workflow_executor);
1283 | |         self
1284 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-workflows/src/loop.rs:1286:5
     |
1286 |     pub fn build(self) -> Result<LoopWorkflow> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/parallel.rs:47:5
   |
47 |     pub fn new(name: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/parallel.rs:57:5
   |
57 |     pub fn with_description(mut self, description: String) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_description(mut self, description: String) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/parallel.rs:57:5
   |
57 | /     pub fn with_description(mut self, description: String) -> Self {
58 | |         self.description = description;
59 | |         self
60 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/parallel.rs:62:5
   |
62 |     pub fn add_step(mut self, step: TraitWorkflowStep) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_step(mut self, step: TraitWorkflowStep) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/parallel.rs:62:5
   |
62 | /     pub fn add_step(mut self, step: TraitWorkflowStep) -> Self {
63 | |         self.steps.push(step);
64 | |         self
65 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/parallel.rs:67:5
   |
67 |     pub fn optional(mut self) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn optional(mut self) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/parallel.rs:67:5
   |
67 | /     pub fn optional(mut self) -> Self {
68 | |         self.required = false;
69 | |         self
70 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/parallel.rs:72:5
   |
72 |     pub fn with_timeout(mut self, timeout: Duration) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_timeout(mut self, timeout: Duration) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/parallel.rs:72:5
   |
72 | /     pub fn with_timeout(mut self, timeout: Duration) -> Self {
73 | |         self.timeout = Some(timeout);
74 | |         self
75 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/parallel.rs:92:34
   |
92 |     /// Create a new builder for ParallelConfig
   |                                  ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
92 -     /// Create a new builder for ParallelConfig
92 +     /// Create a new builder for `ParallelConfig`
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/parallel.rs:93:5
   |
93 |     pub fn builder() -> ParallelConfigBuilder {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> ParallelConfigBuilder`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/parallel.rs:109:17
    |
109 | /// Builder for ParallelConfig
    |                 ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
109 - /// Builder for ParallelConfig
109 + /// Builder for `ParallelConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:116:5
    |
116 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:123:5
    |
123 |     pub fn max_concurrency(mut self, concurrency: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn max_concurrency(mut self, concurrency: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/parallel.rs:123:5
    |
123 | /     pub fn max_concurrency(mut self, concurrency: usize) -> Self {
124 | |         self.config.max_concurrency = concurrency;
125 | |         self
126 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:129:5
    |
129 |     pub fn fail_fast(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn fail_fast(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/parallel.rs:129:5
    |
129 | /     pub fn fail_fast(mut self, enabled: bool) -> Self {
130 | |         self.config.fail_fast = enabled;
131 | |         self
132 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:135:5
    |
135 |     pub fn timeout(mut self, timeout: Option<Duration>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn timeout(mut self, timeout: Option<Duration>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/parallel.rs:135:5
    |
135 | /     pub fn timeout(mut self, timeout: Option<Duration>) -> Self {
136 | |         self.config.timeout = timeout;
137 | |         self
138 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:141:5
    |
141 |     pub fn continue_on_optional_failure(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn continue_on_optional_failure(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/parallel.rs:141:5
    |
141 | /     pub fn continue_on_optional_failure(mut self, enabled: bool) -> Self {
142 | |         self.config.continue_on_optional_failure = enabled;
143 | |         self
144 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/parallel.rs:146:25
    |
146 |     /// Build the final ParallelConfig with validation
    |                         ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
146 -     /// Build the final ParallelConfig with validation
146 +     /// Build the final `ParallelConfig` with validation
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/parallel.rs:147:5
    |
147 |     pub fn build(self) -> Result<ParallelConfig> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:182:5
    |
182 | /     pub fn success(
183 | |         branch_name: String,
184 | |         step_results: Vec<StepResult>,
185 | |         duration: Duration,
186 | |         required: bool,
187 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
182 ~     #[must_use] pub fn success(
183 +         branch_name: String,
184 +         step_results: Vec<StepResult>,
185 +         duration: Duration,
186 +         required: bool,
187 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:198:5
    |
198 | /     pub fn failure(
199 | |         branch_name: String,
200 | |         step_results: Vec<StepResult>,
201 | |         duration: Duration,
202 | |         error: String,
203 | |         required: bool,
204 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
198 ~     #[must_use] pub fn failure(
199 +         branch_name: String,
200 +         step_results: Vec<StepResult>,
201 +         duration: Duration,
202 +         error: String,
203 +         required: bool,
204 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:238:5
    |
238 | /     pub fn new(
239 | |         workflow_name: String,
240 | |         branch_results: Vec<BranchResult>,
241 | |         duration: Duration,
242 | |         stopped_early: bool,
243 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
238 ~     #[must_use] pub fn new(
239 +         workflow_name: String,
240 +         branch_results: Vec<BranchResult>,
241 +         duration: Duration,
242 +         stopped_early: bool,
243 ~     ) -> Self {
    |

warning: unnecessary boolean `not` operation
   --> llmspell-workflows/src/parallel.rs:256:21
    |
256 |           let error = if !success {
    |  _____________________^
257 | |             Some(format!("{} required branches failed", required_failures))
258 | |         } else {
259 | |             None
260 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else
help: try
    |
256 ~         let error = if success {
257 +             None
258 +         } else {
259 +             Some(format!("{} required branches failed", required_failures))
260 ~         };
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:257:18
    |
257 |             Some(format!("{} required branches failed", required_failures))
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
257 -             Some(format!("{} required branches failed", required_failures))
257 +             Some(format!("{required_failures} required branches failed"))
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:275:5
    |
275 |     pub fn generate_report(&self) -> String {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_report(&self) -> String`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: `format!(..)` appended to existing `String`
   --> llmspell-workflows/src/parallel.rs:296:17
    |
296 | /                 report.push_str(&format!(
297 | |                     "  - {} ({}): {} in {:?}\n",
298 | |                     result.branch_name,
299 | |                     if result.required {
...   |
305 | |                     result.duration
306 | |                 ));
    | |__________________^
    |
    = help: consider using `write!` to avoid the extra allocation
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string
    = note: `-W clippy::format-push-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::format_push_string)]`

warning: `format!(..)` appended to existing `String`
   --> llmspell-workflows/src/parallel.rs:311:13
    |
311 |             report.push_str(&format!("\nError: {}\n", error));
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: consider using `write!` to avoid the extra allocation
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:311:30
    |
311 |             report.push_str(&format!("\nError: {}\n", error));
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
311 -             report.push_str(&format!("\nError: {}\n", error));
311 +             report.push_str(&format!("\nError: {error}\n"));
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:341:5
    |
341 | /     pub fn new(
342 | |         name: String,
343 | |         branches: Vec<ParallelBranch>,
344 | |         config: ParallelConfig,
345 | |         workflow_config: WorkflowConfig,
346 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
341 ~     #[must_use] pub fn new(
342 +         name: String,
343 +         branches: Vec<ParallelBranch>,
344 +         config: ParallelConfig,
345 +         workflow_config: WorkflowConfig,
346 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:378:5
    |
378 | /     pub fn new_with_hooks(
379 | |         name: String,
380 | |         branches: Vec<ParallelBranch>,
381 | |         config: ParallelConfig,
382 | |         workflow_config: WorkflowConfig,
383 | |         workflow_executor: Arc<WorkflowExecutor>,
384 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
378 ~     #[must_use] pub fn new_with_hooks(
379 +         name: String,
380 +         branches: Vec<ParallelBranch>,
381 +         config: ParallelConfig,
382 +         workflow_config: WorkflowConfig,
383 +         workflow_executor: Arc<WorkflowExecutor>,
384 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:419:5
    |
419 |     pub fn builder(name: String) -> ParallelWorkflowBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder(name: String) -> ParallelWorkflowBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:424:5
    |
424 |     pub fn name(&self) -> &str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn name(&self) -> &str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/parallel.rs:429:5
    |
429 |     pub fn branch_count(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn branch_count(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function has too many lines (113/100)
   --> llmspell-workflows/src/parallel.rs:434:5
    |
434 | /     async fn execute_branch(
435 | |         branch: ParallelBranch,
436 | |         step_executor: Arc<StepExecutor>,
437 | |         state_manager: Arc<Mutex<StateManager>>,
...   |
570 | |         result
571 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:546:41
    |
546 |                     branch_error = Some(format!("Branch '{}' timed out", branch_name));
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
546 -                     branch_error = Some(format!("Branch '{}' timed out", branch_name));
546 +                     branch_error = Some(format!("Branch '{branch_name}' timed out"));
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-workflows/src/parallel.rs:574:5
    |
574 |     pub async fn execute_workflow(&self) -> Result<ParallelWorkflowResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-workflows/src/parallel.rs:666:31
    |
666 |                 let _permit = semaphore.acquire().await.unwrap();
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/parallel.rs:574:5
    |
574 |     pub async fn execute_workflow(&self) -> Result<ParallelWorkflowResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (198/100)
   --> llmspell-workflows/src/parallel.rs:574:5
    |
574 | /     pub async fn execute_workflow(&self) -> Result<ParallelWorkflowResult> {
575 | |         let start_time = Instant::now();
576 | |         info!(
577 | |             "Starting parallel workflow: {} with {} branches",
...   |
817 | |         Ok(result)
818 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:729:29
    |
729 | ...                   format!("Branch panicked: {}", e),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
729 -                             format!("Branch panicked: {}", e),
729 +                             format!("Branch panicked: {e}"),
    |

warning: matching over `()` is more explicit
   --> llmspell-workflows/src/parallel.rs:747:13
    |
747 |             _ = tokio::time::sleep(timeout_duration) => {
    |             ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns
    = note: `-W clippy::ignored-unit-patterns` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ignored_unit_patterns)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:934:21
    |
934 | /                     format!(
935 | |                         "Parallel workflow error in step '{}': {}",
936 | |                         step_name, message
937 | |                     )
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:939:21
    |
939 |                     format!("Parallel workflow error: {}", message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
939 -                     format!("Parallel workflow error: {}", message)
939 +                     format!("Parallel workflow error: {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:944:21
    |
944 |                     format!("Validation error in field '{}': {}", field_name, message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
944 -                     format!("Validation error in field '{}': {}", field_name, message)
944 +                     format!("Validation error in field '{field_name}': {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:946:21
    |
946 |                     format!("Validation error: {}", message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
946 -                     format!("Validation error: {}", message)
946 +                     format!("Validation error: {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/parallel.rs:949:18
    |
949 |             _ => format!("Parallel workflow error: {}", error),
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
949 -             _ => format!("Parallel workflow error: {}", error),
949 +             _ => format!("Parallel workflow error: {error}"),
    |

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1040:5
     |
1040 | /     pub fn description(mut self, desc: impl Into<String>) -> Self {
1041 | |         self.description = desc.into();
1042 | |         self
1043 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/parallel.rs:1045:5
     |
1045 |     pub fn add_branch(mut self, branch: ParallelBranch) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_branch(mut self, branch: ParallelBranch) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1045:5
     |
1045 | /     pub fn add_branch(mut self, branch: ParallelBranch) -> Self {
1046 | |         self.branches.push(branch);
1047 | |         self
1048 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/parallel.rs:1050:5
     |
1050 |     pub fn with_max_concurrency(mut self, max: usize) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_concurrency(mut self, max: usize) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1050:5
     |
1050 | /     pub fn with_max_concurrency(mut self, max: usize) -> Self {
1051 | |         self.config.max_concurrency = max;
1052 | |         self
1053 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/parallel.rs:1055:5
     |
1055 |     pub fn fail_fast(mut self, enabled: bool) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn fail_fast(mut self, enabled: bool) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1055:5
     |
1055 | /     pub fn fail_fast(mut self, enabled: bool) -> Self {
1056 | |         self.config.fail_fast = enabled;
1057 | |         self
1058 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/parallel.rs:1060:5
     |
1060 |     pub fn with_timeout(mut self, timeout: Duration) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_timeout(mut self, timeout: Duration) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1060:5
     |
1060 | /     pub fn with_timeout(mut self, timeout: Duration) -> Self {
1061 | |         self.config.timeout = Some(timeout);
1062 | |         self
1063 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/parallel.rs:1065:5
     |
1065 |     pub fn continue_on_optional_failure(mut self, enabled: bool) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn continue_on_optional_failure(mut self, enabled: bool) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1065:5
     |
1065 | /     pub fn continue_on_optional_failure(mut self, enabled: bool) -> Self {
1066 | |         self.config.continue_on_optional_failure = enabled;
1067 | |         self
1068 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/parallel.rs:1070:5
     |
1070 |     pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1070:5
     |
1070 | /     pub fn with_workflow_config(mut self, config: WorkflowConfig) -> Self {
1071 | |         self.workflow_config = config;
1072 | |         self
1073 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
    --> llmspell-workflows/src/parallel.rs:1075:40
     |
1075 |     /// Enable hook integration with a WorkflowExecutor
     |                                        ^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
     |
1075 -     /// Enable hook integration with a WorkflowExecutor
1075 +     /// Enable hook integration with a `WorkflowExecutor`
     |

warning: this method could have a `#[must_use]` attribute
    --> llmspell-workflows/src/parallel.rs:1076:5
     |
1076 |     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
    --> llmspell-workflows/src/parallel.rs:1076:5
     |
1076 | /     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
1077 | |         self.workflow_executor = Some(workflow_executor);
1078 | |         self
1079 | |     }
     | |_____^
     |
     = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function returning `Result` missing `# Errors` section
    --> llmspell-workflows/src/parallel.rs:1081:5
     |
1081 |     pub fn build(self) -> Result<ParallelWorkflow> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/sequential.rs:48:5
   |
48 |     pub fn new(name: String, config: WorkflowConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, config: WorkflowConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-workflows/src/sequential.rs:48:38
   |
48 |     pub fn new(name: String, config: WorkflowConfig) -> Self {
   |                                      ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&WorkflowConfig`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/sequential.rs:79:5
   |
79 | /     pub fn new_with_hooks(
80 | |         name: String,
81 | |         config: WorkflowConfig,
82 | |         workflow_executor: Arc<WorkflowExecutor>,
83 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
79 ~     #[must_use] pub fn new_with_hooks(
80 +         name: String,
81 +         config: WorkflowConfig,
82 +         workflow_executor: Arc<WorkflowExecutor>,
83 ~     ) -> Self {
   |

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-workflows/src/sequential.rs:81:17
   |
81 |         config: WorkflowConfig,
   |                 ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&WorkflowConfig`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:115:5
    |
115 |     pub fn builder(name: String) -> SequentialWorkflowBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder(name: String) -> SequentialWorkflowBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:130:5
    |
130 |     pub fn name(&self) -> &str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn name(&self) -> &str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:135:5
    |
135 |     pub fn step_count(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn step_count(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/sequential.rs:140:5
    |
140 |     pub async fn execute_workflow(&self) -> Result<SequentialWorkflowResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (145/100)
   --> llmspell-workflows/src/sequential.rs:140:5
    |
140 | /     pub async fn execute_workflow(&self) -> Result<SequentialWorkflowResult> {
141 | |         let start_time = Instant::now();
142 | |         info!("Starting sequential workflow: {}", self.name);
...   |
308 | |         ))
309 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/sequential.rs:312:5
    |
312 |     pub async fn get_status(&self) -> Result<WorkflowStatus> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/sequential.rs:317:5
    |
317 |     pub async fn get_execution_stats(&self) -> Result<ExecutionStats> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/sequential.rs:322:5
    |
322 |     pub async fn cancel(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/sequential.rs:328:5
    |
328 |     pub async fn reset(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/sequential.rs:334:5
    |
334 |     pub async fn get_shared_data(&self, key: &str) -> Result<Option<serde_json::Value>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/sequential.rs:339:5
    |
339 |     pub async fn set_shared_data(&self, key: String, value: serde_json::Value) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/sequential.rs:439:21
    |
439 |                     format!("Workflow error in step '{}': {}", step_name, message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
439 -                     format!("Workflow error in step '{}': {}", step_name, message)
439 +                     format!("Workflow error in step '{step_name}': {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/sequential.rs:441:21
    |
441 |                     format!("Workflow error: {}", message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
441 -                     format!("Workflow error: {}", message)
441 +                     format!("Workflow error: {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/sequential.rs:446:21
    |
446 |                     format!("Validation error in field '{}': {}", field_name, message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
446 -                     format!("Validation error in field '{}': {}", field_name, message)
446 +                     format!("Validation error in field '{field_name}': {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/sequential.rs:448:21
    |
448 |                     format!("Validation error: {}", message)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
448 -                     format!("Validation error: {}", message)
448 +                     format!("Validation error: {message}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/sequential.rs:451:18
    |
451 |             _ => format!("Sequential workflow error: {}", error),
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
451 -             _ => format!("Sequential workflow error: {}", error),
451 +             _ => format!("Sequential workflow error: {error}"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:525:5
    |
525 |     pub fn new(name: String) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:536:5
    |
536 |     pub fn with_config(mut self, config: WorkflowConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_config(mut self, config: WorkflowConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/sequential.rs:536:5
    |
536 | /     pub fn with_config(mut self, config: WorkflowConfig) -> Self {
537 | |         self.config = config;
538 | |         self
539 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:542:5
    |
542 |     pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/sequential.rs:542:5
    |
542 | /     pub fn with_error_strategy(mut self, strategy: ErrorStrategy) -> Self {
543 | |         self.error_strategy = Some(strategy);
544 | |         self
545 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:548:5
    |
548 |     pub fn add_step(mut self, step: WorkflowStep) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_step(mut self, step: WorkflowStep) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/sequential.rs:548:5
    |
548 | /     pub fn add_step(mut self, step: WorkflowStep) -> Self {
549 | |         self.steps.push(step);
550 | |         self
551 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:554:5
    |
554 |     pub fn add_steps(mut self, steps: Vec<WorkflowStep>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn add_steps(mut self, steps: Vec<WorkflowStep>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/sequential.rs:554:5
    |
554 | /     pub fn add_steps(mut self, steps: Vec<WorkflowStep>) -> Self {
555 | |         self.steps.extend(steps);
556 | |         self
557 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/sequential.rs:559:40
    |
559 |     /// Enable hook integration with a WorkflowExecutor
    |                                        ^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
559 -     /// Enable hook integration with a WorkflowExecutor
559 +     /// Enable hook integration with a `WorkflowExecutor`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:560:5
    |
560 |     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/sequential.rs:560:5
    |
560 | /     pub fn with_hooks(mut self, workflow_executor: Arc<WorkflowExecutor>) -> Self {
561 | |         self.workflow_executor = Some(workflow_executor);
562 | |         self
563 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:566:5
    |
566 |     pub fn build(mut self) -> SequentialWorkflow {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(mut self) -> SequentialWorkflow`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:595:5
    |
595 | /     pub fn success(
596 | |         workflow_name: String,
597 | |         successful_steps: Vec<StepResult>,
598 | |         failed_steps: Vec<StepResult>,
599 | |         duration: Duration,
600 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
595 ~     #[must_use] pub fn success(
596 +         workflow_name: String,
597 +         successful_steps: Vec<StepResult>,
598 +         failed_steps: Vec<StepResult>,
599 +         duration: Duration,
600 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:612:5
    |
612 | /     pub fn failure(
613 | |         workflow_name: String,
614 | |         successful_steps: Vec<StepResult>,
615 | |         failed_steps: Vec<StepResult>,
616 | |         duration: Duration,
617 | |         error_message: String,
618 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
612 ~     #[must_use] pub fn failure(
613 +         workflow_name: String,
614 +         successful_steps: Vec<StepResult>,
615 +         failed_steps: Vec<StepResult>,
616 +         duration: Duration,
617 +         error_message: String,
618 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:630:5
    |
630 | /     pub fn timeout(
631 | |         workflow_name: String,
632 | |         successful_steps: Vec<StepResult>,
633 | |         failed_steps: Vec<StepResult>,
634 | |         duration: Duration,
635 | |     ) -> Self {
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
630 ~     #[must_use] pub fn timeout(
631 +         workflow_name: String,
632 +         successful_steps: Vec<StepResult>,
633 +         failed_steps: Vec<StepResult>,
634 +         duration: Duration,
635 ~     ) -> Self {
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:647:5
    |
647 |     pub fn total_steps(&self) -> usize {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn total_steps(&self) -> usize`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:652:5
    |
652 |     pub fn success_rate(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success_rate(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/sequential.rs:665:5
    |
665 |     pub fn generate_report(&self) -> String {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_report(&self) -> String`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
 --> llmspell-workflows/src/shared_state/builder.rs:9:5
  |
9 |     fn with_state_manager(self, manager: WorkflowStateManager) -> Self;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/shared_state/builder.rs:12:5
   |
12 | /     fn with_state(self) -> Self
13 | |     where
14 | |         Self: Sized,
...  |
17 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/shared_state/shared.rs:19:5
   |
19 |     pub fn new() -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/shared_state/shared.rs:26:5
   |
26 |     pub fn size(&self) -> usize {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn size(&self) -> usize`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/shared_state/shared.rs:31:5
   |
31 |     pub fn workflow_state(&self, workflow_id: String) -> WorkflowStateAccessor {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn workflow_state(&self, workflow_id: String) -> WorkflowStateAccessor`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/shared_state/shared.rs:83:41
   |
83 |             StateScope::Workflow(id) => format!("workflow:{}:", id),
   |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
83 -             StateScope::Workflow(id) => format!("workflow:{}:", id),
83 +             StateScope::Workflow(id) => format!("workflow:{id}:"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/shared_state/shared.rs:88:17
   |
88 |                 format!("step:{}:{}:", workflow_id, step_name)
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
88 -                 format!("step:{}:{}:", workflow_id, step_name)
88 +                 format!("step:{workflow_id}:{step_name}:")
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/shared_state/shared.rs:90:46
   |
90 |             StateScope::Custom(namespace) => format!("{}:", namespace),
   |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
90 -             StateScope::Custom(namespace) => format!("{}:", namespace),
90 +             StateScope::Custom(namespace) => format!("{namespace}:"),
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/shared_state/shared.rs:131:41
    |
131 |             StateScope::Workflow(id) => format!("workflow:{}:", id),
    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
131 -             StateScope::Workflow(id) => format!("workflow:{}:", id),
131 +             StateScope::Workflow(id) => format!("workflow:{id}:"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/shared_state/shared.rs:136:17
    |
136 |                 format!("step:{}:{}:", workflow_id, step_name)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
136 -                 format!("step:{}:{}:", workflow_id, step_name)
136 +                 format!("step:{workflow_id}:{step_name}:")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/shared_state/shared.rs:138:46
    |
138 |             StateScope::Custom(namespace) => format!("{}:", namespace),
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
138 -             StateScope::Custom(namespace) => format!("{}:", namespace),
138 +             StateScope::Custom(namespace) => format!("{namespace}:"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/shared_state/shared.rs:165:5
    |
165 |     pub fn get(&self, key: &str) -> Option<serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get(&self, key: &str) -> Option<serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/shared_state/shared.rs:171:9
    |
171 |         self.manager.set_state(&self.default_scope, key, value)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `self.manager.set_state(&self.default_scope, key, value);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/shared_state/shared.rs:176:9
    |
176 |         self.manager.delete_state(&self.default_scope, key)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `self.manager.delete_state(&self.default_scope, key);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/shared_state/shared.rs:180:5
    |
180 |     pub fn global(&self) -> GlobalStateAccess {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn global(&self) -> GlobalStateAccess`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-workflows/src/shared_state/shared.rs:187:5
    |
187 |     pub fn step(&self, step_name: String) -> StepStateAccess {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-workflows/src/shared_state/shared.rs:190:18
    |
190 |             _ => panic!("WorkflowStateAccessor must have Workflow scope"),
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/shared_state/shared.rs:187:5
    |
187 |     pub fn step(&self, step_name: String) -> StepStateAccess {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn step(&self, step_name: String) -> StepStateAccess`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/shared_state/shared.rs:210:5
    |
210 |     pub fn get(&self, key: &str) -> Option<serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get(&self, key: &str) -> Option<serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/shared_state/shared.rs:215:9
    |
215 |         self.manager.set_state(&StateScope::Global, key, value)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `self.manager.set_state(&StateScope::Global, key, value);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/shared_state/shared.rs:219:9
    |
219 |         self.manager.delete_state(&StateScope::Global, key)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `self.manager.delete_state(&StateScope::Global, key);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/shared_state/shared.rs:231:5
    |
231 |     pub fn get(&self, key: &str) -> Option<serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get(&self, key: &str) -> Option<serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/shared_state/shared.rs:236:9
    |
236 |         self.manager.set_state(&self.scope, key, value)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `self.manager.set_state(&self.scope, key, value);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-workflows/src/shared_state/shared.rs:240:9
    |
240 |         self.manager.delete_state(&self.scope, key)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `self.manager.delete_state(&self.scope, key);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/shared_state/types.rs:28:5
   |
28 |     pub fn scoped_key(&self, key: &str) -> String {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn scoped_key(&self, key: &str) -> String`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/shared_state/types.rs:31:41
   |
31 |             StateScope::Workflow(id) => format!("workflow:{}:{}", id, key),
   |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
31 -             StateScope::Workflow(id) => format!("workflow:{}:{}", id, key),
31 +             StateScope::Workflow(id) => format!("workflow:{id}:{key}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/shared_state/types.rs:36:17
   |
36 |                 format!("step:{}:{}:{}", workflow_id, step_name, key)
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
36 -                 format!("step:{}:{}:{}", workflow_id, step_name, key)
36 +                 format!("step:{workflow_id}:{step_name}:{key}")
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/shared_state/types.rs:38:46
   |
38 |             StateScope::Custom(namespace) => format!("{}:{}", namespace, key),
   |                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
38 -             StateScope::Custom(namespace) => format!("{}:{}", namespace, key),
38 +             StateScope::Custom(namespace) => format!("{namespace}:{key}"),
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/shared_state/types.rs:61:5
   |
61 |     pub fn new(value: serde_json::Value) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(value: serde_json::Value) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-workflows/src/state.rs:23:46
   |
23 |     /// Component ID for hooks (using hook's ComponentId type)
   |                                              ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
23 -     /// Component ID for hooks (using hook's ComponentId type)
23 +     /// Component ID for hooks (using hook's `ComponentId` type)
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/state.rs:30:5
   |
30 |     pub fn new(config: WorkflowConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: WorkflowConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/state.rs:52:5
   |
52 | /     pub fn new_with_hooks(
53 | |         config: WorkflowConfig,
54 | |         workflow_executor: Arc<WorkflowExecutor>,
55 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
52 ~     #[must_use] pub fn new_with_hooks(
53 +         config: WorkflowConfig,
54 +         workflow_executor: Arc<WorkflowExecutor>,
55 ~     ) -> Self {
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-workflows/src/state.rs:86:5
   |
86 |     pub async fn start_execution(&self) -> Result<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-workflows/src/state.rs:91:26
   |
91 |                 message: format!("Failed to acquire state lock: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
91 -                 message: format!("Failed to acquire state lock: {}", e),
91 +                 message: format!("Failed to acquire state lock: {e}"),
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:103:30
    |
103 |                     message: format!("Failed to acquire status lock: {}", e),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
103 -                     message: format!("Failed to acquire status lock: {}", e),
103 +                     message: format!("Failed to acquire status lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:114:5
    |
114 |     pub async fn complete_execution(&self, success: bool) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:121:26
    |
121 |                 message: format!("Failed to acquire status lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
121 -                 message: format!("Failed to acquire status lock: {}", e),
121 +                 message: format!("Failed to acquire status lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:136:5
    |
136 |     pub async fn cancel_execution(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:143:26
    |
143 |                 message: format!("Failed to acquire status lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
143 -                 message: format!("Failed to acquire status lock: {}", e),
143 +                 message: format!("Failed to acquire status lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:154:5
    |
154 |     pub async fn get_status(&self) -> Result<WorkflowStatus> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:159:26
    |
159 |                 message: format!("Failed to acquire status lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
159 -                 message: format!("Failed to acquire status lock: {}", e),
159 +                 message: format!("Failed to acquire status lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:168:5
    |
168 |     pub async fn advance_step(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:170:22
    |
170 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
170 -             message: format!("Failed to acquire state lock: {}", e),
170 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:182:5
    |
182 |     pub async fn get_current_step(&self) -> Result<usize> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:184:22
    |
184 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
184 -             message: format!("Failed to acquire state lock: {}", e),
184 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:193:5
    |
193 |     pub async fn set_shared_data(&self, key: String, value: Value) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:197:26
    |
197 |                 message: format!("Failed to acquire state lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
197 -                 message: format!("Failed to acquire state lock: {}", e),
197 +                 message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:232:5
    |
232 |     pub async fn get_shared_data(&self, key: &str) -> Result<Option<Value>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:234:22
    |
234 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
234 -             message: format!("Failed to acquire state lock: {}", e),
234 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:243:5
    |
243 |     pub async fn get_all_shared_data(&self) -> Result<HashMap<String, Value>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:245:22
    |
245 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
245 -             message: format!("Failed to acquire state lock: {}", e),
245 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:254:5
    |
254 |     pub async fn set_step_output(&self, step_id: ComponentId, output: Value) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:256:22
    |
256 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
256 -             message: format!("Failed to acquire state lock: {}", e),
256 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:268:5
    |
268 |     pub async fn get_step_output(&self, step_id: ComponentId) -> Result<Option<Value>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:270:22
    |
270 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
270 -             message: format!("Failed to acquire state lock: {}", e),
270 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:279:5
    |
279 |     pub async fn record_step_result(&self, result: StepResult) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:292:34
    |
292 |                         message: format!("Failed to acquire history lock: {}", e),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
292 -                         message: format!("Failed to acquire history lock: {}", e),
292 +                         message: format!("Failed to acquire history lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:309:5
    |
309 |     pub async fn get_execution_history(&self) -> Result<Vec<StepResult>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:314:26
    |
314 |                 message: format!("Failed to acquire history lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
314 -                 message: format!("Failed to acquire history lock: {}", e),
314 +                 message: format!("Failed to acquire history lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:323:5
    |
323 |     pub async fn get_execution_stats(&self) -> Result<ExecutionStats> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:328:26
    |
328 |                 message: format!("Failed to acquire history lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
328 -                 message: format!("Failed to acquire history lock: {}", e),
328 +                 message: format!("Failed to acquire history lock: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:334:22
    |
334 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
334 -             message: format!("Failed to acquire state lock: {}", e),
334 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:371:5
    |
371 |     pub async fn check_execution_timeout(&self) -> Result<bool> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:374:26
    |
374 |                 message: format!("Failed to acquire state lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
374 -                 message: format!("Failed to acquire state lock: {}", e),
374 +                 message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:394:5
    |
394 |     pub async fn reset(&self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:399:26
    |
399 |                 message: format!("Failed to acquire state lock: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
399 -                 message: format!("Failed to acquire state lock: {}", e),
399 +                 message: format!("Failed to acquire state lock: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:411:34
    |
411 |                         message: format!("Failed to acquire history lock: {}", e),
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
411 -                         message: format!("Failed to acquire history lock: {}", e),
411 +                         message: format!("Failed to acquire history lock: {e}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:423:30
    |
423 |                     message: format!("Failed to acquire status lock: {}", e),
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
423 -                     message: format!("Failed to acquire status lock: {}", e),
423 +                     message: format!("Failed to acquire status lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:434:5
    |
434 |     pub async fn get_state_snapshot(&self) -> Result<WorkflowState> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:436:22
    |
436 |             message: format!("Failed to acquire state lock: {}", e),
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
436 -             message: format!("Failed to acquire state lock: {}", e),
436 +             message: format!("Failed to acquire state lock: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:445:5
    |
445 | /     pub async fn track_shared_data_access(
446 | |         &self,
447 | |         key: Option<&str>,
448 | |         access_type: &str,
449 | |     ) -> Result<()> {
    | |___________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: manual `Debug` impl does not include all fields
   --> llmspell-workflows/src/state.rs:488:1
    |
488 | / impl std::fmt::Debug for StateManager {
489 | |     fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
490 | |         f.debug_struct("StateManager")
491 | |             .field("config", &self.config)
...   |
498 | | }
    | |_^
    |
note: this field is unused
   --> llmspell-workflows/src/state.rs:17:5
    |
17  |     state: Arc<RwLock<WorkflowState>>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
note: this field is unused
   --> llmspell-workflows/src/state.rs:19:5
    |
19  |     execution_history: Arc<RwLock<Vec<StepResult>>>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: consider including all fields in this `Debug` impl
    = help: consider calling `.finish_non_exhaustive()` if you intend to ignore fields
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_fields_in_debug
    = note: `-W clippy::missing-fields-in-debug` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_fields_in_debug)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/state.rs:502:5
    |
502 |     pub fn success_rate(&self) -> f64 {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn success_rate(&self) -> f64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/state.rs:515:5
    |
515 |     pub fn current_execution_time(&self) -> Option<Duration> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn current_execution_time(&self) -> Option<Duration>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/state.rs:520:5
    |
520 |     pub fn generate_report(&self) -> String {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn generate_report(&self) -> String`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/state.rs:791:5
    |
791 |     pub fn new(workflow_id: String, config: WorkflowConfig, metadata: ComponentMetadata) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(workflow_id: String, config: WorkflowConfig, metadata: ComponentMetadata) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:839:5
    |
839 |     pub async fn load_state(&mut self) -> Result<bool> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:860:26
    |
860 |                 message: format!("Failed to load workflow state: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
860 -                 message: format!("Failed to load workflow state: {}", e),
860 +                 message: format!("Failed to load workflow state: {e}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/state.rs:867:5
    |
867 |     pub async fn save_state(&mut self) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/state.rs:887:26
    |
887 |                 message: format!("Failed to save workflow state: {}", e),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
887 -                 message: format!("Failed to save workflow state: {}", e),
887 +                 message: format!("Failed to save workflow state: {e}"),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/state.rs:897:5
    |
897 |     pub fn memory_state_manager(&self) -> &StateManager {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn memory_state_manager(&self) -> &StateManager`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/step_executor.rs:23:5
   |
23 |     pub fn new(config: WorkflowConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: WorkflowConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/step_executor.rs:31:5
   |
31 | /     pub fn new_with_hooks(
32 | |         config: WorkflowConfig,
33 | |         workflow_executor: Arc<WorkflowExecutor>,
34 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
31 ~     #[must_use] pub fn new_with_hooks(
32 +         config: WorkflowConfig,
33 +         workflow_executor: Arc<WorkflowExecutor>,
34 ~     ) -> Self {
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-workflows/src/step_executor.rs:42:5
   |
42 | /     pub async fn execute_step(
43 | |         &self,
44 | |         step: &WorkflowStep,
45 | |         context: StepExecutionContext,
46 | |     ) -> Result<StepResult> {
   | |___________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-workflows/src/step_executor.rs:52:5
   |
52 | /     pub async fn execute_step_with_metadata(
53 | |         &self,
54 | |         step: &WorkflowStep,
55 | |         context: StepExecutionContext,
56 | |         workflow_metadata: Option<ComponentMetadata>,
57 | |         workflow_type: Option<String>,
58 | |     ) -> Result<StepResult> {
   | |___________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:135:21
    |
135 |                     format!("Step timed out after {:?}", step_timeout),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
135 -                     format!("Step timed out after {:?}", step_timeout),
135 +                     format!("Step timed out after {step_timeout:?}"),
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/step_executor.rs:162:5
    |
162 | /     pub async fn execute_step_with_retry(
163 | |         &self,
164 | |         step: &WorkflowStep,
165 | |         context: StepExecutionContext,
166 | |         error_strategy: &ErrorStrategy,
167 | |     ) -> Result<StepResult> {
    | |___________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-workflows/src/step_executor.rs:173:5
    |
173 | /     pub async fn execute_step_with_retry_and_metadata(
174 | |         &self,
175 | |         step: &WorkflowStep,
176 | |         mut context: StepExecutionContext,
...   |
179 | |         workflow_type: Option<String>,
180 | |     ) -> Result<StepResult> {
    | |___________________________^
    |
note: first possible panic found here
   --> llmspell-workflows/src/step_executor.rs:230:32
    |
230 |         let mut final_result = last_result.unwrap();
    |                                ^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-workflows/src/step_executor.rs:173:5
    |
173 | /     pub async fn execute_step_with_retry_and_metadata(
174 | |         &self,
175 | |         step: &WorkflowStep,
176 | |         mut context: StepExecutionContext,
...   |
179 | |         workflow_type: Option<String>,
180 | |     ) -> Result<StepResult> {
    | |___________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:287:17
    |
287 |                 format!("Calculator result for '{}': 42", expression)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
287 -                 format!("Calculator result for '{}': 42", expression)
287 +                 format!("Calculator result for '{expression}': 42")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:294:17
    |
294 |                 format!("File operation '{}' completed", operation)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
294 -                 format!("File operation '{}' completed", operation)
294 +                 format!("File operation '{operation}' completed")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:299:17
    |
299 |                 format!("JSON processed: {}", input)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
299 -                 format!("JSON processed: {}", input)
299 +                 format!("JSON processed: {input}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:302:17
    |
302 | /                 format!(
303 | |                     "Tool '{}' executed with parameters: {}",
304 | |                     tool_name, parameters
305 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:336:22
    |
336 |         let output = format!("Agent {:?} processed: {}", agent_id, input);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
336 -         let output = format!("Agent {:?} processed: {}", agent_id, input);
336 +         let output = format!("Agent {agent_id:?} processed: {input}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:365:17
    |
365 |                 format!("Data transformed with parameters: {}", parameters)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
365 -                 format!("Data transformed with parameters: {}", parameters)
365 +                 format!("Data transformed with parameters: {parameters}")
    |

warning: redundant closure
   --> llmspell-workflows/src/step_executor.rs:376:65
    |
376 |                 if let Some(ms) = parameters.get("ms").and_then(|v| v.as_u64()) {
    |                                                                 ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:383:17
    |
383 |                 format!("Function '{}' completed successfully", function_name)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
383 -                 format!("Function '{}' completed successfully", function_name)
383 +                 format!("Function '{function_name}' completed successfully")
    |

warning: redundant closure
   --> llmspell-workflows/src/step_executor.rs:387:77
    |
387 |                 if let Some(delay_ms) = parameters.get("delay_ms").and_then(|v| v.as_u64()) {
    |                                                                             ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:390:17
    |
390 |                 format!("Operation '{}' completed", function_name)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
390 -                 format!("Operation '{}' completed", function_name)
390 +                 format!("Operation '{function_name}' completed")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:394:17
    |
394 |                 format!("Data processing function '{}' completed", function_name)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
394 -                 format!("Data processing function '{}' completed", function_name)
394 +                 format!("Data processing function '{function_name}' completed")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:398:17
    |
398 |                 format!("Error handling function '{}' executed", function_name)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
398 -                 format!("Error handling function '{}' executed", function_name)
398 +                 format!("Error handling function '{function_name}' executed")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-workflows/src/step_executor.rs:405:17
    |
405 | /                 format!(
406 | |                     "Custom function '{}' executed with parameters: {}",
407 | |                     function_name, parameters
408 | |                 )
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/step_executor.rs:418:18
    |
418 |     /// Create a StepContext for hooks
    |                  ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
418 -     /// Create a StepContext for hooks
418 +     /// Create a `StepContext` for hooks
    |

warning: unused `self` argument
   --> llmspell-workflows/src/step_executor.rs:420:9
    |
420 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/step_executor.rs:441:18
    |
441 |     /// Create a StepContext with result for post-execution hooks
    |                  ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
441 -     /// Create a StepContext with result for post-execution hooks
441 +     /// Create a `StepContext` with result for post-execution hooks
    |

warning: unused `self` argument
   --> llmspell-workflows/src/step_executor.rs:443:9
    |
443 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/traits.rs:22:5
   |
22 |     pub fn new(name: String, step_type: StepType) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: String, step_type: StepType) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/traits.rs:32:5
   |
32 |     pub fn with_timeout(mut self, timeout: Duration) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_timeout(mut self, timeout: Duration) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/traits.rs:32:5
   |
32 | /     pub fn with_timeout(mut self, timeout: Duration) -> Self {
33 | |         self.timeout = Some(timeout);
34 | |         self
35 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/traits.rs:37:5
   |
37 |     pub fn with_retry(mut self, attempts: u32) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_retry(mut self, attempts: u32) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/traits.rs:37:5
   |
37 | /     pub fn with_retry(mut self, attempts: u32) -> Self {
38 | |         self.retry_attempts = attempts;
39 | |         self
40 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/traits.rs:76:5
   |
76 | /     pub fn success(
77 | |         step_id: ComponentId,
78 | |         step_name: String,
79 | |         output: String,
80 | |         duration: Duration,
81 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
76 ~     #[must_use] pub fn success(
77 +         step_id: ComponentId,
78 +         step_name: String,
79 +         output: String,
80 +         duration: Duration,
81 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/traits.rs:93:5
   |
93 | /     pub fn failure(
94 | |         step_id: ComponentId,
95 | |         step_name: String,
96 | |         error: String,
97 | |         duration: Duration,
98 | |         retry_count: u32,
99 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
93 ~     #[must_use] pub fn failure(
94 +         step_id: ComponentId,
95 +         step_name: String,
96 +         error: String,
97 +         duration: Duration,
98 +         retry_count: u32,
99 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/types.rs:22:5
   |
22 |     pub fn new(input: serde_json::Value) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(input: serde_json::Value) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/types.rs:30:5
   |
30 |     pub fn with_context(mut self, key: String, value: serde_json::Value) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_context(mut self, key: String, value: serde_json::Value) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/types.rs:30:5
   |
30 | /     pub fn with_context(mut self, key: String, value: serde_json::Value) -> Self {
31 | |         self.context.insert(key, value);
32 | |         self
33 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/types.rs:35:5
   |
35 |     pub fn with_timeout(mut self, timeout: Duration) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_timeout(mut self, timeout: Duration) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-workflows/src/types.rs:35:5
   |
35 | /     pub fn with_timeout(mut self, timeout: Duration) -> Self {
36 | |         self.timeout = Some(timeout);
37 | |         self
38 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/types.rs:61:5
   |
61 | /     pub fn success(
62 | |         output: serde_json::Value,
63 | |         duration: Duration,
64 | |         steps_executed: usize,
65 | |         final_context: HashMap<String, serde_json::Value>,
66 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
61 ~     #[must_use] pub fn success(
62 +         output: serde_json::Value,
63 +         duration: Duration,
64 +         steps_executed: usize,
65 +         final_context: HashMap<String, serde_json::Value>,
66 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-workflows/src/types.rs:78:5
   |
78 | /     pub fn failure(
79 | |         error: String,
80 | |         duration: Duration,
81 | |         steps_executed: usize,
82 | |         steps_failed: usize,
83 | |         final_context: HashMap<String, serde_json::Value>,
84 | |     ) -> Self {
   | |_____________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
78 ~     #[must_use] pub fn failure(
79 +         error: String,
80 +         duration: Duration,
81 +         steps_executed: usize,
82 +         steps_failed: usize,
83 +         final_context: HashMap<String, serde_json::Value>,
84 ~     ) -> Self {
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:117:5
    |
117 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:143:5
    |
143 |     pub fn get_step_output(&self, step_id: ComponentId) -> Option<&serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_step_output(&self, step_id: ComponentId) -> Option<&serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:152:5
    |
152 |     pub fn get_shared_data(&self, key: &str) -> Option<&serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_shared_data(&self, key: &str) -> Option<&serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:156:5
    |
156 |     pub fn execution_duration(&self) -> Option<Duration> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn execution_duration(&self) -> Option<Duration>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/types.rs:203:34
    |
203 |     /// Create a new builder for WorkflowConfig
    |                                  ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
203 -     /// Create a new builder for WorkflowConfig
203 +     /// Create a new builder for `WorkflowConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:204:5
    |
204 |     pub fn builder() -> WorkflowConfigBuilder {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn builder() -> WorkflowConfigBuilder`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:209:5
    |
209 |     pub fn fast() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn fast() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:222:5
    |
222 |     pub fn robust() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn robust() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/types.rs:252:17
    |
252 | /// Builder for WorkflowConfig
    |                 ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
252 - /// Builder for WorkflowConfig
252 + /// Builder for `WorkflowConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:260:5
    |
260 |     pub fn new() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:267:5
    |
267 |     pub fn max_execution_time(mut self, duration: Option<Duration>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn max_execution_time(mut self, duration: Option<Duration>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:267:5
    |
267 | /     pub fn max_execution_time(mut self, duration: Option<Duration>) -> Self {
268 | |         self.config.max_execution_time = duration;
269 | |         self
270 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:273:5
    |
273 |     pub fn default_step_timeout(mut self, duration: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn default_step_timeout(mut self, duration: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:273:5
    |
273 | /     pub fn default_step_timeout(mut self, duration: Duration) -> Self {
274 | |         self.config.default_step_timeout = duration;
275 | |         self
276 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:279:5
    |
279 |     pub fn max_retry_attempts(mut self, attempts: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn max_retry_attempts(mut self, attempts: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:279:5
    |
279 | /     pub fn max_retry_attempts(mut self, attempts: u32) -> Self {
280 | |         self.config.max_retry_attempts = attempts;
281 | |         self
282 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:285:5
    |
285 |     pub fn retry_delay_ms(mut self, delay_ms: u64) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn retry_delay_ms(mut self, delay_ms: u64) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:285:5
    |
285 | /     pub fn retry_delay_ms(mut self, delay_ms: u64) -> Self {
286 | |         self.config.retry_delay_ms = delay_ms;
287 | |         self
288 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:291:5
    |
291 |     pub fn exponential_backoff(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn exponential_backoff(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:291:5
    |
291 | /     pub fn exponential_backoff(mut self, enabled: bool) -> Self {
292 | |         self.config.exponential_backoff = enabled;
293 | |         self
294 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:297:5
    |
297 |     pub fn continue_on_error(mut self, enabled: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn continue_on_error(mut self, enabled: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:297:5
    |
297 | /     pub fn continue_on_error(mut self, enabled: bool) -> Self {
298 | |         self.config.continue_on_error = enabled;
299 | |         self
300 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:303:5
    |
303 |     pub fn default_error_strategy(mut self, strategy: crate::traits::ErrorStrategy) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn default_error_strategy(mut self, strategy: crate::traits::ErrorStrategy) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:303:5
    |
303 | /     pub fn default_error_strategy(mut self, strategy: crate::traits::ErrorStrategy) -> Self {
304 | |         self.config.default_error_strategy = strategy;
305 | |         self
306 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:309:5
    |
309 |     pub fn retry_strategy(mut self, max_attempts: u32, delay_ms: u64, exponential: bool) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn retry_strategy(mut self, max_attempts: u32, delay_ms: u64, exponential: bool) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:309:5
    |
309 | /     pub fn retry_strategy(mut self, max_attempts: u32, delay_ms: u64, exponential: bool) -> Self {
310 | |         self.config.max_retry_attempts = max_attempts;
311 | |         self.config.retry_delay_ms = delay_ms;
312 | |         self.config.exponential_backoff = exponential;
313 | |         self
314 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/types.rs:316:38
    |
316 |     /// Convenience method alias for default_step_timeout
    |                                      ^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
316 -     /// Convenience method alias for default_step_timeout
316 +     /// Convenience method alias for `default_step_timeout`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:317:5
    |
317 |     pub fn default_timeout(self, duration: Duration) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn default_timeout(self, duration: Duration) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:317:5
    |
317 | /     pub fn default_timeout(self, duration: Duration) -> Self {
318 | |         self.default_step_timeout(duration)
319 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
   --> llmspell-workflows/src/types.rs:321:25
    |
321 |     /// Build the final WorkflowConfig
    |                         ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
321 -     /// Build the final WorkflowConfig
321 +     /// Build the final `WorkflowConfig`
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:322:5
    |
322 |     pub fn build(self) -> WorkflowConfig {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn build(self) -> WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:349:5
    |
349 |     pub fn new(workflow_state: WorkflowState, timeout: Option<Duration>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(workflow_state: WorkflowState, timeout: Option<Duration>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:360:5
    |
360 |     pub fn with_state_accessor(mut self, accessor: WorkflowStateAccessor) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_state_accessor(mut self, accessor: WorkflowStateAccessor) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:360:5
    |
360 | /     pub fn with_state_accessor(mut self, accessor: WorkflowStateAccessor) -> Self {
361 | |         self.state_accessor = Some(accessor);
362 | |         self
363 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-workflows/src/types.rs:365:5
    |
365 |     pub fn with_retry(mut self, attempt: u32, max_attempts: u32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_retry(mut self, attempt: u32, max_attempts: u32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-workflows/src/types.rs:365:5
    |
365 | /     pub fn with_retry(mut self, attempt: u32, max_attempts: u32) -> Self {
366 | |         self.retry_attempt = attempt;
367 | |         self.is_final_retry = attempt >= max_attempts;
368 | |         self
369 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/conditions.rs:312:5
    |
312 | /     async fn evaluate_shared_data_equals(
313 | |         &self,
314 | |         key: &str,
315 | |         expected_value: &serde_json::Value,
...   |
337 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/conditions.rs:340:5
    |
340 | /     async fn evaluate_shared_data_exists(
341 | |         &self,
342 | |         key: &str,
343 | |         context: &ConditionEvaluationContext,
...   |
356 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/conditions.rs:359:5
    |
359 | /     async fn evaluate_step_result_equals(
360 | |         &self,
361 | |         step_id: ComponentId,
362 | |         expected_output: &str,
...   |
383 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/conditions.rs:386:5
    |
386 | /     async fn evaluate_step_succeeded(
387 | |         &self,
388 | |         step_id: ComponentId,
389 | |         context: &ConditionEvaluationContext,
...   |
409 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/conditions.rs:412:5
    |
412 | /     async fn evaluate_step_failed(
413 | |         &self,
414 | |         step_id: ComponentId,
415 | |         context: &ConditionEvaluationContext,
...   |
435 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/conditions.rs:612:5
    |
612 | /     async fn parse_shared_data_expression(
613 | |         &self,
614 | |         expr: &str,
615 | |         context: &ConditionEvaluationContext,
...   |
661 | |         None
662 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/conditions.rs:665:5
    |
665 | /     async fn parse_step_result_expression(
666 | |         &self,
667 | |         expr: &str,
668 | |         context: &ConditionEvaluationContext,
...   |
708 | |         None
709 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
  --> llmspell-workflows/src/error_handling.rs:22:5
   |
22 | /     pub async fn handle_step_failure(
23 | |         &self,
24 | |         step_result: &StepResult,
25 | |         strategy: Option<&ErrorStrategy>,
...  |
70 | |     }
   | |_____^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/error_handling.rs:73:5
    |
73  | /     pub async fn analyze_workflow_error(
74  | |         &self,
75  | |         error: &LLMSpellError,
76  | |         completed_steps: &[StepResult],
...   |
115 | |         })
116 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
  --> llmspell-workflows/src/hooks/lifecycle.rs:73:5
   |
73 | /     pub async fn execute(
74 | |         &self,
75 | |         point: &HookPoint,
76 | |         _context: &HookContext,
...  |
92 | |         Ok(HookResult::default())
93 | |     }
   | |_____^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/loop.rs:397:5
    |
397 | /     async fn evaluate_condition(
398 | |         &self,
399 | |         expression: &str,
400 | |         state: &WorkflowState,
...   |
431 | |         Ok(false)
432 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/loop.rs:462:5
    |
462 | /     async fn generate_iterator_values(&self) -> Result<Vec<(usize, Value)>> {
463 | |         match &self.config.iterator {
464 | |             LoopIterator::Collection { values } => Ok(values
465 | |                 .iter()
...   |
497 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:86:5
    |
86  | /     pub async fn start_execution(&self) -> Result<()> {
87  | |         debug!("Starting workflow execution");
...   |
110 | |         Ok(())
111 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:114:5
    |
114 | /     pub async fn complete_execution(&self, success: bool) -> Result<()> {
115 | |         debug!("Completing workflow execution with success: {}", success);
116 | |
117 | |         let mut status = self
...   |
132 | |         Ok(())
133 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:136:5
    |
136 | /     pub async fn cancel_execution(&self) -> Result<()> {
137 | |         debug!("Cancelling workflow execution");
138 | |
139 | |         let mut status = self
...   |
150 | |         Ok(())
151 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:154:5
    |
154 | /     pub async fn get_status(&self) -> Result<WorkflowStatus> {
155 | |         let status = self
156 | |             .workflow_status
157 | |             .read()
...   |
164 | |         Ok(status.clone())
165 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:168:5
    |
168 | /     pub async fn advance_step(&self) -> Result<()> {
169 | |         let mut state = self.state.write().map_err(|e| LLMSpellError::Workflow {
170 | |             message: format!("Failed to acquire state lock: {}", e),
171 | |             step: None,
...   |
178 | |         Ok(())
179 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:182:5
    |
182 | /     pub async fn get_current_step(&self) -> Result<usize> {
183 | |         let state = self.state.read().map_err(|e| LLMSpellError::Workflow {
184 | |             message: format!("Failed to acquire state lock: {}", e),
185 | |             step: None,
...   |
189 | |         Ok(state.current_step)
190 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:232:5
    |
232 | /     pub async fn get_shared_data(&self, key: &str) -> Result<Option<Value>> {
233 | |         let state = self.state.read().map_err(|e| LLMSpellError::Workflow {
234 | |             message: format!("Failed to acquire state lock: {}", e),
235 | |             step: None,
...   |
239 | |         Ok(state.get_shared_data(key).cloned())
240 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:243:5
    |
243 | /     pub async fn get_all_shared_data(&self) -> Result<HashMap<String, Value>> {
244 | |         let state = self.state.read().map_err(|e| LLMSpellError::Workflow {
245 | |             message: format!("Failed to acquire state lock: {}", e),
246 | |             step: None,
...   |
250 | |         Ok(state.shared_data.clone())
251 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:254:5
    |
254 | /     pub async fn set_step_output(&self, step_id: ComponentId, output: Value) -> Result<()> {
255 | |         let mut state = self.state.write().map_err(|e| LLMSpellError::Workflow {
256 | |             message: format!("Failed to acquire state lock: {}", e),
257 | |             step: None,
...   |
264 | |         Ok(())
265 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:268:5
    |
268 | /     pub async fn get_step_output(&self, step_id: ComponentId) -> Result<Option<Value>> {
269 | |         let state = self.state.read().map_err(|e| LLMSpellError::Workflow {
270 | |             message: format!("Failed to acquire state lock: {}", e),
271 | |             step: None,
...   |
275 | |         Ok(state.get_step_output(step_id).cloned())
276 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:309:5
    |
309 | /     pub async fn get_execution_history(&self) -> Result<Vec<StepResult>> {
310 | |         let history = self
311 | |             .execution_history
312 | |             .read()
...   |
319 | |         Ok(history.clone())
320 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:323:5
    |
323 | /     pub async fn get_execution_stats(&self) -> Result<ExecutionStats> {
324 | |         let history = self
325 | |             .execution_history
326 | |             .read()
...   |
367 | |         })
368 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:371:5
    |
371 | /     pub async fn check_execution_timeout(&self) -> Result<bool> {
372 | |         if let Some(max_time) = self.config.max_execution_time {
373 | |             let state = self.state.read().map_err(|e| LLMSpellError::Workflow {
374 | |                 message: format!("Failed to acquire state lock: {}", e),
...   |
390 | |         Ok(false)
391 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:394:5
    |
394 | /     pub async fn reset(&self) -> Result<()> {
395 | |         debug!("Resetting workflow state");
...   |
430 | |         Ok(())
431 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-workflows/src/state.rs:434:5
    |
434 | /     pub async fn get_state_snapshot(&self) -> Result<WorkflowState> {
435 | |         let state = self.state.read().map_err(|e| LLMSpellError::Workflow {
436 | |             message: format!("Failed to acquire state lock: {}", e),
437 | |             step: None,
...   |
441 | |         Ok(state.clone())
442 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: `llmspell-providers` (lib) generated 65 warnings (run `cargo clippy --fix --lib -p llmspell-providers` to apply 45 suggestions)
warning: `llmspell-workflows` (lib) generated 569 warnings (run `cargo clippy --fix --lib -p llmspell-workflows` to apply 370 suggestions)
warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/communication/database_connector.rs:392:37
    |
392 | / ...                   if let Ok(v) = row.try_get::<String, _>(i) {
393 | | ...                       serde_json::Value::String(v)
394 | | ...                   } else if let Ok(v) = row.try_get::<i64, _>(i) {
395 | | ...                       serde_json::Value::Number(v.into())
...   |
404 | | ...                       serde_json::Value::Null
405 | | ...                   };
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
    = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`
help: try
    |
392 ~                                     row.try_get::<String, _>(i).map_or_else(|_| if let Ok(v) = row.try_get::<i64, _>(i) {
393 +                                         serde_json::Value::Number(v.into())
394 +                                     } else if let Ok(v) = row.try_get::<f64, _>(i) {
395 +                                         serde_json::Value::Number(
396 +                                             serde_json::Number::from_f64(v)
397 +                                                 .unwrap_or(serde_json::Number::from(0)),
398 +                                         )
399 +                                     } else if let Ok(v) = row.try_get::<bool, _>(i) {
400 +                                         serde_json::Value::Bool(v)
401 +                                     } else {
402 +                                         serde_json::Value::Null
403 ~                                     }, |v| serde_json::Value::String(v));
    |

warning: function call inside of `unwrap_or`
   --> llmspell-tools/src/communication/database_connector.rs:399:50
    |
399 | ...                   .unwrap_or(serde_json::Number::from(0)),
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| serde_json::Number::from(0))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call
    = note: `-W clippy::or-fun-call` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::or_fun_call)]`

warning: unused `self` argument
    --> llmspell-tools/src/data/csv_analyzer.rs:1112:9
     |
1112 |         &self,
     |         ^^^^^
     |
     = help: consider refactoring to an associated function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
     = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: this function's return value is unnecessarily wrapped by `Result`
    --> llmspell-tools/src/data/csv_analyzer.rs:1111:5
     |
1111 | /     fn get_column_value(
1112 | |         &self,
1113 | |         name: &str,
1114 | |         headers: &csv::StringRecord,
...    |
1125 | |         Ok(name.to_string())
1126 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
     = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove `Result` from the return type...
     |
1116 -     ) -> Result<String> {
1116 +     ) -> std::string::String {
     |
help: ...and then change returning expressions
     |
1120 ~                 return record.get(i).unwrap_or("").to_string();
1121 |             }
 ...
1124 |         // If not a column name, return as literal
1125 ~         name.to_string()
     |

warning: unused `self` argument
   --> llmspell-tools/src/data/json_processor.rs:313:9
    |
313 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: the function has a cognitive complexity of (39/25)
   --> llmspell-tools/src/fs/archive_handler.rs:286:8
    |
286 |     fn extract_zip(
    |        ^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity
    = note: `-W clippy::cognitive-complexity` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::cognitive_complexity)]`

warning: the function has a cognitive complexity of (35/25)
   --> llmspell-tools/src/fs/archive_handler.rs:378:8
    |
378 |     fn extract_tar(
    |        ^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: the function has a cognitive complexity of (35/25)
   --> llmspell-tools/src/fs/archive_handler.rs:446:8
    |
446 |     fn extract_tar_gz(
    |        ^^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: this function has too many lines (136/100)
    --> llmspell-tools/src/fs/archive_handler.rs:917:5
     |
917  | /     async fn list_archive(&self, params: &Value) -> Result<Value> {
918  | |         let archive_path = params.get("path").and_then(|v| v.as_str()).ok_or_else(|| {
919  | |             LLMSpellError::Validation {
920  | |                 message: "Missing 'path' parameter".to_string(),
...    |
1063 | |             .build())
1064 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
     = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: this function has too many lines (160/100)
   --> llmspell-tools/src/fs/file_converter.rs:263:5
    |
263 | /     async fn execute(
264 | |         &self,
265 | |         input: AgentInput,
266 | |         _context: ExecutionContext,
...   |
461 | |         Ok(AgentOutput::text(output_text).with_metadata(metadata))
462 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (192/100)
   --> llmspell-tools/src/fs/file_operations.rs:607:5
    |
607 | /     async fn execute(&self, input: AgentInput, context: ExecutionContext) -> Result<AgentOutput> {
608 | |         // Get parameters using shared utility
609 | |         let params = extract_parameters(&input)?;
610 | |         let parameters = self.parse_parameters(params)?;
...   |
807 | |         Ok(AgentOutput::text(output_text).with_metadata(metadata))
808 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-tools/src/fs/file_watcher.rs:183:13
    |
183 | /             notify::EventKind::Other => FileEventType::Other,
184 | |             _ => FileEventType::Other,
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-tools/src/fs/file_watcher.rs:184:13
    |
184 |             _ => FileEventType::Other,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: this function has too many lines (113/100)
   --> llmspell-tools/src/lifecycle/hook_integration.rs:286:5
    |
286 | /     pub async fn execute_tool_with_hooks(
287 | |         &self,
288 | |         tool: &dyn Tool,
289 | |         input: AgentInput,
...   |
444 | |         final_result
445 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-tools/src/lifecycle/hook_integration.rs:377:25
    |
377 |                         audit_entry.resource_metrics = tool_context.resource_metrics.clone();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `audit_entry.resource_metrics.clone_from(&tool_context.resource_metrics)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones
    = note: `-W clippy::assigning-clones` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::assigning_clones)]`

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-tools/src/lifecycle/hook_integration.rs:394:25
    |
394 |                         audit_entry.resource_metrics = tool_context.resource_metrics.clone();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `audit_entry.resource_metrics.clone_from(&tool_context.resource_metrics)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-tools/src/lifecycle/hook_integration.rs:433:9
    |
433 |         audit_entry.resource_metrics = tool_context.resource_metrics.clone();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `audit_entry.resource_metrics.clone_from(&tool_context.resource_metrics)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/src/lifecycle/hook_integration.rs:521:29
    |
521 |                     .insert(format!("resource_{}", key), value.clone());
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
521 -                     .insert(format!("resource_{}", key), value.clone());
521 +                     .insert(format!("resource_{key}"), value.clone());
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-tools/src/lifecycle/state_machine.rs:102:17
    |
101 |       pub async fn transition_to(&self, new_state: ToolExecutionState) -> Result<()> {
    |  ____________________________________________________________________________________-
102 | |         let mut state_guard = self.state.write().await;
    | |                 ^^^^^^^^^^^
103 | |         let current_state = *state_guard;
...   |
137 | |         Ok(())
138 | |     }
    | |_____- temporary `state_guard` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
    = note: `-W clippy::significant-drop-tightening` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_tightening)]`
help: drop the temporary after the end of its last usage
    |
130 ~         *state_guard = new_state;
131 +         drop(state_guard);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-tools/src/lifecycle/state_machine.rs:205:13
    |
204 |       pub async fn get_execution_stats(&self) -> ExecutionStats {
    |  _______________________________________________________________-
205 | |         let history = self.transition_history.read().await;
    | |             ^^^^^^^
206 | |         let current_state = *self.state.read().await;
...   |
241 | |     }
    | |_____- temporary `history` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
225 ~         }
226 +         drop(history);
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/lifecycle/state_machine.rs:209:30
    |
209 |           let execution_time = if let Some(last_transition) = history.last() {
    |  ______________________________^
210 | |             last_transition.duration_since_last
211 | |         } else {
212 | |             Instant::now().duration_since(self.created_at)
213 | |         };
    | |_________^ help: try: `history.last().map_or_else(|| Instant::now().duration_since(self.created_at), |last_transition| last_transition.duration_since_last)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `self` argument
   --> llmspell-tools/src/lifecycle/state_machine.rs:244:34
    |
244 |     const fn is_valid_transition(&self, from: ToolExecutionState, to: ToolExecutionState) -> bool {
    |                                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: wildcard pattern covers any other pattern as it will match anyway
   --> llmspell-tools/src/lifecycle/state_machine.rs:260:13
    |
260 |             (Terminated, _) | _ => false,
    |             ^^^^^^^^^^^^^^^^^^^
    |
    = help: consider handling `_` separately
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_in_or_patterns
    = note: `-W clippy::wildcard-in-or-patterns` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::wildcard_in_or_patterns)]`

warning: called `map(<f>).unwrap_or_else(<g>)` on an `Option` value
   --> llmspell-tools/src/media/audio_processor.rs:555:37
    |
555 |                   let target_format = extract_optional_string(params, "target_format")
    |  _____________________________________^
556 | |                     .map(|s| match s.to_lowercase().as_str() {
557 | |                         "wav" => AudioFormat::Wav,
558 | |                         "mp3" => AudioFormat::Mp3,
559 | |                         _ => AudioFormat::Unknown,
560 | |                     })
561 | |                     .unwrap_or_else(|| AudioFormat::from_extension(Path::new(target_path)));
    | |___________________________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`

warning: this function has too many lines (234/100)
   --> llmspell-tools/src/media/image_processor.rs:441:5
    |
441 | /     async fn execute(
442 | |         &self,
443 | |         input: AgentInput,
444 | |         _context: ExecutionContext,
...   |
720 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: called `map(<f>).unwrap_or_else(<g>)` on an `Option` value
   --> llmspell-tools/src/media/image_processor.rs:548:37
    |
548 |                   let target_format = extract_optional_string(params, "target_format")
    |  _____________________________________^
549 | |                     .map(|s| match s.to_lowercase().as_str() {
550 | |                         "png" => ImageFormat::Png,
551 | |                         "jpeg" | "jpg" => ImageFormat::Jpeg,
...   |
555 | |                     })
556 | |                     .unwrap_or_else(|| ImageFormat::from_extension(Path::new(output_path)));
    | |___________________________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or

warning: unused `self` argument
   --> llmspell-tools/src/media/video_processor.rs:101:18
    |
101 |     const fn gcd(&self, a: u32, b: u32) -> u32 {
    |                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function has too many lines (109/100)
   --> llmspell-tools/src/search/providers/brave.rs:132:5
    |
132 | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
133 | |         let api_key = self
134 | |             .api_key
135 | |             .as_ref()
...   |
257 | |         Ok(results)
258 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (120/100)
   --> llmspell-tools/src/search/providers/duckduckgo.rs:45:5
    |
45  | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
46  | |         // DuckDuckGo Instant Answer API only supports web search
47  | |         if options.search_type != SearchType::Web {
48  | |             return Err(LLMSpellError::Validation {
...   |
183 | |         Ok(results)
184 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (159/100)
   --> llmspell-tools/src/search/providers/serpapi.rs:130:5
    |
130 | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
131 | |         let api_key = self
132 | |             .api_key
133 | |             .as_ref()
...   |
306 | |         Ok(results)
307 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (147/100)
   --> llmspell-tools/src/search/providers/serperdev.rs:146:5
    |
146 | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
147 | |         let api_key = self
148 | |             .api_key
149 | |             .as_ref()
...   |
312 | |         Ok(results)
313 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or instead of an if let/else
  --> llmspell-tools/src/search/web_search.rs:83:17
   |
83 | /                 if let Ok(engine_id) = std::env::var("WEBSEARCH_GOOGLE_SEARCH_ENGINE_ID") {
84 | |                     serde_json::json!({
85 | |                         "search_engine_id": engine_id
86 | |                     })
87 | |                 } else {
88 | |                     serde_json::Value::Null
89 | |                 };
   | |_________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
   |
83 ~                 std::env::var("WEBSEARCH_GOOGLE_SEARCH_ENGINE_ID").map_or(serde_json::Value::Null, |engine_id| serde_json::json!({
84 +                         "search_engine_id": engine_id
85 ~                     }));
   |

warning: this function has too many lines (108/100)
   --> llmspell-tools/src/search/web_search.rs:177:5
    |
177 | /     pub fn new(config: WebSearchConfig) -> Result<Self> {
178 | |         let mut providers = HashMap::new();
...   |
291 | |         })
292 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/search/web_search.rs:315:30
    |
315 |           let provider_chain = if let Some(requested) = requested_provider {
    |  ______________________________^
316 | |             // If specific provider requested, try it first
317 | |             let mut chain = vec![requested.to_string()];
...   |
333 | |             chain
334 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
315 ~         let provider_chain = requested_provider.map_or_else(|| {
316 +             // Use default provider first, then fallback chain
317 +             let mut chain = vec![self.config.default_provider.clone()];
318 +             for fallback in &self.config.fallback_chain {
319 +                 if fallback != &self.config.default_provider {
320 +                     chain.push(fallback.clone());
321 +                 }
322 +             }
323 +             chain
324 +         }, |requested| {
325 +             // If specific provider requested, try it first
326 +             let mut chain = vec![requested.to_string()];
327 +             // Then add fallback chain excluding the requested one
328 +             for fallback in &self.config.fallback_chain {
329 +                 if fallback != requested {
330 +                     chain.push(fallback.clone());
331 +                 }
332 +             }
333 +             chain
334 ~         });
    |

warning: the function has a cognitive complexity of (42/25)
   --> llmspell-tools/src/system/environment_reader.rs:129:8
    |
129 |     fn is_var_allowed(&self, var_name: &str) -> bool {
    |        ^^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: the function has a cognitive complexity of (26/25)
   --> llmspell-tools/src/system/process_executor.rs:216:8
    |
216 |     fn is_executable_allowed(&self, executable: &str) -> bool {
    |        ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: this function has too many lines (112/100)
   --> llmspell-tools/src/system/process_executor.rs:270:5
    |
270 | /     async fn execute_process(
271 | |         &self,
272 | |         executable: &str,
273 | |         args: &[String],
...   |
416 | |         Ok(process_result)
417 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (105/100)
   --> llmspell-tools/src/system/service_checker.rs:209:5
    |
209 | /     async fn check_tcp_port(
210 | |         &self,
211 | |         host: &str,
212 | |         port: u16,
...   |
328 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (117/100)
   --> llmspell-tools/src/system/service_checker.rs:331:5
    |
331 | /     async fn check_http_service(
332 | |         &self,
333 | |         url: &str,
334 | |         timeout_duration: Duration,
...   |
466 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (126/100)
   --> llmspell-tools/src/system/service_checker.rs:475:5
    |
475 | /     async fn execute(
476 | |         &self,
477 | |         input: AgentInput,
478 | |         _context: ExecutionContext,
...   |
624 | |         Ok(AgentOutput::text(serde_json::to_string_pretty(&response)?))
625 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (104/100)
   --> llmspell-tools/src/util/base64_encoder.rs:64:5
    |
64  | /     async fn process_operation(&self, params: &Value) -> Result<Value> {
65  | |         // Extract parameters using utilities
66  | |         let operation = extract_required_string(params, "operation")?;
67  | |         validate_enum(&operation, &["encode", "decode"], "operation")?;
...   |
189 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/util/base64_encoder.rs:172:21
    |
172 | /                     match String::from_utf8(result_data.clone()) {
173 | |                         Ok(s) => s,
174 | |                         Err(_) => hex::encode(&result_data),
175 | |                     }
    | |_____________________^ help: try: `String::from_utf8(result_data.clone()).map_or_else(|_| hex::encode(&result_data), |s| s)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/util/data_validation.rs:194:17
    |
194 | /                 if let Some(s) = value.as_str() {
195 | |                     let phone_regex = Regex::new(r"^\+?[1-9]\d{1,14}$").unwrap();
196 | |                     if phone_regex.is_match(s) {
197 | |                         Ok(())
...   |
202 | |                     Err(validation_error("Value must be a string", None))
203 | |                 }
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
194 ~                 value.as_str().map_or_else(|| Err(validation_error("Value must be a string", None)), |s| {
195 +                     let phone_regex = Regex::new(r"^\+?[1-9]\d{1,14}$").unwrap();
196 +                     if phone_regex.is_match(s) {
197 +                         Ok(())
198 +                     } else {
199 +                         Err(validation_error("Invalid phone number format", None))
200 +                     }
201 +                 })
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/util/data_validation.rs:211:17
    |
211 | /                 if let Some(s) = value.as_str() {
212 | |                     let uuid_regex = Regex::new(
213 | |                         r"^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
214 | |                     ).unwrap();
...   |
227 | |                     ))
228 | |                 }
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
211 ~                 value.as_str().map_or_else(|| Err(validation_error(
212 +                         "Value must be a string",
213 +                         None,
214 +                     )), |s| {
215 +                     let uuid_regex = Regex::new(
216 +                         r"^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
217 +                     ).unwrap();
218 +                     if uuid_regex.is_match(s) {
219 +                         Ok(())
220 +                     } else {
221 +                         Err(validation_error(
222 +                             "Invalid UUID format",
223 +                             None,
224 +                         ))
225 +                     }
226 +                 })
    |

warning: this function's return value is unnecessary
   --> llmspell-tools/src/util/data_validation.rs:269:5
    |
269 | /     fn validate_value(
270 | |         &self,
271 | |         field: &str,
272 | |         value: &Value,
...   |
294 | |         Ok(())
295 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove the return type...
    |
275 -     ) -> Result<()> {
275 +     ) -> () {
    |
help: ...and then remove returned values
    |
294 -         Ok(())
    |

warning: the function has a cognitive complexity of (31/25)
   --> llmspell-tools/src/util/data_validation.rs:298:8
    |
298 |     fn validate_rule(
    |        ^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: this function has too many lines (231/100)
   --> llmspell-tools/src/util/data_validation.rs:298:5
    |
298 | /     fn validate_rule(
299 | |         &self,
300 | |         field: &str,
301 | |         value: &Value,
...   |
559 | |         Ok(())
560 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/util/data_validation.rs:564:9
    |
564 | /         if let Some(msg) = self.config.custom_messages.get(key) {
565 | |             msg.replace("{field}", field)
566 | |         } else {
567 | |             match key {
...   |
571 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
564 ~         self.config.custom_messages.get(key).map_or_else(|| match key {
565 +                 "required" => format!("{field} is required"),
566 +                 _ => format!("Validation failed for {field}"),
567 +             }, |msg| msg.replace("{field}", field))
    |

warning: this looks like a formatting argument but it is not part of a formatting macro
   --> llmspell-tools/src/util/data_validation.rs:565:26
    |
565 |             msg.replace("{field}", field)
    |                          ^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#literal_string_with_formatting_args
    = note: `-W clippy::literal-string-with-formatting-args` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::literal_string_with_formatting_args)]`

warning: this function has too many lines (234/100)
   --> llmspell-tools/src/util/date_time_handler.rs:69:5
    |
69  | /     async fn process_operation(&self, params: &Value) -> Result<Value> {
70  | |         let operation = extract_string_with_default(params, "operation", "parse");
71  | |
72  | |         match operation {
...   |
328 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (114/100)
   --> llmspell-tools/src/util/diff_calculator.rs:88:5
    |
88  | /     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
89  | |         use std::fmt::Write;
90  | |
91  | |         let diff = TextDiff::from_lines(old, new);
...   |
215 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-tools/src/util/diff_calculator.rs:88:65
   |
88 |     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
   |                                                                 ^^^^^^^^^^ help: consider taking a reference instead: `&DiffFormat`
   |
help: or consider marking this type as `Copy`
  --> llmspell-tools/src/util/diff_calculator.rs:35:1
   |
35 | enum DiffFormat {
   | ^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
   = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-tools/src/util/diff_calculator.rs:88:5
    |
88  | /     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
89  | |         use std::fmt::Write;
90  | |
91  | |         let diff = TextDiff::from_lines(old, new);
...   |
215 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
88  -     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
88  +     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> std::string::String {
    |
help: ...and then change returning expressions
    |
94  ~             DiffFormat::Unified => diff
95  +                 .unified_diff()
96  +                 .context_radius(3)
97  +                 .header("old", "new")
98  ~                 .to_string(),
99  |             DiffFormat::Context => {
...
156 |                 }
157 ~                 output
158 |             }
...
169 |                 }
170 ~                 output
171 |             }
...
211 |                 output.insert_str(0, &format!("Total changes: {changes}\n\n"));
212 ~                 output
    |

warning: this function has too many lines (111/100)
   --> llmspell-tools/src/util/diff_calculator.rs:328:5
    |
328 | /     async fn process_operation(&self, params: &Value) -> Result<Value> {
329 | |         let diff_type = extract_string_with_default(params, "type", "text");
330 | |
331 | |         match diff_type {
...   |
452 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:132:46
    |
132 |         let hash = self.compute_hash(params, &input_type, algorithm).await?;
    |                                              ^^^^^^^^^^^ help: change this to: `input_type`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow
    = note: `-W clippy::needless-borrow` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::needless_borrow)]`

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:163:74
    |
163 |         let expected_hash = self.decode_expected_hash(expected_hash_str, &expected_format)?;
    |                                                                          ^^^^^^^^^^^^^^^^ help: change this to: `expected_format`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:164:53
    |
164 |         let actual_hash = self.compute_hash(params, &input_type, algorithm).await?;
    |                                                     ^^^^^^^^^^^ help: change this to: `input_type`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:180:90
    |
180 |                     "expected": self.format_hash(&expected_hash, &self.parse_format(Some(&expected_format))),
    |                                                                                          ^^^^^^^^^^^^^^^^ help: change this to: `expected_format`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:181:86
    |
181 |                     "actual": self.format_hash(&actual_hash, &self.parse_format(Some(&expected_format))),
    |                                                                                      ^^^^^^^^^^^^^^^^ help: change this to: `expected_format`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: unused `self` argument
   --> llmspell-tools/src/util/hash_calculator.rs:217:9
    |
217 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
  --> llmspell-tools/src/util/uuid_generator.rs:97:9
   |
97 |         &self,
   |         ^^^^^
   |
   = help: consider refactoring to an associated function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this match arm has an identical body to another arm
   --> llmspell-tools/src/util/uuid_generator.rs:113:21
    |
113 |                     Some("dns") => Uuid::NAMESPACE_DNS,
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
113 ~                     Some("dns") | None => Uuid::NAMESPACE_DNS,
114 |                     Some("url") => Uuid::NAMESPACE_URL,
...
125 |                     }
126 ~                     // Default namespace
    |

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-tools/src/util/uuid_generator.rs:142:47
    |
142 |     fn format_uuid(&self, uuid: Uuid, format: &UuidFormat) -> String {
    |                                               ^^^^^^^^^^^ help: consider passing by value instead: `UuidFormat`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref
    = note: `-W clippy::trivially-copy-pass-by-ref` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::trivially_copy_pass_by_ref)]`

warning: this function has too many lines (135/100)
   --> llmspell-tools/src/util/uuid_generator.rs:211:5
    |
211 | /     async fn execute(&self, input: AgentInput, _context: ExecutionContext) -> Result<AgentOutput> {
212 | |         // Get parameters from input using shared utility
213 | |         let params = extract_parameters(&input)?;
...   |
375 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-tools/src/util/uuid_generator.rs:300:21
    |
300 | /                     "agent" => *NAMESPACE_AGENT,
301 | |                     "tool" => *NAMESPACE_TOOL,
    | |____________________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-tools/src/util/uuid_generator.rs:303:21
    |
303 |                     _ => *NAMESPACE_AGENT,
    |                     ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: function call inside of `unwrap_or`
   --> llmspell-tools/src/web/api_tester.rs:212:44
    |
212 |                 "body": body_json.as_ref().unwrap_or(&json!(body_text)),
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &json!(body_text))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-tools/src/web/sitemap_crawler.rs:330:5
    |
330 | /     fn parse_sitemap(&self, xml_content: &str) -> Result<Vec<Value>> {
331 | |         let mut urls = Vec::new();
332 | |         let lines: Vec<&str> = xml_content.lines().collect();
...   |
405 | |         Ok(urls)
406 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
330 -     fn parse_sitemap(&self, xml_content: &str) -> Result<Vec<Value>> {
330 +     fn parse_sitemap(&self, xml_content: &str) -> std::vec::Vec<serde_json::Value> {
    |
help: ...and then change returning expressions
    |
405 -         Ok(urls)
405 +         urls
    |

warning: this function has too many lines (138/100)
   --> llmspell-tools/src/web/web_scraper.rs:90:5
    |
90  | /     async fn scrape_page(
91  | |         &self,
92  | |         url: &str,
93  | |         options: &ScrapeOptions,
...   |
259 | |         Ok(json!(result))
260 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or instead of an if let/else
   --> llmspell-tools/src/web/web_scraper.rs:403:25
    |
403 |           let selectors = if let Some(obj) = extract_optional_object(params, "selectors") {
    |  _________________________^
404 | |             serde_json::from_value::<HashMap<String, String>>(serde_json::Value::Object(
405 | |                 obj.clone(),
406 | |             ))
...   |
409 | |             None
410 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
403 ~         let selectors = extract_optional_object(params, "selectors").map_or(None, |obj| serde_json::from_value::<HashMap<String, String>>(serde_json::Value::Object(
404 +                 obj.clone(),
405 +             ))
406 ~             .ok());
    |

warning: this function has too many lines (126/100)
   --> llmspell-tools/src/web/webhook_caller.rs:124:5
    |
124 | /     async fn execute(&self, input: AgentInput, _context: ExecutionContext) -> Result<AgentOutput> {
125 | |         let params = extract_parameters(&input)?;
126 | |         let url = extract_required_string(params, "input")?;
127 | |         let payload = extract_optional_object(params, "payload");
...   |
280 | |         ))
281 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-tools/src/web/webhook_caller.rs:166:17
    |
166 | /                 "POST" => client.post(url),
167 | |                 "PUT" => client.put(url),
    | |________________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-tools/src/web/webhook_caller.rs:171:17
    |
171 |                 _ => client.post(url), // Default to POST for unknown methods
    |                 ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: function call inside of `unwrap_or`
   --> llmspell-tools/src/web/webhook_caller.rs:228:56
    |
228 | ...                   "body": body_json.as_ref().unwrap_or(&json!(body_text)),
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &json!(body_text))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/web/webpage_monitor.rs:238:13
    |
238 | /             if let Some(body_element) = document.select(&body_selector).next() {
239 | |                 let text: String = body_element.text().collect::<Vec<_>>().join(" ");
240 | |                 Ok(text.split_whitespace().collect::<Vec<_>>().join(" "))
241 | |             } else {
...   |
250 | |                     .join(" "))
251 | |             }
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
238 ~             document.select(&body_selector).next().map_or_else(|| Ok(document
239 +                     .root_element()
240 +                     .text()
241 +                     .collect::<Vec<_>>()
242 +                     .join(" ")
243 +                     .split_whitespace()
244 +                     .collect::<Vec<_>>()
245 +                     .join(" ")), |body_element| {
246 +                 let text: String = body_element.text().collect::<Vec<_>>().join(" ");
247 +                 Ok(text.split_whitespace().collect::<Vec<_>>().join(" "))
248 +             })
    |

warning: unused `self` argument
   --> llmspell-tools/src/web/webpage_monitor.rs:256:9
    |
256 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `async` for function with no await statements
   --> llmspell-tools/src/fs/file_operations.rs:486:5
    |
486 | /     async fn get_metadata(&self, path: &Path, sandbox: &FileSandbox) -> Result<Value> {
487 | |         info!("Getting metadata for: {:?}", path);
...   |
527 | |         }))
528 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-tools/src/fs/file_operations.rs:531:5
    |
531 | /     async fn file_exists(&self, path: &Path, sandbox: &FileSandbox) -> Result<bool> {
532 | |         debug!("Checking if file exists: {:?}", path);
...   |
537 | |         Ok(file_utils::file_exists(&safe_path))
538 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: long literal lacking separators
   --> llmspell-providers/src/rig.rs:320:54
    |
320 |             assert_eq!(caps.max_context_tokens, Some(128000)); // GPT-4 context size
    |                                                      ^^^^^^ help: consider: `128_000`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: long literal lacking separators
   --> llmspell-providers/src/rig.rs:333:54
    |
333 |             assert_eq!(caps.max_context_tokens, Some(200000)); // Claude 3 Opus context size
    |                                                      ^^^^^^ help: consider: `200_000`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: variables can be used directly in the `format!` string
   --> llmspell-providers/src/model_specifier.rs:268:9
    |
268 |         assert_eq!(format!("{}", spec), "openai/gpt-4");
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
268 -         assert_eq!(format!("{}", spec), "openai/gpt-4");
268 +         assert_eq!(format!("{spec}"), "openai/gpt-4");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/tests/integration_test.rs:40:13
   |
40 |     let _ = format!("{}", os); // Test Display trait
   |             ^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
40 -     let _ = format!("{}", os); // Test Display trait
40 +     let _ = format!("{os}"); // Test Display trait
   |

warning: `llmspell-tools` (lib) generated 75 warnings (run `cargo clippy --fix --lib -p llmspell-tools` to apply 6 suggestions)
warning: `llmspell-providers` (lib test) generated 68 warnings (65 duplicates) (run `cargo clippy --fix --lib -p llmspell-providers --tests` to apply 1 suggestion)
warning: `llmspell-utils` (test "integration_test") generated 1 warning (run `cargo clippy --fix --test "integration_test"` to apply 1 suggestion)
warning: unnested or-patterns
   --> llmspell-agents/src/context/inheritance.rs:284:13
    |
284 |             Some(FieldTransform::Copy) | Some(FieldTransform::Custom(_)) | None => value.clone(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnested_or_patterns
    = note: `-W clippy::unnested-or-patterns` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnested_or_patterns)]`
help: nest the patterns
    |
284 -             Some(FieldTransform::Copy) | Some(FieldTransform::Custom(_)) | None => value.clone(),
284 +             Some(FieldTransform::Copy | FieldTransform::Custom(_)) | None => value.clone(),
    |

warning: unnested or-patterns
   --> llmspell-agents/src/lifecycle/state_machine.rs:268:13
    |
268 | /             (Uninitialized, Initializing | Error)
269 | |             | (Initializing, Ready | Error | Terminating)
270 | |             | (Ready, Running | Paused | Terminating | Error)
271 | |             | (Running, Ready | Paused | Terminating | Error)
...   |
274 | |             | (Recovering, Ready | Error | Terminating)
275 | |             | (Terminating, Terminated | Error) => true,
    | |_______________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnested_or_patterns
help: nest the patterns
    |
268 ~             (Uninitialized, Initializing | Error) |
269 + (Initializing | Recovering, Ready | Error | Terminating) |
270 + (Ready, Running | Paused | Terminating | Error) |
271 + (Running, Ready | Paused | Terminating | Error) |
272 + (Paused, Ready | Running | Terminating | Error) |
273 + (Error, Recovering | Terminating | Terminated) |
274 ~ (Terminating, Terminated | Error) => true,
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/agent_wrapped_tool.rs:294:26
    |
294 |           let input_text = if let Some(template) = &self.parameter_config.input_template {
    |  __________________________^
295 | |             template.clone()
296 | |         } else {
297 | |             format!("Tool invocation of agent: {}", agent_metadata.name)
298 | |         };
    | |_________^ help: try: `self.parameter_config.input_template.as_ref().map_or_else(|| format!("Tool invocation of agent: {}", agent_metadata.name), |template| template.clone())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
    = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`

warning: use Option::map_or instead of an if let/else
  --> llmspell-agents/src/composition/capabilities.rs:90:29
   |
90 |           let recency_score = if let Some(last) = stats.last_invocation {
   |  _____________________________^
91 | |             let hours_ago = (chrono::Utc::now() - last).num_hours();
92 | |             #[allow(clippy::cast_precision_loss)]
93 | |             let hours_ago_f64 = hours_ago as f64;
...  |
96 | |             0.0
97 | |         };
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
   |
90 ~         let recency_score = stats.last_invocation.map_or(0.0, |last| {
91 +             let hours_ago = (chrono::Utc::now() - last).num_hours();
92 +             #[allow(clippy::cast_precision_loss)]
93 +             let hours_ago_f64 = hours_ago as f64;
94 +             (1.0 / (1.0 + hours_ago_f64 / 24.0)).min(1.0)
95 ~         });
   |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:144:23
    |
144 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
    = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
    |
144 -     /// Panics if the RwLock is poisoned
144 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:190:23
    |
190 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
190 -     /// Panics if the RwLock is poisoned
190 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:214:23
    |
214 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
214 -     /// Panics if the RwLock is poisoned
214 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:224:23
    |
224 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
224 -     /// Panics if the RwLock is poisoned
224 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:235:23
    |
235 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
235 -     /// Panics if the RwLock is poisoned
235 +     /// Panics if the `RwLock` is poisoned
    |

warning: it is more concise to loop over references to containers instead of using explicit iteration methods
   --> llmspell-agents/src/composition/capabilities.rs:247:22
    |
247 |         for entry in capabilities_vec.iter() {
    |                      ^^^^^^^^^^^^^^^^^^^^^^^ help: to write this more concisely, try: `&capabilities_vec`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_iter_loop
    = note: `-W clippy::explicit-iter-loop` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::explicit_iter_loop)]`

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:289:23
    |
289 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
289 -     /// Panics if the RwLock is poisoned
289 +     /// Panics if the `RwLock` is poisoned
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/capabilities.rs:339:24
    |
339 |     fn matches_pattern(&self, text: &str, pattern: &str) -> bool {
    |                        ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:385:23
    |
385 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
385 -     /// Panics if the RwLock is poisoned
385 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:429:23
    |
429 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
429 -     /// Panics if the RwLock is poisoned
429 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:443:23
    |
443 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
443 -     /// Panics if the RwLock is poisoned
443 +     /// Panics if the `RwLock` is poisoned
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/composition/capabilities.rs:448:9
    |
448 | /         if let Some(cap_ids) = index.get(category) {
449 | |             cap_ids
450 | |                 .iter()
451 | |                 .filter_map(|id| capabilities.get(id))
...   |
455 | |             Vec::new()
456 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
448 ~         index.get(category).map_or_else(Vec::new, |cap_ids| cap_ids
449 +                 .iter()
450 +                 .filter_map(|id| capabilities.get(id))
451 +                 .map(|entry| entry.capability.clone())
452 +                 .collect())
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/capabilities.rs:464:5
    |
464 | /     pub fn set_availability(
465 | |         &self,
466 | |         provider_id: &str,
467 | |         capability_name: &str,
468 | |         available: bool,
469 | |     ) -> Result<()> {
    | |___________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/capabilities.rs:472:32
    |
472 |         let mut capabilities = self.capabilities.write().unwrap();
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
    = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:488:23
    |
488 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
488 -     /// Panics if the RwLock is poisoned
488 +     /// Panics if the `RwLock` is poisoned
    |

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-agents/src/composition/capabilities.rs:502:67
    |
502 |             capabilities.values().map(|e| e.score).sum::<f64>() / total as f64
    |                                                                   ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:257:25
    |
256 |               DelegationStrategy::RoundRobin => {
    |  _______________________________________________-
257 | |                 let mut index = self.round_robin_index.write().unwrap();
    | |                         ^^^^^
258 | |                 let selected = matching_agents[*index % matching_agents.len()].clone();
259 | |                 *index += 1;
260 | |                 Some(selected)
261 | |             }
    | |_____________- temporary `index` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
    = note: `-W clippy::significant-drop-tightening` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_tightening)]`
help: drop the temporary after the end of its last usage
    |
259 ~                 *index += 1;
260 +                 drop(index);
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/delegation.rs:293:5
    |
293 |     pub async fn delegate(&self, request: DelegationRequest) -> Result<DelegationResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/delegation.rs:312:31
    |
312 |             let mut metrics = self.metrics.write().unwrap();
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:321:13
    |
293 |       pub async fn delegate(&self, request: DelegationRequest) -> Result<DelegationResult> {
    |  __________________________________________________________________________________________-
294 | |         let start_time = std::time::Instant::now();
...   |
321 | |         let agents = self.agents.read().await;
    | |             ^^^^^^
...   |
381 | |     }
    | |_____- temporary `agents` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
321 ~         
322 +         let agent = self.agents.read().await.;
323 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:346:25
    |
345 |               Ok(output) => {
    |  ___________________________-
346 | |                 let mut metrics = self.metrics.write().unwrap();
    | |                         ^^^^^^^
347 | |                 metrics.successful_delegations += 1;
348 | |                 metrics.avg_delegation_time = std::time::Duration::from_secs(
...   |
361 | |                 })
362 | |             }
    | |_____________- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
352 ~                 );
353 +                 drop(metrics);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:364:25
    |
363 |               Err(e) => {
    |  _______________________-
364 | |                 let mut metrics = self.metrics.write().unwrap();
    | |                         ^^^^^^^
365 | |                 metrics.failed_delegations += 1;
...   |
378 | |                 })
379 | |             }
    | |_____________- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
364 ~                 
365 +                 self.metrics.write().unwrap().;
366 ~                 
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/delegation.rs:384:5
    |
384 |     pub fn set_strategy(&self, strategy: DelegationStrategy) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/delegation.rs:385:10
    |
385 |         *self.strategy.write().unwrap() = strategy;
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/delegation.rs:389:5
    |
389 |     pub fn metrics(&self) -> DelegationMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/delegation.rs:390:9
    |
390 |         self.metrics.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/hierarchical.rs:119:5
    |
119 |     pub fn set_parent(&self, parent: Weak<dyn HierarchicalAgent>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/hierarchical.rs:120:32
    |
120 |         let mut parent_guard = self.parent.write().unwrap();
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/composition/hierarchical.rs:129:9
    |
129 | /         match &*parent_guard {
130 | |             Some(weak_parent) => {
131 | |                 if let Some(parent) = weak_parent.upgrade() {
132 | |                     parent.depth() + 1
...   |
137 | |             None => 0,
138 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
129 ~         (*parent_guard).as_ref().map_or(0, |weak_parent| if let Some(parent) = weak_parent.upgrade() {
130 +                     parent.depth() + 1
131 +                 } else {
132 +                     0
133 +                 })
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/composition/hierarchical.rs:131:17
    |
131 | /                 if let Some(parent) = weak_parent.upgrade() {
132 | |                     parent.depth() + 1
133 | |                 } else {
134 | |                     0
135 | |                 }
    | |_________________^ help: try: `weak_parent.upgrade().map_or(0, |parent| parent.depth() + 1)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:167:13
    |
163 |       async fn aggregate_capabilities(&self) -> Vec<Capability> {
    |  _______________________________________________________________-
164 | |         let mut capabilities = self.capabilities.read().unwrap().clone();
...   |
167 | |         let children = self.children.read().await;
    | |             ^^^^^^^^
...   |
192 | |         capabilities
193 | |     }
    | |_____- temporary `children` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
167 ~         
168 +         self.children.read().await.;
169 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:180:13
    |
163 |       async fn aggregate_capabilities(&self) -> Vec<Capability> {
    |  _______________________________________________________________-
164 | |         let mut capabilities = self.capabilities.read().unwrap().clone();
...   |
180 | |         let components = self.components.read().await;
    | |             ^^^^^^^^^^
...   |
192 | |         capabilities
193 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
180 ~         
181 +         self.components.read().await.;
182 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:230:13
    |
227 | #[async_trait]
    | -------------- temporary `tools` is currently being dropped at the end of its contained scope
...
230 |         let tools = self.tools.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
230 ~         
231 +         self.tools.read().await.;
232 |         let mut infos = Vec::new();
233 |
234 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:313:17
    |
310 | #[async_trait]
    | -------------- temporary `components` is currently being dropped at the end of its contained scope
...
313 |         let mut components = self.components.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
313 ~         
314 +         self.components.write().await.insert(component.metadata().id.to_string(), component);
315 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:319:17
    |
310 | #[async_trait]
    | -------------- temporary `components` is currently being dropped at the end of its contained scope
...
319 |         let mut components = self.components.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
319 ~         
320 +         self.components.write().await.;
321 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:389:21
    |
387 |               ExecutionPattern::Sequential => {
    |  _____________________________________________-
388 | |                 let mut result = input;
389 | |                 let components = self.components.read().await;
    | |                     ^^^^^^^^^^
...   |
397 | |                 Ok(result)
398 | |             }
    | |_____________- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
389 ~                 
390 +                 self.components.read().await.;
391 |
392 ~                 
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:400:21
    |
399 |               ExecutionPattern::Parallel => {
    |  ___________________________________________-
400 | |                 let components = self.components.read().await;
    | |                     ^^^^^^^^^^
401 | |                 let mut handles = Vec::new();
...   |
423 | |                 Ok(Value::Array(results))
424 | |             }
    | |_____________- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
400 ~                 
401 +                 self.components.read().await.;
402 |                 let mut handles = Vec::new();
403 |
404 ~                 
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:467:17
    |
433 | #[async_trait]
    | -------------- temporary `children` is currently being dropped at the end of its contained scope
...
467 |         let mut children = self.children.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
467 ~         
468 +         self.children.write().await.push(child);
469 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:473:17
    |
433 | #[async_trait]
    | -------------- temporary `children` is currently being dropped at the end of its contained scope
...
473 |         let mut children = self.children.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
473 ~         
474 +         self.children.write().await.clear();
475 |         // Remove child by comparing against child_id
476 |         // Since HierarchicalAgent doesn't have id() method, we need a different approach
477 |         // For now, we'll remove all children - this is a limitation
478 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:497:13
    |
433 | #[async_trait]
    | -------------- temporary `children` is currently being dropped at the end of its contained scope
...
497 |         let children = self.children.read().await;
    |             ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
497 ~         
498 +         self.children.read().await.;
499 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/hierarchical.rs:573:5
    |
573 |     pub fn build(self) -> HierarchicalCompositeAgent {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/hierarchical.rs:581:10
    |
581 |         *agent.execution_pattern.write().unwrap() = self.initial_pattern;
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: manual `Debug` impl does not include all fields
  --> llmspell-agents/src/composition/lifecycle.rs:57:1
   |
57 | / impl std::fmt::Debug for ComponentLifecycle {
58 | |     fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
59 | |         f.debug_struct("ComponentLifecycle")
60 | |             .field("id", &self.id)
...  |
67 | | }
   | |_^
   |
note: this field is unused
  --> llmspell-agents/src/composition/lifecycle.rs:46:5
   |
46 |     pub component: Arc<dyn BaseAgent>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: consider including all fields in this `Debug` impl
   = help: consider calling `.finish_non_exhaustive()` if you intend to ignore fields
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_fields_in_debug
   = note: `-W clippy::missing-fields-in-debug` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_fields_in_debug)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:183:17
    |
170 |       pub async fn initialize_composite(&self, agent: &dyn CompositeAgent) -> Result<()> {
    |  ________________________________________________________________________________________-
171 | |         // Set state to initializing
172 | |         *self.state.write().await = LifecycleState::Initializing;
...   |
183 | |         let mut component_lifecycles = self.components.write().await;
    | |                 ^^^^^^^^^^^^^^^^^^^^
...   |
221 | |     }
    | |_____- temporary `component_lifecycles` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
183 ~         
184 +             self.components.write().await.insert(component_id.clone(), lifecycle);
185 |
...
198 |
199 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:225:17
    |
224 |       async fn initialize_all_components(&self) -> Result<()> {
    |  _____________________________________________________________-
225 | |         let mut components = self.components.write().await;
    | |                 ^^^^^^^^^^
226 | |
227 | |         for (id, lifecycle) in components.iter_mut() {
...   |
240 | |         Ok(())
241 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
225 ~         
226 +         self.components.write().await.;
227 |
228 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:310:17
    |
309 |       async fn shutdown_all_components(&self) -> Result<()> {
    |  ___________________________________________________________-
310 | |         let mut components = self.components.write().await;
    | |                 ^^^^^^^^^^
311 | |
312 | |         for (id, lifecycle) in components.iter_mut() {
...   |
324 | |         Ok(())
325 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
310 ~         
311 +         self.components.write().await.;
312 |
313 ~         
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/lifecycle.rs:362:34
    |
362 |     const fn is_valid_transition(&self, from: &LifecycleState, to: &LifecycleState) -> bool {
    |                                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:429:13
    |
428 |       async fn emit_event(&self, event: LifecycleEvent) -> Result<()> {
    |  _____________________________________________________________________-
429 | |         let handlers = self.event_handlers.read().await;
    | |             ^^^^^^^^
430 | |         for handler in handlers.iter() {
431 | |             handler.handle_event(&event).await?;
432 | |         }
433 | |         Ok(())
434 | |     }
    | |_____- temporary `handlers` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
429 ~         
430 +         self.event_handlers.read().await.;
431 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:458:13
    |
456 |       pub async fn health_check(&self) -> Result<HealthCheckResult> {
    |  ___________________________________________________________________-
457 | |         let state = self.state.read().await.clone();
458 | |         let components = self.components.read().await;
    | |             ^^^^^^^^^^
...   |
496 | |         })
497 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
458 ~         
459 +         self.components.read().await.;
460 |
...
463 |
464 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:591:17
    |
586 |       pub async fn initialize_hierarchical(&self, agent: &dyn HierarchicalAgent) -> Result<()> {
    |  ______________________________________________________________________________________________-
587 | |         // Initialize base
588 | |         self.base.initialize_composite(agent).await?;
...   |
591 | |         let mut hierarchy = self.hierarchy.write().await;
    | |                 ^^^^^^^^^
...   |
602 | |         Ok(())
603 | |     }
    | |_____- temporary `hierarchy` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
591 ~         
592 +         self.hierarchy.write().await.insert(agent_id, children);
593 |         let agent_id = agent.metadata().id.to_string();
...
600 |
601 ~         
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/lifecycle.rs:681:30
    |
681 |     fn parse_lifecycle_state(&self, state: &str) -> LifecycleState {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: wildcard pattern covers any other pattern as it will match anyway
   --> llmspell-agents/src/composition/lifecycle.rs:688:13
    |
688 |             "ready" | _ => LifecycleState::Ready,
    |             ^^^^^^^^^^^
    |
    = help: consider handling `_` separately
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_in_or_patterns
    = note: `-W clippy::wildcard-in-or-patterns` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::wildcard_in_or_patterns)]`

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/composition/tool_composition.rs:316:5
    |
316 | /     pub async fn execute<T>(
317 | |         &self,
318 | |         tool_provider: &T,
319 | |         initial_parameters: JsonValue,
...   |
322 | |     where
323 | |         T: ToolProvider,
    | |________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: future cannot be sent between threads safely
   --> llmspell-agents/src/composition/tool_composition.rs:316:5
    |
316 | /     pub async fn execute<T>(
317 | |         &self,
318 | |         tool_provider: &T,
319 | |         initial_parameters: JsonValue,
...   |
322 | |     where
323 | |         T: ToolProvider,
    | |________________________^ future returned by `execute` is not `Send`
    |
note: future is not `Send` as this value is used across an await
   --> llmspell-agents/src/composition/tool_composition.rs:358:22
    |
318 |         tool_provider: &T,
    |         ------------- has type `&T` which is not `Send`
...
358 |                     .await
    |                      ^^^^^ await occurs here, with `tool_provider` maybe used later
    = note: `T` doesn't implement `std::marker::Sync`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#future_not_send
    = note: `-W clippy::future-not-send` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::future_not_send)]`

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/composition/tool_composition.rs:426:22
    |
426 |           let output = if let Some(last_step) = self.steps.last() {
    |  ______________________^
427 | |             step_results
428 | |                 .get(&last_step.id)
429 | |                 .map_or(JsonValue::Null, |r| r.output.clone())
430 | |         } else {
431 | |             JsonValue::Null
432 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
426 ~         let output = self.steps.last().map_or(JsonValue::Null, |last_step| step_results
427 +                 .get(&last_step.id)
428 ~                 .map_or(JsonValue::Null, |r| r.output.clone()));
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/composition/tool_composition.rs:531:17
    |
531 | /                 if let Some(step_output) = context.get_step_output(step_id) {
532 | |                     if field_name == "*" {
533 | |                         Ok(step_output.clone())
534 | |                     } else if let JsonValue::Object(obj) = step_output {
...   |
540 | |                     Ok(JsonValue::Null)
541 | |                 }
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
531 ~                 context.get_step_output(step_id).map_or_else(|| Ok(JsonValue::Null), |step_output| if field_name == "*" {
532 +                         Ok(step_output.clone())
533 +                     } else if let JsonValue::Object(obj) = step_output {
534 +                         Ok(obj.get(field_name).cloned().unwrap_or(JsonValue::Null))
535 +                     } else {
536 +                         Ok(JsonValue::Null)
537 +                     })
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/tool_composition.rs:556:9
    |
556 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/composition/tool_composition.rs:589:21
    |
589 | /                     if let Ok(n) = s.parse::<f64>() {
590 | |                         Ok(JsonValue::Number(
591 | |                             serde_json::Number::from_f64(n)
592 | |                                 .unwrap_or_else(|| serde_json::Number::from(0)),
...   |
595 | |                         Ok(JsonValue::Number(serde_json::Number::from(0)))
596 | |                     }
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
589 ~                     s.parse::<f64>().map_or_else(|_| Ok(JsonValue::Number(serde_json::Number::from(0))), |n| Ok(JsonValue::Number(
590 +                             serde_json::Number::from_f64(n)
591 +                                 .unwrap_or_else(|| serde_json::Number::from(0)),
592 +                         )))
    |

warning: future cannot be sent between threads safely
   --> llmspell-agents/src/composition/tool_composition.rs:609:5
    |
609 | /     async fn execute_step<T>(
610 | |         &self,
611 | |         tool_provider: &T,
612 | |         step: &CompositionStep,
...   |
616 | |     where
617 | |         T: ToolProvider,
    | |________________________^ future returned by `execute_step` is not `Send`
    |
note: captured value is not `Send` because `&` references cannot be sent unless their referent is `Sync`
   --> llmspell-agents/src/composition/tool_composition.rs:611:9
    |
611 |         tool_provider: &T,
    |         ^^^^^^^^^^^^^ has type `&T` which is not `Send`, because `T` is not `Sync`
    = note: `T` doesn't implement `std::marker::Sync`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#future_not_send

warning: unused `self` argument
   --> llmspell-agents/src/composition/tool_composition.rs:638:30
    |
638 |     fn calculate_retry_delay(&self, retry_config: &RetryConfig, attempt: u32) -> Duration {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/composition/tool_composition.rs:645:13
    |
645 | /             if let Some(max_delay) = retry_config.max_delay {
646 | |                 delay.min(max_delay)
647 | |             } else {
648 | |                 delay
649 | |             }
    | |_____________^ help: try: `retry_config.max_delay.map_or(delay, |max_delay| delay.min(max_delay))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/composition/tool_composition.rs:723:24
    |
723 |     fn new(parameters: JsonValue, shared_context: &HashMap<String, JsonValue>) -> Self {
    |                        ^^^^^^^^^ help: consider taking a reference instead: `&JsonValue`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
    = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:264:17
    |
262 |       pub async fn refresh_nodes(&self) -> Result<()> {
    |  _____________________________________________________-
263 | |         let discovered = self.discovery.discover().await?;
264 | |         let mut nodes = self.nodes.write().await;
    | |                 ^^^^^
...   |
273 | |         Ok(())
274 | |     }
    | |_____- temporary `nodes` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
269 ~                 nodes.insert(node.id.clone(), node);
270 +                 drop(nodes);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:307:17
    |
281 |       pub async fn replicate(&self, context: &ExecutionContext) -> Result<()> {
    |  _____________________________________________________________________________-
282 | |         let replication = self.replication.read().await;
283 | |
284 | |         let target_nodes = match replication.strategy {
...   |
307 | |         let mut replication = self.replication.write().await;
    | |                 ^^^^^^^^^^^
...   |
323 | |         Ok(())
324 | |     }
    | |_____- temporary `replication` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
307 ~         
308 +         self.replication.write().await.insert(context.id.clone(), pending);
309 ~         
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/context/distributed.rs:445:9
    |
445 | /         if let Some(node) = nodes.get(node_id) {
446 | |             // In real implementation, would send over network
447 | |             tracing::info!(
448 | |                 target_node = %node_id,
...   |
457 | |             })
458 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
445 ~         nodes.get(node_id).map_or_else(|| Err(LLMSpellError::Component {
446 +                 message: format!("Node not found: {node_id}"),
447 +                 source: None,
448 +             }), |node| {
449 +             // In real implementation, would send over network
450 +             tracing::info!(
451 +                 target_node = %node_id,
452 +                 address = %node.address,
453 +                 "Sending sync message"
454 +             );
455 +             Ok(())
456 +         })
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:565:17
    |
557 | #[async_trait]
    | -------------- temporary `nodes` is currently being dropped at the end of its contained scope
...
565 |         let mut nodes = self.nodes.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
565 ~         
566 +         self.nodes.write().await.push(node);
567 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:571:17
    |
557 | #[async_trait]
    | -------------- temporary `nodes` is currently being dropped at the end of its contained scope
...
571 |         let mut nodes = self.nodes.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
571 ~         
572 +         self.nodes.write().await.retain(|n| n.id != node_id);
573 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:577:17
    |
557 | #[async_trait]
    | -------------- temporary `nodes` is currently being dropped at the end of its contained scope
...
577 |         let mut nodes = self.nodes.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
577 ~         
578 +         self.nodes.write().await.;
579 ~         
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/context/event_integration.rs:248:5
    |
248 | /     pub async fn subscribe(
249 | |         &self,
250 | |         context_scope: ContextScope,
251 | |         event_types: Vec<String>,
252 | |         handler: Arc<dyn EventHandler>,
253 | |     ) -> Result<String> {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:263:17
    |
253 |       ) -> Result<String> {
    |  _________________________-
254 | |         let subscription = Subscription {
255 | |             id: uuid::Uuid::new_v4().to_string(),
256 | |             context_scope,
...   |
263 | |         let mut subscriptions = self.subscriptions.write().await;
    | |                 ^^^^^^^^^^^^^
...   |
266 | |         Ok(sub_id)
267 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
263 ~         
264 +         self.subscriptions.write().await.push(subscription);
265 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:275:17
    |
274 |       pub async fn unsubscribe(&self, subscription_id: &str) -> Result<()> {
    |  __________________________________________________________________________-
275 | |         let mut subscriptions = self.subscriptions.write().await;
    | |                 ^^^^^^^^^^^^^
276 | |         subscriptions.retain(|sub| sub.id != subscription_id);
277 | |         Ok(())
278 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
275 ~         
276 +         self.subscriptions.write().await.retain(|sub| sub.id != subscription_id);
277 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:300:13
    |
299 |       async fn dispatch_to_handlers(&self, event: ContextEvent) -> Result<()> {
    |  _____________________________________________________________________________-
300 | |         let subscriptions = self.subscriptions.read().await;
    | |             ^^^^^^^^^^^^^
...   |
359 | |         Ok(())
360 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
300 ~         
301 +         let handlers = self.subscriptions.read().await.collect();
302 |
303 |         // Filter relevant subscriptions
304 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:364:13
    |
363 |       pub async fn stats(&self) -> EventBusStats {
    |  ________________________________________________-
364 | |         let subscriptions = self.subscriptions.read().await;
    | |             ^^^^^^^^^^^^^
365 | |         let history = self.history.read().await;
...   |
382 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
364 ~         
365 +         let subscription_count = self.subscriptions.read().await.len();
366 |         let history = self.history.read().await;
367 |
368 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:365:13
    |
363 |       pub async fn stats(&self) -> EventBusStats {
    |  ________________________________________________-
364 | |         let subscriptions = self.subscriptions.read().await;
365 | |         let history = self.history.read().await;
    | |             ^^^^^^^
...   |
382 | |     }
    | |_____- temporary `history` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
374 ~             .collect();
375 +         drop(history);
    |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/context/hierarchy.rs:67:5
   |
67 |     pub fn find_by_id(&self, id: &str) -> Option<Arc<RwLock<Self>>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/context/hierarchy.rs:75:30
   |
75 |             let child_node = child.read().unwrap();
   |                              ^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/context/hierarchy.rs:90:5
   |
90 |     pub fn descendants(&self) -> Vec<Arc<RwLock<Self>>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/context/hierarchy.rs:95:30
   |
95 |             let child_node = child.read().unwrap();
   |                              ^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:133:5
    |
133 |     pub fn create_root(&mut self, name: String, context: ExecutionContext) -> Result<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:138:9
    |
138 | /         self.index
139 | |             .write()
140 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:153:5
    |
153 | /     pub fn create_child(
154 | |         &self,
155 | |         parent_id: &str,
156 | |         scope: ContextScope,
157 | |         inheritance: InheritancePolicy,
158 | |     ) -> Result<ExecutionContext> {
    | |_________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:161:25
    |
161 |             let index = self.index.read().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:188:5
    |
188 |     pub fn get(&self, id: &str) -> Option<ExecutionContext> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:189:21
    |
189 |         let index = self.index.read().unwrap();
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:202:5
    |
202 |     pub fn remove(&mut self, id: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:203:25
    |
203 |         let mut index = self.index.write().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/hierarchy.rs:203:17
    |
202 |       pub fn remove(&mut self, id: &str) -> Result<()> {
    |  ______________________________________________________-
203 | |         let mut index = self.index.write().unwrap();
    | |                 ^^^^^
204 | |
205 | |         if let Some(node) = index.remove(id) {
...   |
227 | |     }
    | |_____- temporary `index` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
211 ~                 index.remove(&desc_guard.context.id);
212 +                 drop(index);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/hierarchy.rs:206:17
    |
205 |           if let Some(node) = index.remove(id) {
    |  ______________________________________________-
206 | |             let node_guard = node.read().unwrap();
    | |                 ^^^^^^^^^^
...   |
220 | |             Ok(())
221 | |         } else {
    | |_________- temporary `node_guard` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
206 ~             
207 +             node.read().unwrap().;
208 |
209 |             // Remove all descendants from index
210 ~             
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:231:5
    |
231 |     pub fn roots(&self) -> HashMap<String, ExecutionContext> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:235:38
    |
235 |                 let mut node_guard = node.write().unwrap();
    |                                      ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:244:5
    |
244 |     pub fn stats(&self) -> ContextStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:245:21
    |
245 |         let index = self.index.read().unwrap();
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/hierarchy.rs:245:13
    |
244 |       pub fn stats(&self) -> ContextStats {
    |  _________________________________________-
245 | |         let index = self.index.read().unwrap();
    | |             ^^^^^
246 | |         let total_contexts = index.len();
...   |
271 | |     }
    | |_____- temporary `index` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
245 ~         
246 +         let total_contexts = self.index.read().unwrap().len();
247 ~         
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/context/inheritance.rs:152:5
    |
152 | /     pub fn apply(
153 | |         &self,
154 | |         parent_ctx: &ExecutionContext,
155 | |         child_ctx: &mut ExecutionContext,
156 | |     ) -> Result<(), String> {
    | |___________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-agents/src/context/inheritance.rs:240:72
    |
240 |     fn should_inherit_field(&self, field: &str, value: &Value, policy: &InheritancePolicy) -> bool {
    |                                                                        ^^^^^^^^^^^^^^^^^^ help: consider passing by value instead: `InheritancePolicy`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref
    = note: `-W clippy::trivially-copy-pass-by-ref` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::trivially_copy_pass_by_ref)]`

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/context/inheritance.rs:271:17
    |
271 | /                 if let Some(str_val) = value.as_str() {
272 | |                     Value::String(format!("{prefix}{str_val}"))
273 | |                 } else {
274 | |                     value.clone()
275 | |                 }
    | |_________________^ help: try: `value.as_str().map_or_else(|| value.clone(), |str_val| Value::String(format!("{prefix}{str_val}")))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/context/inheritance.rs:278:17
    |
278 | /                 if let Some(str_val) = value.as_str() {
279 | |                     Value::String(format!("{str_val}{suffix}"))
280 | |                 } else {
281 | |                     value.clone()
282 | |                 }
    | |_________________^ help: try: `value.as_str().map_or_else(|| value.clone(), |str_val| Value::String(format!("{str_val}{suffix}")))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `self` argument
   --> llmspell-agents/src/context/inheritance.rs:327:21
    |
327 |     fn merge_values(&self, existing: &Value, new: &Value) -> Value {
    |                     ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:123:23
    |
123 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
123 -     /// Panics if the RwLock is poisoned
123 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:133:23
    |
133 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
133 -     /// Panics if the RwLock is poisoned
133 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:143:23
    |
143 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
143 -     /// Panics if the RwLock is poisoned
143 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:163:23
    |
163 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
163 -     /// Panics if the RwLock is poisoned
163 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:188:23
    |
188 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
188 -     /// Panics if the RwLock is poisoned
188 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:200:17
    |
189 |       pub fn set(&self, key: String, value: Value, accessor: &ComponentId) -> Result<()> {
    |  ________________________________________________________________________________________-
190 | |         if !self.has_permission(accessor, MemoryPermission::Write) {
191 | |             return Err(LLMSpellError::Security {
192 | |                 message: format!(
...   |
200 | |         let mut data = self.data.write().unwrap();
    | |                 ^^^^
...   |
220 | |         Ok(())
221 | |     }
    | |_____- temporary `data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
207 ~         data.insert(key.clone(), value);
208 +         drop(data);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:231:23
    |
231 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
231 -     /// Panics if the RwLock is poisoned
231 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:243:17
    |
232 |       pub fn remove(&self, key: &str, accessor: &ComponentId) -> Result<Option<Value>> {
    |  ______________________________________________________________________________________-
233 | |         if !self.has_permission(accessor, MemoryPermission::Write) {
234 | |             return Err(LLMSpellError::Security {
235 | |                 message: format!(
...   |
243 | |         let mut data = self.data.write().unwrap();
    | |                 ^^^^
...   |
259 | |         Ok(removed)
260 | |     }
    | |_____- temporary `data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
243 ~         
244 +         let removed = self.data.write().unwrap().remove(key);
245 ~         
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:276:23
    |
276 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
276 -     /// Panics if the RwLock is poisoned
276 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:300:23
    |
300 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
300 -     /// Panics if the RwLock is poisoned
300 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:312:17
    |
301 |       pub fn clear(&self, accessor: &ComponentId) -> Result<()> {
    |  _______________________________________________________________-
302 | |         if !self.has_permission(accessor, MemoryPermission::Write) {
303 | |             return Err(LLMSpellError::Security {
304 | |                 message: format!(
...   |
312 | |         let mut data = self.data.write().unwrap();
    | |                 ^^^^
...   |
316 | |         Ok(())
317 | |     }
    | |_____- temporary `data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
312 ~         
313 +         self.data.write().unwrap().clear();
314 ~         
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:406:23
    |
406 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
406 -     /// Panics if the RwLock is poisoned
406 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:408:17
    |
407 |       pub fn create_region(&self, id: String, scope: ContextScope, owner: ComponentId) -> Result<()> {
    |  ____________________________________________________________________________________________________-
408 | |         let mut regions = self.regions.write().unwrap();
    | |                 ^^^^^^^
...   |
430 | |         Ok(())
431 | |     }
    | |_____- temporary `regions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
429 ~         regions.insert(id, region);
430 +         drop(regions);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:437:23
    |
437 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
437 -     /// Panics if the RwLock is poisoned
437 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:454:23
    |
454 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
454 -     /// Panics if the RwLock is poisoned
454 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:456:17
    |
455 |       pub fn delete_region(&self, id: &str, requester: &ComponentId) -> Result<()> {
    |  __________________________________________________________________________________-
456 | |         let mut regions = self.regions.write().unwrap();
    | |                 ^^^^^^^
457 | |
458 | |         if let Some(region) = regions.get(id) {
...   |
473 | |         Ok(())
474 | |     }
    | |_____- temporary `regions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
471 ~         })?;
472 +         drop(regions);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:480:23
    |
480 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
480 -     /// Panics if the RwLock is poisoned
480 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:495:23
    |
495 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
495 -     /// Panics if the RwLock is poisoned
495 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:498:13
    |
497 |       pub fn stats(&self) -> MemoryStats {
    |  ________________________________________-
498 | |         let regions = self.regions.read().unwrap();
    | |             ^^^^^^^
499 | |
500 | |         let total_regions = regions.len();
...   |
508 | |     }
    | |_____- temporary `regions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
501 ~         let total_size: usize = regions.values().map(|r| r.metadata.size_bytes).sum();
502 +         drop(regions);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:514:23
    |
514 |     /// Panics if the RwLock is poisoned or if duration conversion fails
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
514 -     /// Panics if the RwLock is poisoned or if duration conversion fails
514 +     /// Panics if the `RwLock` is poisoned or if duration conversion fails
    |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/di.rs:44:17
   |
43 |       pub async fn register_tool(&self, id: String, tool: Arc<dyn Tool>) -> Result<()> {
   |  ______________________________________________________________________________________-
44 | |         let mut tools = self.tools.write().await;
   | |                 ^^^^^
45 | |         if tools.contains_key(&id) {
46 | |             anyhow::bail!("Tool with id '{}' already registered", id);
...  |
49 | |         Ok(())
50 | |     }
   | |_____- temporary `tools` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
48 ~         tools.insert(id, tool);
49 +         drop(tools);
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/di.rs:71:17
   |
69 |       pub async fn register_service<T: Any + Send + Sync + 'static>(&self, service: T) -> Result<()> {
   |  ____________________________________________________________________________________________________-
70 | |         let type_id = TypeId::of::<T>();
71 | |         let mut services = self.services.write().await;
   | |                 ^^^^^^^^
72 | |         if services.contains_key(&type_id) {
...  |
79 | |         Ok(())
80 | |     }
   | |_____- temporary `services` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
78 ~         services.insert(type_id, Box::new(service));
79 +         drop(services);
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/di.rs:101:17
    |
100 |       ) -> Result<()> {
    |  _____________________-
101 | |         let mut instances = self.named_instances.write().await;
    | |                 ^^^^^^^^^
102 | |         if instances.contains_key(&name) {
103 | |             anyhow::bail!("Named instance '{}' already registered", name);
...   |
106 | |         Ok(())
107 | |     }
    | |_____- temporary `instances` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
105 ~         instances.insert(name, Box::new(instance));
106 +         drop(instances);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/di.rs:152:17
    |
150 |       pub async fn register_scoped<T: Any + Send + Sync + 'static>(&self, service: T) -> Result<()> {
    |  ___________________________________________________________________________________________________-
151 | |         let type_id = TypeId::of::<T>();
152 | |         let mut services = self.scoped_services.write().await;
    | |                 ^^^^^^^^
153 | |         services.insert(type_id, Box::new(service));
154 | |         Ok(())
155 | |     }
    | |_____- temporary `services` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
152 ~         
153 +         self.scoped_services.write().await.insert(type_id, Box::new(service));
154 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/di.rs:162:13
    |
158 |       pub async fn get_service<T: Any + Send + Sync + Clone + 'static>(&self) -> Option<Arc<T>> {
    |  _______________________________________________________________________________________________-
159 | |         let type_id = TypeId::of::<T>();
...   |
162 | |         let scoped = self.scoped_services.read().await;
    | |             ^^^^^^
...   |
168 | |         self.parent.get_service::<T>().await
169 | |     }
    | |_____- temporary `scoped` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
162 ~         
163 +         self.scoped_services.read().await.;
164 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/di.rs:193:5
    |
193 |     pub fn with_tool(self, id: String, tool: Arc<dyn Tool>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/di.rs:197:17
    |
197 |                 self.container.register_tool(id, tool).await.unwrap();
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:37:17
   |
36 |       ) -> Result<()> {
   |  _____________________-
37 | |         let mut factories = self.factories.write().await;
   | |                 ^^^^^^^^^
38 | |         if factories.contains_key(&name) {
39 | |             anyhow::bail!("Factory '{}' is already registered", name);
...  |
49 | |         Ok(())
50 | |     }
   | |_____- temporary `factories` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
41 ~         factories.insert(name.clone(), factory);
42 +         drop(factories);
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:44:17
   |
36 |       ) -> Result<()> {
   |  _____________________-
37 | |         let mut factories = self.factories.write().await;
38 | |         if factories.contains_key(&name) {
39 | |             anyhow::bail!("Factory '{}' is already registered", name);
...  |
44 | |         let mut default = self.default_factory.write().await;
   | |                 ^^^^^^^
...  |
49 | |         Ok(())
50 | |     }
   | |_____- temporary `default` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
46 ~             *default = Some(name);
47 +             drop(default);
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:74:13
   |
73 |       pub async fn set_default_factory(&self, name: String) -> Result<()> {
   |  _________________________________________________________________________-
74 | |         let factories = self.factories.read().await;
   | |             ^^^^^^^^^
75 | |         if !factories.contains_key(&name) {
76 | |             anyhow::bail!("Factory '{}' is not registered", name);
...  |
81 | |         Ok(())
82 | |     }
   | |_____- temporary `factories` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
   |
74 ~         
75 +         self.factories.read().await.;
76 ~         
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:79:17
   |
73 |       pub async fn set_default_factory(&self, name: String) -> Result<()> {
   |  _________________________________________________________________________-
74 | |         let factories = self.factories.read().await;
75 | |         if !factories.contains_key(&name) {
76 | |             anyhow::bail!("Factory '{}' is not registered", name);
...  |
79 | |         let mut default = self.default_factory.write().await;
   | |                 ^^^^^^^
80 | |         *default = Some(name);
81 | |         Ok(())
82 | |     }
   | |_____- temporary `default` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
   |
79 ~         
80 +         self.default_factory.write().await.;
81 ~         
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/health.rs:276:17
    |
275 |       pub async fn add_health_check(&self, check: Arc<dyn HealthCheck>) {
    |  _______________________________________________________________________-
276 | |         let mut checks = self.health_checks.write().await;
    | |                 ^^^^^^
277 | |         checks.push(check);
...   |
285 | |     }
    | |_____- temporary `checks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
280 ~         checks.sort_by_key(|c| c.priority());
281 +         drop(checks);
    |

warning: this function has too many lines (121/100)
   --> llmspell-agents/src/health.rs:292:5
    |
292 | /     pub async fn check_health(&self) -> Result<HealthCheckResult> {
293 | |         let start_time = Instant::now();
294 | |
295 | |         if self.config.enable_logging {
...   |
436 | |         Ok(final_result)
437 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/health.rs:306:13
    |
292 |       pub async fn check_health(&self) -> Result<HealthCheckResult> {
    |  ___________________________________________________________________-
293 | |         let start_time = Instant::now();
294 | |
295 | |         if self.config.enable_logging {
...   |
306 | |         let checks = self.health_checks.read().await;
    | |             ^^^^^^
...   |
436 | |         Ok(final_result)
437 | |     }
    | |_____- temporary `checks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
306 ~         
307 +         self.health_checks.read().await.;
308 ~         
    |

warning: more than 3 bools in a struct
  --> llmspell-agents/src/hooks/state_persistence_hook.rs:20:1
   |
20 | / pub struct PersistenceConfig {
21 | |     /// Interval for automatic saves (None disables auto-save)
22 | |     pub auto_save_interval: Option<Duration>,
23 | |     /// Maximum number of retry attempts
...  |
36 | |     pub non_blocking: bool,
37 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
   = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:146:43
    |
146 |                           let should_save = if let Some(last_save) = last_saves.get(agent_id) {
    |  ___________________________________________^
147 | |                             now.duration_since(*last_save)
148 | |                                 .unwrap_or(Duration::from_secs(0))
149 | |                                 >= interval
150 | |                         } else {
151 | |                             true // Never saved
152 | |                         };
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
146 ~                         let should_save = last_saves.get(agent_id).map_or(true, |last_save| now.duration_since(*last_save)
147 ~                                 .unwrap_or(Duration::from_secs(0)) >= interval);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:213:33
    |
211 |                       Ok(()) => {
    |  _______________________________-
212 | |                         // Reset failure count on success
213 | |                         let mut counts = self.failure_counts.write().await;
    | |                                 ^^^^^^
214 | |                         counts.remove(agent_id);
...   |
222 | |                         return Ok(());
223 | |                     }
    | |_____________________- temporary `counts` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
213 ~                         
214 +                         self.failure_counts.write().await.remove(agent_id);
215 ~                         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:217:33
    |
211 |                       Ok(()) => {
    |  _______________________________-
212 | |                         // Reset failure count on success
213 | |                         let mut counts = self.failure_counts.write().await;
214 | |                         counts.remove(agent_id);
...   |
217 | |                         let mut times = self.last_save_times.write().await;
    | |                                 ^^^^^
...   |
222 | |                         return Ok(());
223 | |                     }
    | |_____________________- temporary `times` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
217 ~                         
218 +                         self.last_save_times.write().await.insert(agent_id.to_string(), SystemTime::now());
219 ~                         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:242:37
    |
235 |                           } else {
    |  ________________________________-
236 | |                             error!(
237 | |                                 "All {} save attempts failed for agent {}: {}",
238 | |                                 attempts, agent_id, e
...   |
242 | |                             let mut counts = self.failure_counts.write().await;
    | |                                     ^^^^^^
...   |
246 | |                             return Err(e);
247 | |                         }
    | |_________________________- temporary `counts` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
242 ~                             
243 +                             self.failure_counts.write().await.;
244 ~                             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:332:17
    |
330 |       pub async fn subscribe(&self, subscription: EventSubscription) -> String {
    |  ______________________________________________________________________________-
331 | |         let subscription_id = subscription.id.clone();
332 | |         let mut subscriptions = self.subscriptions.write().await;
    | |                 ^^^^^^^^^^^^^
333 | |         subscriptions.insert(subscription_id.clone(), subscription);
...   |
339 | |         subscription_id
340 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
332 ~         
333 +         self.subscriptions.write().await.insert(subscription_id.clone(), subscription);
334 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:440:13
    |
439 |       async fn process_subscriptions(&self, event: &LifecycleEvent) -> Result<()> {
    |  _________________________________________________________________________________-
440 | |         let subscriptions = self.subscriptions.read().await;
    | |             ^^^^^^^^^^^^^
441 | |         let matching_subscriptions: Vec<_> = subscriptions
442 | |             .values()
...   |
492 | |         Ok(())
493 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
440 ~         
441 +         let matching_subscriptions = self.subscriptions.read().await.collect();
442 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:611:17
    |
610 |       pub async fn clear_history(&self) {
    |  _______________________________________-
611 | |         let mut history = self.event_history.lock().await;
    | |                 ^^^^^^^
612 | |         history.clear();
...   |
617 | |     }
    | |_____- temporary `history` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
611 ~         
612 +         self.event_history.lock().await.clear();
613 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:740:17
    |
736 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
740 |         let mut metrics = self.metrics.lock().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
740 ~         
741 +         self.metrics.lock().await.;
742 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/hooks.rs:193:17
    |
190 | #[async_trait]
    | -------------- temporary `times` is currently being dropped at the end of its contained scope
...
193 |         let mut times = self.start_times.lock().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
193 ~         
194 +         self.start_times.lock().await.insert(config.name.clone(), std::time::Instant::now());
195 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/hooks.rs:200:17
    |
190 | #[async_trait]
    | -------------- temporary `times` is currently being dropped at the end of its contained scope
...
200 |         let mut times = self.start_times.lock().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
200 ~         
201 +         self.start_times.lock().await.;
202 |
203 ~         
    |

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/lifecycle/middleware.rs:1:1
  |
1 | / //! ABOUTME: Lifecycle middleware system for intercepting and augmenting agent lifecycle transitions
2 | | //! ABOUTME: Provides composable middleware chain for logging, metrics, security, and custom lifecycle behavior
  | |_^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph
  = note: `-W clippy::too-long-first-doc-paragraph` implied by `-W clippy::nursery`
  = help: to override `-W clippy::nursery` add `#[allow(clippy::too_long_first_doc_paragraph)]`

warning: more than 3 bools in a struct
   --> llmspell-agents/src/lifecycle/middleware.rs:190:1
    |
190 | / pub struct MiddlewareConfig {
191 | |     /// Enable middleware execution
192 | |     pub enabled: bool,
193 | |     /// Maximum execution time per middleware
...   |
202 | |     pub emit_events: bool,
203 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/middleware.rs:666:17
    |
662 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
666 |         let mut metrics = self.metrics.write().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
666 ~         
667 +         self.metrics.write().await.;
668 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/middleware.rs:675:17
    |
662 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
675 |         let mut metrics = self.metrics.write().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
679 ~         *metrics.entry(completed_key).or_insert(0.0) += 1.0;
680 +         drop(metrics);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/middleware.rs:689:17
    |
662 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
689 |         let mut metrics = self.metrics.write().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
689 ~         
690 +         self.metrics.write().await.;
691 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/resources.rs:310:21
    |
309 | /         {
310 | |             let mut stats = self.usage_stats.lock().await;
    | |                     ^^^^^
311 | |             stats.total_allocations += 1;
312 | |             stats.current_allocations += 1;
...   |
331 | |         }
    | |_________- temporary `stats` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
327 ~                 .or_insert(0);
328 +             drop(stats);
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/lifecycle/resources.rs:505:9
    |
505 | /         if let Some(agent_allocations) = allocations.get(agent_id) {
506 | |             agent_allocations
507 | |                 .iter()
508 | |                 .filter(|a| a.resource_type == *resource_type)
...   |
512 | |             0
513 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
505 ~         allocations.get(agent_id).map_or(0, |agent_allocations| agent_allocations
506 +                 .iter()
507 +                 .filter(|a| a.resource_type == *resource_type)
508 +                 .map(|a| a.amount)
509 +                 .sum())
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/resources.rs:528:13
    |
527 |       async fn find_allocation(&self, allocation_id: &str) -> Result<ResourceAllocation> {
    |  ________________________________________________________________________________________-
528 | |         let allocations = self.allocations.read().await;
    | |             ^^^^^^^^^^^
529 | |         for agent_allocations in allocations.values() {
530 | |             if let Some(allocation) = agent_allocations.iter().find(|a| a.id == allocation_id) {
...   |
534 | |         Err(anyhow!("Allocation not found: {}", allocation_id))
535 | |     }
    | |_____- temporary `allocations` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
528 ~         
529 +         self.allocations.read().await.;
530 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/lifecycle/shutdown.rs:213:5
    |
213 |     pub async fn add_hook(&self, hook: Arc<dyn ShutdownHook>) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/lifecycle/shutdown.rs:223:17
    |
223 |                 hooks.last().unwrap().priority()
    |                 ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this function has too many lines (145/100)
   --> llmspell-agents/src/lifecycle/shutdown.rs:236:5
    |
236 | /     pub async fn shutdown_agent(
237 | |         &self,
238 | |         request: ShutdownRequest,
239 | |         state_machine: Arc<AgentStateMachine>,
...   |
410 | |         Ok(result)
411 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/shutdown.rs:332:13
    |
240 |       ) -> Result<ShutdownResult> {
    |  _________________________________-
241 | |         let start_time = Instant::now();
242 | |         let request_id = request.id.clone();
243 | |         let agent_id = request.agent_id.clone();
...   |
332 | |         let hooks = self.hooks.read().await;
    | |             ^^^^^
...   |
410 | |         Ok(result)
411 | |     }
    | |_____- temporary `hooks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
332 ~         
333 +         self.hooks.read().await.;
334 ~         
    |

warning: function call inside of `unwrap_or`
   --> llmspell-agents/src/lifecycle/shutdown.rs:369:30
    |
369 | ...                   .unwrap_or(&"Unknown error".to_string())
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &"Unknown error".to_string())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call
    = note: `-W clippy::or-fun-call` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::or_fun_call)]`

warning: function call inside of `unwrap_or`
   --> llmspell-agents/src/lifecycle/shutdown.rs:405:26
    |
405 |                         .unwrap_or(&"Unknown error".to_string())
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &"Unknown error".to_string())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/shutdown.rs:422:13
    |
418 |       ) -> Result<u32> {
    |  ______________________-
419 | |         let agent_id = &request.agent_id;
...   |
422 | |         let hooks = self.hooks.read().await;
    | |             ^^^^^
...   |
470 | |         Ok(resources_cleaned)
471 | |     }
    | |_____- temporary `hooks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
454 ~         }
455 +         drop(hooks);
    |

warning: function call inside of `unwrap_or`
   --> llmspell-agents/src/lifecycle/shutdown.rs:709:22
    |
709 |                     .unwrap_or(&"Unknown error".to_string())
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &"Unknown error".to_string())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: more than 3 bools in a struct
   --> llmspell-agents/src/lifecycle/state_machine.rs:111:1
    |
111 | / pub struct StateMachineConfig {
112 | |     /// Maximum time allowed for state transitions
113 | |     pub max_transition_time: Duration,
114 | |     /// Enable automatic recovery from error states
...   |
133 | |     pub circuit_breaker_config: BreakerConfig,
134 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-agents/src/lifecycle/state_machine.rs:278:13
    |
278 | /             (Terminated, _) => false,
279 | |
280 | |             // All others not allowed
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-agents/src/lifecycle/state_machine.rs:281:13
    |
281 |             _ => false,
    |             ^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: this could be rewritten as `let...else`
   --> llmspell-agents/src/lifecycle/state_machine.rs:428:9
    |
428 | /         let (hook_executor, hook_registry) = match (&self.hook_executor, &self.hook_registry) {
429 | |             (Some(executor), Some(registry)) => (executor, registry),
430 | |             _ => return Ok(()), // No hooks configured
431 | |         };
    | |__________^ help: consider writing: `let (Some(hook_executor), Some(hook_registry)) = (&self.hook_executor, &self.hook_registry) else { return Ok(()) };`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else
    = note: `-W clippy::manual-let-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::manual_let_else)]`

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/lifecycle/state_machine.rs:542:9
    |
542 | /         if let Some(token) = tokens.get(&transition_id) {
543 | |             token.cancel();
544 | |             true
545 | |         } else {
546 | |             false
547 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
542 ~         tokens.get(&transition_id).map_or(false, |token| {
543 +             token.cancel();
544 +             true
545 +         })
    |

warning: this function has too many lines (128/100)
   --> llmspell-agents/src/lifecycle/state_machine.rs:651:5
    |
651 | /     async fn execute_state_transition(
652 | |         &self,
653 | |         current: AgentState,
654 | |         target_state: AgentState,
...   |
821 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/lifecycle/state_machine.rs:814:9
    |
814 | /         match timeout_result {
815 | |             Ok(result) => result,
816 | |             Err(_) => Err(anyhow!(
817 | |                 "State transition timed out after {:?}",
818 | |                 self.config.max_transition_time
819 | |             )),
820 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
814 ~         timeout_result.map_or_else(|_| Err(anyhow!(
815 +                 "State transition timed out after {:?}",
816 +                 self.config.max_transition_time
817 +             )), |result| result)
    |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/lifecycle/benchmarks.rs:28:5
   |
28 |     pub fn get_log_count(&self) -> u64 {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/lifecycle/benchmarks.rs:29:10
   |
29 |         *self.log_count.lock().unwrap()
   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/lifecycle/benchmarks.rs:80:5
   |
80 |     pub fn get_metrics_count(&self) -> usize {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/lifecycle/benchmarks.rs:81:9
   |
81 |         self.metrics.lock().unwrap().len()
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/monitoring/alerts.rs:147:9
    |
147 | /         if let Some(resolved_at) = self.resolved_at {
148 | |             (resolved_at - self.triggered_at)
149 | |                 .to_std()
150 | |                 .unwrap_or_default()
...   |
154 | |                 .unwrap_or_default()
155 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
147 ~         self.resolved_at.map_or_else(|| (Utc::now() - self.triggered_at)
148 +                 .to_std()
149 +                 .unwrap_or_default(), |resolved_at| (resolved_at - self.triggered_at)
150 +                 .to_std()
151 +                 .unwrap_or_default())
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:343:5
    |
343 |     pub fn register_rule(&self, rule: AlertRule) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:344:9
    |
344 |         self.rules.write().unwrap().insert(rule.id.clone(), rule);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:348:5
    |
348 |     pub fn register_channel(&self, name: String, channel: Arc<dyn NotificationChannel>) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:349:9
    |
349 |         self.channels.write().unwrap().insert(name, channel);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:360:5
    |
360 |     pub async fn evaluate_rules(&self, context: AlertContext<'_>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:362:25
    |
362 |             let rules = self.rules.read().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/monitoring/alerts.rs:380:21
    |
380 | /                     if let Some(metric) = context.metrics.get(metric_name) {
381 | |                         match metric {
382 | |                             MetricValue::Counter(v) => {
383 | |                                 #[allow(clippy::cast_precision_loss)]
...   |
391 | |                         false
392 | |                     }
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
380 ~                     context.metrics.get(metric_name).map_or(false, |metric| match metric {
381 +                             MetricValue::Counter(v) => {
382 +                                 #[allow(clippy::cast_precision_loss)]
383 +                                 let v_f64 = *v as f64;
384 +                                 operator.evaluate(v_f64, *threshold)
385 +                             }
386 +                             MetricValue::Gauge(v) => operator.evaluate(*v, *threshold),
387 +                             _ => false,
388 +                         })
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/monitoring/alerts.rs:434:9
    |
434 | /         if let Some(last_trigger) = last_triggers.get(rule_id) {
435 | |             let elapsed = (Utc::now() - *last_trigger).to_std().unwrap_or_default();
436 | |             elapsed < self.config.default_cooldown
437 | |         } else {
438 | |             false
439 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
434 ~         last_triggers.get(rule_id).map_or(false, |last_trigger| {
435 +             let elapsed = (Utc::now() - *last_trigger).to_std().unwrap_or_default();
436 +             elapsed < self.config.default_cooldown
437 +         })
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:525:5
    |
525 |     pub fn get_active_alerts(&self) -> Vec<Alert> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:526:9
    |
526 | /         self.active_alerts
527 | |             .read()
528 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:539:5
    |
539 |     pub fn acknowledge_alert(&self, alert_id: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:540:30
    |
540 |         if let Some(alert) = self.active_alerts.write().unwrap().get_mut(alert_id) {
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/monitoring/alerts.rs:540:9
    |
540 | /         if let Some(alert) = self.active_alerts.write().unwrap().get_mut(alert_id) {
541 | |             alert.acknowledge();
542 | |             Ok(())
543 | |         } else {
...   |
547 | |             })
548 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
540 ~         self.active_alerts.write().unwrap().get_mut(alert_id).map_or_else(|| Err(llmspell_core::LLMSpellError::Component {
541 +                 message: format!("Alert {alert_id} not found"),
542 +                 source: None,
543 +             }), |alert| {
544 +             alert.acknowledge();
545 +             Ok(())
546 +         })
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:556:5
    |
556 |     pub fn resolve_alert(&self, alert_id: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:557:34
    |
557 |         if let Some(mut alert) = self.active_alerts.write().unwrap().remove(alert_id) {
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` in `if let` scrutinee will live until the end of the `if let` expression
   --> llmspell-agents/src/monitoring/alerts.rs:557:34
    |
557 |         if let Some(mut alert) = self.active_alerts.write().unwrap().remove(alert_id) {
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
566 |         }
    |          - temporary lives until here
    |
    = note: this might lead to deadlocks or other unexpected behavior
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_in_scrutinee
    = note: `-W clippy::significant-drop-in-scrutinee` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_in_scrutinee)]`
help: try moving the temporary above the match
    |
557 ~         let value = self.active_alerts.write().unwrap().remove(alert_id);
558 ~         if let Some(mut alert) = value {
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/monitoring/alerts.rs:557:9
    |
557 | /         if let Some(mut alert) = self.active_alerts.write().unwrap().remove(alert_id) {
558 | |             alert.resolve();
559 | |             self.add_to_history(alert);
560 | |             Ok(())
...   |
565 | |             })
566 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
557 ~         self.active_alerts.write().unwrap().remove(alert_id).map_or_else(|| Err(llmspell_core::LLMSpellError::Component {
558 +                 message: format!("Alert {alert_id} not found"),
559 +                 source: None,
560 +             }), |mut alert| {
561 +             alert.resolve();
562 +             self.add_to_history(alert);
563 +             Ok(())
564 +         })
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:571:5
    |
571 |     pub fn get_statistics(&self) -> AlertStatistics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:572:22
    |
572 |         let active = self.active_alerts.read().unwrap();
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: manual `Debug` impl does not include all fields
   --> llmspell-agents/src/monitoring/events.rs:173:1
    |
173 | / impl std::fmt::Debug for EventLogger {
174 | |     /// # Panics
175 | |     ///
176 | |     /// Panics if the RwLock is poisoned
...   |
186 | | }
    | |_^
    |
note: this field is unused
   --> llmspell-agents/src/monitoring/events.rs:164:5
    |
164 |     buffer: Arc<RwLock<VecDeque<LogEvent>>>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: consider including all fields in this `Debug` impl
    = help: consider calling `.finish_non_exhaustive()` if you intend to ignore fields
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_fields_in_debug

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:176:23
    |
176 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
176 -     /// Panics if the RwLock is poisoned
176 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:206:23
    |
206 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
206 -     /// Panics if the RwLock is poisoned
206 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:215:23
    |
215 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
215 -     /// Panics if the RwLock is poisoned
215 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:238:23
    |
238 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
238 -     /// Panics if the RwLock is poisoned
238 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/events.rs:258:17
    |
239 |       pub fn log(&self, event: LogEvent) -> Result<()> {
    |  ______________________________________________________-
240 | |         // Check minimum level
241 | |         if !event.level.should_log(self.get_level()) {
242 | |             return Ok(());
...   |
258 | |         let mut buffer = self.buffer.write().unwrap();
    | |                 ^^^^^^
...   |
264 | |         Ok(())
265 | |     }
    | |_____- temporary `buffer` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
262 ~         buffer.push_back(event);
263 +         drop(buffer);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:371:23
    |
371 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
371 -     /// Panics if the RwLock is poisoned
371 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:381:23
    |
381 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
381 -     /// Panics if the RwLock is poisoned
381 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:395:23
    |
395 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
395 -     /// Panics if the RwLock is poisoned
395 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:409:23
    |
409 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
409 -     /// Panics if the RwLock is poisoned
409 +     /// Panics if the `RwLock` is poisoned
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/events.rs:415:5
    |
415 |     pub fn get_statistics(&self) -> EventStatistics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/events.rs:416:22
    |
416 |         let buffer = self.buffer.read().unwrap();
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/metrics.rs:417:5
    |
417 |     pub fn register(&self, name: String, metric: Arc<dyn MetricAccess>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/metrics.rs:418:27
    |
418 |         let mut metrics = self.metrics.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/metrics.rs:418:17
    |
417 |       pub fn register(&self, name: String, metric: Arc<dyn MetricAccess>) -> Result<()> {
    |  _______________________________________________________________________________________-
418 | |         let mut metrics = self.metrics.write().unwrap();
    | |                 ^^^^^^^
419 | |         metrics.insert(name, metric);
420 | |         Ok(())
421 | |     }
    | |_____- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
418 ~         
419 +         self.metrics.write().unwrap().insert(name, metric);
420 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/metrics.rs:425:5
    |
425 |     pub fn get(&self, name: &str) -> Option<Arc<dyn MetricAccess>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/metrics.rs:426:9
    |
426 |         self.metrics.read().unwrap().get(name).cloned()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/metrics.rs:431:5
    |
431 |     pub fn get_agent_metrics(&self, agent_id: &str) -> Arc<AgentMetrics> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/metrics.rs:432:33
    |
432 |         let mut agent_metrics = self.agent_metrics.write().unwrap();
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/performance.rs:98:5
    |
98  |     pub fn from_snapshots(snapshots: &[PerformanceSnapshot]) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/performance.rs:103:26
    |
103 |         let start_time = snapshots.first().unwrap().timestamp;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: casting `f64` to `u64` may lose the sign of the value
   --> llmspell-agents/src/monitoring/performance.rs:130:32
    |
130 |         let avg_memory_bytes = (total_memory as f64 / count).round() as u64;
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
    = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: casting `f64` to `usize` may lose the sign of the value
   --> llmspell-agents/src/monitoring/performance.rs:340:31
    |
340 |         let active_requests = self.metrics.requests_active.get() as usize;
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/performance.rs:391:5
    |
391 |     pub fn generate_report(&self) -> PerformanceReport {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/performance.rs:392:25
    |
392 |         let snapshots = self.snapshots.read().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/performance.rs:392:13
    |
391 |       pub fn generate_report(&self) -> PerformanceReport {
    |  ________________________________________________________-
392 | |         let snapshots = self.snapshots.read().unwrap();
    | |             ^^^^^^^^^
393 | |         let snapshots_vec: Vec<_> = snapshots.iter().cloned().collect();
394 | |         PerformanceReport::from_snapshots(&snapshots_vec)
395 | |     }
    | |_____- temporary `snapshots` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
392 ~         
393 +         let snapshots_vec = self.snapshots.read().unwrap().collect();
394 ~         
    |

warning: item in documentation is missing backticks
  --> llmspell-agents/src/monitoring/tracing.rs:94:23
   |
94 |     /// Panics if the end_time calculation results in a negative duration
   |                       ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
94 -     /// Panics if the end_time calculation results in a negative duration
94 +     /// Panics if the `end_time` calculation results in a negative duration
   |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:212:23
    |
212 |     /// Panics if any RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
212 -     /// Panics if any RwLock is poisoned
212 +     /// Panics if any `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:250:23
    |
250 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
250 -     /// Panics if the RwLock is poisoned
250 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:269:23
    |
269 |     /// Panics if any RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
269 -     /// Panics if any RwLock is poisoned
269 +     /// Panics if any `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/tracing.rs:271:17
    |
270 |       fn complete_span(&self, span_id: &str, status: SpanStatus) -> Result<()> {
    |  ______________________________________________________________________________-
271 | |         let mut active = self.active_spans.write().unwrap();
    | |                 ^^^^^^
272 | |
273 | |         if let Some(mut span) = active.remove(span_id) {
...   |
289 | |         Ok(())
290 | |     }
    | |_____- temporary `active` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
271 ~         
272 +         self.active_spans.write().unwrap().;
273 |
274 ~         
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:296:23
    |
296 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
296 -     /// Panics if the RwLock is poisoned
296 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:306:23
    |
306 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
306 -     /// Panics if the RwLock is poisoned
306 +     /// Panics if the `RwLock` is poisoned
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/tracing.rs:319:5
    |
319 |     pub fn get_all_traces(&self) -> HashMap<String, Vec<TraceSpan>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/tracing.rs:322:21
    |
322 |         for span in self.completed_spans.read().unwrap().iter() {
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:336:23
    |
336 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
336 -     /// Panics if the RwLock is poisoned
336 +     /// Panics if the `RwLock` is poisoned
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/tracing.rs:350:5
    |
350 |     pub fn add_tag(&self, key: String, value: String) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/tracing.rs:351:29
    |
351 |           if let Some(span) = self
    |  _____________________________^
352 | |             .collector
353 | |             .active_spans
354 | |             .write()
355 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/tracing.rs:363:5
    |
363 |     pub fn add_event(&self, event: TraceEvent) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/tracing.rs:364:29
    |
364 |           if let Some(span) = self
    |  _____________________________^
365 | |             .collector
366 | |             .active_spans
367 | |             .write()
368 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:198:17
    |
190 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
198 |         let mut agents = self.agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
198 ~         
199 +         self.agents.write().await.insert(id.clone(), agent);
200 |         let mut metadata_store = self.metadata.write().await;
201 |
202 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:199:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata_store` is currently being dropped at the end of its contained scope
...
199 |         let mut metadata_store = self.metadata.write().await;
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
199 ~         
200 +         self.metadata.write().await.insert(id, metadata);
201 |
202 |         agents.insert(id.clone(), agent);
203 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:208:17
    |
190 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
208 |         let mut agents = self.agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
208 ~         
209 +         self.agents.write().await.remove(id);
210 |         let mut metadata_store = self.metadata.write().await;
211 |         let mut heartbeats = self.heartbeats.write().await;
212 |
213 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:209:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata_store` is currently being dropped at the end of its contained scope
...
209 |         let mut metadata_store = self.metadata.write().await;
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
209 ~         
210 +         self.metadata.write().await.remove(id);
211 |         let mut heartbeats = self.heartbeats.write().await;
212 |
213 |         agents.remove(id);
214 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:210:17
    |
190 | #[async_trait]
    | -------------- temporary `heartbeats` is currently being dropped at the end of its contained scope
...
210 |         let mut heartbeats = self.heartbeats.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
210 ~         
211 +         self.heartbeats.write().await.remove(id);
212 |
213 |         agents.remove(id);
214 |         metadata_store.remove(id);
215 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:230:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata_store` is currently being dropped at the end of its contained scope
...
230 |         let mut metadata_store = self.metadata.write().await;
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
230 ~         
231 +         self.metadata.write().await.insert(id.to_string(), metadata);
232 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:236:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata` is currently being dropped at the end of its contained scope
...
236 |         let mut metadata = self.metadata.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
236 ~         
237 +         self.metadata.write().await.;
238 |
239 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:249:13
    |
190 | #[async_trait]
    | -------------- temporary `metadata` is currently being dropped at the end of its contained scope
...
249 |         let metadata = self.metadata.read().await;
    |             ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
249 ~         
250 +         self.metadata.read().await.;
251 |         let mut results = Vec::new();
252 |
253 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:308:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata` is currently being dropped at the end of its contained scope
...
308 |         let mut metadata = self.metadata.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
308 ~         
309 +         self.metadata.write().await.;
310 |
311 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:321:17
    |
190 | #[async_trait]
    | -------------- temporary `heartbeats` is currently being dropped at the end of its contained scope
...
321 |         let mut heartbeats = self.heartbeats.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
321 ~         
322 +             self.heartbeats.write().await.insert(id.to_string(), std::time::Instant::now());
323 |
324 |         if self.metadata.read().await.contains_key(id) {
325 ~             
    |

warning: this could be rewritten as `let...else`
   --> llmspell-agents/src/registry/discovery.rs:216:9
    |
216 | /         let reference = match self.registry.get_metadata(agent_id).await? {
217 | |             Some(metadata) => metadata,
218 | |             None => anyhow::bail!("Agent '{}' not found", agent_id),
219 | |         };
    | |__________^ help: consider writing: `let Some(reference) = self.registry.get_metadata(agent_id).await? else { anyhow::bail!("Agent '{}' not found", agent_id) };`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/registry/discovery.rs:244:5
    |
244 | /     pub async fn get_recommendations(
245 | |         &self,
246 | |         context: &RecommendationContext,
247 | |     ) -> Result<Vec<SearchResult>> {
    | |__________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/registry/discovery.rs:278:44
    |
278 |                     .signed_duration_since(result.metadata.metrics.last_execution_time.unwrap())
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: unused `self` argument
   --> llmspell-agents/src/registry/discovery.rs:313:9
    |
313 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: it is more idiomatic to use `Option<&T>` instead of `&Option<T>`
   --> llmspell-agents/src/registry/discovery.rs:312:5
    |
312 | /     fn sort_results(
313 | |         &self,
314 | |         results: &mut [SearchResult],
315 | |         sort_by: &Option<SortField>,
    | |                  ------------------ help: change this to: `Option<&SortField>`
...   |
348 | |         });
349 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ref_option
    = note: `-W clippy::ref-option` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ref_option)]`

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/registry/persistence.rs:83:13
   |
82 |       pub async fn persist(&self) -> Result<()> {
   |  _______________________________________________-
83 | |         let cache = self.metadata_cache.read().await;
   | |             ^^^^^
...  |
98 | |         Ok(())
99 | |     }
   | |_____- temporary `cache` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
93 ~         let snapshot_data = cache.to_storage_bytes()?;
94 +         drop(cache);
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:133:17
    |
119 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
133 |         let mut agents = self.runtime_agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
133 ~         
134 +         self.runtime_agents.write().await.insert(id.clone(), agent);
135 |         let mut cache = self.metadata_cache.write().await;
136 |
137 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:134:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
134 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
134 ~         
135 +         self.metadata_cache.write().await.insert(id, metadata);
136 |
137 |         agents.insert(id.clone(), agent);
138 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:148:17
    |
119 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
148 |         let mut agents = self.runtime_agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
148 ~         
149 +         self.runtime_agents.write().await.remove(id);
150 |         let mut cache = self.metadata_cache.write().await;
151 |
152 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:149:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
149 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
149 ~         
150 +         self.metadata_cache.write().await.remove(id);
151 |
152 |         agents.remove(id);
153 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:163:13
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
163 |         let cache = self.metadata_cache.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
163 ~         
164 +         self.metadata_cache.read().await.;
165 |
166 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:187:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
187 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
187 ~         
188 +         self.metadata_cache.write().await.insert(id.to_string(), metadata);
189 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:194:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
194 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
194 ~         
195 +         self.metadata_cache.write().await.;
196 |
197 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:212:13
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
212 |         let cache = self.metadata_cache.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
212 ~         
213 +         self.metadata_cache.read().await.;
214 |         let mut results = Vec::new();
215 |
216 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:271:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
271 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
271 ~         
272 +         self.metadata_cache.write().await.;
273 |
274 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:299:13
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
299 |         let cache = self.metadata_cache.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
299 ~         
300 +         self.metadata_cache.read().await.;
301 |
302 ~         
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/state/isolation.rs:133:9
    |
133 | /         if let Some(parent) = scope.parent() {
134 | |             self.has_permission(agent_id, &parent, permission)
135 | |         } else {
136 | |             false
137 | |         }
    | |_________^ help: try: `scope.parent().map_or(false, |parent| self.has_permission(agent_id, &parent, permission))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:221:13
    |
199 |     #[instrument(skip(self))]
    |     ------------------------- temporary `boundaries` is currently being dropped at the end of its contained scope
...
221 |         let boundaries = self.boundaries.read();
    |             ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
221 ~         
222 +         let boundary = self.boundaries.read().unwrap_or(&IsolationBoundary::Strict);
223 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:253:13
    |
199 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
...
253 |         let access_control = self.access_control.read();
    |             ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
253 ~         
254 +         let has_permission = self.access_control.read().has_permission(agent_id, target_scope, &permission);
255 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:294:17
    |
287 |     #[instrument(skip(self))]
    |     ------------------------- temporary `shared_scopes` is currently being dropped at the end of its contained scope
...
294 |         let mut shared_scopes = self.shared_scopes.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
300 ~         shared_scopes.insert(scope_id.to_string(), config.clone());
301 +         drop(shared_scopes);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:303:17
    |
287 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
...
303 |         let mut access_control = self.access_control.write();
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
303 ~         
304 +                     self.access_control.write().grant_permission(
305 +                         agent_id,
306 +                         StateScope::Custom(format!("shared:{scope_id}")),
307 +                         permission.clone(),
308 +                     );
309 |         for agent_id in &config.allowed_agents {
310 |             if let Some(permissions) = config.permissions.get(agent_id) {
311 |                 for permission in permissions {
312 ~                     
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:291:25
    |
291 |         owner_agent_id: Option<String>,
    |                         ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:292:17
    |
292 |         config: SharedScopeConfig,
    |                 ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&SharedScopeConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:335:21
    |
333 |           if let Some(config) = shared_scopes.remove(scope_id) {
    |  ______________________________________________________________-
334 | |             // Revoke permissions from all agents
335 | |             let mut access_control = self.access_control.write();
    | |                     ^^^^^^^^^^^^^^
336 | |             for agent_id in &config.allowed_agents {
...   |
341 | |             Ok(())
342 | |         } else {
    | |_________- temporary `access_control` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
335 ~             
336 +                 self.access_control.write().revoke_permissions(agent_id, StateScope::Custom(format!("shared:{scope_id}")));
337 |             for agent_id in &config.allowed_agents {
338 ~                 
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:350:17
    |
348 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
349 |     pub fn grant_permission(&self, agent_id: &str, scope: StateScope, permission: StatePermission) {
350 |         let mut access_control = self.access_control.write();
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
350 ~         
351 +         self.access_control.write().grant_permission(agent_id, scope.clone(), permission.clone());
352 ~         
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:349:59
    |
349 |     pub fn grant_permission(&self, agent_id: &str, scope: StateScope, permission: StatePermission) {
    |                                                           ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:349:83
    |
349 |     pub fn grant_permission(&self, agent_id: &str, scope: StateScope, permission: StatePermission) {
    |                                                                                   ^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&StatePermission`
    |
help: or consider marking this type as `Copy`
   --> llmspell-agents/src/state/isolation.rs:54:1
    |
54  | pub enum StatePermission {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:361:17
    |
359 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
360 |     pub fn revoke_permissions(&self, agent_id: &str, scope: StateScope) {
361 |         let mut access_control = self.access_control.write();
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
361 ~         
362 +         self.access_control.write().revoke_permissions(agent_id, scope.clone());
363 ~         
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:360:61
    |
360 |     pub fn revoke_permissions(&self, agent_id: &str, scope: StateScope) {
    |                                                             ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/state/isolation.rs:373:9
    |
373 | /         match limit {
374 | |             Some(n) => audit_log.iter().rev().take(n).cloned().collect(),
375 | |             None => audit_log.clone(),
376 | |         }
    | |_________^ help: try: `limit.map_or_else(|| audit_log.clone(), |n| audit_log.iter().rev().take(n).cloned().collect())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `self` argument
   --> llmspell-agents/src/state/isolation.rs:388:25
    |
388 |     fn agent_owns_scope(&self, agent_id: &str, scope: &StateScope) -> bool {
    |                         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/state/persistence.rs:103:17
    |
103 |                 MessageRole::Assistant => CoreMessageRole::Assistant,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
103 ~                 MessageRole::Assistant | MessageRole::Tool => CoreMessageRole::Assistant,
104 |                 MessageRole::System => CoreMessageRole::System,
105 ~                 // Map Tool to Assistant for now
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:135:17
    |
132 |     #[instrument(skip(self))]
    |     ------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
135 |         let mut channels = self.channels.write();
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
135 ~         
136 +         let channel = self.channels.write().;
137 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:146:17
    |
132 |     #[instrument(skip(self))]
    |     ------------------------- temporary `subscriptions` is currently being dropped at the end of its contained scope
...
146 |         let mut subscriptions = self.subscriptions.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
146 ~         
147 +         let agent_subs = self.subscriptions.write().or_default();
148 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:166:17
    |
163 |     #[instrument(skip(self))]
    |     ------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
166 |         let mut channels = self.channels.write();
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
166 ~         
167 +         self.channels.write().;
168 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:172:17
    |
163 |     #[instrument(skip(self))]
    |     ------------------------- temporary `subscriptions` is currently being dropped at the end of its contained scope
...
172 |         let mut subscriptions = self.subscriptions.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
172 ~         
173 +         self.subscriptions.write().;
174 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:202:13
    |
192 |     #[instrument(skip(self, payload))]
    |     ---------------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
202 |         let channels = self.channels.read();
    |             ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
202 ~         
203 +         let channel = self.channels.read().;
204 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:230:17
    |
192 |     #[instrument(skip(self, payload))]
    |     ---------------------------------- temporary `message_queue` is currently being dropped at the end of its contained scope
...
230 |         let mut message_queue = self.message_queue.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
230 ~         
231 +         self.message_queue.write().;
232 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:300:17
    |
264 |     #[instrument(skip(self, payload))]
    |     ---------------------------------- temporary `message_queue` is currently being dropped at the end of its contained scope
...
300 |         let mut message_queue = self.message_queue.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
300 ~         
301 +         self.message_queue.write().;
302 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:320:13
    |
313 |     #[instrument(skip(self))]
    |     ------------------------- temporary `subscriptions` is currently being dropped at the end of its contained scope
...
320 |         let subscriptions = self.subscriptions.read();
    |             ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
320 ~         
321 +         let agent_channels = self.subscriptions.read().;
322 ~         
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/state/sharing.rs:334:25
    |
334 | /                         if let Some(since_time) = since {
335 | |                             m.timestamp > since_time
336 | |                         } else {
337 | |                             true
338 | |                         }
    | |_________________________^ help: try: `since.map_or(true, |since_time| m.timestamp > since_time)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:438:17
    |
419 |     #[instrument(skip(self))]
    |     ------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
438 |         let mut channels = self.channels.write();
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
438 ~         
439 +         self.channels.write().;
440 ~         
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/sharing.rs:423:17
    |
423 |         stages: Vec<String>, // Agent IDs in order
    |                 ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:471:17
    |
470 |           let (stages, current_index) = {
    |  _______________________________________-
471 | |             let channels = self.channels.read();
    | |                 ^^^^^^^^
472 | |             let channel = channels
473 | |                 .get(pipeline_id)
...   |
490 | |             (stages, current_index)
491 | |         };
    | |_________- temporary `channels` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
471 ~             
472 +             let channel = self.channels.read().;
473 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:515:17
    |
514 |       pub fn cleanup_expired_channels(&self) {
    |  ____________________________________________-
515 | |         let mut channels = self.channels.write();
    | |                 ^^^^^^^^
516 | |         let now = SystemTime::now();
...   |
548 | |     }
    | |_____- temporary `channels` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
534 ~             channels.remove(&channel_id);
535 +             drop(channels);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:537:21
    |
533 |           for channel_id in expired {
    |  ___________________________________-
534 | |             channels.remove(&channel_id);
...   |
537 | |             let mut message_queue = self.message_queue.write();
    | |                     ^^^^^^^^^^^^^
...   |
546 | |             info!("Cleaned up expired channel {}", channel_id);
547 | |         }
    | |_________- temporary `message_queue` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
537 ~             
538 +             self.message_queue.write().remove(&channel_id);
539 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:541:21
    |
533 |           for channel_id in expired {
    |  ___________________________________-
534 | |             channels.remove(&channel_id);
...   |
541 | |             let mut subscriptions = self.subscriptions.write();
    | |                     ^^^^^^^^^^^^^
...   |
546 | |             info!("Cleaned up expired channel {}", channel_id);
547 | |         }
    | |_________- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
541 ~             
542 +             self.subscriptions.write().;
543 ~             
    |

warning: unused `self` argument
   --> llmspell-agents/src/state/sharing.rs:553:9
    |
553 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-agents/src/state/sharing.rs:554:18
    |
554 |         pattern: &SharingPattern,
    |                  ^^^^^^^^^^^^^^^ help: consider passing by value instead: `SharingPattern`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-agents/src/state/sharing.rs:565:13
    |
565 | /             SharingPattern::Pipeline => {
...   |
569 | |             _ => {
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-agents/src/state/sharing.rs:569:13
    |
569 | /             _ => {
570 | |                 // Other patterns allow any participant to publish
571 | |             }
    | |_____________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:7:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
7 | / /// Base template trait and factory
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: this function has too many lines (132/100)
   --> llmspell-agents/src/templates/base.rs:140:5
    |
140 | /     async fn validate_parameter_value(
141 | |         &self,
142 | |         param_def: &ParameterDefinition,
143 | |         value: &serde_json::Value,
...   |
283 | |         Ok(())
284 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/base.rs:226:34
    |
226 |                       let length = if let Some(s) = value.as_str() {
    |  __________________________________^
227 | |                         s.len()
228 | |                     } else if let Some(arr) = value.as_array() {
229 | |                         arr.len()
230 | |                     } else {
231 | |                         0
232 | |                     };
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
226 ~                     let length = value.as_str().map_or_else(|| if let Some(arr) = value.as_array() {
227 +                         arr.len()
228 +                     } else {
229 +                         0
230 ~                     }, |s| s.len());
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/base.rs:242:34
    |
242 |                       let length = if let Some(s) = value.as_str() {
    |  __________________________________^
243 | |                         s.len()
244 | |                     } else if let Some(arr) = value.as_array() {
245 | |                         arr.len()
246 | |                     } else {
247 | |                         0
248 | |                     };
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
242 ~                     let length = value.as_str().map_or_else(|| if let Some(arr) = value.as_array() {
243 +                         arr.len()
244 +                     } else {
245 +                         0
246 ~                     }, |s| s.len());
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/base.rs:424:9
    |
424 | /         if let Some(template_ids) = self.templates_by_category.get(category) {
425 | |             template_ids
426 | |                 .iter()
427 | |                 .filter_map(|id| self.get_template(id))
...   |
430 | |             Vec::new()
431 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
424 ~         self.templates_by_category.get(category).map_or_else(Vec::new, |template_ids| template_ids
425 +                 .iter()
426 +                 .filter_map(|id| self.get_template(id))
427 +                 .collect())
    |

warning: this function has too many lines (145/100)
   --> llmspell-agents/src/templates/tool_agent.rs:60:5
    |
60  | /     pub fn new() -> Self {
61  | |         let metadata = TemplateMetadata {
62  | |             id: "tool_agent".to_string(),
63  | |             name: "Tool Agent".to_string(),
...   |
218 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-agents/src/templates/tool_agent.rs:340:9
    |
340 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:13:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
13| / /// Orchestrator agent template  
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: this function has too many lines (227/100)
   --> llmspell-agents/src/templates/orchestrator_agent.rs:104:5
    |
104 | /     pub fn new() -> Self {
105 | |         let metadata = TemplateMetadata {
106 | |             id: "orchestrator_agent".to_string(),
107 | |             name: "Orchestrator Agent".to_string(),
...   |
344 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-agents/src/templates/orchestrator_agent.rs:475:9
    |
475 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:16:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
16| / /// Monitor agent template
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: more than 3 bools in a struct
   --> llmspell-agents/src/templates/monitor_agent.rs:76:1
    |
76  | / pub struct MonitorAgentConfig {
77  | |     /// Monitoring scopes this agent covers
78  | |     pub monitoring_scopes: Vec<MonitoringScope>,
79  | |     /// Monitoring interval in seconds
...   |
102 | |     pub max_concurrent_tasks: usize,
103 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: this function has too many lines (154/100)
   --> llmspell-agents/src/templates/monitor_agent.rs:144:5
    |
144 | /     pub fn new() -> Self {
145 | |         let metadata = TemplateMetadata {
146 | |             id: "monitor_agent".to_string(),
147 | |             name: "Monitor Agent".to_string(),
...   |
400 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-agents/src/templates/monitor_agent.rs:508:9
    |
508 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:19:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
19| / /// Template customization API
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:22:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
22| / /// Template validation utilities
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: unused `self` argument
   --> llmspell-agents/src/templates/validation.rs:433:9
    |
433 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/validation.rs:463:30
    |
463 |                   let length = if let Some(s) = value.as_str() {
    |  ______________________________^
464 | |                     s.len()
465 | |                 } else if let Some(arr) = value.as_array() {
466 | |                     arr.len()
467 | |                 } else {
468 | |                     0
469 | |                 };
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
463 ~                 let length = value.as_str().map_or_else(|| if let Some(arr) = value.as_array() {
464 +                     arr.len()
465 +                 } else {
466 +                     0
467 ~                 }, |s| s.len());
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/validation.rs:479:30
    |
479 |                   let length = if let Some(s) = value.as_str() {
    |  ______________________________^
480 | |                     s.len()
481 | |                 } else if let Some(arr) = value.as_array() {
482 | |                     arr.len()
483 | |                 } else {
484 | |                     0
485 | |                 };
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
479 ~                 let length = value.as_str().map_or_else(|| if let Some(arr) = value.as_array() {
480 +                     arr.len()
481 +                 } else {
482 +                     0
483 ~                 }, |s| s.len());
    |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/templates/mod.rs:51:1
   |
51 | pub fn create_builtin_templates() -> TemplateFactory {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/templates/mod.rs:55:5
   |
55 | /     factory
56 | |         .register_template(Box::new(ToolAgentTemplate::new()))
57 | |         .unwrap();
   | |_________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this could be a `const fn`
   --> llmspell-agents/src/tool_context.rs:149:5
    |
149 | /     pub fn context_id(&self) -> &str {
150 | |         &self.context_id
151 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
    = note: `-W clippy::missing-const-for-fn` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::missing_const_for_fn)]`
help: make the function `const`
    |
149 |     pub const fn context_id(&self) -> &str {
    |         +++++

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/tool_context.rs:294:13
    |
290 |       pub async fn get_all_data(&self) -> HashMap<String, JsonValue> {
    |  ____________________________________________________________________-
291 | |         let mut all_data = HashMap::new();
...   |
294 | |         let tool_data = self.tool_data.read().await;
    | |             ^^^^^^^^^
...   |
303 | |         all_data
304 | |     }
    | |_____- temporary `tool_data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
294 ~         
295 +         self.tool_data.read().await.extend(tool_data.clone());
296 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/tool_context.rs:298:13
    |
290 |       pub async fn get_all_data(&self) -> HashMap<String, JsonValue> {
    |  ____________________________________________________________________-
291 | |         let mut all_data = HashMap::new();
...   |
298 | |         let shared_data = self.shared_data.read().await;
    | |             ^^^^^^^^^^^
...   |
303 | |         all_data
304 | |     }
    | |_____- temporary `shared_data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
298 ~         
299 +         self.shared_data.read().await.;
300 ~         
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/tool_discovery.rs:151:9
    |
151 | /         if let Some(registry_info) = self.registry.get_tool_info(name).await {
152 | |             Ok(Some(self.convert_registry_info(&registry_info)))
153 | |         } else {
154 | |             Ok(None)
155 | |         }
    | |_________^ help: try: `(self.registry.get_tool_info(name).await).map_or_else(|| Ok(None), |registry_info| Ok(Some(self.convert_registry_info(&registry_info))))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `self` argument
   --> llmspell-agents/src/tool_discovery.rs:296:9
    |
296 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_discovery.rs:318:32
    |
318 |     fn string_to_tool_category(&self, category_str: &str) -> ToolCategory {
    |                                ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_discovery.rs:333:33
    |
333 |     fn string_to_security_level(&self, level_str: &str) -> Option<SecurityLevel> {
    |                                 ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
198 ~             Self::InvocationFailed { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:197:13
    |
197 |             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
197 ~             Self::RegistrationFailed { .. } | Self::ParameterValidation { .. } => ErrorSeverity::Medium,
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
200 ~             Self::Timeout { .. } => ErrorSeverity::Medium,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:197:13
    |
197 |             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
197 ~             Self::RegistrationFailed { .. } | Self::Timeout { .. } => ErrorSeverity::Medium,
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
201 ~             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:200:13
    |
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
200 ~             Self::ParameterValidation { .. } | Self::Timeout { .. } => ErrorSeverity::Medium,
201 ~             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:202:13
    |
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
200 |             Self::Timeout { .. } => ErrorSeverity::Medium,
201 ~             Self::CompositionFailed { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
199 ~             Self::InvocationFailed { .. } | Self::CompositionFailed { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
201 |             Self::Timeout { .. } => ErrorSeverity::Medium,
202 ~             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:197:13
    |
197 |             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
197 ~             Self::RegistrationFailed { .. } | Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
203 ~             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:200:13
    |
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
200 ~             Self::ParameterValidation { .. } | Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
201 |             Self::Timeout { .. } => ErrorSeverity::Medium,
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
203 ~             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:201:13
    |
201 |             Self::Timeout { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
201 ~             Self::Timeout { .. } | Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
203 ~             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:198:13
    |
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
198 ~             Self::DiscoveryFailed { .. } | Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
...
203 |             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
204 ~             Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:205:13
    |
205 |             Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
203 |             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
204 ~             Self::ResourceLimitExceeded { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
199 ~             Self::InvocationFailed { .. } | Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
...
204 |             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
205 ~             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:202:13
    |
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
202 ~             Self::CompositionFailed { .. } | Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
203 |             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
204 |             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
205 ~             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:207:13
    |
207 |             Self::DependencyResolution { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
205 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
206 ~             Self::DependencyResolution { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
199 ~             Self::InvocationFailed { .. } | Self::DependencyResolution { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
...
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
207 ~             Self::StateCorruption { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:202:13
    |
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
202 ~             Self::CompositionFailed { .. } | Self::DependencyResolution { .. } => ErrorSeverity::High,
203 |             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
...
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
207 ~             Self::StateCorruption { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:205:13
    |
205 |             Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
205 ~             Self::ResourceLimitExceeded { .. } | Self::DependencyResolution { .. } => ErrorSeverity::High,
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
207 ~             Self::StateCorruption { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:206:13
    |
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
206 ~             Self::SecurityViolation { .. } | Self::StateCorruption { .. } => ErrorSeverity::Critical,
207 |             Self::DependencyResolution { .. } => ErrorSeverity::High,
208 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:217:13
    |
217 |             Self::RegistrationFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
216 -             Self::ToolNotFound { .. } => false,
217 -             Self::RegistrationFailed { .. } => false,
216 +             Self::RegistrationFailed { .. } | Self::ToolNotFound { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::InvocationFailed { .. } => true,
219 ~             Self::ParameterValidation { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::ParameterValidation { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
220 ~             Self::Timeout { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::ParameterValidation { .. } => true,
220 ~             Self::Timeout { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::Timeout { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 ~             Self::CompositionFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::Timeout { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 ~             Self::CompositionFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::Timeout { .. } => true,
221 ~             Self::CompositionFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::CompositionFailed { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 |             Self::Timeout { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::CompositionFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 |             Self::Timeout { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::CompositionFailed { .. } => true,
221 |             Self::Timeout { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::CompositionFailed { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:223:13
    |
223 |             Self::AgentWrappingFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
216 ~             Self::RegistrationFailed { .. } => false,
217 |             Self::DiscoveryFailed { .. } => true,
...
221 |             Self::CompositionFailed { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } | Self::ToolNotFound { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:217:13
    |
217 |             Self::RegistrationFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
217 ~             Self::RegistrationFailed { .. } | Self::AgentWrappingFailed { .. } => false,
218 |             Self::DiscoveryFailed { .. } => true,
...
222 |             Self::CompositionFailed { .. } => true,
223 ~             Self::ContextPropagationFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::ContextPropagationFailed { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
...
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::ContextPropagationFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
...
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::ContextPropagationFailed { .. } => true,
221 |             Self::Timeout { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::ContextPropagationFailed { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:222:13
    |
222 |             Self::CompositionFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
222 ~             Self::CompositionFailed { .. } | Self::ContextPropagationFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
...
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
...
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::ResourceLimitExceeded { .. } => true,
221 |             Self::Timeout { .. } => true,
...
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::ResourceLimitExceeded { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:222:13
    |
222 |             Self::CompositionFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
222 ~             Self::CompositionFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:224:13
    |
224 |             Self::ContextPropagationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
224 ~             Self::ContextPropagationFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:226:13
    |
226 |             Self::SecurityViolation { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
216 ~             Self::RegistrationFailed { .. } => false,
217 |             Self::DiscoveryFailed { .. } => true,
...
224 |             Self::ResourceLimitExceeded { .. } => true,
225 ~             Self::SecurityViolation { .. } | Self::ToolNotFound { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:217:13
    |
217 |             Self::RegistrationFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
217 ~             Self::RegistrationFailed { .. } | Self::SecurityViolation { .. } => false,
218 |             Self::DiscoveryFailed { .. } => true,
...
225 |             Self::ResourceLimitExceeded { .. } => true,
226 ~             Self::DependencyResolution { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:223:13
    |
223 |             Self::AgentWrappingFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
223 ~             Self::AgentWrappingFailed { .. } | Self::SecurityViolation { .. } => false,
224 |             Self::ContextPropagationFailed { .. } => true,
225 |             Self::ResourceLimitExceeded { .. } => true,
226 ~             Self::DependencyResolution { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::DependencyResolution { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::DependencyResolution { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::DependencyResolution { .. } => true,
221 |             Self::Timeout { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::DependencyResolution { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:222:13
    |
222 |             Self::CompositionFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
222 ~             Self::CompositionFailed { .. } | Self::DependencyResolution { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:224:13
    |
224 |             Self::ContextPropagationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
224 ~             Self::ContextPropagationFailed { .. } | Self::DependencyResolution { .. } => true,
225 |             Self::ResourceLimitExceeded { .. } => true,
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:225:13
    |
225 |             Self::ResourceLimitExceeded { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
225 ~             Self::ResourceLimitExceeded { .. } | Self::DependencyResolution { .. } => true,
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: casting `u128` to `u64` may truncate the value
   --> llmspell-agents/src/tool_errors.rs:329:35
    |
329 |                 duration_ms: Some(duration.as_millis() as u64),
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
    = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
    |
329 -                 duration_ms: Some(duration.as_millis() as u64),
329 +                 duration_ms: Some(u64::try_from(duration.as_millis())),
    |

warning: this function has too many lines (121/100)
   --> llmspell-agents/src/tool_errors.rs:358:5
    |
358 | /     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
359 | |         match self {
360 | |             Self::ToolNotFound {
361 | |                 tool_name,
...   |
480 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/tool_errors.rs:574:5
    |
574 | /     pub async fn handle_error(
575 | |         &self,
576 | |         error: ToolIntegrationError,
577 | |         context: &mut ErrorContext,
578 | |     ) -> Result<Option<JsonValue>> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: more than 3 bools in a struct
  --> llmspell-agents/src/tool_invocation.rs:45:1
   |
45 | / pub struct InvocationConfig {
46 | |     /// Maximum execution time per tool call
47 | |     pub max_execution_time: Duration,
48 | |     /// Whether to validate parameters before invocation
...  |
59 | |     pub custom_validators: Vec<String>,
60 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: this could be rewritten as `let...else`
   --> llmspell-agents/src/tool_manager.rs:292:9
    |
292 | /         let registry_info = match self.registry.get_tool_info(tool_name).await {
293 | |             Some(info) => info,
294 | |             None => return Ok(None),
295 | |         };
    | |__________^ help: consider writing: `let Some(registry_info) = self.registry.get_tool_info(tool_name).await else { return Ok(None) };`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else

warning: item in documentation is missing backticks
   --> llmspell-agents/src/tool_manager.rs:315:31
    |
315 |     /// - Any step fails with ErrorStrategy::Fail
    |                               ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
315 -     /// - Any step fails with ErrorStrategy::Fail
315 +     /// - Any step fails with `ErrorStrategy::Fail`
    |

warning: used underscore-prefixed binding
   --> llmspell-agents/src/tool_manager.rs:369:56
    |
369 | ...                   return Err(_last_error);
    |                                  ^^^^^^^^^^^
    |
note: binding is defined here
   --> llmspell-agents/src/tool_manager.rs:348:33
    |
348 | ...                   let mut _last_error = error;
    |                           ^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding
    = note: `-W clippy::used-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::used_underscore_binding)]`

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/tool_manager.rs:384:9
    |
384 | /         if let Some(final_output) = results.last() {
385 | |             Ok(final_output.clone())
386 | |         } else {
387 | |             Ok(AgentOutput::text(
388 | |                 "Composition completed with no output".to_string(),
389 | |             ))
390 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
384 ~         results.last().map_or_else(|| Ok(AgentOutput::text(
385 +                 "Composition completed with no output".to_string(),
386 +             )), |final_output| Ok(final_output.clone()))
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-agents/src/tool_manager.rs:415:5
    |
415 | /     fn prepare_step_parameters(
416 | |         &self,
417 | |         base_parameters: &JsonValue,
418 | |         context_mode: &ContextMode,
...   |
442 | |         Ok(parameters)
443 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove `Result` from the return type...
    |
421 -     ) -> Result<JsonValue> {
421 +     ) -> serde_json::Value {
    |
help: ...and then change returning expressions
    |
442 -         Ok(parameters)
442 +         parameters
    |

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:447:9
    |
447 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:465:35
    |
465 |     fn registry_info_to_tool_info(&self, registry_info: &RegistryToolInfo) -> ToolInfo {
    |                                   ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:486:32
    |
486 |     fn string_to_tool_category(&self, category_str: &str) -> ToolCategory {
    |                                ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:501:33
    |
501 |     fn string_to_security_level(&self, level_str: &str) -> Option<SecurityLevel> {
    |                                 ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: more than 3 bools in a struct
  --> llmspell-agents/src/testing/framework.rs:26:1
   |
26 | / pub struct TestConfig {
27 | |     /// Maximum test duration before timeout
28 | |     pub timeout: Duration,
29 | |     /// Enable debug logging
...  |
38 | |     pub metadata: HashMap<String, serde_json::Value>,
39 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:158:5
    |
158 | /     pub async fn run_test<F, Fut>(
159 | |         &self,
160 | |         agent_config: AgentConfig,
161 | |         test_fn: F,
...   |
164 | |         F: FnOnce(Arc<dyn Agent>) -> Fut,
165 | |         Fut: std::future::Future<Output = Result<()>>,
    | |______________________________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:187:29
    |
187 |             let mut guard = self.interactions.lock().unwrap();
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:208:5
    |
208 | /     pub async fn execute_and_record(
209 | |         &self,
210 | |         agent: Arc<dyn Agent>,
211 | |         input: AgentInput,
212 | |         context: ExecutionContext,
213 | |     ) -> Result<AgentOutput, LLMSpellError> {
    | |___________________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:231:36
    |
231 |             let mut interactions = self.interactions.lock().unwrap();
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:274:5
    |
274 |     pub fn record_resource_usage(&self, memory: usize, cpu_time: Duration, tool_calls: usize) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:275:25
    |
275 |         let mut usage = self.resource_usage.lock().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:542:5
    |
542 |     pub fn new(receiver: broadcast::Receiver<LifecycleEvent>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:552:17
    |
552 |                 events_clone.lock().unwrap().push(event);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:564:5
    |
564 |     pub fn get_events(&self) -> Vec<LifecycleEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:565:9
    |
565 |         self.events.lock().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:569:5
    |
569 |     pub fn clear(&self) {
    |     ^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:570:9
    |
570 |         self.events.lock().unwrap().clear();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:575:5
    |
575 |     pub fn find_events(&self, event_type: LifecycleEventType) -> Vec<LifecycleEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:576:9
    |
576 | /         self.events
577 | |             .lock()
578 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/testing/framework.rs:575:43
    |
575 |     pub fn find_events(&self, event_type: LifecycleEventType) -> Vec<LifecycleEvent> {
    |                                           ^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&LifecycleEventType`
    |
help: or consider marking this type as `Copy`
   --> llmspell-agents/src/lifecycle/events.rs:17:1
    |
17  | pub enum LifecycleEventType {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: calling `StateMachineConfig::default()` is more clear than this expression
   --> llmspell-agents/src/testing/mocks.rs:118:70
    |
118 |             AgentStateMachine::new(config.agent_config.name.clone(), Default::default());
    |                                                                      ^^^^^^^^^^^^^^^^^^ help: try: `StateMachineConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: calling `ToolUsageStats::default()` is more clear than this expression
   --> llmspell-agents/src/testing/mocks.rs:527:31
    |
527 |             tool_usage_stats: Default::default(),
    |                               ^^^^^^^^^^^^^^^^^^ help: try: `ToolUsageStats::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/testing/mocks.rs:556:17
    |
460 | #[async_trait]
    | -------------- temporary `conversation` is currently being dropped at the end of its contained scope
...
556 |         let mut conversation = self.conversation.lock().unwrap();
    |                 ^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
579 ~             });
580 +             drop(conversation);
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/testing/mocks.rs:567:17
    |
567 | /                 llmspell_state_persistence::agent_state::MessageRole::Assistant => {
568 | |                     llmspell_core::traits::agent::MessageRole::Assistant
569 | |                 }
    | |_________________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
567 ~                 llmspell_state_persistence::agent_state::MessageRole::Assistant | llmspell_state_persistence::agent_state::MessageRole::Tool => {
568 |                     llmspell_core::traits::agent::MessageRole::Assistant
569 |                 }
570 ~                 // Map Tool to Assistant
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/mocks.rs:621:5
    |
621 |     pub fn set_response(&self, input_key: &str, output: ToolOutput) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/mocks.rs:622:9
    |
622 | /         self.responses
623 | |             .lock()
624 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/testing/mocks.rs:684:13
    |
649 | #[async_trait]
    | -------------- temporary `responses` is currently being dropped at the end of its contained scope
...
684 |         let responses = self.responses.lock().unwrap();
    |             ^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
684 ~         
685 +         let tool_output = self.responses.lock().unwrap().;
686 |
687 ~         
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/testing/mocks.rs:686:27
    |
686 |           let tool_output = if let Some(response) = responses.get(&input_str) {
    |  ___________________________^
687 | |             response.clone()
688 | |         } else {
...   |
701 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
686 ~         let tool_output = responses.get(&input_str).map_or_else(|| ToolOutput {
687 +                 success: true,
688 +                 data: serde_json::json!({
689 +                     "mock": true,
690 +                     "tool": self.metadata.name,
691 +                     "input": params,
692 +                     "timestamp": chrono::Utc::now().to_rfc3339(),
693 +                 }),
694 +                 error: None,
695 +                 execution_time_ms: Some(10),
696 ~             }, |response| response.clone());
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/testing/scenarios.rs:137:13
    |
137 |             (Self::Success, Ok(_)) => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
136 -             (Self::Error, Err(_)) => true,
137 -             (Self::Success, Ok(_)) => true,
136 +             (Self::Success, Ok(_)) | (Self::Error, Err(_)) => true,
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/testing/utils.rs:190:9
    |
190 | /         match tokio::time::timeout(duration, future).await {
191 | |             Ok(result) => Ok(result),
192 | |             Err(_) => Err(format!("Operation timed out after {duration:?}")),
193 | |         }
    | |_________^ help: try: `(tokio::time::timeout(duration, future).await).map_or_else(|_| Err(format!("Operation timed out after {duration:?}")), |result| Ok(result))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/composition/delegation.rs:237:5
    |
237 | /     async fn select_agent(
238 | |         &self,
239 | |         matching_agents: Vec<String>,
240 | |         _request: &DelegationRequest,
...   |
283 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/composition/hierarchical.rs:142:5
    |
142 | /     async fn would_create_cycle(&self, child: &Arc<dyn HierarchicalAgent>) -> bool {
143 | |         // Check if child is an ancestor of self
144 | |         let mut current = self.parent.read().unwrap().clone();
145 | |         while let Some(weak_parent) = current {
...   |
158 | |         false
159 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/context/distributed.rs:462:5
    |
462 | /     async fn start_heartbeat(&self) {
463 | |         let discovery = self.discovery.clone();
464 | |         let node_id = self.local_node.id.clone();
...   |
475 | |         });
476 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
note: `await` used in an async block, which does not require the enclosing function to be `async`
   --> llmspell-agents/src/context/distributed.rs:470:33
    |
470 |                 interval.tick().await;
    |                                 ^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/context/shared_memory.rs:515:5
    |
515 | /     pub async fn cleanup(&self) {
516 | |         let _now = Instant::now();
517 | |         let mut regions = self.regions.write().unwrap();
...   |
528 | |         });
529 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/factory.rs:389:5
    |
389 | /     async fn initialize_agent_lifecycle(&self, agent_type: &str, agent_name: &str) -> Result<()> {
390 | |         info!(
391 | |             "Agent '{}' of type '{}' created with lifecycle management",
392 | |             agent_name, agent_type
...   |
397 | |         Ok(())
398 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/health.rs:444:5
    |
444 | /     pub async fn start_monitoring(&self) -> Result<()> {
445 | |         if !self.config.enable_monitoring {
446 | |             return Ok(());
...   |
466 | |         Ok(())
467 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
note: `await` used in an async block, which does not require the enclosing function to be `async`
   --> llmspell-agents/src/health.rs:458:39
    |
458 |                 interval_timer.tick().await;
    |                                       ^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:257:5
    |
257 | /     async fn try_save_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<()> {
...   |
268 | |         Ok(())
269 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:307:5
    |
307 | /     async fn try_restore_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<bool> {
...   |
316 | |         Ok(false)
317 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
    --> llmspell-agents/src/lifecycle/state_machine.rs:1058:5
     |
1058 | /     pub async fn get_hook_metrics(
1059 | |         &self,
1060 | |         hook_name: &str,
1061 | |     ) -> Option<llmspell_hooks::PerformanceMetrics> {
1062 | |         self.hook_executor.as_ref()?.get_metrics(hook_name)
1063 | |     }
     | |_____^
     |
     = help: consider removing the `async` from this function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/monitoring/health.rs:315:5
    |
315 | /     pub async fn start_monitoring(self: Arc<Self>) {
316 | |         let monitor = self;
317 | |         tokio::spawn(async move {
318 | |             let mut interval = tokio::time::interval(monitor.check_interval);
...   |
342 | |         });
343 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
note: `await` used in an async block, which does not require the enclosing function to be `async`
   --> llmspell-agents/src/monitoring/health.rs:320:33
    |
320 |                 interval.tick().await;
    |                                 ^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/monitoring/performance.rs:446:5
    |
446 | /     pub async fn start_monitoring(self: Arc<Self>) {
447 | |         let monitor = self;
448 | |         tokio::spawn(async move {
449 | |             let mut interval = tokio::time::interval(monitor.snapshot_interval);
...   |
479 | |         });
480 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
note: `await` used in an async block, which does not require the enclosing function to be `async`
   --> llmspell-agents/src/monitoring/performance.rs:452:33
    |
452 |                 interval.tick().await;
    |                                 ^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/state/isolation.rs:507:5
    |
507 | /     pub async fn get(&self, scope: StateScope, _key: &str) -> Result<Option<serde_json::Value>> {
508 | |         // Check access permission
509 | |         if !self
510 | |             .isolation_manager
...   |
518 | |         Ok(None)
519 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/state/isolation.rs:526:5
    |
526 | /     pub async fn set(
527 | |         &self,
528 | |         scope: StateScope,
529 | |         _key: &str,
...   |
541 | |         Ok(())
542 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/state/isolation.rs:549:5
    |
549 | /     pub async fn delete(&self, scope: StateScope, _key: &str) -> Result<()> {
550 | |         // Check access permission
551 | |         if !self
552 | |             .isolation_manager
...   |
559 | |         Ok(())
560 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/state/isolation.rs:567:5
    |
567 | /     pub async fn list_keys(&self, scope: StateScope) -> Result<Vec<String>> {
568 | |         // Check access permission
569 | |         if !self
570 | |             .isolation_manager
...   |
577 | |         Ok(vec![])
578 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/tool_invocation.rs:342:5
    |
342 | /     async fn validate_tool_parameters(
343 | |         &self,
344 | |         tool: &dyn Tool,
345 | |         parameters: &JsonValue,
...   |
430 | |         Ok(warnings)
431 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-agents/src/testing/framework.rs:125:5
    |
125 | /     pub async fn new(config: TestConfig) -> Self {
126 | |         // Create a mock provider manager for testing
127 | |         let provider_manager = Arc::new(llmspell_providers::ProviderManager::new());
128 | |         let factory = Arc::new(DefaultAgentFactory::new(provider_manager));
...   |
137 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: this argument is a mutable reference, but not used mutably
   --> llmspell-agents/src/tool_manager.rs:398:18
    |
398 |         context: &mut ExecutionContext,
    |                  ^^^^^^^^^^^^^^^^^^^^^ help: consider changing to: `&ExecutionContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_ref_mut
    = note: `-W clippy::needless-pass-by-ref-mut` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::needless_pass_by_ref_mut)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/examples/information_disclosure_prevention.rs:83:9
   |
83 |         println!("  {} -> {}", log, filtered);
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
83 -         println!("  {} -> {}", log, filtered);
83 +         println!("  {log} -> {filtered}");
   |

warning: adding items after statements is confusing, since items exist from the start of the scope
  --> llmspell-utils/examples/information_disclosure_prevention.rs:99:5
   |
99 |     use llmspell_core::LLMSpellError;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements
   = note: `-W clippy::items-after-statements` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::items_after_statements)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/examples/information_disclosure_prevention.rs:138:9
    |
138 |         println!("\n  Original: {:?}", error);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
138 -         println!("\n  Original: {:?}", error);
138 +         println!("\n  Original: {error:?}");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/tests/path_security_penetration_test.rs:31:9
   |
31 | /         assert!(
32 | |             result.is_err(),
33 | |             "Path traversal attack '{}' should be blocked",
34 | |             attack
35 | |         );
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/tests/path_security_penetration_test.rs:56:9
   |
56 | /         assert!(
57 | |             result.is_err(),
58 | |             "Unicode path traversal attack '{}' should be blocked",
59 | |             attack
60 | |         );
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/tests/path_security_penetration_test.rs:80:9
   |
80 | /         assert!(
81 | |             result.is_err(),
82 | |             "Null byte injection attack '{}' should be blocked",
83 | |             attack
84 | |         );
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:103:9
    |
103 | /         assert!(
104 | |             result.is_err(),
105 | |             "Case sensitivity attack '{}' should be blocked",
106 | |             attack
107 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:123:9
    |
123 | /         assert!(
124 | |             result.is_err(),
125 | |             "Double encoding attack '{}' should be blocked",
126 | |             attack
127 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:145:9
    |
145 | /         assert!(
146 | |             result.is_err(),
147 | |             "Overlong UTF-8 attack '{}' should be blocked",
148 | |             attack
149 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:164:24
    |
164 |         let path_str = format!("/tmp/{}.txt", device);
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
164 -         let path_str = format!("/tmp/{}.txt", device);
164 +         let path_str = format!("/tmp/{device}.txt");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:166:9
    |
166 | /         assert!(
167 | |             result.is_err(),
168 | |             "Windows reserved device name '{}' should be blocked",
169 | |             device
170 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:250:9
    |
250 | /         assert!(
251 | |             result.is_err(),
252 | |             "Permission escalation attack '{}' should be blocked",
253 | |             attack
254 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:346:9
    |
346 | /         assert!(
347 | |             result.is_err(),
348 | |             "Complex combination attack '{}' should be blocked",
349 | |             attack
350 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:367:9
    |
367 | /         assert!(
368 | |             result.is_err(),
369 | |             "Edge case path '{}' should be blocked",
370 | |             edge_case
371 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:388:9
    |
388 | /         assert!(
389 | |             result.is_err(),
390 | |             "Cross-platform edge case '{}' should be blocked",
391 | |             edge_case
392 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:403:22
    |
403 |         let attack = format!("../../../etc/passwd{}", i);
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
403 -         let attack = format!("../../../etc/passwd{}", i);
403 +         let attack = format!("../../../etc/passwd{i}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/path_security_penetration_test.rs:405:9
    |
405 |         assert!(result.is_err(), "Attack {} should be blocked", i);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
405 -         assert!(result.is_err(), "Attack {} should be blocked", i);
405 +         assert!(result.is_err(), "Attack {i} should be blocked");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/examples/response_builder.rs:93:5
   |
93 |     println!("Text output: {}", text);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
93 -     println!("Text output: {}", text);
93 +     println!("Text output: {text}");
   |

warning: casts from `u32` to `u64` can be expressed infallibly using `From`
   --> llmspell-utils/tests/circuit_breaker_integration.rs:182:9
    |
182 |         success_count.load(Ordering::SeqCst) as u64 + failure_count.load(Ordering::SeqCst) as u64
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `u64::from` instead
    |
182 -         success_count.load(Ordering::SeqCst) as u64 + failure_count.load(Ordering::SeqCst) as u64
182 +         u64::from(success_count.load(Ordering::SeqCst)) + failure_count.load(Ordering::SeqCst) as u64
    |

warning: casts from `u32` to `u64` can be expressed infallibly using `From`
   --> llmspell-utils/tests/circuit_breaker_integration.rs:182:55
    |
182 |         success_count.load(Ordering::SeqCst) as u64 + failure_count.load(Ordering::SeqCst) as u64
    |                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `u64::from` instead
    |
182 -         success_count.load(Ordering::SeqCst) as u64 + failure_count.load(Ordering::SeqCst) as u64
182 +         success_count.load(Ordering::SeqCst) as u64 + u64::from(failure_count.load(Ordering::SeqCst))
    |

warning: strict comparison of `f32` or `f64`
   --> llmspell-utils/tests/circuit_breaker_integration.rs:251:5
    |
251 |     assert_eq!(metrics.success_rate(), 95.0);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#float_cmp
    = note: `-W clippy::float-cmp` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::float_cmp)]`
    = note: this warning originates in the macro `assert_eq` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/circuit_breaker_integration.rs:345:21
    |
345 |         Ok(body) => println!("Response: {}", body),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
345 -         Ok(body) => println!("Response: {}", body),
345 +         Ok(body) => println!("Response: {body}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/circuit_breaker_integration.rs:346:19
    |
346 |         Err(e) => eprintln!("Request failed: {}", e),
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
346 -         Err(e) => eprintln!("Request failed: {}", e),
346 +         Err(e) => eprintln!("Request failed: {e}"),
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/tests/resource_limits_integration.rs:42:9
   |
42 | /         assert!(
43 | |             tracker.track_operation().is_ok(),
44 | |             "Operation {} should succeed",
45 | |             i
46 | |         );
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`

warning: single-character string constant used as pattern
   --> llmspell-utils/tests/resource_limits_integration.rs:121:40
    |
121 |         assert!(e.to_string().contains("3"));
    |                                        ^^^ help: consider using a `char`: `'3'`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_char_pattern
    = note: `-W clippy::single-char-pattern` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_char_pattern)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-utils/tests/api_key_management_integration.rs:13:17
   |
13 |         key_id: format!("{}_key", service),
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
13 -         key_id: format!("{}_key", service),
13 +         key_id: format!("{service}_key"),
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/api_key_management_integration.rs:211:46
    |
211 |         let metadata = create_test_metadata(&format!("service_{}", i));
    |                                              ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
211 -         let metadata = create_test_metadata(&format!("service_{}", i));
211 +         let metadata = create_test_metadata(&format!("service_{i}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/api_key_management_integration.rs:214:18
    |
214 |                 &format!("service_{}_key", i),
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
214 -                 &format!("service_{}_key", i),
214 +                 &format!("service_{i}_key"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/api_key_management_integration.rs:215:18
    |
215 |                 &format!("key_{}", i),
    |                  ^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
215 -                 &format!("key_{}", i),
215 +                 &format!("key_{i}"),
    |

warning: `llmspell-agents` (lib) generated 386 warnings (run `cargo clippy --fix --lib -p llmspell-agents` to apply 44 suggestions)
warning: `llmspell-utils` (example "information_disclosure_prevention") generated 3 warnings (run `cargo clippy --fix --example "information_disclosure_prevention"` to apply 2 suggestions)
warning: `llmspell-utils` (test "path_security_penetration_test") generated 14 warnings (run `cargo clippy --fix --test "path_security_penetration_test"` to apply 14 suggestions)
warning: `llmspell-utils` (example "response_builder") generated 1 warning (run `cargo clippy --fix --example "response_builder"` to apply 1 suggestion)
warning: `llmspell-utils` (test "circuit_breaker_integration") generated 5 warnings (run `cargo clippy --fix --test "circuit_breaker_integration"` to apply 4 suggestions)
warning: `llmspell-utils` (test "resource_limits_integration") generated 2 warnings (run `cargo clippy --fix --test "resource_limits_integration"` to apply 2 suggestions)
warning: `llmspell-utils` (test "api_key_management_integration") generated 4 warnings (run `cargo clippy --fix --test "api_key_management_integration"` to apply 4 suggestions)
warning: very complex type used. Consider factoring parts into `type` definitions
   --> llmspell-bridge/src/engine/factory.rs:391:25
    |
391 | static PLUGIN_REGISTRY: LazyLock<Arc<RwLock<HashMap<String, Box<dyn ScriptEnginePlugin>>>>> =
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#type_complexity
    = note: `-W clippy::type-complexity` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::type_complexity)]`

warning: this function has too many lines (260/100)
   --> llmspell-bridge/src/providers_discovery.rs:44:5
    |
44  | /     pub fn new() -> Self {
45  | |         let mut provider_types = HashMap::new();
...   |
326 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:394:5
    |
394 | /     pub fn javascript_config(mut self, config: JSConfig) -> Self {
395 | |         self.config.engines.javascript = config;
396 | |         self
397 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
    = note: `-W clippy::missing-const-for-fn` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::missing_const_for_fn)]`
help: make the function `const`
    |
394 |     pub const fn javascript_config(mut self, config: JSConfig) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:491:5
    |
491 | /     pub fn max_concurrent_scripts(mut self, max: usize) -> Self {
492 | |         self.config.max_concurrent_scripts = max;
493 | |         self
494 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
491 |     pub const fn max_concurrent_scripts(mut self, max: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:498:5
    |
498 | /     pub fn script_timeout_seconds(mut self, timeout: u64) -> Self {
499 | |         self.config.script_timeout_seconds = timeout;
500 | |         self
501 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
498 |     pub const fn script_timeout_seconds(mut self, timeout: u64) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:505:5
    |
505 | /     pub fn enable_streaming(mut self, enable: bool) -> Self {
506 | |         self.config.enable_streaming = enable;
507 | |         self
508 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
505 |     pub const fn enable_streaming(mut self, enable: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:512:5
    |
512 | /     pub fn security(mut self, security: SecurityConfig) -> Self {
513 | |         self.config.security = security;
514 | |         self
515 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
512 |     pub const fn security(mut self, security: SecurityConfig) -> Self {
    |         +++++

warning: more than 3 bools in a struct
   --> llmspell-bridge/src/runtime.rs:575:1
    |
575 | / pub struct StatePersistenceConfig {
576 | |     /// Enable state persistence
577 | |     pub enabled: bool,
578 | |     /// Backend type for storage (memory, file, redis, etc.)
...   |
591 | |     pub backup: Option<BackupConfig>,
592 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
    = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/storage.rs:2:78
  |
2 | //! ABOUTME: Provides discovery of available storage backends (Memory, Sled, RocksDB)
  |                                                                              ^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
2 - //! ABOUTME: Provides discovery of available storage backends (Memory, Sled, RocksDB)
2 + //! ABOUTME: Provides discovery of available storage backends (Memory, Sled, `RocksDB`)
  |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:252:58
    |
252 |     /// Performance optimization preset (fast, balanced, storage_optimized)
    |                                                          ^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
252 -     /// Performance optimization preset (fast, balanced, storage_optimized)
252 +     /// Performance optimization preset (fast, balanced, `storage_optimized`)
    |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:269:34
    |
269 |     /// Create a new builder for StorageConfig
    |                                  ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
269 -     /// Create a new builder for StorageConfig
269 +     /// Create a new builder for `StorageConfig`
    |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:276:17
    |
276 | /// Builder for StorageConfig
    |                 ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
276 - /// Builder for StorageConfig
276 + /// Builder for `StorageConfig`
    |

warning: this could be a `const fn`
   --> llmspell-bridge/src/storage.rs:312:5
    |
312 | /     pub fn enable_compression(mut self, enable: bool) -> Self {
313 | |         self.config.enable_compression = enable;
314 | |         self
315 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
312 |     pub const fn enable_compression(mut self, enable: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/storage.rs:319:5
    |
319 | /     pub fn enable_encryption(mut self, enable: bool) -> Self {
320 | |         self.config.enable_encryption = enable;
321 | |         self
322 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
319 |     pub const fn enable_encryption(mut self, enable: bool) -> Self {
    |         +++++

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:358:25
    |
358 |     /// Build the final StorageConfig
    |                         ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
358 -     /// Build the final StorageConfig
358 +     /// Build the final `StorageConfig`
    |

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/tools.rs:57:15
   |
57 |     registry: Arc<ComponentRegistry>,
   |               ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
   = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/tools.rs:74:15
   |
74 |     registry: Arc<ComponentRegistry>,
   |               ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/tools.rs:92:15
   |
92 |     registry: Arc<ComponentRegistry>,
   |               ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/tools.rs:109:37
    |
109 | pub fn get_all_tool_names(registry: Arc<ComponentRegistry>) -> Vec<String> {
    |                                     ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/tools.rs:115:35
    |
115 | pub fn get_tool_by_name(registry: Arc<ComponentRegistry>, name: &str) -> Option<Arc<dyn Tool>> {
    |                                   ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:133:33
    |
133 |         HashCalculatorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: calling `TextManipulatorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:137:34
    |
137 |         TextManipulatorTool::new(Default::default())
    |                                  ^^^^^^^^^^^^^^^^^^ help: try: `TextManipulatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:140:32
    |
140 |         UuidGeneratorTool::new(Default::default())
    |                                ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `CsvAnalyzerConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:150:30
    |
150 |         CsvAnalyzerTool::new(Default::default())
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `CsvAnalyzerConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `JsonProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:153:32
    |
153 |         JsonProcessorTool::new(Default::default())
    |                                ^^^^^^^^^^^^^^^^^^ help: try: `JsonProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `GraphQLConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:156:31
    |
156 |         GraphQLQueryTool::new(Default::default())
    |                               ^^^^^^^^^^^^^^^^^^ help: try: `GraphQLConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:159:30
    |
159 |         HttpRequestTool::new(Default::default())
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileConverterConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:177:40
    |
177 |         move || FileConverterTool::new(Default::default(), file_sandbox_converter),
    |                                        ^^^^^^^^^^^^^^^^^^ help: try: `FileConverterConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileOperationsConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:181:33
    |
181 |         FileOperationsTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileSearchConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:190:37
    |
190 |         move || FileSearchTool::new(Default::default(), file_sandbox_search),
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `FileSearchConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileWatcherConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:199:38
    |
199 |         move || FileWatcherTool::new(Default::default(), file_sandbox_watcher),
    |                                      ^^^^^^^^^^^^^^^^^^ help: try: `FileWatcherConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `EnvironmentReaderConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:209:36
    |
209 |         EnvironmentReaderTool::new(Default::default())
    |                                    ^^^^^^^^^^^^^^^^^^ help: try: `EnvironmentReaderConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ProcessExecutorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:212:34
    |
212 |         ProcessExecutorTool::new(Default::default())
    |                                  ^^^^^^^^^^^^^^^^^^ help: try: `ProcessExecutorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ServiceCheckerConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:215:33
    |
215 |         ServiceCheckerTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `ServiceCheckerConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `SystemMonitorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:218:32
    |
218 |         SystemMonitorTool::new(Default::default())
    |                                ^^^^^^^^^^^^^^^^^^ help: try: `SystemMonitorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `AudioProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:228:33
    |
228 |         AudioProcessorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `AudioProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ImageProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:231:33
    |
231 |         ImageProcessorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `ImageProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `VideoProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:234:33
    |
234 |         VideoProcessorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `VideoProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `WebSearchConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:244:28
    |
244 |         WebSearchTool::new(Default::default())
    |                            ^^^^^^^^^^^^^^^^^^ help: try: `WebSearchConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `WebScraperConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:253:29
    |
253 |         WebScraperTool::new(Default::default())
    |                             ^^^^^^^^^^^^^^^^^^ help: try: `WebScraperConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `EmailSenderConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:267:30
    |
267 |         EmailSenderTool::new(Default::default())
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `EmailSenderConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `DatabaseConnectorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:270:36
    |
270 |         DatabaseConnectorTool::new(Default::default())
    |                                    ^^^^^^^^^^^^^^^^^^ help: try: `DatabaseConnectorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: this could be a `const fn`
   --> llmspell-bridge/src/tools.rs:303:5
    |
303 | /     pub fn new(registry: Arc<ComponentRegistry>) -> Self {
304 | |         Self { registry }
305 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
303 |     pub const fn new(registry: Arc<ComponentRegistry>) -> Self {
    |         +++++

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/event_bridge.rs:53:29
   |
53 |     /// Returns an error if EventBridge initialization fails
   |                             ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
53 -     /// Returns an error if EventBridge initialization fails
53 +     /// Returns an error if `EventBridge` initialization fails
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/agent_global.rs:97:26
   |
97 |                 message: format!("Failed to inject Agent global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
97 -                 message: format!("Failed to inject Agent global for JavaScript: {}", e),
97 +                 message: format!("Failed to inject Agent global for JavaScript: {e}"),
   |

warning: this function has too many lines (292/100)
   --> llmspell-bridge/src/globals/event_global.rs:55:5
    |
55  | /     fn inject_lua(&self, lua: &mlua::Lua, context: &GlobalContext) -> Result<(), LLMSpellError> {
56  | |         use crate::lua::sync_utils::block_on_async;
57  | |         use std::time::Duration;
...   |
411 | |         Ok(())
412 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this could be a `const fn`
   --> llmspell-bridge/src/globals/injection.rs:199:5
    |
199 | /     pub fn get_metrics(&self) -> &InjectionMetrics {
200 | |         self.registry.metrics()
201 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
199 |     pub const fn get_metrics(&self) -> &InjectionMetrics {
    |         +++++

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-bridge/src/globals/session_infrastructure.rs:16:1
   |
16 | / pub async fn get_or_create_session_infrastructure(
17 | |     context: &GlobalContext,
18 | |     config: &SessionConfig,
19 | | ) -> Result<SessionInfrastructure> {
   | |__________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
   = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: casting `u64` to `i64` may wrap around the value
  --> llmspell-bridge/src/globals/session_infrastructure.rs:42:13
   |
42 |             config.session_timeout_seconds as i64,
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap
   = note: `-W clippy::cast-possible-wrap` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_wrap)]`

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/session_infrastructure.rs:99:1
    |
99  | / fn get_or_create_hook_registry(context: &GlobalContext) -> Result<Arc<HookRegistry>> {
100 | |     if let Some(registry) = context.get_bridge::<HookRegistry>("hook_registry") {
101 | |         return Ok(registry);
...   |
107 | |     Ok(registry)
108 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove `Result` from the return type...
    |
99  - fn get_or_create_hook_registry(context: &GlobalContext) -> Result<Arc<HookRegistry>> {
99  + fn get_or_create_hook_registry(context: &GlobalContext) -> std::sync::Arc<llmspell_hooks::HookRegistry> {
    |
help: ...and then change returning expressions
    |
101 ~         return registry;
102 |     }
...
106 |     context.set_bridge("hook_registry", registry.clone());
107 ~     registry
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/session_infrastructure.rs:111:1
    |
111 | / fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
112 | |     if let Some(executor) = context.get_bridge::<HookExecutor>("hook_executor") {
113 | |         return Ok(executor);
...   |
119 | |     Ok(executor)
120 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
111 - fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
111 + fn get_or_create_hook_executor(context: &GlobalContext) -> std::sync::Arc<llmspell_hooks::HookExecutor> {
    |
help: ...and then change returning expressions
    |
113 ~         return executor;
114 |     }
...
118 |     context.set_bridge("hook_executor", executor.clone());
119 ~     executor
    |

warning: this function has too many lines (563/100)
   --> llmspell-bridge/src/globals/state_global.rs:144:5
    |
144 | /     fn inject_lua(&self, lua: &mlua::Lua, _context: &GlobalContext) -> Result<(), LLMSpellError> {
145 | |         let state_manager = self.state_manager.clone();
146 | |         let fallback_state = self.fallback_state.clone();
...   |
804 | |         Ok(())
805 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-bridge/src/globals/state_global.rs:173:21
    |
173 |                     use crate::lua::sync_utils::block_on_async;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements
    = note: `-W clippy::items-after-statements` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::items_after_statements)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/globals/state_global.rs:268:33
    |
265 |                       } else {
    |  ____________________________-
266 | |                         // Fallback to in-memory storage
267 | |                         let full_key = format!("{scope_str}:{key}");
268 | |                         let mut state = set_fallback_state.write();
    | |                                 ^^^^^
269 | |                         state.insert(full_key, json_value);
270 | |                         Ok(())
271 | |                     }
    | |_____________________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
    = note: `-W clippy::significant-drop-tightening` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_tightening)]`
help: merge the temporary construction with its single usage
    |
268 ~                         
269 +                         set_fallback_state.write().insert(full_key, json_value);
270 ~                         
    |

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-bridge/src/globals/state_global.rs:253:25
    |
253 |                         use crate::lua::sync_utils::block_on_async;
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/globals/state_global.rs:324:29
    |
321 |                   } else {
    |  ________________________-
322 | |                     // Fallback to in-memory storage
323 | |                     let full_key = format!("{scope_str}:{key}");
324 | |                     let mut state = delete_fallback_state.write();
    | |                             ^^^^^
325 | |                     state.remove(&full_key);
326 | |                     Ok(())
327 | |                 }
    | |_________________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
324 ~                     
325 +                     delete_fallback_state.write().remove(&full_key);
326 ~                     
    |

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-bridge/src/globals/state_global.rs:309:21
    |
309 |                     use crate::lua::sync_utils::block_on_async;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/globals/state_global.rs:370:25
    |
368 |                   } else {
    |  ________________________-
369 | |                     // Fallback to in-memory storage
370 | |                     let state = list_fallback_state.read();
    | |                         ^^^^^
371 | |                     let prefix = format!("{scope_str}:");
...   |
382 | |                     Ok(table)
383 | |                 }
    | |_________________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
370 ~                     
371 +                     let keys = list_fallback_state.read().collect();
372 |                     let prefix = format!("{scope_str}:");
373 ~                     
    |

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-bridge/src/globals/state_global.rs:350:21
    |
350 |                     use crate::lua::sync_utils::block_on_async;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-bridge/src/globals/state_global.rs:602:21
    |
602 |                     use crate::lua::sync_utils::block_on_async;
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: casting `u64` to `i64` may wrap around the value
   --> llmspell-bridge/src/globals/state_global.rs:666:37
    |
666 | / ...                   backup
667 | | ...                       .created_at
668 | | ...                       .duration_since(std::time::UNIX_EPOCH)
669 | | ...                       .unwrap()
670 | | ...                       .as_secs() as i64,
    | |___________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-bridge/src/globals/state_infrastructure.rs:20:1
   |
20 | / pub async fn get_or_create_state_infrastructure(
21 | |     context: &GlobalContext,
22 | |     config: &StatePersistenceConfig,
23 | | ) -> Result<StateInfrastructure> {
   | |________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (119/100)
   --> llmspell-bridge/src/globals/state_infrastructure.rs:20:1
    |
20  | / pub async fn get_or_create_state_infrastructure(
21  | |     context: &GlobalContext,
22  | |     config: &StatePersistenceConfig,
23  | | ) -> Result<StateInfrastructure> {
...   |
177 | |     })
178 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/globals/state_infrastructure.rs:123:29
    |
123 |           let backup_config = if let Some(ref backup_cfg) = config.backup {
    |  _____________________________^
124 | |             // Convert from runtime BackupConfig to state-persistence BackupConfig
125 | |             llmspell_state_persistence::config::BackupConfig {
126 | |                 backup_dir: std::path::PathBuf::from(
...   |
146 | |             llmspell_state_persistence::config::BackupConfig::default()
147 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
    = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`
help: try
    |
123 ~         let backup_config = config.backup.as_ref().map_or_else(llmspell_state_persistence::config::BackupConfig::default, |backup_cfg| llmspell_state_persistence::config::BackupConfig {
124 +                 backup_dir: std::path::PathBuf::from(
125 +                     backup_cfg.backup_dir.as_deref().unwrap_or("./backups"),
126 +                 ),
127 +                 compression_enabled: backup_cfg.compression_enabled,
128 +                 compression_type: match backup_cfg.compression_type.as_str() {
129 +                     "gzip" => llmspell_state_persistence::config::CompressionType::Gzip,
130 +                     "lz4" => llmspell_state_persistence::config::CompressionType::Lz4,
131 +                     "brotli" => llmspell_state_persistence::config::CompressionType::Brotli,
132 +                     _ => llmspell_state_persistence::config::CompressionType::Zstd,
133 +                 },
134 +                 compression_level: backup_cfg.compression_level,
135 +                 encryption_enabled: false, // Not exposed in runtime config yet
136 +                 max_backups: backup_cfg.max_backups,
137 +                 max_backup_age: backup_cfg
138 +                     .max_backup_age
139 +                     .map(std::time::Duration::from_secs),
140 +                 incremental_enabled: backup_cfg.incremental_enabled,
141 +                 full_backup_interval: std::time::Duration::from_secs(86400), // 24 hours default
142 ~             });
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/state_infrastructure.rs:187:1
    |
187 | / fn create_backend_type(config: &StatePersistenceConfig) -> Result<StorageBackendType> {
188 | |     match config.backend_type.as_str() {
189 | |         "memory" => {
190 | |             debug!("Creating in-memory storage backend type");
...   |
208 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
187 - fn create_backend_type(config: &StatePersistenceConfig) -> Result<StorageBackendType> {
187 + fn create_backend_type(config: &StatePersistenceConfig) -> llmspell_state_persistence::StorageBackendType {
    |
help: ...and then change returning expressions
    |
191 ~             StorageBackendType::Memory
192 |         }
...
196 |                 .unwrap_or_else(|_| "./llmspell_state".to_string());
197 ~             StorageBackendType::Sled(SledConfig {
198 +                 path: std::path::PathBuf::from(path),
199 +                 cache_capacity: 64 * 1024 * 1024, // 64MB
200 +                 use_compression: true,
201 +             })
202 |         }
203 |         backend => {
204 |             warn!("Unknown backend type '{}', falling back to memory", backend);
205 ~             StorageBackendType::Memory
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/state_infrastructure.rs:223:1
    |
223 | / fn get_or_create_correlation_tracker(
224 | |     context: &GlobalContext,
225 | | ) -> Result<Arc<EventCorrelationTracker>> {
226 | |     if let Some(tracker) = context.get_bridge::<EventCorrelationTracker>("correlation_tracker") {
...   |
233 | |     Ok(tracker)
234 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
225 - ) -> Result<Arc<EventCorrelationTracker>> {
225 + ) -> std::sync::Arc<llmspell_events::EventCorrelationTracker> {
    |
help: ...and then change returning expressions
    |
227 ~         return tracker;
228 |     }
...
232 |     context.set_bridge("correlation_tracker", tracker.clone());
233 ~     tracker
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/state_infrastructure.rs:237:1
    |
237 | / fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
238 | |     if let Some(executor) = context.get_bridge::<HookExecutor>("hook_executor") {
239 | |         return Ok(executor);
...   |
245 | |     Ok(executor)
246 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
237 - fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
237 + fn get_or_create_hook_executor(context: &GlobalContext) -> std::sync::Arc<llmspell_hooks::HookExecutor> {
    |
help: ...and then change returning expressions
    |
239 ~         return executor;
240 |     }
...
244 |     context.set_bridge("hook_executor", executor.clone());
245 ~     executor
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/streaming_global.rs:54:26
   |
54 |                 message: format!("Failed to inject Streaming global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
54 -                 message: format!("Failed to inject Streaming global for JavaScript: {}", e),
54 +                 message: format!("Failed to inject Streaming global for JavaScript: {e}"),
   |

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/globals/tool_api_standard.rs:79:9
   |
79 | //! ### ToolInfo
   |         ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
79 - //! ### ToolInfo
79 + //! ### `ToolInfo`
   |

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/globals/tool_api_standard.rs:89:9
   |
89 | //! ### ToolSchema
   |         ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
89 - //! ### ToolSchema
89 + //! ### `ToolSchema`
   |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/globals/tool_api_standard.rs:127:27
    |
127 | //! - Direct tool access (Tool.tool_name) uses lazy loading
    |                           ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
127 - //! - Direct tool access (Tool.tool_name) uses lazy loading
127 + //! - Direct tool access (`Tool.tool_name`) uses lazy loading
    |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/globals/tool_api_standard.rs:172:23
    |
172 | /// Convert from core ToolSchema to standard schema
    |                       ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
172 - /// Convert from core ToolSchema to standard schema
172 + /// Convert from core `ToolSchema` to standard schema
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/tool_global.rs:57:26
   |
57 |                 message: format!("Failed to inject Tool global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
57 -                 message: format!("Failed to inject Tool global for JavaScript: {}", e),
57 +                 message: format!("Failed to inject Tool global for JavaScript: {e}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/workflow_global.rs:65:26
   |
65 |                 message: format!("Failed to inject Workflow global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
65 -                 message: format!("Failed to inject Workflow global for JavaScript: {}", e),
65 +                 message: format!("Failed to inject Workflow global for JavaScript: {e}"),
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:151:17
    |
150 |       ) -> Result<(), LLMSpellError> {
    |  ____________________________________-
151 | |         let mut adapters = self.adapters.write().await;
    | |                 ^^^^^^^^
152 | |         adapters.insert(language, adapter);
153 | |         Ok(())
154 | |     }
    | |_____- temporary `adapters` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
151 ~         
152 +         self.adapters.write().await.insert(language, adapter);
153 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:201:13
    |
199 |       ) -> Result<HookHandle, LLMSpellError> {
    |  ____________________________________________-
200 | |         // Get the adapter for this language
201 | |         let adapters = self.adapters.read().await;
    | |             ^^^^^^^^
202 | |         let adapter = adapters
...   |
245 | |         })
246 | |     }
    | |_____- temporary `adapters` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
201 ~         
202 +         let adapter = self.adapters.read().await.clone();
203 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:276:13
    |
275 |       ) -> Result<Vec<HookMetadata>, LLMSpellError> {
    |  ___________________________________________________-
276 | |         let language_hooks = self.language_hooks.read().await;
    | |             ^^^^^^^^^^^^^^
277 | |         let mut metadata = Vec::new();
...   |
291 | |         Ok(metadata)
292 | |     }
    | |_____- temporary `language_hooks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
276 ~         
277 +         self.language_hooks.read().await.;
278 |         let mut metadata = Vec::new();
279 |
280 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:330:21
    |
329 |           if let Some(hook) = language_hooks.get(hook_id) {
    |  _________________________________________________________-
330 | |             let mut enabled = hook.enabled.write().await;
    | |                     ^^^^^^^
331 | |             *enabled = true;
332 | |             Ok(true)
333 | |         } else {
    | |_________- temporary `enabled` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
330 ~             
331 +             hook.enabled.write().await.;
332 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:347:21
    |
346 |           if let Some(hook) = language_hooks.get(hook_id) {
    |  _________________________________________________________-
347 | |             let mut enabled = hook.enabled.write().await;
    | |                     ^^^^^^^
348 | |             *enabled = false;
349 | |             Ok(true)
350 | |         } else {
    | |_________- temporary `enabled` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
347 ~             
348 +             hook.enabled.write().await.;
349 ~             
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/hook_bridge.rs:415:5
    |
415 | /     fn create_hook_event(
416 | |         hook_point: &HookPoint,
417 | |         status: &str,
418 | |         correlation_id: Uuid,
...   |
442 | |         Ok(event)
443 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
420 -     ) -> Result<UniversalEvent, LLMSpellError> {
420 +     ) -> llmspell_events::UniversalEvent {
    |
help: ...and then change returning expressions
    |
442 -         Ok(event)
442 +         event
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:622:13
    |
621 |       pub async fn get_agent_state(&self, agent_instance: &str) -> Result<AgentState> {
    |  _____________________________________________________________________________________-
622 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
623 | |         let state_machine =
624 | |             machines
...   |
631 | |         Ok(state_machine.current_state().await)
632 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
622 ~         
623 +         let state_machine = self.state_machines.read().await.;
624 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:640:13
    |
639 |       pub async fn initialize_agent(&self, agent_instance: &str) -> Result<()> {
    |  ______________________________________________________________________________-
640 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
641 | |         let state_machine =
642 | |             machines
...   |
655 | |             })
656 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
640 ~         
641 +         let state_machine = self.state_machines.read().await.;
642 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:664:13
    |
663 |       pub async fn start_agent(&self, agent_instance: &str) -> Result<()> {
    |  _________________________________________________________________________-
664 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
665 | |         let state_machine =
666 | |             machines
...   |
679 | |             })
680 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
664 ~         
665 +         let state_machine = self.state_machines.read().await.;
666 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:688:13
    |
687 |       pub async fn pause_agent(&self, agent_instance: &str) -> Result<()> {
    |  _________________________________________________________________________-
688 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
689 | |         let state_machine =
690 | |             machines
...   |
703 | |             })
704 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
688 ~         
689 +         let state_machine = self.state_machines.read().await.;
690 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:712:13
    |
711 |       pub async fn resume_agent(&self, agent_instance: &str) -> Result<()> {
    |  __________________________________________________________________________-
712 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
713 | |         let state_machine =
714 | |             machines
...   |
727 | |             })
728 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
712 ~         
713 +         let state_machine = self.state_machines.read().await.;
714 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:736:13
    |
735 |       pub async fn stop_agent(&self, agent_instance: &str) -> Result<()> {
    |  ________________________________________________________________________-
736 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
737 | |         let state_machine =
738 | |             machines
...   |
751 | |             })
752 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
736 ~         
737 +         let state_machine = self.state_machines.read().await.;
738 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:760:13
    |
759 |       pub async fn terminate_agent(&self, agent_instance: &str) -> Result<()> {
    |  _____________________________________________________________________________-
760 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
761 | |         let state_machine =
762 | |             machines
...   |
775 | |             })
776 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
760 ~         
761 +         let state_machine = self.state_machines.read().await.;
762 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:784:13
    |
783 |       pub async fn error_agent(&self, agent_instance: &str, error_message: String) -> Result<()> {
    |  ________________________________________________________________________________________________-
784 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
785 | |         let state_machine =
786 | |             machines
...   |
799 | |             })
800 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
784 ~         
785 +         let state_machine = self.state_machines.read().await.;
786 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:808:13
    |
807 |       pub async fn recover_agent(&self, agent_instance: &str) -> Result<()> {
    |  ___________________________________________________________________________-
808 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
809 | |         let state_machine =
810 | |             machines
...   |
823 | |             })
824 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
808 ~         
809 +         let state_machine = self.state_machines.read().await.;
810 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:835:13
    |
834 |       ) -> Result<Vec<serde_json::Value>> {
    |  _________________________________________-
835 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
836 | |         let state_machine =
837 | |             machines
...   |
858 | |             .collect())
859 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
835 ~         
836 +         let state_machine = self.state_machines.read().await.;
837 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:867:13
    |
866 |       pub async fn get_agent_last_error(&self, agent_instance: &str) -> Result<Option<String>> {
    |  ______________________________________________________________________________________________-
867 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
868 | |         let state_machine =
869 | |             machines
...   |
876 | |         Ok(state_machine.get_last_error().await)
877 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
867 ~         
868 +         let state_machine = self.state_machines.read().await.;
869 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:885:13
    |
884 |       pub async fn get_agent_recovery_attempts(&self, agent_instance: &str) -> Result<usize> {
    |  ____________________________________________________________________________________________-
885 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
886 | |         let state_machine =
887 | |             machines
...   |
894 | |         Ok(state_machine.get_recovery_attempts().await)
895 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
885 ~         
886 +         let state_machine = self.state_machines.read().await.;
887 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:903:13
    |
902 |       pub async fn is_agent_healthy(&self, agent_instance: &str) -> Result<bool> {
    |  ________________________________________________________________________________-
903 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
904 | |         let state_machine =
905 | |             machines
...   |
912 | |         Ok(state_machine.is_healthy().await)
913 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
903 ~         
904 +         let state_machine = self.state_machines.read().await.;
905 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:921:13
    |
920 |       pub async fn get_agent_state_metrics(&self, agent_instance: &str) -> Result<serde_json::Value> {
    |  ____________________________________________________________________________________________________-
921 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
922 | |         let state_machine =
923 | |             machines
...   |
939 | |         }))
940 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
921 ~         
922 +         let state_machine = self.state_machines.read().await.;
923 ~         
    |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1082:13
     |
1081 |       ) -> Result<()> {
     |  _____________________-
1082 | |         let contexts = self.contexts.read().await;
     | |             ^^^^^^^^
1083 | |         let context = contexts
1084 | |             .get(context_id)
...    |
1094 | |         Ok(())
1095 | |     }
     | |_____- temporary `contexts` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1082 ~         
1083 +         let context = self.contexts.read().await.;
1084 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1107:13
     |
1106 |       ) -> Result<Option<serde_json::Value>> {
     |  ____________________________________________-
1107 | |         let contexts = self.contexts.read().await;
     | |             ^^^^^^^^
1108 | |         let context = contexts
1109 | |             .get(context_id)
...    |
1115 | |         Ok(context.get(key))
1116 | |     }
     | |_____- temporary `contexts` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1107 ~         
1108 +         let context = self.contexts.read().await.;
1109 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1290:17
     |
1289 |       pub async fn remove_context(&self, context_id: &str) -> Result<()> {
     |  ________________________________________________________________________-
1290 | |         let mut contexts = self.contexts.write().await;
     | |                 ^^^^^^^^
1291 | |         contexts
1292 | |             .remove(context_id)
...    |
1297 | |         Ok(())
1298 | |     }
     | |_____- temporary `contexts` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1290 ~         
1291 +         self.contexts.write().await.;
1292 ~         
     |

warning: adding items after statements is confusing, since items exist from the start of the scope
    --> llmspell-bridge/src/agent_bridge.rs:1331:9
     |
1331 |         use llmspell_agents::agent_wrapped_tool::AgentWrappedTool;
     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: adding items after statements is confusing, since items exist from the start of the scope
    --> llmspell-bridge/src/agent_bridge.rs:1332:9
     |
1332 |         use llmspell_core::traits::tool::{SecurityLevel, ToolCategory};
     |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: adding items after statements is confusing, since items exist from the start of the scope
    --> llmspell-bridge/src/agent_bridge.rs:1332:43
     |
1332 |         use llmspell_core::traits::tool::{SecurityLevel, ToolCategory};
     |                                           ^^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: adding items after statements is confusing, since items exist from the start of the scope
    --> llmspell-bridge/src/agent_bridge.rs:1332:58
     |
1332 |         use llmspell_core::traits::tool::{SecurityLevel, ToolCategory};
     |                                                          ^^^^^^^^^^^^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1353:13
     |
1352 |       pub async fn list_agent_capabilities(&self) -> Result<serde_json::Value> {
     |  ______________________________________________________________________________-
1353 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
1354 | |         let mut capabilities = serde_json::Map::new();
...    |
1376 | |         Ok(serde_json::Value::Object(capabilities))
1377 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1353 ~         
1354 +         self.active_agents.read().await.;
1355 |         let mut capabilities = serde_json::Map::new();
1356 |
1357 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1511:13
     |
1510 |       pub async fn discover_agents_by_capability(&self, capability: &str) -> Result<Vec<String>> {
     |  ________________________________________________________________________________________________-
1511 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
1512 | |         let mut matching_agents = Vec::new();
...    |
1536 | |         Ok(matching_agents)
1537 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1511 ~         
1512 +         self.active_agents.read().await.;
1513 |         let mut matching_agents = Vec::new();
1514 |
1515 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1586:13
     |
1576 |       pub async fn save_agent_state(&self, agent_name: &str) -> Result<()> {
     |  __________________________________________________________________________-
1577 | |         let state_manager =
1578 | |             self.state_manager
1579 | |                 .as_ref()
...    |
1586 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
...    |
1647 | |         Ok(())
1648 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1586 ~         
1587 +         let agent = self.active_agents.read().await.;
1588 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1669:13
     |
1655 |       pub async fn load_agent_state(&self, agent_name: &str) -> Result<bool> {
     |  ____________________________________________________________________________-
1656 | |         let state_manager =
1657 | |             self.state_manager
1658 | |                 .as_ref()
...    |
1669 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
...    |
1701 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1669 ~         
1670 +         let agent = self.active_agents.read().await.;
1671 ~         
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1718:24
     |
1718 |           let agent_id = if let Some(agent) = self.get_agent(agent_name).await {
     |  ________________________^
1719 | |             agent.metadata().id.to_string()
1720 | |         } else {
...    |
1723 | |         };
     | |_________^ help: try: `(self.get_agent(agent_name).await).map_or_else(|| agent_name.to_string(), |agent| agent.metadata().id.to_string())`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1763:9
     |
1763 | /         match saved_agents {
1764 | |             Some(registry) => {
1765 | |                 // Parse the registry
1766 | |                 if let Some(agents) = registry.as_array() {
...    |
1775 | |             None => Ok(vec![]),
1776 | |         }
     | |_________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1763 ~         saved_agents.map_or_else(|| Ok(vec![]), |registry| if let Some(agents) = registry.as_array() {
1764 +                     Ok(agents
1765 +                         .iter()
1766 +                         .filter_map(|v| v.as_str().map(String::from))
1767 +                         .collect())
1768 +                 } else {
1769 +                     Ok(vec![])
1770 +                 })
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1766:17
     |
1766 | /                 if let Some(agents) = registry.as_array() {
1767 | |                     Ok(agents
1768 | |                         .iter()
1769 | |                         .filter_map(|v| v.as_str().map(String::from))
...    |
1772 | |                     Ok(vec![])
1773 | |                 }
     | |_________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1766 ~                 registry.as_array().map_or_else(|| Ok(vec![]), |agents| Ok(agents
1767 +                         .iter()
1768 +                         .filter_map(|v| v.as_str().map(String::from))
1769 +                         .collect()))
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1795:17
     |
1795 | /                 if let Some(agents) = registry.as_array() {
1796 | |                     agents
1797 | |                         .iter()
1798 | |                         .filter_map(|v| v.as_str().map(String::from))
...    |
1801 | |                     vec![]
1802 | |                 }
     | |_________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1795 ~                 registry.as_array().map_or_else(|| vec![], |agents| agents
1796 +                         .iter()
1797 +                         .filter_map(|v| v.as_str().map(String::from))
1798 +                         .collect::<Vec<_>>())
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1844:17
     |
1844 | /                 if let Some(agents) = registry.as_array() {
1845 | |                     agents
1846 | |                         .iter()
1847 | |                         .filter_map(|v| v.as_str().map(String::from))
...    |
1851 | |                     vec![]
1852 | |                 }
     | |_________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1844 ~                 registry.as_array().map_or_else(|| vec![], |agents| agents
1845 +                         .iter()
1846 +                         .filter_map(|v| v.as_str().map(String::from))
1847 +                         .filter(|name| name != agent_name)
1848 +                         .collect::<Vec<_>>())
     |

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/multi_agent.rs:48:13
   |
48 |     agents: Vec<String>,
   |             ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/multi_agent.rs:49:20
   |
49 |     initial_input: Value,
   |                    ^^^^^ help: consider taking a reference instead: `&Value`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/multi_agent.rs:89:51
   |
89 |     #[allow(unused_variables)] aggregation_agent: Option<String>,
   |                                                   ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:124:14
    |
124 |     options: Value,
    |              ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:160:24
    |
160 |     coordinator_agent: String,
    |                        ^^^^^^ help: consider changing the type to: `&str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:161:20
    |
161 |     worker_agents: Vec<(String, String)>, // (agent_id, specialization)
    |                    ^^^^^^^^^^^^^^^^^^^^^ help: consider changing the type to: `&[(String, String)]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:162:11
    |
162 |     task: Value,
    |           ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:222:27
    |
222 |     collaborating_agents: Vec<String>,
    |                           ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:224:22
    |
224 |     initial_context: Value,
    |                      ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: casting `usize` to `i64` may wrap around the value on targets with 64-bit wide pointers
   --> llmspell-bridge/src/multi_agent.rs:226:68
    |
226 |     let mut builder = LoopWorkflowBuilder::new(name).with_range(0, collaboration_rounds as i64, 1);
    |                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:265:20
    |
265 |     manager_agent: String,
    |                    ^^^^^^ help: consider changing the type to: `&str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:266:17
    |
266 |     team_leads: Vec<String>,
    |                 ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:267:14
    |
267 |     workers: Vec<Vec<String>>, // Workers per team lead
    |              ^^^^^^^^^^^^^^^^ help: consider changing the type to: `&[Vec<String>]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:268:11
    |
268 |     task: Value,
    |           ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this could be a `const fn`
  --> llmspell-bridge/src/orchestration.rs:83:5
   |
83 | /     pub fn max_concurrent_workflows(mut self, max: usize) -> Self {
84 | |         self.limits.max_concurrent_workflows = max;
85 | |         self
86 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
83 |     pub const fn max_concurrent_workflows(mut self, max: usize) -> Self {
   |         +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/orchestration.rs:90:5
   |
90 | /     pub fn max_agent_invocations(mut self, max: usize) -> Self {
91 | |         self.limits.max_agent_invocations = max;
92 | |         self
93 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
90 |     pub const fn max_agent_invocations(mut self, max: usize) -> Self {
   |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:97:5
    |
97  | /     pub fn max_memory_mb(mut self, max: usize) -> Self {
98  | |         self.limits.max_memory_mb = max;
99  | |         self
100 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
97  |     pub const fn max_memory_mb(mut self, max: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:104:5
    |
104 | /     pub fn build(self) -> ResourceLimits {
105 | |         self.limits
106 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
104 |     pub const fn build(self) -> ResourceLimits {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:152:5
    |
152 | /     pub fn strategy(mut self, strategy: OrchestrationStrategy) -> Self {
153 | |         self.config.strategy = strategy;
154 | |         self
155 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
152 |     pub const fn strategy(mut self, strategy: OrchestrationStrategy) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:159:5
    |
159 | /     pub fn max_depth(mut self, depth: usize) -> Self {
160 | |         self.config.max_depth = depth;
161 | |         self
162 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
159 |     pub const fn max_depth(mut self, depth: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:166:5
    |
166 | /     pub fn timeout_seconds(mut self, timeout: u64) -> Self {
167 | |         self.config.timeout_seconds = timeout;
168 | |         self
169 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
166 |     pub const fn timeout_seconds(mut self, timeout: u64) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:173:5
    |
173 | /     pub fn allow_parallel(mut self, allow: bool) -> Self {
174 | |         self.config.allow_parallel = allow;
175 | |         self
176 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
173 |     pub const fn allow_parallel(mut self, allow: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:180:5
    |
180 | /     pub fn resource_limits(mut self, limits: ResourceLimits) -> Self {
181 | |         self.config.resource_limits = limits;
182 | |         self
183 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
180 |     pub const fn resource_limits(mut self, limits: ResourceLimits) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:187:5
    |
187 | /     pub fn build(self) -> OrchestrationConfig {
188 | |         self.config
189 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
187 |     pub const fn build(self) -> OrchestrationConfig {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:302:5
    |
302 | /     pub fn max_attempts(mut self, attempts: usize) -> Self {
303 | |         self.config.max_attempts = attempts;
304 | |         self
305 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
302 |     pub const fn max_attempts(mut self, attempts: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:309:5
    |
309 | /     pub fn backoff_ms(mut self, ms: u64) -> Self {
310 | |         self.config.backoff_ms = ms;
311 | |         self
312 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
309 |     pub const fn backoff_ms(mut self, ms: u64) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:316:5
    |
316 | /     pub fn exponential_backoff(mut self, exponential: bool) -> Self {
317 | |         self.config.exponential_backoff = exponential;
318 | |         self
319 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
316 |     pub const fn exponential_backoff(mut self, exponential: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:323:5
    |
323 | /     pub fn build(self) -> RetryConfig {
324 | |         self.config
325 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
323 |     pub const fn build(self) -> RetryConfig {
    |         +++++

warning: unused `self` argument
   --> llmspell-bridge/src/orchestration.rs:446:36
    |
446 |     fn is_orchestration_successful(&self, state: &OrchestrationState) -> bool {
    |                                    ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: unnecessary closure used to substitute value for `Option::None`
  --> llmspell-bridge/src/standardized_workflows.rs:38:20
   |
38 |           let name = params
   |  ____________________^
39 | |             .get("name")
40 | |             .and_then(|v| v.as_str())
41 | |             .unwrap_or_else(|| workflow_type)
   | |_____________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_lazy_evaluations
   = note: `-W clippy::unnecessary-lazy-evaluations` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::unnecessary_lazy_evaluations)]`
help: use `unwrap_or` instead
   |
41 -             .unwrap_or_else(|| workflow_type)
41 +             .unwrap_or(workflow_type)
   |

warning: called `map(f)` on an `Option` value where `f` is a closure that returns the unit type `()`
  --> llmspell-bridge/src/standardized_workflows.rs:47:9
   |
47 | /         params
48 | |             .get("timeout")
49 | |             .and_then(|v| v.as_u64())
50 | |             .map(|timeout_ms| {
51 | |                 config.max_execution_time = Some(Duration::from_millis(timeout_ms));
52 | |             });
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_map_unit_fn
   = note: `-W clippy::option-map-unit-fn` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::option_map_unit_fn)]`
help: try
   |
47 ~         if let Some(timeout_ms) = params
48 +             .get("timeout")
49 +             .and_then(|v| v.as_u64()) { config.max_execution_time = Some(Duration::from_millis(timeout_ms)); }
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:49:23
   |
49 |             .and_then(|v| v.as_u64())
   |                       ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
   = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: called `map(f)` on an `Option` value where `f` is a closure that returns the unit type `()`
  --> llmspell-bridge/src/standardized_workflows.rs:54:9
   |
54 | /         params
55 | |             .get("continue_on_error")
56 | |             .and_then(|v| v.as_bool())
57 | |             .map(|continue_on_error| {
58 | |                 config.continue_on_error = continue_on_error;
59 | |             });
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_map_unit_fn
help: try
   |
54 ~         if let Some(continue_on_error) = params
55 +             .get("continue_on_error")
56 +             .and_then(|v| v.as_bool()) { config.continue_on_error = continue_on_error; }
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:56:23
   |
56 |             .and_then(|v| v.as_bool())
   |                       ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: called `map(f)` on an `Option` value where `f` is a closure that returns the unit type `()`
  --> llmspell-bridge/src/standardized_workflows.rs:61:9
   |
61 | /         params
62 | |             .get("max_retry_attempts")
63 | |             .and_then(|v| v.as_u64())
64 | |             .map(|max_retries| {
65 | |                 config.max_retry_attempts = max_retries as u32;
66 | |             });
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_map_unit_fn
help: try
   |
61 ~         if let Some(max_retries) = params
62 +             .get("max_retry_attempts")
63 +             .and_then(|v| v.as_u64()) { config.max_retry_attempts = max_retries as u32; }
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:63:23
   |
63 |             .and_then(|v| v.as_u64())
   |                       ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: casting `u64` to `u32` may truncate the value
  --> llmspell-bridge/src/standardized_workflows.rs:65:45
   |
65 |                 config.max_retry_attempts = max_retries as u32;
   |                                             ^^^^^^^^^^^^^^^^^^
   |
   = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
   = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
   |
65 -                 config.max_retry_attempts = max_retries as u32;
65 +                 config.max_retry_attempts = u32::try_from(max_retries);
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:76:79
   |
76 |                     "max_concurrency": params.get("max_concurrency").and_then(|v| v.as_u64()).unwrap_or(4),
   |                                                                               ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:77:67
   |
77 |                     "fail_fast": params.get("fail_fast").and_then(|v| v.as_bool()).unwrap_or(false),
   |                                                                   ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:78:105
   |
78 |                     "continue_on_optional_failure": params.get("continue_on_optional_failure").and_then(|v| v.as_bool()).unwrap_or(true),
   |                                                                                                         ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:90:83
   |
90 |                     "continue_on_error": params.get("continue_on_error").and_then(|v| v.as_bool()).unwrap_or(false),
   |                                                                                   ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-bridge/src/standardized_workflows.rs:102:59
    |
102 |                     params.get("max_iterations").and_then(|v| v.as_u64())
    |                                                           ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this macro has been superceded by `std::sync::LazyLock`
  --> llmspell-bridge/src/workflow_performance.rs:10:1
   |
10 | / lazy_static! {
11 | |     /// Cache for workflow type information to avoid repeated discovery
12 | |     static ref WORKFLOW_TYPE_CACHE: Arc<RwLock<HashMap<String, WorkflowTypeInfo>>> =
13 | |         Arc::new(RwLock::new(HashMap::new()));
14 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#non_std_lazy_statics
   = note: `-W clippy::non-std-lazy-statics` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::non_std_lazy_statics)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflow_performance.rs:116:17
    |
115 |       pub fn get(&self, workflow_id: &str) -> Option<Value> {
    |  ___________________________________________________________-
116 | |         let mut cache = self.cache.write();
    | |                 ^^^^^
117 | |         if let Some(cached) = cache.get(workflow_id) {
...   |
123 | |         None
124 | |     }
    | |_____- temporary `cache` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
116 ~         
117 +         self.cache.write().;
118 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflow_performance.rs:182:13
    |
181 |       pub fn average_duration_ms(&self) -> f64 {
    |  ______________________________________________-
182 | |         let metrics = self.metrics.read();
    | |             ^^^^^^^
183 | |         if metrics.total_operations == 0 {
184 | |             0.0
...   |
192 | |     }
    | |_____- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
189 ~             let total_ops = metrics.total_operations as f64;
190 +             drop(metrics);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflow_performance.rs:197:13
    |
196 |       pub fn p99_duration_ms(&self) -> u64 {
    |  __________________________________________-
197 | |         let metrics = self.metrics.read();
    | |             ^^^^^^^
198 | |         if metrics.operation_durations.is_empty() {
199 | |             return 0;
...   |
208 | |         durations.get(idx).copied().unwrap_or(0)
209 | |     }
    | |_____- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
202 ~         let mut durations = metrics.operation_durations.clone();
203 +         drop(metrics);
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/workflows.rs:618:5
    |
618 | /     if let Some(collection) = config.get("collection").and_then(|v| v.as_array()) {
619 | |         Ok(LoopIterator::Collection {
620 | |             values: collection.clone(),
621 | |         })
...   |
649 | |         })
650 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
618 ~     config.get("collection").and_then(|v| v.as_array()).map_or_else(|| if let Some(range) = config.get("range").and_then(|v| v.as_object()) {
619 +         let start = range
620 +             .get("start")
621 +             .and_then(serde_json::Value::as_i64)
622 +             .unwrap_or(0);
623 +         let end = range
624 +             .get("end")
625 +             .and_then(serde_json::Value::as_i64)
626 +             .unwrap_or(10);
627 +         let step = range
628 +             .get("step")
629 +             .and_then(serde_json::Value::as_i64)
630 +             .unwrap_or(1);
631 +         Ok(LoopIterator::Range { start, end, step })
632 +     } else if let Some(condition) = config.get("while_condition").and_then(|v| v.as_str()) {
633 +         Ok(LoopIterator::WhileCondition {
634 +             condition: condition.to_string(),
635 +             max_iterations: config
636 +                 .get("max_iterations")
637 +                 .and_then(serde_json::Value::as_u64)
638 +                 .map(|v| usize::try_from(v).unwrap_or(usize::MAX))
639 +                 .unwrap_or(100),
640 +         })
641 +     } else {
642 +         Err(llmspell_core::LLMSpellError::Configuration {
643 +             message: "Iterator must have 'collection', 'range', or 'while_condition'".to_string(),
644 +             source: None,
645 +         })
646 +     }, |collection| Ok(LoopIterator::Collection {
647 +             values: collection.clone(),
648 +         }))
    |

warning: called `map(<f>).unwrap_or(<a>)` on an `Option` value
   --> llmspell-bridge/src/workflows.rs:639:29
    |
639 |               max_iterations: config
    |  _____________________________^
640 | |                 .get("max_iterations")
641 | |                 .and_then(serde_json::Value::as_u64)
642 | |                 .map(|v| usize::try_from(v).unwrap_or(usize::MAX))
643 | |                 .unwrap_or(100),
    | |_______________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`
help: use `map_or(<a>, <f>)` instead
    |
642 -                 .map(|v| usize::try_from(v).unwrap_or(usize::MAX))
642 +                 .map_or(100, |v| usize::try_from(v).unwrap_or(usize::MAX)),
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflows.rs:878:17
    |
871 |       ) -> Result<String> {
    |  _________________________-
872 | |         let workflow = self
873 | |             .standardized_factory
874 | |             .create_from_type_json(workflow_type, params)
...   |
878 | |         let mut workflows = self.active_workflows.write().await;
    | |                 ^^^^^^^^^
...   |
889 | |         Ok(workflow_id)
890 | |     }
    | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
878 ~         
879 +         self.active_workflows.write().await.insert(workflow_id.clone(), Arc::new(workflow));
880 ~         
    |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1024:13
     |
1023 |       pub async fn get_workflow(&self, workflow_id: &str) -> Result<WorkflowInfo> {
     |  _________________________________________________________________________________-
1024 | |         let workflows = self.active_workflows.read().await;
     | |             ^^^^^^^^^
1025 | |         let workflow = workflows
1026 | |             .get(workflow_id)
...    |
1039 | |         })
1040 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1024 ~         
1025 +         let workflow = self.active_workflows.read().await.;
1026 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1048:17
     |
1047 |       pub async fn remove_workflow(&self, workflow_id: &str) -> Result<()> {
     |  __________________________________________________________________________-
1048 | |         let mut workflows = self.active_workflows.write().await;
     | |                 ^^^^^^^^^
1049 | |         workflows
1050 | |             .remove(workflow_id)
...    |
1057 | |         Ok(())
1058 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1048 ~         
1049 +         self.active_workflows.write().await.;
1050 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1084:17
     |
1082 |           if workflows.contains_key(workflow_id) {
     |  ________________________________________________-
1083 | |             // Check if workflow is in execution history
1084 | |             let history = self.execution_history.read().await;
     | |                 ^^^^^^^
1085 | |             let recent_execution = history
...    |
1096 | |             Ok(status)
1097 | |         } else {
     | |_________- temporary `history` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1084 ~             
1085 +             let recent_execution = self.execution_history.read().await.rfind(|record| record.workflow_id == workflow_id);
1086 ~             
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1134:17
     |
1133 |       pub async fn clear_execution_history(&self) {
     |  _________________________________________________-
1134 | |         let mut history = self.execution_history.write().await;
     | |                 ^^^^^^^
1135 | |         history.clear();
1136 | |         debug!("Cleared workflow execution history");
1137 | |     }
     | |_____- temporary `history` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1134 ~         
1135 +         self.execution_history.write().await.clear();
1136 ~         
     |

warning: all fields have the same prefix: `total`
    --> llmspell-bridge/src/workflows.rs:1264:1
     |
1264 | / struct RegistryMetrics {
1265 | |     /// Total workflows registered
1266 | |     total_registered: AtomicU64,
1267 | |     /// Total templates registered
...    |
1270 | |     total_executions: AtomicU64,
1271 | | }
     | |_^
     |
     = help: remove the prefixes
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_field_names
     = note: `-W clippy::struct-field-names` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_field_names)]`

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1307:17
     |
1299 |       ) -> Result<()> {
     |  _____________________-
1300 | |         let registration = WorkflowRegistration {
1301 | |             _id: id.clone(),
1302 | |             workflow: Arc::new(workflow),
...    |
1307 | |         let mut workflows = self.workflows.write().await;
     | |                 ^^^^^^^^^
...    |
1320 | |         Ok(())
1321 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
     |
1315 ~         workflows.insert(id, registration);
1316 +         drop(workflows);
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1329:17
     |
1328 |       pub async fn unregister_workflow(&self, id: &str) -> Result<()> {
     |  _____________________________________________________________________-
1329 | |         let mut workflows = self.workflows.write().await;
     | |                 ^^^^^^^^^
1330 | |         workflows
1331 | |             .remove(id)
...    |
1337 | |         Ok(())
1338 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1329 ~         
1330 +         self.workflows.write().await.;
1331 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1389:17
     |
1388 |       ) -> Result<()> {
     |  _____________________-
1389 | |         let mut workflows = self.workflows.write().await;
     | |                 ^^^^^^^^^
1390 | |         let registration = workflows
1391 | |             .get_mut(id)
...    |
1415 | |         Ok(())
1416 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1389 ~         
1390 +         let registration = self.workflows.write().await.;
1391 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1440:17
     |
1439 |       pub async fn register_template(&self, template: WorkflowTemplate) -> Result<()> {
     |  _____________________________________________________________________________________-
1440 | |         let mut templates = self.templates.write().await;
     | |                 ^^^^^^^^^
1441 | |         templates.insert(template.id.clone(), template);
1442 | |         self.metrics.total_templates.fetch_add(1, Ordering::Relaxed);
1443 | |         Ok(())
1444 | |     }
     | |_____- temporary `templates` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1440 ~         
1441 +         self.templates.write().await.insert(template.id.clone(), template);
1442 ~         
     |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/conversion.rs:104:13
    |
104 | /             if let Some(i) = n.as_i64() {
105 | |                 Ok(LuaValue::Integer(i))
106 | |             } else if let Some(f) = n.as_f64() {
107 | |                 Ok(LuaValue::Number(f))
108 | |             } else {
109 | |                 Ok(LuaValue::Nil)
110 | |             }
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
104 ~             n.as_i64().map_or_else(|| if let Some(f) = n.as_f64() {
105 +                 Ok(LuaValue::Number(f))
106 +             } else {
107 +                 Ok(LuaValue::Nil)
108 +             }, |i| Ok(LuaValue::Integer(i)))
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/conversion.rs:140:51
    |
140 | pub fn lua_table_to_agent_input(lua: &Lua, table: Table) -> mlua::Result<AgentInput> {
    |                                                   ^^^^^ help: consider taking a reference instead: `&Table`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: binding to `_` prefixed variable with no side-effect
   --> llmspell-bridge/src/lua/conversion.rs:155:9
    |
155 |     let _context: Option<ExecutionContext> = None;
    |         ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding
    = note: `-W clippy::no-effect-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::no_effect_underscore_binding)]`

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/conversion.rs:207:43
    |
207 | fn parse_media_content(_lua: &Lua, table: Table) -> mlua::Result<MediaContent> {
    |                                           ^^^^^ help: consider taking a reference instead: `&Table`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: use Option::map_or instead of an if let/else
   --> llmspell-bridge/src/lua/conversion.rs:226:20
    |
226 |       let metadata = if let Ok(width) = table.get::<_, u32>("width") {
    |  ____________________^
227 | |         if let Ok(height) = table.get::<_, u32>("height") {
228 | |             let color_space = table
229 | |                 .get::<_, String>("color_space")
...   |
251 | |         None
252 | |     };
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
226 ~     let metadata = table.get::<_, u32>("width").map_or(None, |width| if let Ok(height) = table.get::<_, u32>("height") {
227 +             let color_space = table
228 +                 .get::<_, String>("color_space")
229 +                 .ok()
230 +                 .and_then(|cs| match cs.as_str() {
231 +                     "rgb" => Some(ColorSpace::RGB),
232 +                     "rgba" => Some(ColorSpace::RGBA),
233 +                     "grayscale" => Some(ColorSpace::Grayscale),
234 +                     "cmyk" => Some(ColorSpace::CMYK),
235 +                     _ => None,
236 +                 })
237 +                 .unwrap_or(ColorSpace::RGB);
238 + 
239 +             Some(ImageMetadata {
240 +                 width,
241 +                 height,
242 +                 color_space,
243 +                 has_transparency: false,
244 +                 dpi: None,
245 +             })
246 +         } else {
247 +             None
248 ~         });
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-bridge/src/lua/conversion.rs:227:9
    |
227 | /         if let Ok(height) = table.get::<_, u32>("height") {
228 | |             let color_space = table
229 | |                 .get::<_, String>("color_space")
230 | |                 .ok()
...   |
248 | |             None
249 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
227 ~         table.get::<_, u32>("height").map_or(None, |height| {
228 +             let color_space = table
229 +                 .get::<_, String>("color_space")
230 +                 .ok()
231 +                 .and_then(|cs| match cs.as_str() {
232 +                     "rgb" => Some(ColorSpace::RGB),
233 +                     "rgba" => Some(ColorSpace::RGBA),
234 +                     "grayscale" => Some(ColorSpace::Grayscale),
235 +                     "cmyk" => Some(ColorSpace::CMYK),
236 +                     _ => None,
237 +                 })
238 +                 .unwrap_or(ColorSpace::RGB);
239 + 
240 +             Some(ImageMetadata {
241 +                 width,
242 +                 height,
243 +                 color_space,
244 +                 has_transparency: false,
245 +                 dpi: None,
246 +             })
247 +         })
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/conversion.rs:413:56
    |
413 | pub fn workflow_result_to_lua_table(lua: &Lua, result: serde_json::Value) -> mlua::Result<Table> {
    |                                                        ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/engine.rs:104:21
    |
103 |               let result = {
    |  __________________________-
104 | |                 let lua = self.lua.lock();
    | |                     ^^^
105 | |                 let lua_result: mlua::Result<mlua::Value> = lua.load(script).eval();
106 | |                 match lua_result {
...   |
117 | |             };
    | |_____________- temporary `lua` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
104 ~                 
105 +                 let lua_result = self.lua.lock().eval();
106 ~                 
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/engine.rs:156:21
    |
155 |               let chunk = {
    |  _________________________-
156 | |                 let lua = self.lua.lock();
    | |                     ^^^
157 | |                 let lua_result: mlua::Result<mlua::Value> = lua.load(script).eval();
158 | |                 match lua_result {
...   |
190 | |             };
    | |_____________- temporary `lua` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
156 ~                 
157 +                 let lua_result = self.lua.lock().eval();
158 ~                 
    |

warning: this function has too many lines (622/100)
   --> llmspell-bridge/src/lua/globals/agent.rs:21:5
    |
21  | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
22  | |         // invoke method (same as execute in API) - synchronous wrapper
23  | |         methods.add_method("invoke", |lua, this, input: Table| {
24  | |             let agent_input = lua_table_to_agent_input(lua, input)?;
...   |
796 | |         });
797 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this could be a `const fn`
   --> llmspell-bridge/src/lua/globals/agent.rs:822:5
    |
822 | /     fn new(bridge: Arc<AgentBridge>) -> Self {
823 | |         Self {
824 | |             bridge,
825 | |             name: None,
...   |
841 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
822 |     const fn new(bridge: Arc<AgentBridge>) -> Self {
    |     +++++

warning: this function has too many lines (155/100)
    --> llmspell-bridge/src/lua/globals/agent.rs:845:5
     |
845  | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
846  | |         // name method
847  | |         methods.add_method_mut("name", |_, this, name: String| {
848  | |             this.name = Some(name);
...    |
1047 | |         });
1048 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/agent.rs:1026:45
     |
1026 |             let agent_name_for_create = name.clone();
     |                                             ^^^^^^^^ help: remove this
     |
note: this value is dropped without further use
    --> llmspell-bridge/src/lua/globals/agent.rs:1026:41
     |
1026 |             let agent_name_for_create = name.clone();
     |                                         ^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone
     = note: `-W clippy::redundant-clone` implied by `-W clippy::nursery`
     = help: to override `-W clippy::nursery` add `#[allow(clippy::redundant_clone)]`

warning: this function has too many lines (375/100)
    --> llmspell-bridge/src/lua/globals/agent.rs:1058:1
     |
1058 | / pub fn inject_agent_global(
1059 | |     lua: &Lua,
1060 | |     context: &GlobalContext,
1061 | |     bridge: Arc<AgentBridge>,
...    |
1561 | |     Ok(())
1562 | | }
     | |_^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
    --> llmspell-bridge/src/lua/globals/agent.rs:1061:13
     |
1061 |     bridge: Arc<AgentBridge>,
     |             ^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<AgentBridge>`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/agent.rs:1516:36
     |
1516 |     let bridge_for_builder = bridge.clone();
     |                                    ^^^^^^^^ help: remove this
     |
note: this value is dropped without further use
    --> llmspell-bridge/src/lua/globals/agent.rs:1516:30
     |
1516 |     let bridge_for_builder = bridge.clone();
     |                              ^^^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: this function has too many lines (236/100)
   --> llmspell-bridge/src/lua/globals/artifact.rs:21:1
    |
21  | / pub fn inject_artifact_global(
22  | |     lua: &Lua,
23  | |     _context: &GlobalContext,
24  | |     artifact_bridge: Arc<ArtifactBridge>,
...   |
349 | |     Ok(())
350 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/globals/hook.rs:235:22
    |
235 | fn parse_priority(s: Option<String>) -> Priority {
    |                      ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-bridge/src/lua/globals/hook.rs:246:1
    |
246 | / pub fn inject_hook_global(
247 | |     lua: &Lua,
248 | |     _context: &GlobalContext,
249 | |     hook_bridge: Arc<HookBridge>,
250 | | ) -> Result<()> {
    | |_______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (188/100)
   --> llmspell-bridge/src/lua/globals/hook.rs:246:1
    |
246 | / pub fn inject_hook_global(
247 | |     lua: &Lua,
248 | |     _context: &GlobalContext,
249 | |     hook_bridge: Arc<HookBridge>,
...   |
477 | |     Ok(())
478 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/globals/hook.rs:439:13
    |
439 | /             if let Ok(lua_handle) = handle.borrow::<LuaHookHandle>() {
440 | |                 block_on_async::<_, _, LLMSpellError>(
441 | |                     "hook_unregister_standalone",
442 | |                     async move {
...   |
454 | |                 Ok(false) // Invalid handle, return false instead of error
455 | |             }
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
439 ~             handle.borrow::<LuaHookHandle>().map_or_else(|_| Ok(false), |lua_handle| block_on_async::<_, _, LLMSpellError>(
440 +                     "hook_unregister_standalone",
441 +                     async move {
442 +                         let mut handle_lock = lua_handle.handle.write().await;
443 +                         if let Some(h) = handle_lock.take() {
444 +                             lua_handle.hook_bridge.unregister_hook(&h).await?;
445 +                             Ok::<bool, LLMSpellError>(true)
446 +                         } else {
447 +                             Ok::<bool, LLMSpellError>(false)
448 +                         }
449 +                     },
450 +                     None,
451 +                 ))
    |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-bridge/src/lua/globals/json.rs:10:1
   |
10 | pub fn inject_json_global(lua: &Lua) -> Result<(), LLMSpellError> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/replay.rs:156:48
    |
156 |                     arr.push(lua_value_to_json(_lua, v)?);
    |                                                ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/replay.rs:125:22
    |
125 | fn lua_value_to_json(_lua: &Lua, value: Value) -> LuaResult<serde_json::Value> {
    |                      ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding
    = note: `-W clippy::used-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::used_underscore_binding)]`

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/replay.rs:163:53
    |
163 |                     map.insert(k, lua_value_to_json(_lua, v)?);
    |                                                     ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/replay.rs:125:22
    |
125 | fn lua_value_to_json(_lua: &Lua, value: Value) -> LuaResult<serde_json::Value> {
    |                      ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/lua/globals/session.rs:16:5
   |
16 | /// SessionBuilder for creating sessions with method chaining
   |     ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
16 - /// SessionBuilder for creating sessions with method chaining
16 + /// `SessionBuilder` for creating sessions with method chaining
   |

warning: this could be a `const fn`
  --> llmspell-bridge/src/lua/globals/session.rs:26:5
   |
26 | /     fn new(bridge: Arc<SessionBridge>) -> Self {
27 | |         Self {
28 | |             bridge,
29 | |             name: None,
...  |
33 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
26 |     const fn new(bridge: Arc<SessionBridge>) -> Self {
   |     +++++

warning: this function has too many lines (244/100)
   --> llmspell-bridge/src/lua/globals/session.rs:97:1
    |
97  | / pub fn inject_session_global(
98  | |     lua: &Lua,
99  | |     _context: &GlobalContext,
100 | |     session_bridge: Arc<SessionBridge>,
...   |
428 | |     Ok(())
429 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/globals/session.rs:100:21
    |
100 |     session_bridge: Arc<SessionBridge>,
    |                     ^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<SessionBridge>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: redundant clone
   --> llmspell-bridge/src/lua/globals/session.rs:419:44
    |
419 |     let bridge_for_builder = session_bridge.clone();
    |                                            ^^^^^^^^ help: remove this
    |
note: this value is dropped without further use
   --> llmspell-bridge/src/lua/globals/session.rs:419:30
    |
419 |     let bridge_for_builder = session_bridge.clone();
    |                              ^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/globals/session.rs:163:29
    |
163 |           let session_query = if let Some(q) = query {
    |  _____________________________^
164 | |             // Convert Lua table to SessionQuery
165 | |             let mut query = SessionQuery::default();
...   |
181 | |             SessionQuery::default()
182 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
163 ~         let session_query = query.map_or_else(SessionQuery::default, |q| {
164 +             // Convert Lua table to SessionQuery
165 +             let mut query = SessionQuery::default();
166 + 
167 +             if let Ok(Some(_status)) = q.get::<_, Option<String>>("status") {
168 +                 // Parse status - implementation would need the actual status parsing
169 +             }
170 + 
171 +             if let Ok(Some(tags)) = q.get::<_, Option<Vec<String>>>("tags") {
172 +                 query.tags = tags;
173 +             }
174 + 
175 +             if let Ok(Some(limit)) = q.get::<_, Option<usize>>("limit") {
176 +                 query.limit = Some(limit);
177 +             }
178 + 
179 +             query
180 ~         });
    |

warning: this function has too many lines (290/100)
   --> llmspell-bridge/src/lua/globals/state.rs:15:1
    |
15  | / pub fn inject_state_global(
16  | |     lua: &Lua,
17  | |     _context: &GlobalContext,
18  | |     state_global: &StateGlobal,
...   |
391 | |     Ok(())
392 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-bridge/src/lua/globals/state.rs:49:25
   |
46 |               } else {
   |  ____________________-
47 | |                 // Fallback to in-memory storage
48 | |                 let full_key = format!("{scope_str}:{key}");
49 | |                 let mut state = save_fallback_state.write();
   | |                         ^^^^^
50 | |                 state.insert(full_key, json_value);
51 | |                 Ok(())
52 | |             }
   | |_____________- temporary `state` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
   |
49 ~                 
50 +                 save_fallback_state.write().insert(full_key, json_value);
51 ~                 
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/globals/state.rs:110:21
    |
107 |           } else {
    |  ________________-
108 | |             // Fallback to in-memory storage
109 | |             let full_key = format!("{scope_str}:{key}");
110 | |             let mut state = delete_fallback_state.write();
    | |                     ^^^^^
111 | |             state.remove(&full_key);
112 | |             Ok(())
113 | |         }
    | |_________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
110 ~             
111 +             delete_fallback_state.write().remove(&full_key);
112 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/globals/state.rs:141:17
    |
139 |           } else {
    |  ________________-
140 | |             // Fallback to in-memory storage
141 | |             let state = list_fallback_state.read();
    | |                 ^^^^^
142 | |             let prefix = format!("{scope_str}:");
...   |
153 | |             Ok(table)
154 | |         }
    | |_________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
141 ~             
142 +             let keys = list_fallback_state.read().collect();
143 |             let prefix = format!("{scope_str}:");
144 ~             
    |

warning: all if blocks contain the same code at the end
  --> llmspell-bridge/src/lua/globals/streaming.rs:56:29
   |
56 | / ...                       Ok(value)
57 | | ...                   }
   | |_______________________^
   |
   = note: the end suggestion probably needs some adjustments to use the expression result correctly
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#branches_sharing_code
   = note: `-W clippy::branches-sharing-code` implied by `-W clippy::nursery`
   = help: to override `-W clippy::nursery` add `#[allow(clippy::branches_sharing_code)]`
help: consider moving these statements after the if
   |
56 ~                             }
57 +                             Ok(value)
   |

warning: this function has too many lines (264/100)
   --> llmspell-bridge/src/lua/globals/tool.rs:18:1
    |
18  | / pub fn inject_tool_global(
19  | |     lua: &Lua,
20  | |     _context: &GlobalContext,
21  | |     registry: Arc<ComponentRegistry>,
...   |
370 | |     Ok(())
371 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/lua/globals/workflow.rs:18:49
   |
18 | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
   |                                                 ^^^^^ help: consider taking a reference instead: `&Table`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-bridge/src/lua/globals/workflow.rs:105:9
    |
105 | /         "fail_fast" | "failfast" => ErrorStrategy::FailFast,
106 | |         _ => ErrorStrategy::FailFast,
    | |________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-bridge/src/lua/globals/workflow.rs:106:9
    |
106 |         _ => ErrorStrategy::FailFast,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:153:45
    |
153 |                         and_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:1
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items
    = note: `-W clippy::used-underscore-items` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::used_underscore_items)]`

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/workflow.rs:153:62
    |
153 |                         and_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                                              ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:21
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    |                     ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:166:44
    |
166 |                         or_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:1
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/workflow.rs:166:61
    |
166 |                         or_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                                             ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:21
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    |                     ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:176:45
    |
176 |                         condition: Box::new(_parse_condition(_lua, inner)?),
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:1
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/workflow.rs:176:62
    |
176 |                         condition: Box::new(_parse_condition(_lua, inner)?),
    |                                                              ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:21
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    |                     ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: this function has too many lines (152/100)
   --> llmspell-bridge/src/lua/globals/workflow.rs:233:5
    |
233 | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
234 | |         // execute method
235 | |         methods.add_method("execute", |lua, this, input: Option<Table>| {
236 | |             let input_json = if let Some(input_table) = input {
...   |
437 | |         });
438 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/lua/globals/workflow.rs:441:5
    |
441 | /// WorkflowBuilder for creating workflows with method chaining
    |     ^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
441 - /// WorkflowBuilder for creating workflows with method chaining
441 + /// `WorkflowBuilder` for creating workflows with method chaining
    |

warning: very complex type used. Consider factoring parts into `type` definitions
   --> llmspell-bridge/src/lua/globals/workflow.rs:451:16
    |
451 |     condition: Option<Box<dyn Fn(&serde_json::Value) -> bool + Send + Sync>>,
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#type_complexity

warning: very complex type used. Consider factoring parts into `type` definitions
   --> llmspell-bridge/src/lua/globals/workflow.rs:455:21
    |
455 |     loop_condition: Option<Box<dyn Fn(&serde_json::Value) -> bool + Send + Sync>>,
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#type_complexity

warning: this function has too many lines (187/100)
   --> llmspell-bridge/src/lua/globals/workflow.rs:482:5
    |
482 | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
483 | |         // Set workflow type
484 | |         methods.add_method_mut("sequential", |_, this, ()| {
485 | |             this.workflow_type = Some("sequential".to_string());
...   |
714 | |         });
715 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:527:24
    |
527 |             let step = _parse_workflow_step(lua, step_table)?;
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:18:1
    |
18  | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:545:24
    |
545 |             let step = _parse_workflow_step(lua, step_table)?;
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:18:1
    |
18  | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:551:24
    |
551 |             let step = _parse_workflow_step(lua, step_table)?;
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:18:1
    |
18  | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: redundant clone
   --> llmspell-bridge/src/lua/globals/workflow.rs:693:37
    |
693 |             let workflow_name = name.clone();
    |                                     ^^^^^^^^ help: remove this
    |
note: this value is dropped without further use
   --> llmspell-bridge/src/lua/globals/workflow.rs:693:33
    |
693 |             let workflow_name = name.clone();
    |                                 ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: this function has too many lines (539/100)
    --> llmspell-bridge/src/lua/globals/workflow.rs:748:1
     |
748  | / pub fn inject_workflow_global(
749  | |     lua: &Lua,
750  | |     _context: &GlobalContext,
751  | |     workflow_bridge: Arc<WorkflowBridge>,
...    |
1416 | |     Ok(())
1417 | | }
     | |_^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/globals/workflow.rs:751:22
    |
751 |     workflow_bridge: Arc<WorkflowBridge>,
    |                      ^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<WorkflowBridge>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/workflow.rs:1296:40
     |
1296 |     let _bridge_clone = workflow_bridge.clone();
     |                                        ^^^^^^^^ help: remove this
     |
note: cloned value is neither consumed nor mutated
    --> llmspell-bridge/src/lua/globals/workflow.rs:1296:25
     |
1296 |     let _bridge_clone = workflow_bridge.clone();
     |                         ^^^^^^^^^^^^^^^^^^^^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/workflow.rs:1408:45
     |
1408 |     let bridge_for_builder = workflow_bridge.clone();
     |                                             ^^^^^^^^ help: remove this
     |
note: this value is dropped without further use
    --> llmspell-bridge/src/lua/globals/workflow.rs:1408:30
     |
1408 |     let bridge_for_builder = workflow_bridge.clone();
     |                              ^^^^^^^^^^^^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/lua/hook_adapter.rs:74:68
   |
74 |     /// Returns an error if the Lua value cannot be converted to a HookResult
   |                                                                    ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
74 -     /// Returns an error if the Lua value cannot be converted to a HookResult
74 +     /// Returns an error if the Lua value cannot be converted to a `HookResult`
   |

warning: redundant closure
   --> llmspell-bridge/src/lua/hook_adapter.rs:175:43
    |
175 |             .map_or(HookResult::Continue, |hook_result| hook_result.clone())
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::clone::Clone::clone`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: the function has a cognitive complexity of (45/25)
  --> llmspell-bridge/src/lua/sync_utils.rs:77:37
   |
77 |         tokio::task::block_in_place(|| {
   |                                     ^^
   |
   = help: you could split it up into multiple smaller functions
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity
   = note: `-W clippy::cognitive-complexity` implied by `-W clippy::nursery`
   = help: to override `-W clippy::nursery` add `#[allow(clippy::cognitive_complexity)]`

warning: the function has a cognitive complexity of (38/25)
   --> llmspell-bridge/src/lua/sync_utils.rs:180:37
    |
180 |         tokio::task::block_in_place(|| {
    |                                     ^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/sync_utils.rs:194:21
    |
194 | /                     match tokio::time::timeout(duration, future).await {
195 | |                         Ok(result) => result,
196 | |                         Err(_) => Err(mlua::Error::RuntimeError(format!(
197 | |                             "{op_name} timed out after {duration:?}"
198 | |                         ))),
199 | |                     }
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
194 ~                     (tokio::time::timeout(duration, future).await).map_or_else(|_| Err(mlua::Error::RuntimeError(format!(
195 +                             "{op_name} timed out after {duration:?}"
196 +                         ))), |result| result)
    |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/mod.rs:1:57
  |
1 | //! ABOUTME: JavaScript script engine implementation of ScriptEngineBridge
  |                                                         ^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: JavaScript script engine implementation of ScriptEngineBridge
1 + //! ABOUTME: JavaScript script engine implementation of `ScriptEngineBridge`
  |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/engine.rs:1:14
  |
1 | //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
  |              ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
1 + //! ABOUTME: `JSEngine` implementation of ScriptEngineBridge trait
  |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/engine.rs:1:41
  |
1 | //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
  |                                         ^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
1 + //! ABOUTME: JSEngine implementation of `ScriptEngineBridge` trait
  |

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/engine.rs:31:5
   |
31 | /     pub fn engine_features() -> EngineFeatures {
32 | |         EngineFeatures {
33 | |             async_execution: true, // Native async/await
34 | |             streaming: true,       // Via async generators
...  |
41 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
31 |     pub const fn engine_features() -> EngineFeatures {
   |         +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/agent.rs:13:1
   |
13 | / pub fn inject_agent_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
22 | |     Ok(())
23 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_agent_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/event.rs:18:1
   |
18 | / pub fn inject_event_global(
19 | |     _ctx: &mut Context,
20 | |     _context: &GlobalContext,
21 | | ) -> Result<(), LLMSpellError> {
...  |
27 | |     Ok(())
28 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
18 | pub const fn inject_event_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/hook.rs:13:1
   |
13 | / pub fn inject_hook_global(_ctx: &mut boa_engine::Context, _context: &GlobalContext) -> Result<()> {
...  |
19 | |     Ok(())
20 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_hook_global(_ctx: &mut boa_engine::Context, _context: &GlobalContext) -> Result<()> {
   |     +++++

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/globals/json.rs:9:41
  |
9 | /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
  |                                         ^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
9 - /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
9 + /// Note: JavaScript already has native `JSON.parse()` and JSON.stringify()
  |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/globals/json.rs:9:58
  |
9 | /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
  |                                                          ^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
9 - /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
9 + /// Note: JavaScript already has native JSON.parse() and `JSON.stringify()`
  |

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/json.rs:16:1
   |
16 | / pub fn inject_json_global(
17 | |     _ctx: &mut boa_engine::Context,
18 | |     _context: &GlobalContext,
19 | | ) -> Result<(), LLMSpellError> {
...  |
25 | |     Ok(())
26 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
16 | pub const fn inject_json_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/state.rs:13:1
   |
13 | / pub fn inject_state_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | |     _state_global: &StateGlobal,
...  |
25 | |     Ok(())
26 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_state_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/streaming.rs:13:1
   |
13 | / pub fn inject_streaming_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
23 | |     Ok(())
24 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_streaming_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/tool.rs:13:1
   |
13 | / pub fn inject_tool_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
23 | |     Ok(())
24 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_tool_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/workflow.rs:13:1
   |
13 | / pub fn inject_workflow_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
23 | |     Ok(())
24 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_workflow_global(
   |     +++++

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/event_bridge.rs:181:5
    |
181 | /     pub async fn unsubscribe(&self, subscription_id: &str) -> Result<bool> {
182 | |         let mut subscriptions = self.subscriptions.write();
...   |
186 | |         Ok(subscriptions.remove(subscription_id).is_some())
187 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/event_bridge.rs:210:5
    |
210 | /     pub async fn get_stats(&self) -> serde_json::Value {
211 | |         let stats = self.event_bus.get_stats();
212 | |         let subscription_count = self.subscription_count();
...   |
224 | |         })
225 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/globals/session_infrastructure.rs:123:1
    |
123 | / async fn get_or_create_event_bus(context: &GlobalContext) -> Result<Arc<EventBus>> {
124 | |     if let Some(event_bus) = context.get_bridge::<EventBus>("event_bus") {
125 | |         return Ok(event_bus);
...   |
131 | |     Ok(event_bus)
132 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/globals/session_infrastructure.rs:141:1
    |
141 | / async fn create_storage_backend(backend_type: &str) -> Result<Arc<dyn StorageBackend>> {
142 | |     match backend_type {
143 | |         "memory" => {
144 | |             debug!("Creating in-memory storage backend for sessions");
...   |
162 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/globals/state_infrastructure.rs:211:1
    |
211 | / async fn get_or_create_event_bus(context: &GlobalContext) -> Result<Arc<EventBus>> {
212 | |     if let Some(event_bus) = context.get_bridge::<EventBus>("event_bus") {
213 | |         return Ok(event_bus);
...   |
219 | |     Ok(event_bus)
220 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/agent_bridge.rs:106:5
    |
106 | /     pub async fn list_agent_types(&self) -> Vec<String> {
107 | |         self.discovery.list_agent_types()
108 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/agent_bridge.rs:111:5
    |
111 | /     pub async fn list_templates(&self) -> Vec<String> {
112 | |         self.discovery.list_templates()
113 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/agent_bridge.rs:120:5
    |
120 | /     pub async fn get_agent_info(&self, agent_type: &str) -> Result<AgentInfo> {
121 | |         self.discovery.get_agent_info(agent_type)
122 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
    --> llmspell-bridge/src/agent_bridge.rs:1123:5
     |
1123 | /     pub async fn set_shared_memory(
1124 | |         &self,
1125 | |         scope: serde_json::Value,
1126 | |         key: String,
...    |
1131 | |         Ok(())
1132 | |     }
     | |_____^
     |
     = help: consider removing the `async` from this function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
    --> llmspell-bridge/src/agent_bridge.rs:1139:5
     |
1139 | /     pub async fn get_shared_memory(
1140 | |         &self,
1141 | |         scope: serde_json::Value,
1142 | |         key: &str,
...    |
1145 | |         Ok(self.shared_memory.get(&scope, key))
1146 | |     }
     | |_____^
     |
     = help: consider removing the `async` from this function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
  --> llmspell-bridge/src/monitoring.rs:58:1
   |
58 | / pub async fn check_agent_health(_agent_id: &str) -> Result<HealthCheckResult> {
59 | |     let mut components = HashMap::new();
60 | |     components.insert(
61 | |         "agent_health".to_string(),
...  |
85 | |     })
86 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/orchestration.rs:399:5
    |
399 | /     pub async fn start_orchestration(&mut self, plan: OrchestrationPlan) -> Result<String> {
400 | |         let orchestration_id = format!("orch_{}", uuid::Uuid::new_v4());
...   |
420 | |         Ok(orchestration_id)
421 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflow_performance.rs:219:1
    |
219 | / pub async fn get_workflow_info_cached(workflow_type: &str) -> Option<WorkflowTypeInfo> {
220 | |     // Check cache first
221 | |     {
222 | |         let cache = WORKFLOW_TYPE_CACHE.read();
...   |
268 | |     Some(info)
269 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:271:1
    |
271 | / async fn create_sequential_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
272 | |     use llmspell_workflows::SequentialWorkflowBuilder;
273 | |
274 | |     let name = params
...   |
297 | |     Ok(SequentialWorkflowExecutor { workflow, name })
298 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:300:1
    |
300 | / async fn create_conditional_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
301 | |     use llmspell_workflows::{ConditionalBranch, ConditionalWorkflowBuilder};
302 | |
303 | |     let name = params
...   |
413 | |     Ok(ConditionalWorkflowExecutor { workflow, name })
414 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:416:1
    |
416 | / async fn create_loop_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
417 | |     use llmspell_workflows::{LoopIterator, LoopWorkflowBuilder};
418 | |
419 | |     let name = params
...   |
450 | |     Ok(LoopWorkflowExecutor { workflow, name })
451 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:453:1
    |
453 | / async fn create_parallel_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
454 | |     use llmspell_workflows::{ParallelBranch, ParallelWorkflowBuilder};
455 | |
456 | |     let name = params
...   |
522 | |     Ok(ParallelWorkflowExecutor { workflow, name })
523 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:848:5
    |
848 | /     pub async fn list_workflow_types(&self) -> Vec<String> {
849 | |         self.standardized_factory.list_workflow_types()
850 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:853:5
    |
853 | /     pub async fn get_workflow_info(&self, workflow_type: &str) -> Option<WorkflowInfo> {
854 | |         self.discovery.get_workflow_info(workflow_type).cloned()
855 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:858:5
    |
858 | /     pub async fn get_all_workflow_info(&self) -> Vec<(String, WorkflowInfo)> {
859 | |         self.discovery.get_workflow_types()
860 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
    --> llmspell-bridge/src/workflows.rs:1151:5
     |
1151 | /     async fn update_metrics(&self, success: bool, duration_ms: u64) {
1152 | |         self.metrics
1153 | |             .workflow_executions
1154 | |             .fetch_add(1, Ordering::Relaxed);
...    |
1176 | |             .store(new_avg, Ordering::Relaxed);
1177 | |     }
     | |_____^
     |
     = help: consider removing the `async` from this function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: binding's name is too similar to existing binding
   --> llmspell-events/src/bus.rs:400:13
    |
400 |         let received = receiver.recv().await.unwrap();
    |             ^^^^^^^^
    |
note: existing binding defined here
   --> llmspell-events/src/bus.rs:395:17
    |
395 |         let mut receiver = bus.subscribe("test.*").await.unwrap();
    |                 ^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names
    = note: `-W clippy::similar-names` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::similar_names)]`

warning: binding's name is too similar to existing binding
   --> llmspell-events/src/bus.rs:446:13
    |
446 |         let received1 = receiver1.recv().await.unwrap();
    |             ^^^^^^^^^
    |
note: existing binding defined here
   --> llmspell-events/src/bus.rs:439:17
    |
439 |         let mut receiver1 = bus.subscribe("multi.*").await.unwrap();
    |                 ^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names

warning: binding's name is too similar to existing binding
   --> llmspell-events/src/bus.rs:447:13
    |
447 |         let received2 = receiver2.recv().await.unwrap();
    |             ^^^^^^^^^
    |
note: existing binding defined here
   --> llmspell-events/src/bus.rs:439:17
    |
439 |         let mut receiver1 = bus.subscribe("multi.*").await.unwrap();
    |                 ^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names

warning: binding's name is too similar to existing binding
   --> llmspell-events/src/stream.rs:370:13
    |
370 |         let event1 = filtered.next().await.unwrap().unwrap();
    |             ^^^^^^
    |
note: existing binding defined here
   --> llmspell-events/src/stream.rs:357:13
    |
357 |         let events = vec![
    |             ^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names

warning: binding's name is too similar to existing binding
   --> llmspell-events/src/stream.rs:373:13
    |
373 |         let event2 = filtered.next().await.unwrap().unwrap();
    |             ^^^^^^
    |
note: existing binding defined here
   --> llmspell-events/src/stream.rs:357:13
    |
357 |         let events = vec![
    |             ^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names

warning: strict comparison of `f32` or `f64`
   --> llmspell-events/src/correlation/mod.rs:526:9
    |
526 |         assert_eq!(links[0].strength, 0.9);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#float_cmp
    = note: `-W clippy::float-cmp` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::float_cmp)]`
    = note: this warning originates in the macro `assert_eq` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: variables can be used directly in the `format!` string
   --> llmspell-events/src/correlation/mod.rs:544:37
    |
544 |                 UniversalEvent::new(format!("test.event.{}", i), Value::Null, Language::Rust);
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
544 -                 UniversalEvent::new(format!("test.event.{}", i), Value::Null, Language::Rust);
544 +                 UniversalEvent::new(format!("test.event.{i}"), Value::Null, Language::Rust);
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/src/overflow.rs:185:21
    |
185 |             reason: format!("Buffer full ({}/{}), event rejected", buffer_size, max_size),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
185 -             reason: format!("Buffer full ({}/{}), event rejected", buffer_size, max_size),
185 +             reason: format!("Buffer full ({buffer_size}/{max_size}), event rejected"),
    |

warning: single-character string constant used as pattern
  --> llmspell-events/src/serialization.rs:52:38
   |
52 |         assert!(pretty_json.contains("\n")); // Should have formatting
   |                                      ^^^^ help: consider using a `char`: `'\n'`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_char_pattern
   = note: `-W clippy::single-char-pattern` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_char_pattern)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-events/src/stream.rs:392:62
    |
392 |         let events = (0..1000).map(|i| Ok(create_test_event(&format!("test.{}", i))));
    |                                                              ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
392 -         let events = (0..1000).map(|i| Ok(create_test_event(&format!("test.{}", i))));
392 +         let events = (0..1000).map(|i| Ok(create_test_event(&format!("test.{i}"))));
    |

warning: binding's name is too similar to existing binding
   --> llmspell-events/tests/high_frequency_stress.rs:490:9
    |
490 |     let received = receiver.recv().await.unwrap();
    |         ^^^^^^^^
    |
note: existing binding defined here
   --> llmspell-events/tests/high_frequency_stress.rs:478:13
    |
478 |     let mut receiver = bus.subscribe("integration.*").await.unwrap();
    |             ^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names
    = note: `-W clippy::similar-names` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::similar_names)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-events/tests/high_frequency_stress.rs:19:13
   |
19 |             format!("stress.test.{}", seq),
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
19 -             format!("stress.test.{}", seq),
19 +             format!("stress.test.{seq}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-events/tests/high_frequency_stress.rs:56:17
   |
56 |                 eprintln!("Failed to publish event {}: {:?}", i, e);
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
56 -                 eprintln!("Failed to publish event {}: {:?}", i, e);
56 +                 eprintln!("Failed to publish event {i}: {e:?}");
   |

warning: casting `u64` to `f64` causes a loss of precision (`u64` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-events/tests/high_frequency_stress.rs:67:26
   |
67 |         let actual_eps = target_events as f64 / publish_duration.as_secs_f64();
   |                          ^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
   = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `u64` to `f64` causes a loss of precision (`u64` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-events/tests/high_frequency_stress.rs:73:28
   |
73 |         let receive_rate = final_received as f64 / publish_duration.as_secs_f64();
   |                            ^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
  --> llmspell-events/tests/high_frequency_stress.rs:81:9
   |
81 | /         println!(
82 | |             "Received {} events ({:.0} EPS)",
83 | |             final_received, receive_rate
84 | |         );
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
  --> llmspell-events/tests/high_frequency_stress.rs:90:9
   |
90 | /         assert!(
91 | |             actual_eps >= 8_000.0,
92 | |             "Should achieve at least 8K EPS, got {:.0}",
93 | |             actual_eps
94 | |         );
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:95:9
    |
95  | /         assert!(
96  | |             final_received >= target_events * 95 / 100,
97  | |             "Should receive at least 95% of events, got {}/{}",
98  | |             final_received,
99  | |             target_events
100 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:138:25
    |
138 |                         format!("concurrent.publisher_{}.event_{}", publisher_id, event_id),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
138 -                         format!("concurrent.publisher_{}.event_{}", publisher_id, event_id),
138 +                         format!("concurrent.publisher_{publisher_id}.event_{event_id}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:148:25
    |
148 | /                         eprintln!(
149 | |                             "Publisher {} failed at event {}: {:?}",
150 | |                             publisher_id, event_id, e
151 | |                         );
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-events/tests/high_frequency_stress.rs:160:21
    |
160 |                     events_per_publisher as f64 / duration.as_secs_f64()
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u64` to `f64` causes a loss of precision (`u64` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-events/tests/high_frequency_stress.rs:182:27
    |
182 |         let overall_eps = final_received as f64 / publish_duration.as_secs_f64();
    |                           ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:235:21
    |
235 |                     format!("memory.wave_{}.event_{}", wave, i),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
235 -                     format!("memory.wave_{}.event_{}", wave, i),
235 +                     format!("memory.wave_{wave}.event_{i}"),
    |

warning: casts from `i32` to `f64` can be expressed infallibly using `From`
   --> llmspell-events/tests/high_frequency_stress.rs:249:28
    |
249 |             let wave_eps = events_per_wave as f64 / wave_duration.as_secs_f64();
    |                            ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `f64::from` instead
    |
249 -             let wave_eps = events_per_wave as f64 / wave_duration.as_secs_f64();
249 +             let wave_eps = f64::from(events_per_wave) / wave_duration.as_secs_f64();
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:287:9
    |
287 |         println!("  Events published: {}", total_events);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
287 -         println!("  Events published: {}", total_events);
287 +         println!("  Events published: {total_events}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:288:9
    |
288 |         println!("  Events received: {}", final_received);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
288 -         println!("  Events received: {}", final_received);
288 +         println!("  Events received: {final_received}");
    |

warning: casting `i32` to `u64` may lose the sign of the value
   --> llmspell-events/tests/high_frequency_stress.rs:293:31
    |
293 |             final_received >= total_events as u64 * 95 / 100,
    |                               ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
    = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: calling `OverflowConfig::default()` is more clear than this expression
   --> llmspell-events/tests/high_frequency_stress.rs:311:30
    |
311 |             overflow_config: Default::default(),
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `OverflowConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: matching over `()` is more explicit
   --> llmspell-events/tests/high_frequency_stress.rs:340:20
    |
340 |                 Ok(_) => successful_publishes += 1,
    |                    ^ help: use `()` instead of `_`: `()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns
    = note: `-W clippy::ignored-unit-patterns` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ignored_unit_patterns)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:361:9
    |
361 |         println!("  Successful publishes: {}", successful_publishes);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
361 -         println!("  Successful publishes: {}", successful_publishes);
361 +         println!("  Successful publishes: {successful_publishes}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:362:9
    |
362 |         println!("  Failed publishes: {}", failed_publishes);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
362 -         println!("  Failed publishes: {}", failed_publishes);
362 +         println!("  Failed publishes: {failed_publishes}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:363:9
    |
363 |         println!("  Events received: {}", final_received);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
363 -         println!("  Events received: {}", final_received);
363 +         println!("  Events received: {final_received}");
    |

warning: casting `u64` to `f64` causes a loss of precision (`u64` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-events/tests/high_frequency_stress.rs:433:30
    |
433 |         let processing_eps = final_processed as f64 / process_duration.as_secs_f64();
    |                              ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:436:9
    |
436 |         println!("  Events processed: {}", final_processed);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
436 -         println!("  Events processed: {}", final_processed);
436 +         println!("  Events processed: {final_processed}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-events/tests/high_frequency_stress.rs:438:9
    |
438 |         println!("  Processing EPS: {:.0}", processing_eps);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
438 -         println!("  Processing EPS: {:.0}", processing_eps);
438 +         println!("  Processing EPS: {processing_eps:.0}");
    |

warning: calling `FlowControllerConfig::default()` is more clear than this expression
   --> llmspell-events/tests/high_frequency_stress.rs:475:42
    |
475 |     let bus = EventBus::with_persistence(Default::default(), storage_adapter, persistence_config);
    |                                          ^^^^^^^^^^^^^^^^^^ help: try: `FlowControllerConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: long literal lacking separators
  --> llmspell-utils/tests/rate_limiting_integration.rs:41:36
   |
41 |     assert_eq!(info.reset_at, Some(1234567890));
   |                                    ^^^^^^^^^^ help: consider: `1_234_567_890`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal
   = note: `-W clippy::unreadable-literal` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unreadable_literal)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/rate_limiting_integration.rs:203:21
    |
203 |         Ok(body) => println!("Response: {}", body),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
203 -         Ok(body) => println!("Response: {}", body),
203 +         Ok(body) => println!("Response: {body}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-utils/tests/rate_limiting_integration.rs:204:19
    |
204 |         Err(e) => eprintln!("Request failed after retries: {}", e),
    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
204 -         Err(e) => eprintln!("Request failed after retries: {}", e),
204 +         Err(e) => eprintln!("Request failed after retries: {e}"),
    |

warning: unused `async` for function with no await statements
   --> llmspell-security/src/sandbox/file_sandbox.rs:297:5
    |
297 | /     async fn create_test_sandbox() -> (FileSandbox, TempDir) {
298 | |         let temp_dir = TempDir::new().unwrap();
299 | |         let temp_path = temp_dir.path().to_string_lossy().to_string();
...   |
310 | |         (sandbox, temp_dir)
311 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `self` argument
   --> llmspell-state-traits/src/traits.rs:523:23
    |
523 |         fn scoped_key(&self, scope: &StateScope, key: &str) -> String {
    |                       ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: redundant closure
   --> llmspell-state-traits/src/traits.rs:556:22
    |
556 |                 .map(|s| s.to_string())
    |                      ^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-state-traits/src/traits.rs:651:9
    |
651 | /         struct TestData {
652 | |             name: String,
653 | |             value: i32,
654 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements
    = note: `-W clippy::items-after-statements` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::items_after_statements)]`

warning: `llmspell-bridge` (lib) generated 265 warnings (run `cargo clippy --fix --lib -p llmspell-bridge` to apply 76 suggestions)
warning: `llmspell-events` (lib test) generated 246 warnings (236 duplicates) (run `cargo clippy --fix --lib -p llmspell-events --tests` to apply 4 suggestions)
warning: `llmspell-events` (test "high_frequency_stress") generated 26 warnings (run `cargo clippy --fix --test "high_frequency_stress"` to apply 17 suggestions)
warning: `llmspell-utils` (test "rate_limiting_integration") generated 3 warnings (run `cargo clippy --fix --test "rate_limiting_integration"` to apply 2 suggestions)
warning: `llmspell-storage` (lib test) generated 8 warnings (8 duplicates)
warning: `llmspell-security` (lib test) generated 70 warnings (69 duplicates)
warning: `llmspell-state-traits` (lib test) generated 96 warnings (93 duplicates) (run `cargo clippy --fix --lib -p llmspell-state-traits --tests` to apply 1 suggestion)
warning: long literal lacking separators
   --> llmspell-testing/src/fixtures.rs:103:48
    |
103 |             .with_parameter("timestamp", json!(1234567890)),
    |                                                ^^^^^^^^^^ help: consider: `1_234_567_890`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal
    = note: `-W clippy::unreadable-literal` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unreadable_literal)]`

warning: item in documentation is missing backticks
 --> llmspell-testing/src/lib.rs:4:52
  |
4 | //! Comprehensive test suite and utilities for the LLMSpell framework.
  |                                                    ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
4 - //! Comprehensive test suite and utilities for the LLMSpell framework.
4 + //! Comprehensive test suite and utilities for the `LLMSpell` framework.
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/agent_helpers.rs:53:5
   |
53 |     pub fn new(provider: &str, model: &str) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(provider: &str, model: &str) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
   = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-testing/src/agent_helpers.rs:55:13
   |
55 |             format!("{}-{}-test", provider, model),
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
55 -             format!("{}-{}-test", provider, model),
55 +             format!("{provider}-{model}-test"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-testing/src/agent_helpers.rs:56:13
   |
56 |             format!("Test {} agent with model {}", provider, model),
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
56 -             format!("Test {} agent with model {}", provider, model),
56 +             format!("Test {provider} agent with model {model}"),
   |

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-testing/src/agent_helpers.rs:79:5
   |
79 | /     pub fn with_config(mut self, config: AgentConfig) -> Self {
80 | |         self.config = config;
81 | |         self
82 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use
   = note: `-W clippy::return-self-not-must-use` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::return_self_not_must_use)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/agent_helpers.rs:114:30
    |
114 |         Ok(AgentOutput::text(format!("Error handled: {}", error)))
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
114 -         Ok(AgentOutput::text(format!("Error handled: {}", error)))
114 +         Ok(AgentOutput::text(format!("Error handled: {error}")))
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:152:5
    |
152 |     pub fn new(name: &str) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: &str) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:164:5
    |
164 |     pub fn with_provider(mut self, provider: &str) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_provider(mut self, provider: &str) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:164:5
    |
164 | /     pub fn with_provider(mut self, provider: &str) -> Self {
165 | |         self.provider = Some(provider.to_string());
166 | |         self
167 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:170:5
    |
170 |     pub fn with_model(mut self, model: &str) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_model(mut self, model: &str) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:170:5
    |
170 | /     pub fn with_model(mut self, model: &str) -> Self {
171 | |         self.model = Some(model.to_string());
172 | |         self
173 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:176:5
    |
176 |     pub fn with_system_prompt(mut self, prompt: &str) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_system_prompt(mut self, prompt: &str) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:176:5
    |
176 | /     pub fn with_system_prompt(mut self, prompt: &str) -> Self {
177 | |         self.config.system_prompt = Some(prompt.to_string());
178 | |         self
179 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:182:5
    |
182 |     pub fn with_temperature(mut self, temperature: f32) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_temperature(mut self, temperature: f32) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:182:5
    |
182 | /     pub fn with_temperature(mut self, temperature: f32) -> Self {
183 | |         self.config.temperature = Some(temperature);
184 | |         self
185 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:188:5
    |
188 |     pub fn with_max_tokens(mut self, max_tokens: usize) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_max_tokens(mut self, max_tokens: usize) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:188:5
    |
188 | /     pub fn with_max_tokens(mut self, max_tokens: usize) -> Self {
189 | |         self.config.max_tokens = Some(max_tokens);
190 | |         self
191 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:194:5
    |
194 |     pub fn with_response(mut self, response: &str) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_response(mut self, response: &str) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:194:5
    |
194 | /     pub fn with_response(mut self, response: &str) -> Self {
195 | |         self.responses.push(response.to_string());
196 | |         self
197 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:200:5
    |
200 |     pub fn with_responses(mut self, responses: Vec<String>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_responses(mut self, responses: Vec<String>) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:200:5
    |
200 | /     pub fn with_responses(mut self, responses: Vec<String>) -> Self {
201 | |         self.responses.extend(responses);
202 | |         self
203 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:206:5
    |
206 |     pub fn with_metadata(mut self, metadata: ComponentMetadata) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_metadata(mut self, metadata: ComponentMetadata) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/agent_helpers.rs:206:5
    |
206 | /     pub fn with_metadata(mut self, metadata: ComponentMetadata) -> Self {
207 | |         self.metadata_overrides = Some(metadata);
208 | |         self
209 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/agent_helpers.rs:212:5
    |
212 |     pub async fn build(self) -> Result<TestProviderAgent, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:242:1
    |
242 | pub fn create_test_agent_config() -> AgentConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_agent_config() -> AgentConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: usage of wildcard import
   --> llmspell-testing/src/agent_helpers.rs:253:9
    |
253 |     use super::*;
    |         ^^^^^^^^ help: try: `super::{AgentTestBuilder, LLMSpellError, TestProviderAgent}`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports
    = note: `-W clippy::wildcard-imports` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::wildcard_imports)]`

warning: item in documentation is missing backticks
   --> llmspell-testing/src/agent_helpers.rs:255:23
    |
255 |     /// Create a test OpenAI agent
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
255 -     /// Create a test OpenAI agent
255 +     /// Create a test `OpenAI` agent
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/agent_helpers.rs:256:5
    |
256 |     pub async fn create_openai_agent(model: &str) -> Result<TestProviderAgent, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/agent_helpers.rs:268:5
    |
268 |     pub async fn create_anthropic_agent(model: &str) -> Result<TestProviderAgent, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/agent_helpers.rs:280:5
    |
280 |     pub async fn create_gemini_agent(model: &str) -> Result<TestProviderAgent, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/agent_helpers.rs:292:5
    |
292 |     pub async fn create_local_agent(model: &str) -> Result<TestProviderAgent, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: usage of wildcard import
   --> llmspell-testing/src/agent_helpers.rs:306:9
    |
306 |     use super::*;
    |         ^^^^^^^^ help: try: `super::ConversationMessage`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:310:5
    |
310 |     pub fn simple_conversation() -> Vec<ConversationMessage> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn simple_conversation() -> Vec<ConversationMessage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:319:5
    |
319 |     pub fn conversation_with_context(context: &str) -> Vec<ConversationMessage> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn conversation_with_context(context: &str) -> Vec<ConversationMessage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/agent_helpers.rs:321:41
    |
321 |               ConversationMessage::system(format!(
    |  _________________________________________^
322 | |                 "You are a helpful assistant. Context: {}",
323 | |                 context
324 | |             )),
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/agent_helpers.rs:326:44
    |
326 |             ConversationMessage::assistant(format!("The context is: {}", context)),
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
326 -             ConversationMessage::assistant(format!("The context is: {}", context)),
326 +             ConversationMessage::assistant(format!("The context is: {context}")),
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:331:5
    |
331 |     pub fn multi_turn_conversation(turns: usize) -> Vec<ConversationMessage> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn multi_turn_conversation(turns: usize) -> Vec<ConversationMessage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/agent_helpers.rs:348:5
    |
348 |     pub fn from_raw_messages(messages: Vec<(MessageRole, String)>) -> Vec<ConversationMessage> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn from_raw_messages(messages: Vec<(MessageRole, String)>) -> Vec<ConversationMessage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: usage of wildcard import
   --> llmspell-testing/src/agent_helpers.rs:362:9
    |
362 |     use super::*;
    |         ^^^^^^^^ help: try: `super::{Agent, AgentInput, AgentOutput, ExecutionContext, LLMSpellError, conversations, json}`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/agent_helpers.rs:365:5
    |
365 | /     pub async fn test_agent_error_handling(
366 | |         agent: &impl Agent,
367 | |     ) -> Result<Vec<AgentOutput>, LLMSpellError> {
    | |________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/agent_helpers.rs:386:5
    |
386 |     pub async fn test_conversation_memory(agent: &impl Agent) -> Result<bool, LLMSpellError> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
  --> llmspell-testing/src/attributes.rs:12:30
   |
12 | //! - **Speed**: fast, slow, very_slow
   |                              ^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
12 - //! - **Speed**: fast, slow, very_slow
12 + //! - **Speed**: fast, slow, `very_slow`
   |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/attributes.rs:14:25
   |
14 | //! - **Dependencies**: requires_network, requires_llm, requires_database
   |                         ^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
14 - //! - **Dependencies**: requires_network, requires_llm, requires_database
14 + //! - **Dependencies**: `requires_network`, requires_llm, requires_database
   |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/attributes.rs:14:43
   |
14 | //! - **Dependencies**: requires_network, requires_llm, requires_database
   |                                           ^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
14 - //! - **Dependencies**: requires_network, requires_llm, requires_database
14 + //! - **Dependencies**: requires_network, `requires_llm`, requires_database
   |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/attributes.rs:14:57
   |
14 | //! - **Dependencies**: requires_network, requires_llm, requires_database
   |                                                         ^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
14 - //! - **Dependencies**: requires_network, requires_llm, requires_database
14 + //! - **Dependencies**: requires_network, requires_llm, `requires_database`
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:168:5
    |
168 |     pub fn new(speed: Speed, scope: Scope) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(speed: Speed, scope: Scope) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:177:5
    |
177 |     pub fn with_component(mut self, component: Component) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_component(mut self, component: Component) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:177:5
    |
177 | /     pub fn with_component(mut self, component: Component) -> Self {
178 | |         self.components.insert(component);
179 | |         self
180 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:183:5
    |
183 |     pub fn with_priority(mut self, priority: Priority) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_priority(mut self, priority: Priority) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:183:5
    |
183 | /     pub fn with_priority(mut self, priority: Priority) -> Self {
184 | |         self.priority = priority;
185 | |         self
186 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:189:5
    |
189 |     pub fn with_stability(mut self, stability: Stability) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_stability(mut self, stability: Stability) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:189:5
    |
189 | /     pub fn with_stability(mut self, stability: Stability) -> Self {
190 | |         self.stability = stability;
191 | |         self
192 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:195:5
    |
195 |     pub fn with_dependency(mut self, dependency: Dependency) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_dependency(mut self, dependency: Dependency) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:195:5
    |
195 | /     pub fn with_dependency(mut self, dependency: Dependency) -> Self {
196 | |         self.dependencies.insert(dependency);
197 | |         self
198 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:201:5
    |
201 | /     pub fn with_tag(mut self, tag: impl Into<String>) -> Self {
202 | |         self.tags.insert(tag.into());
203 | |         self
204 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:207:5
    |
207 |     pub fn matches_filter(&self, filter: &TestFilter) -> bool {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn matches_filter(&self, filter: &TestFilter) -> bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:212:17
    |
212 |                 (Speed::VerySlow, Speed::Slow) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`
help: or try merging the arm patterns and removing the obsolete arm
    |
211 -                 (Speed::VerySlow, Speed::Fast) => return false,
212 -                 (Speed::VerySlow, Speed::Slow) => return false,
211 +                 (Speed::VerySlow, Speed::Slow) | (Speed::VerySlow, Speed::Fast) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:213:17
    |
213 |                 (Speed::Slow, Speed::Fast) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
211 ~                 (Speed::VerySlow, Speed::Slow) => return false,
212 ~                 (Speed::Slow, Speed::Fast) | (Speed::VerySlow, Speed::Fast) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:212:17
    |
212 |                 (Speed::VerySlow, Speed::Slow) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
212 ~                 (Speed::VerySlow, Speed::Slow) | (Speed::Slow, Speed::Fast) => return false,
213 ~                 _ => {}
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:238:17
    |
238 |                 (Priority::Low, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 -                 (Priority::Low, Priority::Medium) => return false,
238 -                 (Priority::Low, Priority::High) => return false,
237 +                 (Priority::Low, Priority::High) | (Priority::Low, Priority::Medium) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:239:17
    |
239 |                 (Priority::Low, Priority::Critical) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~                 (Priority::Low, Priority::High) => return false,
238 ~                 (Priority::Low, Priority::Critical) | (Priority::Low, Priority::Medium) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:238:17
    |
238 |                 (Priority::Low, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
238 ~                 (Priority::Low, Priority::High) | (Priority::Low, Priority::Critical) => return false,
239 ~                 (Priority::Medium, Priority::High) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:240:17
    |
240 |                 (Priority::Medium, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~                 (Priority::Low, Priority::High) => return false,
238 |                 (Priority::Low, Priority::Critical) => return false,
239 ~                 (Priority::Medium, Priority::High) | (Priority::Low, Priority::Medium) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:238:17
    |
238 |                 (Priority::Low, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
238 ~                 (Priority::Low, Priority::High) | (Priority::Medium, Priority::High) => return false,
239 |                 (Priority::Low, Priority::Critical) => return false,
240 ~                 (Priority::Medium, Priority::Critical) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:239:17
    |
239 |                 (Priority::Low, Priority::Critical) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
239 ~                 (Priority::Low, Priority::Critical) | (Priority::Medium, Priority::High) => return false,
240 ~                 (Priority::Medium, Priority::Critical) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:241:17
    |
241 |                 (Priority::Medium, Priority::Critical) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~                 (Priority::Low, Priority::High) => return false,
238 |                 (Priority::Low, Priority::Critical) => return false,
239 |                 (Priority::Medium, Priority::High) => return false,
240 ~                 (Priority::Medium, Priority::Critical) | (Priority::Low, Priority::Medium) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:238:17
    |
238 |                 (Priority::Low, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
238 ~                 (Priority::Low, Priority::High) | (Priority::Medium, Priority::Critical) => return false,
239 |                 (Priority::Low, Priority::Critical) => return false,
240 |                 (Priority::Medium, Priority::High) => return false,
241 ~                 (Priority::High, Priority::Critical) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:239:17
    |
239 |                 (Priority::Low, Priority::Critical) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
239 ~                 (Priority::Low, Priority::Critical) | (Priority::Medium, Priority::Critical) => return false,
240 |                 (Priority::Medium, Priority::High) => return false,
241 ~                 (Priority::High, Priority::Critical) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:240:17
    |
240 |                 (Priority::Medium, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
240 ~                 (Priority::Medium, Priority::High) | (Priority::Medium, Priority::Critical) => return false,
241 ~                 (Priority::High, Priority::Critical) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:242:17
    |
242 |                 (Priority::High, Priority::Critical) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
237 ~                 (Priority::Low, Priority::High) => return false,
238 |                 (Priority::Low, Priority::Critical) => return false,
239 |                 (Priority::Medium, Priority::High) => return false,
240 |                 (Priority::Medium, Priority::Critical) => return false,
241 ~                 (Priority::High, Priority::Critical) | (Priority::Low, Priority::Medium) => return false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:238:17
    |
238 |                 (Priority::Low, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
238 ~                 (Priority::Low, Priority::High) | (Priority::High, Priority::Critical) => return false,
239 |                 (Priority::Low, Priority::Critical) => return false,
240 |                 (Priority::Medium, Priority::High) => return false,
241 |                 (Priority::Medium, Priority::Critical) => return false,
242 ~                 _ => {}
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:239:17
    |
239 |                 (Priority::Low, Priority::Critical) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
239 ~                 (Priority::Low, Priority::Critical) | (Priority::High, Priority::Critical) => return false,
240 |                 (Priority::Medium, Priority::High) => return false,
241 |                 (Priority::Medium, Priority::Critical) => return false,
242 ~                 _ => {}
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:240:17
    |
240 |                 (Priority::Medium, Priority::High) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
240 ~                 (Priority::Medium, Priority::High) | (Priority::High, Priority::Critical) => return false,
241 |                 (Priority::Medium, Priority::Critical) => return false,
242 ~                 _ => {}
    |

warning: this match arm has an identical body to another arm
   --> llmspell-testing/src/attributes.rs:241:17
    |
241 |                 (Priority::Medium, Priority::Critical) => return false,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
241 ~                 (Priority::Medium, Priority::Critical) | (Priority::High, Priority::Critical) => return false,
242 ~                 _ => {}
    |

warning: more than 3 bools in a struct
   --> llmspell-testing/src/attributes.rs:286:1
    |
286 | / pub struct TestFilter {
287 | |     pub max_speed: Option<Speed>,
288 | |     pub scopes: HashSet<Scope>,
289 | |     pub components: HashSet<Component>,
...   |
295 | |     pub tags: HashSet<String>,
296 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
    = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:300:5
    |
300 |     pub fn fast_only() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn fast_only() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:308:5
    |
308 |     pub fn stable_only() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn stable_only() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:317:5
    |
317 |     pub fn offline_only() -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn offline_only() -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:326:5
    |
326 |     pub fn with_scope(mut self, scope: Scope) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_scope(mut self, scope: Scope) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:326:5
    |
326 | /     pub fn with_scope(mut self, scope: Scope) -> Self {
327 | |         self.scopes.insert(scope);
328 | |         self
329 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:332:5
    |
332 |     pub fn with_component(mut self, component: Component) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_component(mut self, component: Component) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:332:5
    |
332 | /     pub fn with_component(mut self, component: Component) -> Self {
333 | |         self.components.insert(component);
334 | |         self
335 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/attributes.rs:338:5
    |
338 |     pub fn with_min_priority(mut self, priority: Priority) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_min_priority(mut self, priority: Priority) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:338:5
    |
338 | /     pub fn with_min_priority(mut self, priority: Priority) -> Self {
339 | |         self.min_priority = Some(priority);
340 | |         self
341 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/attributes.rs:344:5
    |
344 | /     pub fn with_tag(mut self, tag: impl Into<String>) -> Self {
345 | |         self.tags.insert(tag.into());
346 | |         self
347 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: item in documentation is missing backticks
 --> llmspell-testing/src/benchmarks.rs:7:35
  |
7 | //! to measure the performance of LLMSpell components.
  |                                   ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
7 - //! to measure the performance of LLMSpell components.
7 + //! to measure the performance of `LLMSpell` components.
  |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/benchmarks.rs:45:15
   |
45 | /// Benchmark ComponentId generation
   |               ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
45 - /// Benchmark ComponentId generation
45 + /// Benchmark `ComponentId` generation
   |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/benchmarks.rs:68:1
   |
68 | pub fn bench_serialization(c: &mut Criterion) {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/benchmarks.rs:79:24
   |
79 |             let json = serde_json::to_string(black_box(&metadata)).unwrap();
   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
   = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: it is more concise to loop over references to containers instead of using explicit iteration methods
  --> llmspell-testing/src/benchmarks.rs:93:17
   |
93 |     for size in [10, 100, 1000].iter() {
   |                 ^^^^^^^^^^^^^^^^^^^^^^ help: to write this more concisely, try: `&[10, 100, 1000]`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_iter_loop
   = note: `-W clippy::explicit-iter-loop` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::explicit_iter_loop)]`

warning: binding to `_` prefixed variable with no side-effect
   --> llmspell-testing/src/benchmarks.rs:155:9
    |
155 |     let _v3 = Version {
    |         ^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding
    = note: `-W clippy::no-effect-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::no_effect_underscore_binding)]`

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/benchmarks.rs:191:1
    |
191 | pub fn standard_benchmark_config() -> Criterion {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn standard_benchmark_config() -> Criterion`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/benchmarks.rs:200:5
    |
200 |     format!("Processed: {}", input)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
200 -     format!("Processed: {}", input)
200 +     format!("Processed: {input}")
    |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/bridge_helpers.rs:10:5
   |
10 |     pub fn create_test_lua_config() -> llmspell_bridge::engine::factory::LuaConfig {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_lua_config() -> llmspell_bridge::engine::factory::LuaConfig`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-testing/src/bridge_helpers.rs:15:5
   |
15 | /     pub fn create_test_lua_engine(
16 | |     ) -> Result<Box<dyn llmspell_bridge::ScriptEngineBridge>, anyhow::Error> {
   | |____________________________________________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/bridge_helpers.rs:26:5
   |
26 |     pub fn create_test_js_config() -> llmspell_bridge::engine::factory::JSConfig {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_js_config() -> llmspell_bridge::engine::factory::JSConfig`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-testing/src/bridge_helpers.rs:31:5
   |
31 | /     pub fn create_test_js_engine(
32 | |     ) -> Result<Box<dyn llmspell_bridge::ScriptEngineBridge>, anyhow::Error> {
   | |____________________________________________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/bridge_helpers.rs:39:1
   |
39 | pub async fn create_test_global_context() -> llmspell_bridge::globals::types::GlobalContext {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/bridge_helpers.rs:45:30
   |
45 |     let providers = Arc::new(ProviderManager::new(Default::default()).await.unwrap());
   |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: calling `ProviderManagerConfig::default()` is more clear than this expression
  --> llmspell-testing/src/bridge_helpers.rs:45:51
   |
45 |     let providers = Arc::new(ProviderManager::new(Default::default()).await.unwrap());
   |                                                   ^^^^^^^^^^^^^^^^^^ help: try: `ProviderManagerConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/bridge_helpers.rs:51:1
   |
51 | pub fn create_test_registry() -> Arc<llmspell_bridge::registry::ComponentRegistry> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_registry() -> Arc<llmspell_bridge::registry::ComponentRegistry>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/bridge_helpers.rs:56:1
   |
56 | pub async fn create_test_provider_manager() -> Arc<llmspell_bridge::providers::ProviderManager> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/bridge_helpers.rs:59:9
   |
59 | /         llmspell_bridge::providers::ProviderManager::new(config)
60 | |             .await
61 | |             .unwrap(),
   | |_____________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/environment_helpers.rs:52:5
   |
52 |     pub async fn new(name: &str) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/environment_helpers.rs:53:24
   |
53 |         let temp_dir = tempfile::tempdir().expect("Failed to create temp dir");
   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/environment_helpers.rs:66:5
   |
66 |     pub fn temp_dir(&self) -> &Path {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn temp_dir(&self) -> &Path`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/environment_helpers.rs:71:5
   |
71 |     pub fn test_data_dir(&self) -> &Path {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn test_data_dir(&self) -> &Path`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/environment_helpers.rs:76:5
   |
76 |     pub fn create_test_file(&self, relative_path: &str, content: &str) -> PathBuf {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/environment_helpers.rs:79:13
   |
79 |             std::fs::create_dir_all(parent).expect("Failed to create parent directories");
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/environment_helpers.rs:76:5
   |
76 |     pub fn create_test_file(&self, relative_path: &str, content: &str) -> PathBuf {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_file(&self, relative_path: &str, content: &str) -> PathBuf`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/environment_helpers.rs:86:5
   |
86 |     pub fn create_test_files(&self, files: Vec<(&str, &str)>) -> Vec<PathBuf> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_files(&self, files: Vec<(&str, &str)>) -> Vec<PathBuf>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-testing/src/environment_helpers.rs:110:5
    |
110 |     pub fn create_dir(&self, relative_path: &str) -> PathBuf {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-testing/src/environment_helpers.rs:112:9
    |
112 |         std::fs::create_dir_all(&dir_path).expect("Failed to create directory");
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:110:5
    |
110 |     pub fn create_dir(&self, relative_path: &str) -> PathBuf {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_dir(&self, relative_path: &str) -> PathBuf`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:117:5
    |
117 |     pub fn path(&self, relative_path: &str) -> PathBuf {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn path(&self, relative_path: &str) -> PathBuf`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:135:1
    |
135 | pub fn create_test_context() -> ExecutionContext {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_context() -> ExecutionContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:143:1
    |
143 | pub fn create_test_context_with_data(data: HashMap<String, serde_json::Value>) -> ExecutionContext {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_context_with_data(data: HashMap<String, serde_json::Value>) -> ExecutionContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: parameter of type `HashMap` should be generalized over different hashers
   --> llmspell-testing/src/environment_helpers.rs:143:44
    |
143 | pub fn create_test_context_with_data(data: HashMap<String, serde_json::Value>) -> ExecutionContext {
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#implicit_hasher
    = note: `-W clippy::implicit-hasher` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::implicit_hasher)]`
help: add a type parameter for `BuildHasher`
    |
143 - pub fn create_test_context_with_data(data: HashMap<String, serde_json::Value>) -> ExecutionContext {
143 + pub fn create_test_context_with_data<S: ::std::hash::BuildHasher>(data: HashMap<String, serde_json::Value, S>) -> ExecutionContext {
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-testing/src/environment_helpers.rs:152:39
    |
152 | pub fn with_test_env_vars<F, R>(vars: Vec<(&str, &str)>, f: F) -> R
    |                                       ^^^^^^^^^^^^^^^^^ help: consider changing the type to: `&[(&str, &str)]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
    = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: calling `to_string` on `&&str`
   --> llmspell-testing/src/environment_helpers.rs:159:26
    |
159 |         .map(|(key, _)| (key.to_string(), std::env::var(key).ok()))
    |                          ^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*key).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string
    = note: `-W clippy::inefficient-to-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::inefficient_to_string)]`

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:184:5
    |
184 |     pub fn development_env() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn development_env() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:194:5
    |
194 |     pub fn production_env() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn production_env() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:204:5
    |
204 |     pub fn ci_env() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn ci_env() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:215:5
    |
215 |     pub fn minimal_env() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn minimal_env() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:223:5
    |
223 |     pub fn config_files() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn config_files() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:233:5
    |
233 |     pub fn script_files() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn script_files() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/environment_helpers.rs:249:5
    |
249 |     pub fn data_files() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn data_files() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: usage of wildcard import
   --> llmspell-testing/src/environment_helpers.rs:267:9
    |
267 |     use super::*;
    |         ^^^^^^^^ help: try: `super::TestEnvironment`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-testing/src/environment_helpers.rs:270:5
    |
270 |     pub fn assert_file_exists(env: &TestEnvironment, relative_path: &str) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-testing/src/environment_helpers.rs:272:9
    |
272 | /         assert!(
273 | |             path.exists(),
274 | |             "Expected file to exist at: {}",
275 | |             path.display()
276 | |         );
    | |_________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-testing/src/environment_helpers.rs:280:5
    |
280 |     pub fn assert_dir_exists(env: &TestEnvironment, relative_path: &str) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-testing/src/environment_helpers.rs:282:9
    |
282 | /         assert!(
283 | |             path.exists() && path.is_dir(),
284 | |             "Expected directory to exist at: {}",
285 | |             path.display()
286 | |         );
    | |_________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-testing/src/environment_helpers.rs:290:5
    |
290 |     pub fn assert_file_contents(env: &TestEnvironment, relative_path: &str, expected: &str) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-testing/src/environment_helpers.rs:293:33
    |
293 |             .unwrap_or_else(|_| panic!("Failed to read file: {}", path.display()));
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-testing/src/environment_helpers.rs:303:5
    |
303 |     pub fn assert_env_var(key: &str, expected: &str) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-testing/src/environment_helpers.rs:305:51
    |
305 |             std::env::var(key).unwrap_or_else(|_| panic!("Environment variable not set: {}", key));
    |                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/environment_helpers.rs:305:51
    |
305 |             std::env::var(key).unwrap_or_else(|_| panic!("Environment variable not set: {}", key));
    |                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
305 -             std::env::var(key).unwrap_or_else(|_| panic!("Environment variable not set: {}", key));
305 +             std::env::var(key).unwrap_or_else(|_| panic!("Environment variable not set: {key}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/environment_helpers.rs:306:9
    |
306 | /         assert_eq!(
307 | |             value, expected,
308 | |             "Environment variable {} has unexpected value",
309 | |             key
310 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:12:1
   |
12 | pub fn create_test_event(event_type: &str) -> UniversalEvent {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_event(event_type: &str) -> UniversalEvent`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:17:1
   |
17 | pub fn create_test_event_with_data(event_type: &str, data: Value) -> UniversalEvent {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_event_with_data(event_type: &str, data: Value) -> UniversalEvent`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:22:1
   |
22 | / pub fn create_test_event_with_correlation(
23 | |     event_type: &str,
24 | |     correlation_id: Uuid,
25 | | ) -> UniversalEvent {
   | |___________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
22 + #[must_use] pub fn create_test_event_with_correlation(
23 +     event_type: &str,
24 +     correlation_id: Uuid,
25 ~ ) -> UniversalEvent {
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:30:1
   |
30 | / pub fn create_test_event_with_language(
31 | |     event_type: &str,
32 | |     data: Value,
33 | |     language: Language,
34 | | ) -> UniversalEvent {
   | |___________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
30 + #[must_use] pub fn create_test_event_with_language(
31 +     event_type: &str,
32 +     data: Value,
33 +     language: Language,
34 ~ ) -> UniversalEvent {
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:39:1
   |
39 | / pub fn create_test_event_with_metadata(
40 | |     event_type: &str,
41 | |     metadata: EventMetadata,
42 | | ) -> UniversalEvent {
   | |___________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
39 + #[must_use] pub fn create_test_event_with_metadata(
40 +     event_type: &str,
41 +     metadata: EventMetadata,
42 ~ ) -> UniversalEvent {
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:49:1
   |
49 | pub fn create_test_event_bus() -> Arc<EventBus> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_event_bus() -> Arc<EventBus>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:54:1
   |
54 | pub fn create_test_correlation_tracker() -> Arc<EventCorrelationTracker> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_correlation_tracker() -> Arc<EventCorrelationTracker>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:59:1
   |
59 | / pub fn create_correlated_event_sequence(
60 | |     event_types: Vec<&str>,
61 | |     correlation_id: Uuid,
62 | | ) -> Vec<UniversalEvent> {
   | |________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
59 + #[must_use] pub fn create_correlated_event_sequence(
60 +     event_types: Vec<&str>,
61 +     correlation_id: Uuid,
62 ~ ) -> Vec<UniversalEvent> {
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:73:5
   |
73 |     pub fn agent_execution_data(agent_id: &str, input: &str) -> serde_json::Value {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn agent_execution_data(agent_id: &str, input: &str) -> serde_json::Value`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:81:5
   |
81 |     pub fn tool_execution_data(tool_name: &str, params: serde_json::Value) -> serde_json::Value {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn tool_execution_data(tool_name: &str, params: serde_json::Value) -> serde_json::Value`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-testing/src/event_helpers.rs:81:57
   |
81 |     pub fn tool_execution_data(tool_name: &str, params: serde_json::Value) -> serde_json::Value {
   |                                                         ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:89:5
   |
89 |     pub fn workflow_step_data(workflow_id: &str, step: &str) -> serde_json::Value {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn workflow_step_data(workflow_id: &str, step: &str) -> serde_json::Value`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/event_helpers.rs:97:5
   |
97 |     pub fn error_data(error_type: &str, message: &str) -> serde_json::Value {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn error_data(error_type: &str, message: &str) -> serde_json::Value`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-testing/src/fixtures.rs:43:12
   |
43 | /// Sample ComponentMetadata for testing
   |            ^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
43 - /// Sample ComponentMetadata for testing
43 + /// Sample `ComponentMetadata` for testing
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/fixtures.rs:44:1
   |
44 | pub fn sample_component_metadata() -> ComponentMetadata {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_component_metadata() -> ComponentMetadata`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-testing/src/fixtures.rs:57:12
   |
57 | /// Sample ComponentMetadata variants for different scenarios
   |            ^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
57 - /// Sample ComponentMetadata variants for different scenarios
57 + /// Sample `ComponentMetadata` variants for different scenarios
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/fixtures.rs:58:1
   |
58 | pub fn component_metadata_variants() -> Vec<ComponentMetadata> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn component_metadata_variants() -> Vec<ComponentMetadata>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-testing/src/fixtures.rs:83:12
   |
83 | /// Sample AgentInput for testing
   |            ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
83 - /// Sample AgentInput for testing
83 + /// Sample `AgentInput` for testing
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/fixtures.rs:84:1
   |
84 | pub fn sample_agent_input() -> AgentInput {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_agent_input() -> AgentInput`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-testing/src/fixtures.rs:90:12
   |
90 | /// Sample AgentInput variants
   |            ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
90 - /// Sample AgentInput variants
90 + /// Sample `AgentInput` variants
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/fixtures.rs:91:1
   |
91 | pub fn agent_input_variants() -> Vec<AgentInput> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn agent_input_variants() -> Vec<AgentInput>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-testing/src/fixtures.rs:107:12
    |
107 | /// Sample ExecutionContext for testing
    |            ^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
107 - /// Sample ExecutionContext for testing
107 + /// Sample `ExecutionContext` for testing
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:108:1
    |
108 | pub fn sample_execution_context() -> ExecutionContext {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_execution_context() -> ExecutionContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:115:1
    |
115 | pub fn sample_conversation() -> Vec<ConversationMessage> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_conversation() -> Vec<ConversationMessage>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-testing/src/fixtures.rs:127:12
    |
127 | /// Sample AgentConfig for testing
    |            ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
127 - /// Sample AgentConfig for testing
127 + /// Sample `AgentConfig` for testing
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:128:1
    |
128 | pub fn sample_agent_config() -> AgentConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_agent_config() -> AgentConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-testing/src/fixtures.rs:137:12
    |
137 | /// Sample ToolSchema for testing
    |            ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
137 - /// Sample ToolSchema for testing
137 + /// Sample `ToolSchema` for testing
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:138:1
    |
138 | pub fn sample_tool_schema() -> ToolSchema {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_tool_schema() -> ToolSchema`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:170:1
    |
170 | pub fn sample_workflow_steps() -> Vec<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_workflow_steps() -> Vec<WorkflowStep>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
   --> llmspell-testing/src/fixtures.rs:207:12
    |
207 | /// Sample WorkflowConfig for testing
    |            ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
207 - /// Sample WorkflowConfig for testing
207 + /// Sample `WorkflowConfig` for testing
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:208:1
    |
208 | pub fn sample_workflow_config() -> WorkflowConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn sample_workflow_config() -> WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:217:1
    |
217 | pub fn error_scenarios() -> Vec<llmspell_core::LLMSpellError> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn error_scenarios() -> Vec<llmspell_core::LLMSpellError>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:246:1
    |
246 | pub fn setup_test_environment() -> std::collections::HashMap<String, String> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn setup_test_environment() -> std::collections::HashMap<String, String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/fixtures.rs:257:1
    |
257 | pub fn fixtures_dir() -> PathBuf {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn fixtures_dir() -> PathBuf`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: called `map(<f>).unwrap_or_else(<g>)` on an `Option` value
   --> llmspell-testing/src/fixtures.rs:270:21
    |
270 | /                     manifest_path
271 | |                         .parent()
272 | |                         .map(|p| p.join("llmspell-testing/fixtures"))
273 | |                         .unwrap_or_else(|| manifest_path.join("fixtures"))
    | |__________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`
help: try
    |
270 ~                     manifest_path
271 +                         .parent().map_or_else(|| manifest_path.join("fixtures"), |p| p.join("llmspell-testing/fixtures"))
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/fixtures.rs:323:1
    |
323 | pub fn load_fixture_text(relative_path: impl AsRef<Path>) -> Result<String, std::io::Error> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/fixtures.rs:329:1
    |
329 | / pub fn load_fixture_json(
330 | |     relative_path: impl AsRef<Path>,
331 | | ) -> Result<serde_json::Value, Box<dyn std::error::Error>> {
    | |__________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/fixtures.rs:338:1
    |
338 | pub fn load_fixture_lua(filename: impl AsRef<Path>) -> Result<String, std::io::Error> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/fixtures.rs:343:1
    |
343 | pub fn load_test_data(filename: impl AsRef<Path>) -> Result<Vec<u8>, std::io::Error> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/fixtures.rs:349:1
    |
349 | pub fn create_temp_fixture(filename: &str, content: &str) -> Result<PathBuf, std::io::Error> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/fixtures.rs:358:1
    |
358 | pub fn cleanup_temp_fixtures() -> Result<(), std::io::Error> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/fixtures.rs:367:1
    |
367 | pub fn list_fixture_files(subdir: impl AsRef<Path>) -> Result<Vec<PathBuf>, std::io::Error> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
 --> llmspell-testing/src/generators.rs:7:31
  |
7 | //! for all core types in the LLMSpell framework. These strategies help
  |                               ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
7 - //! for all core types in the LLMSpell framework. These strategies help
7 + //! for all core types in the `LLMSpell` framework. These strategies help
  |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/generators.rs:40:29
   |
40 | /// Strategy for generating ComponentId values
   |                             ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
40 - /// Strategy for generating ComponentId values
40 + /// Strategy for generating `ComponentId` values
   |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/generators.rs:45:29
   |
45 | /// Strategy for generating ComponentId from a name
   |                             ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
45 - /// Strategy for generating ComponentId from a name
45 + /// Strategy for generating `ComponentId` from a name
   |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/generators.rs:62:29
   |
62 | /// Strategy for generating ComponentMetadata
   |                             ^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
62 - /// Strategy for generating ComponentMetadata
62 + /// Strategy for generating `ComponentMetadata`
   |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/generators.rs:83:29
   |
83 | /// Strategy for generating AgentInput
   |                             ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
83 - /// Strategy for generating AgentInput
83 + /// Strategy for generating `AgentInput`
   |

warning: item in documentation is missing backticks
  --> llmspell-testing/src/generators.rs:96:29
   |
96 | /// Strategy for generating AgentOutput
   |                             ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
96 - /// Strategy for generating AgentOutput
96 + /// Strategy for generating `AgentOutput`
   |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:101:29
    |
101 | /// Strategy for generating ExecutionContext
    |                             ^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
101 - /// Strategy for generating ExecutionContext
101 + /// Strategy for generating `ExecutionContext`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:118:29
    |
118 | /// Strategy for generating MessageRole
    |                             ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
118 - /// Strategy for generating MessageRole
118 + /// Strategy for generating `MessageRole`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:127:29
    |
127 | /// Strategy for generating ConversationMessage
    |                             ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
127 - /// Strategy for generating ConversationMessage
127 + /// Strategy for generating `ConversationMessage`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:133:29
    |
133 | /// Strategy for generating AgentConfig
    |                             ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
133 - /// Strategy for generating AgentConfig
133 + /// Strategy for generating `AgentConfig`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:151:29
    |
151 | /// Strategy for generating ToolCategory
    |                             ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
151 - /// Strategy for generating ToolCategory
151 + /// Strategy for generating `ToolCategory`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:164:29
    |
164 | /// Strategy for generating SecurityLevel
    |                             ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
164 - /// Strategy for generating SecurityLevel
164 + /// Strategy for generating `SecurityLevel`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:173:29
    |
173 | /// Strategy for generating ToolSchema
    |                             ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
173 - /// Strategy for generating ToolSchema
173 + /// Strategy for generating `ToolSchema`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:179:29
    |
179 | /// Strategy for generating RetryPolicy
    |                             ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
179 - /// Strategy for generating RetryPolicy
179 + /// Strategy for generating `RetryPolicy`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:190:29
    |
190 | /// Strategy for generating WorkflowStep
    |                             ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
190 - /// Strategy for generating WorkflowStep
190 + /// Strategy for generating `WorkflowStep`
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:210:29
    |
210 | /// Strategy for generating WorkflowConfig  
    |                             ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
210 - /// Strategy for generating WorkflowConfig  
210 + /// Strategy for generating `WorkflowConfig`  
    |

warning: item in documentation is missing backticks
   --> llmspell-testing/src/generators.rs:226:29
    |
226 | /// Strategy for generating WorkflowStatus
    |                             ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
226 - /// Strategy for generating WorkflowStatus
226 + /// Strategy for generating `WorkflowStatus`
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/generators.rs:245:66
    |
245 |         "[a-zA-Z0-9_-]+\\.(txt|json|csv|yaml|toml)".prop_map(|s| format!("fixtures/data/{}", s)),
    |                                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
245 -         "[a-zA-Z0-9_-]+\\.(txt|json|csv|yaml|toml)".prop_map(|s| format!("fixtures/data/{}", s)),
245 +         "[a-zA-Z0-9_-]+\\.(txt|json|csv|yaml|toml)".prop_map(|s| format!("fixtures/data/{s}")),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/generators.rs:317:43
    |
317 |             "[a-zA-Z0-9_-]+".prop_map(|s| format!("--{}", s)),
    |                                           ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
317 -             "[a-zA-Z0-9_-]+".prop_map(|s| format!("--{}", s)),
317 +             "[a-zA-Z0-9_-]+".prop_map(|s| format!("--{s}")),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/generators.rs:356:27
    |
356 |         ".*".prop_map(|s| format!("{}\n", s)),
    |                           ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
356 -         ".*".prop_map(|s| format!("{}\n", s)),
356 +         ".*".prop_map(|s| format!("{s}\n")),
    |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:11:1
   |
11 | pub fn create_test_hook_context() -> HookContext {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_hook_context() -> HookContext`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:16:1
   |
16 | pub fn create_test_hook_context_with_point(point: HookPoint) -> HookContext {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_hook_context_with_point(point: HookPoint) -> HookContext`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:22:1
   |
22 | / pub fn create_test_hook_context_with_component(
23 | |     point: HookPoint,
24 | |     component_type: ComponentType,
25 | |     component_name: &str,
26 | | ) -> HookContext {
   | |________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
22 + #[must_use] pub fn create_test_hook_context_with_component(
23 +     point: HookPoint,
24 +     component_type: ComponentType,
25 +     component_name: &str,
26 ~ ) -> HookContext {
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:32:1
   |
32 | pub fn create_test_hook_context_with_correlation(correlation_id: Uuid) -> HookContext {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_hook_context_with_correlation(correlation_id: Uuid) -> HookContext`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:40:1
   |
40 | / pub fn create_test_hook_context_with_data(
41 | |     data_key: &str,
42 | |     data_value: serde_json::Value,
43 | | ) -> HookContext {
   | |________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
40 + #[must_use] pub fn create_test_hook_context_with_data(
41 +     data_key: &str,
42 +     data_value: serde_json::Value,
43 ~ ) -> HookContext {
   |

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:51:1
   |
51 | pub fn create_test_tool_hook_context(tool_name: &str) -> HookContext {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_tool_hook_context(tool_name: &str) -> HookContext`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:57:1
   |
57 | pub fn create_test_workflow_hook_context(workflow_name: &str) -> HookContext {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_workflow_hook_context(workflow_name: &str) -> HookContext`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/hook_helpers.rs:63:1
   |
63 | pub fn create_test_error_hook_context(error_message: &str) -> HookContext {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_error_hook_context(error_message: &str) -> HookContext`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
 --> llmspell-testing/src/mocks.rs:2:46
  |
2 | //! ABOUTME: Provides configurable mocks for BaseAgent, Agent, Tool, and Workflow
  |                                              ^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Provides configurable mocks for BaseAgent, Agent, Tool, and Workflow
2 + //! ABOUTME: Provides configurable mocks for `BaseAgent`, Agent, Tool, and Workflow
  |

warning: usage of wildcard import
  --> llmspell-testing/src/mocks.rs:47:5
   |
47 | use mockall::*;
   |     ^^^^^^^^^^ help: try: `mockall::{Predicate, ReturnDefault, ViaDebug, ViaNothing, mock}`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: item in documentation is missing backticks
   --> llmspell-testing/src/mocks.rs:148:41
    |
148 | /// Test helper to create a simple mock BaseAgent
    |                                         ^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
148 - /// Test helper to create a simple mock BaseAgent
148 + /// Test helper to create a simple mock `BaseAgent`
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/mocks.rs:149:1
    |
149 | pub fn create_simple_mock_agent() -> MockBaseAgent {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_simple_mock_agent() -> MockBaseAgent`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: item in documentation is missing backticks
  --> llmspell-testing/src/state_helpers.rs:42:20
   |
42 | /// Creates a test StateManager with in-memory backend
   |                    ^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
42 - /// Creates a test StateManager with in-memory backend
42 + /// Creates a test `StateManager` with in-memory backend
   |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/state_helpers.rs:43:1
   |
43 | pub async fn create_test_state_manager() -> Arc<StateManager> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/state_helpers.rs:50:9
   |
50 | /         StateManager::with_backend(StorageBackendType::Memory, config)
51 | |             .await
52 | |             .expect("Failed to create test state manager"),
   | |__________________________________________________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: item in documentation is missing backticks
  --> llmspell-testing/src/state_helpers.rs:56:20
   |
56 | /// Creates a test StateManager with backup capabilities
   |                    ^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
56 - /// Creates a test StateManager with backup capabilities
56 + /// Creates a test `StateManager` with backup capabilities
   |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/state_helpers.rs:57:1
   |
57 | / pub async fn create_test_state_manager_with_backup(
58 | | ) -> (Arc<StateManager>, Arc<BackupManager>, TempDir) {
   | |_____________________________________________________^
   |
note: first possible panic found here
  --> llmspell-testing/src/state_helpers.rs:59:20
   |
59 |     let temp_dir = tempfile::tempdir().expect("Failed to create temp dir");
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: item in documentation is missing backticks
  --> llmspell-testing/src/state_helpers.rs:94:17
   |
94 | /// Populates a StateManager with common test data
   |                 ^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
94 - /// Populates a StateManager with common test data
94 + /// Populates a `StateManager` with common test data
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-testing/src/state_helpers.rs:95:1
   |
95 | / pub async fn populate_test_state_data(
96 | |     state_manager: &StateManager,
97 | | ) -> Result<(), Box<dyn std::error::Error>> {
   | |___________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/state_helpers.rs:154:1
    |
154 | pub fn create_scope_test_data() -> Vec<(StateScope, &'static str, serde_json::Value)> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_scope_test_data() -> Vec<(StateScope, &'static str, serde_json::Value)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/state_helpers.rs:200:1
    |
200 | pub fn create_large_test_dataset(num_entries: usize) -> Vec<(String, serde_json::Value)> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_large_test_dataset(num_entries: usize) -> Vec<(String, serde_json::Value)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/state_helpers.rs:204:17
    |
204 |                 format!("item_{}", i),
    |                 ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
204 -                 format!("item_{}", i),
204 +                 format!("item_{i}"),
    |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/tool_helpers.rs:61:5
   |
61 |     pub fn new(name: &str, description: &str) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(name: &str, description: &str) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/tool_helpers.rs:73:5
   |
73 |     pub fn with_parameter(mut self, name: &str, param_type: &str, required: bool) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn with_parameter(mut self, name: &str, param_type: &str, required: bool) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: missing `#[must_use]` attribute on a method returning `Self`
  --> llmspell-testing/src/tool_helpers.rs:73:5
   |
73 | /     pub fn with_parameter(mut self, name: &str, param_type: &str, required: bool) -> Self {
74 | |         let param_type = match param_type {
75 | |             "string" => ParameterType::String,
76 | |             "number" => ParameterType::Number,
...  |
91 | |         self
92 | |     }
   | |_____^
   |
   = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: this match arm has an identical body to the `_` wildcard arm
  --> llmspell-testing/src/tool_helpers.rs:75:13
   |
75 | /             "string" => ParameterType::String,
76 | |             "number" => ParameterType::Number,
   | |____________^ help: try removing the arm
   |
   = help: or try changing either arm body
note: `_` wildcard arm here
  --> llmspell-testing/src/tool_helpers.rs:80:13
   |
80 |             _ => ParameterType::String, // Default to string for unknown types
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: variables can be used directly in the `format!` string
  --> llmspell-testing/src/tool_helpers.rs:86:26
   |
86 |             description: format!("{} parameter", name),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
86 -             description: format!("{} parameter", name),
86 +             description: format!("{name} parameter"),
   |

warning: missing `#[must_use]` attribute on a method returning `Self`
   --> llmspell-testing/src/tool_helpers.rs:95:5
    |
95  | /     pub fn with_handler<F>(mut self, handler: F) -> Self
96  | |     where
97  | |         F: Fn(&AgentInput) -> Result<ToolOutput, LLMSpellError> + Send + Sync + 'static,
...   |
100 | |         self
101 | |     }
    | |_____^
    |
    = help: consider adding the `#[must_use]` attribute to the method or directly to the `Self` type
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#return_self_not_must_use

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/tool_helpers.rs:169:30
    |
169 |         Ok(AgentOutput::text(format!("Tool error: {}", error)))
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
169 -         Ok(AgentOutput::text(format!("Tool error: {}", error)))
169 +         Ok(AgentOutput::text(format!("Tool error: {error}")))
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:174:1
    |
174 | pub fn create_test_tool(name: &str, description: &str, parameters: Vec<(&str, &str)>) -> impl Tool {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_tool(name: &str, description: &str, parameters: Vec<(&str, &str)>) -> impl Tool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:204:1
    |
204 | pub fn create_test_tool_input(parameters: Vec<(&str, &str)>) -> AgentInput {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_tool_input(parameters: Vec<(&str, &str)>) -> AgentInput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:234:1
    |
234 | / pub fn create_test_tool_input_json(
235 | |     text: &str,
236 | |     parameters: HashMap<String, serde_json::Value>,
237 | | ) -> AgentInput {
    | |_______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
    |
234 + #[must_use] pub fn create_test_tool_input_json(
235 +     text: &str,
236 +     parameters: HashMap<String, serde_json::Value>,
237 ~ ) -> AgentInput {
    |

warning: parameter of type `HashMap` should be generalized over different hashers
   --> llmspell-testing/src/tool_helpers.rs:236:17
    |
236 |     parameters: HashMap<String, serde_json::Value>,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#implicit_hasher
help: add a type parameter for `BuildHasher`
    |
234 ~ pub fn create_test_tool_input_json<S: ::std::hash::BuildHasher>(
235 |     text: &str,
236 ~     parameters: HashMap<String, serde_json::Value, S>,
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:248:1
    |
248 | pub fn create_mock_tool() -> crate::mocks::MockTool {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_mock_tool() -> crate::mocks::MockTool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:273:5
    |
273 |     pub fn file_params() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn file_params() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:283:5
    |
283 |     pub fn web_params() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn web_params() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:294:5
    |
294 |     pub fn process_params() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn process_params() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:305:5
    |
305 |     pub fn data_params() -> Vec<(&'static str, &'static str)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn data_params() -> Vec<(&'static str, &'static str)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: usage of wildcard import
   --> llmspell-testing/src/tool_helpers.rs:317:9
    |
317 |     use super::*;
    |         ^^^^^^^^ help: try: `super::json`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:320:5
    |
320 |     pub fn test_file_paths() -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn test_file_paths() -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:330:5
    |
330 |     pub fn test_urls() -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn test_urls() -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:340:5
    |
340 |     pub fn test_json_data() -> Vec<serde_json::Value> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn test_json_data() -> Vec<serde_json::Value>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/tool_helpers.rs:350:5
    |
350 |     pub fn test_commands() -> Vec<(&'static str, Vec<&'static str>)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn test_commands() -> Vec<(&'static str, Vec<&'static str>)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: usage of wildcard import
   --> llmspell-testing/src/tool_helpers.rs:362:9
    |
362 |     use super::*;
    |         ^^^^^^^^ help: try: `super::AgentOutput`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/tool_helpers.rs:365:5
    |
365 | /     pub fn assert_tool_output_contains(
366 | |         output: &AgentOutput,
367 | |         expected_fields: Vec<&str>,
368 | |     ) -> Result<(), String> {
    | |___________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/tool_helpers.rs:379:32
    |
379 |                     return Err(format!("Tool output missing field: {}", field));
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
379 -                     return Err(format!("Tool output missing field: {}", field));
379 +                     return Err(format!("Tool output missing field: {field}"));
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/tool_helpers.rs:389:5
    |
389 |     pub fn assert_tool_success(output: &AgentOutput) -> Result<(), String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/tool_helpers.rs:407:5
    |
407 | /     pub fn assert_tool_output_structure(
408 | |         output: &AgentOutput,
409 | |         expected_type: &str,
410 | |     ) -> Result<(), String> {
    | |___________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/tool_helpers.rs:422:25
    |
422 |                       Err(format!(
    |  _________________________^
423 | |                         "Expected output type '{}', got '{}'",
424 | |                         expected_type, output_type
425 | |                     ))
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/tool_helpers.rs:433:29
    |
433 |                           Err(format!(
    |  _____________________________^
434 | |                             "Expected operation '{}', got '{}'",
435 | |                             expected_type, operation
436 | |                         ))
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:16:1
   |
16 | pub fn create_test_workflow_step(name: &str) -> WorkflowStep {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_workflow_step(name: &str) -> WorkflowStep`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:27:1
   |
27 | pub fn create_test_tool_step(name: &str, tool_name: &str, params: Value) -> WorkflowStep {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_tool_step(name: &str, tool_name: &str, params: Value) -> WorkflowStep`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:38:1
   |
38 | pub fn create_test_agent_step(name: &str, agent_id: &str, input: String) -> WorkflowStep {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_agent_step(name: &str, agent_id: &str, input: String) -> WorkflowStep`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:50:1
   |
50 | pub fn create_test_subworkflow_step(name: &str, workflow_id: &str) -> WorkflowStep {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_subworkflow_step(name: &str, workflow_id: &str) -> WorkflowStep`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:63:1
   |
63 | pub fn create_test_sequential_workflow(name: &str) -> SequentialWorkflow {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_sequential_workflow(name: &str) -> SequentialWorkflow`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:68:1
   |
68 | / pub fn create_test_sequential_workflow_with_steps(
69 | |     name: &str,
70 | |     steps: Vec<WorkflowStep>,
71 | | ) -> SequentialWorkflow {
   | |_______________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
help: add the attribute
   |
68 + #[must_use] pub fn create_test_sequential_workflow_with_steps(
69 +     name: &str,
70 +     steps: Vec<WorkflowStep>,
71 ~ ) -> SequentialWorkflow {
   |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/workflow_helpers.rs:80:1
   |
80 | pub fn create_test_parallel_workflow(name: &str) -> ParallelWorkflow {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/workflow_helpers.rs:81:5
   |
81 |     ParallelWorkflowBuilder::new(name).build().unwrap()
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:80:1
   |
80 | pub fn create_test_parallel_workflow(name: &str) -> ParallelWorkflow {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_parallel_workflow(name: &str) -> ParallelWorkflow`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:85:1
   |
85 | pub fn create_test_conditional_workflow(name: &str) -> ConditionalWorkflow {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_conditional_workflow(name: &str) -> ConditionalWorkflow`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-testing/src/workflow_helpers.rs:90:1
   |
90 | pub fn create_test_loop_workflow(name: &str, max_iterations: usize) -> LoopWorkflow {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-testing/src/workflow_helpers.rs:91:5
   |
91 | /     LoopWorkflowBuilder::new(name)
92 | |         .with_range(0, max_iterations as i64, 1)
93 | |         .build()
94 | |         .unwrap()
   | |_________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:90:1
   |
90 | pub fn create_test_loop_workflow(name: &str, max_iterations: usize) -> LoopWorkflow {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_loop_workflow(name: &str, max_iterations: usize) -> LoopWorkflow`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: casting `usize` to `i64` may wrap around the value on targets with 64-bit wide pointers
  --> llmspell-testing/src/workflow_helpers.rs:92:24
   |
92 |         .with_range(0, max_iterations as i64, 1)
   |                        ^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap
   = note: `-W clippy::cast-possible-wrap` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_wrap)]`

warning: this function could have a `#[must_use]` attribute
  --> llmspell-testing/src/workflow_helpers.rs:98:1
   |
98 | pub fn create_test_condition(always_true: bool) -> Condition {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_condition(always_true: bool) -> Condition`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/workflow_helpers.rs:107:1
    |
107 | pub fn create_test_workflow_config() -> WorkflowConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_workflow_config() -> WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/workflow_helpers.rs:112:1
    |
112 | pub fn create_test_workflow_config_with_retry(max_retries: u32) -> WorkflowConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_workflow_config_with_retry(max_retries: u32) -> WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/workflow_helpers.rs:122:1
    |
122 | pub fn create_test_workflow_config_with_error_strategy(strategy: ErrorStrategy) -> WorkflowConfig {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_workflow_config_with_error_strategy(strategy: ErrorStrategy) -> WorkflowConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this function could have a `#[must_use]` attribute
   --> llmspell-testing/src/workflow_helpers.rs:130:1
    |
130 | pub fn create_test_steps(count: usize) -> Vec<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn create_test_steps(count: usize) -> Vec<WorkflowStep>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/workflow_helpers.rs:132:45
    |
132 |         .map(|i| create_test_workflow_step(&format!("step_{}", i)))
    |                                             ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
132 -         .map(|i| create_test_workflow_step(&format!("step_{}", i)))
132 +         .map(|i| create_test_workflow_step(&format!("step_{i}")))
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-testing/src/runner/category.rs:30:22
   |
30 |             _ => Err(format!("Unknown test category: {}", s)),
   |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
30 -             _ => Err(format!("Unknown test category: {}", s)),
30 +             _ => Err(format!("Unknown test category: {s}")),
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/runner/category.rs:36:5
   |
36 |     pub fn name(&self) -> &'static str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn name(&self) -> &'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/runner/category.rs:48:5
   |
48 |     pub fn feature_name(&self) -> &'static str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn feature_name(&self) -> &'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/runner/category.rs:60:5
   |
60 |     pub fn description(&self) -> &'static str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn description(&self) -> &'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/runner/category.rs:72:5
   |
72 |     pub fn test_files(&self) -> Vec<&'static str> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn test_files(&self) -> Vec<&'static str>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/runner/category.rs:99:5
   |
99 |     pub fn all_categories() -> Vec<TestCategory> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn all_categories() -> Vec<TestCategory>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: usage of wildcard import
 --> llmspell-testing/src/runner/executor.rs:5:5
  |
5 | use colored::*;
  |     ^^^^^^^^^^ help: try: `colored::Colorize`
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: this method could have a `#[must_use]` attribute
  --> llmspell-testing/src/runner/executor.rs:15:5
   |
15 |     pub fn new(config: TestRunnerConfig) -> Self {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: TestRunnerConfig) -> Self`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-testing/src/runner/executor.rs:19:5
   |
19 | /     pub fn run_tests(
20 | |         &self,
21 | |         categories: Vec<String>,
22 | |         filter: Option<String>,
23 | |         coverage: bool,
24 | |         format: String,
25 | |     ) -> Result<(), Box<dyn std::error::Error>> {
   | |_______________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-testing/src/runner/executor.rs:21:21
   |
21 |         categories: Vec<String>,
   |                     ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-testing/src/runner/executor.rs:22:17
   |
22 |         filter: Option<String>,
   |                 ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-testing/src/runner/executor.rs:24:17
   |
24 |         format: String,
   |                 ^^^^^^ help: consider changing the type to: `&str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: redundant closure
  --> llmspell-testing/src/runner/executor.rs:48:22
   |
48 |                 .map(|c| c.name())
   |                      ^^^^^^^^^^^^ help: replace the closure with the method itself: `super::category::TestCategory::name`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
   = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: it is more idiomatic to use `Option<&T>` instead of `&Option<T>`
   --> llmspell-testing/src/runner/executor.rs:133:5
    |
133 | /     fn run_category_tests(
134 | |         &self,
135 | |         category: &TestCategory,
136 | |         filter: &Option<String>,
    | |                 --------------- help: change this to: `Option<&String>`
...   |
212 | |         output
213 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ref_option
    = note: `-W clippy::ref-option` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ref_option)]`

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-testing/src/runner/executor.rs:135:19
    |
135 |         category: &TestCategory,
    |                   ^^^^^^^^^^^^^ help: consider passing by value instead: `TestCategory`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref
    = note: `-W clippy::trivially-copy-pass-by-ref` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::trivially_copy_pass_by_ref)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/runner/executor.rs:183:21
    |
183 |                     println!("{}", line);
    |                     ^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
183 -                     println!("{}", line);
183 +                     println!("{line}");
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-testing/src/runner/executor.rs:215:5
    |
215 | /     pub fn run_benchmarks(
216 | |         &self,
217 | |         filter: Option<String>,
218 | |         save: Option<String>,
219 | |         baseline: Option<String>,
220 | |     ) -> Result<(), Box<dyn std::error::Error>> {
    | |_______________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-testing/src/runner/executor.rs:218:15
    |
218 |         save: Option<String>,
    |               ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/runner/executor.rs:240:29
    |
240 |             bench_args.push(format!("--save-baseline={}", save_name));
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
240 -             bench_args.push(format!("--save-baseline={}", save_name));
240 +             bench_args.push(format!("--save-baseline={save_name}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/runner/executor.rs:244:29
    |
244 |             bench_args.push(format!("--baseline={}", baseline));
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
244 -             bench_args.push(format!("--baseline={}", baseline));
244 +             bench_args.push(format!("--baseline={baseline}"));
    |

warning: unused `self` argument
   --> llmspell-testing/src/runner/executor.rs:276:21
    |
276 |     fn run_coverage(&self, categories: &[TestCategory]) -> Result<(), Box<dyn std::error::Error>> {
    |                     ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: this function's return value is unnecessarily wrapped by `Option`
   --> llmspell-testing/src/runner/executor.rs:306:1
    |
306 | / fn parse_test_results(line: &str) -> Option<(usize, usize)> {
307 | |     // Parse lines like: "test result: ok. 42 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out"
308 | |     let parts: Vec<&str> = line.split(';').collect();
...   |
326 | |     Some((passed, failed))
327 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove `Option` from the return type...
    |
306 - fn parse_test_results(line: &str) -> Option<(usize, usize)> {
306 + fn parse_test_results(line: &str) -> (usize, usize) {
    |
help: ...and then change returning expressions
    |
326 -     Some((passed, failed))
326 +     (passed, failed)
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/lib.rs:100:5
    |
100 |     pub fn feature_name(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn feature_name(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-testing/src/lib.rs:113:5
    |
113 |     pub fn description(&self) -> &'static str {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn description(&self) -> &'static str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: unused `async` for function with no await statements
   --> llmspell-testing/src/agent_helpers.rs:212:5
    |
212 | /     pub async fn build(self) -> Result<TestProviderAgent, LLMSpellError> {
213 | |         let provider = self.provider.unwrap_or_else(|| "mock".to_string());
214 | |         let model = self.model.unwrap_or_else(|| "test-model".to_string());
...   |
232 | |         Ok(agent)
233 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-testing/src/agent_helpers.rs:237:1
    |
237 | / pub async fn create_mock_provider_agent(provider: &str, model: &str) -> TestProviderAgent {
238 | |     TestProviderAgent::new(provider, model)
239 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
  --> llmspell-testing/src/environment_helpers.rs:52:5
   |
52 | /     pub async fn new(name: &str) -> Self {
53 | |         let temp_dir = tempfile::tempdir().expect("Failed to create temp dir");
54 | |         let test_data_dir = temp_dir.path().join("test_data");
55 | |         std::fs::create_dir_all(&test_data_dir).expect("Failed to create test data dir");
...  |
63 | |     }
   | |_____^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: redundant else block
  --> llmspell-cli/src/config.rs:27:10
   |
27 |           } else {
   |  __________^
28 | |             anyhow::bail!("Configuration file not found: {}", path.display());
29 | |         }
   | |_________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_else
   = note: `-W clippy::redundant-else` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_else)]`
help: remove the `else` block and move the contents out
   |
27 ~         }
28 +         anyhow::bail!("Configuration file not found: {}", path.display());
   |

warning: item in documentation is missing backticks
 --> llmspell-cli/src/cli.rs:7:32
  |
7 | /// Command-line interface for LLMSpell
  |                                ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
7 - /// Command-line interface for LLMSpell
7 + /// Command-line interface for `LLMSpell`
  |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-cli/src/cli.rs:47:5
   |
47 |     pub fn as_str(&self) -> &'static str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn as_str(&self) -> &'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
   = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: this method could have a `#[must_use]` attribute
  --> llmspell-cli/src/cli.rs:55:5
   |
55 |     pub fn is_available(&self) -> bool {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn is_available(&self) -> bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this match arm has an identical body to another arm
  --> llmspell-cli/src/cli.rs:58:13
   |
58 |             ScriptEngine::Javascript => false, // Phase 5
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: try changing either arm body
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
   = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`
help: or try merging the arm patterns and removing the obsolete arm
   |
58 ~             ScriptEngine::Javascript | ScriptEngine::Python => false, // Phase 5
59 ~             // Phase 9
   |

warning: this method could have a `#[must_use]` attribute
  --> llmspell-cli/src/cli.rs:63:5
   |
63 |     pub fn availability_message(&self) -> &'static str {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn availability_message(&self) -> &'static str`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-cli/src/cli.rs:160:5
    |
160 |     pub fn validate_engine(&self) -> anyhow::Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: this method could have a `#[must_use]` attribute
   --> llmspell-cli/src/cli.rs:172:5
    |
172 |     pub fn config_path(&self) -> Option<PathBuf> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn config_path(&self) -> Option<PathBuf>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/backup.rs:89:1
   |
89 | / pub async fn execute_backup(
90 | |     cmd: BackupCommand,
91 | |     config: &RuntimeConfig,
92 | |     output_format: OutputFormat,
93 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: calling `PersistenceConfig::default()` is more clear than this expression
   --> llmspell-cli/src/commands/backup.rs:143:64
    |
143 |         StateManager::with_backend(StorageBackendType::Memory, Default::default())
    |                                                                ^^^^^^^^^^^^^^^^^^ help: try: `PersistenceConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/backup.rs:180:13
    |
180 |             format!(" ({})", desc)
    |             ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
180 -             format!(" ({})", desc)
180 +             format!(" ({desc})")
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-cli/src/commands/backup.rs:208:13
    |
208 |             println!("{}", serde_json::to_string_pretty(&result)?)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `println!("{}", serde_json::to_string_pretty(&result)?);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
    = note: `-W clippy::semicolon-if-nothing-returned` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::semicolon_if_nothing_returned)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/backup.rs:324:5
    |
324 |     eprintln!("Validating backup: {}", backup_id);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
324 -     eprintln!("Validating backup: {}", backup_id);
324 +     eprintln!("Validating backup: {backup_id}");
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-cli/src/commands/backup.rs:346:13
    |
346 |             println!("{}", serde_json::to_string_pretty(&result)?)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `println!("{}", serde_json::to_string_pretty(&result)?);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/backup.rs:365:5
    |
365 |     eprintln!("Backup Information: {}", backup_id);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
365 -     eprintln!("Backup Information: {}", backup_id);
365 +     eprintln!("Backup Information: {backup_id}");
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-cli/src/commands/backup.rs:369:13
    |
369 |             println!("{}", serde_json::to_string_pretty(&json!(backup))?)
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `println!("{}", serde_json::to_string_pretty(&json!(backup))?);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/backup.rs:389:17
    |
389 |                 println!("Parent: {}", parent);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
389 -                 println!("Parent: {}", parent);
389 +                 println!("Parent: {parent}");
    |

warning: casting `f64` to `u64` may lose the sign of the value
   --> llmspell-cli/src/commands/backup.rs:411:24
    |
411 |         let size_u64 = size as u64;
    |                        ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
    = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: this function has too many lines (105/100)
   --> llmspell-cli/src/commands/backup.rs:428:1
    |
428 | / async fn cleanup_backups(
429 | |     backup_manager: Arc<BackupManager>,
430 | |     dry_run: bool,
431 | |     verbose: bool,
...   |
555 | |     Ok(())
556 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-cli/src/commands/backup.rs:501:17
    |
501 |                 println!("{}", serde_json::to_string_pretty(&result)?)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `println!("{}", serde_json::to_string_pretty(&result)?);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-cli/src/commands/backup.rs:549:17
    |
549 |                 println!("{}", serde_json::to_string_pretty(&result)?)
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add a `;` here: `println!("{}", serde_json::to_string_pretty(&result)?);`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/exec.rs:10:1
   |
10 | / pub async fn execute_inline_script(
11 | |     code: String,
12 | |     engine: ScriptEngine,
13 | |     runtime_config: RuntimeConfig,
14 | |     stream: bool,
15 | |     output_format: OutputFormat,
16 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/info.rs:9:1
   |
9  | / pub async fn show_engine_info(
10 | |     current_engine: ScriptEngine,
11 | |     show_all: bool,
12 | |     output_format: OutputFormat,
13 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
 --> llmspell-cli/src/commands/init.rs:9:1
  |
9 | pub async fn init_config(output: PathBuf, force: bool) -> Result<()> {
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: item in documentation is missing backticks
  --> llmspell-cli/src/commands/keys.rs:26:33
   |
26 |         /// Service name (e.g., google_search, sendgrid)
   |                                 ^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
26 -         /// Service name (e.g., google_search, sendgrid)
26 +         /// Service name (e.g., `google_search`, sendgrid)
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/keys.rs:68:5
   |
68 |     pub async fn execute(&self) -> Result<()> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/keys.rs:106:17
    |
106 |                 println!("Loaded {} API keys from environment", loaded);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
106 -                 println!("Loaded {} API keys from environment", loaded);
106 +                 println!("Loaded {loaded} API keys from environment");
    |

warning: unused `self` argument
   --> llmspell-cli/src/commands/keys.rs:113:18
    |
113 |     fn list_keys(&self, _manager: &ApiKeyManager, detailed: bool) -> Result<()> {
    |                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: this function's return value is unnecessary
   --> llmspell-cli/src/commands/keys.rs:113:5
    |
113 | /     fn list_keys(&self, _manager: &ApiKeyManager, detailed: bool) -> Result<()> {
114 | |         println!("API Keys:");
115 | |         println!("---------");
...   |
127 | |         Ok(())
128 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove the return type...
    |
113 -     fn list_keys(&self, _manager: &ApiKeyManager, detailed: bool) -> Result<()> {
113 +     fn list_keys(&self, _manager: &ApiKeyManager, detailed: bool) -> () {
    |
help: ...and then remove returned values
    |
127 -         Ok(())
    |

warning: unused `self` argument
   --> llmspell-cli/src/commands/keys.rs:131:9
    |
131 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/keys.rs:138:21
    |
138 |             key_id: format!("cli_{}", service),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
138 -             key_id: format!("cli_{}", service),
138 +             key_id: format!("cli_{service}"),
    |

warning: casting `u64` to `i64` may wrap around the value
   --> llmspell-cli/src/commands/keys.rs:142:83
    |
142 |             expires_at: expires_in.map(|days| Utc::now() + chrono::Duration::days(days as i64)),
    |                                                                                   ^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap
    = note: `-W clippy::cast-possible-wrap` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_wrap)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/keys.rs:151:9
    |
151 |         println!("Added API key for service '{}'", service);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
151 -         println!("Added API key for service '{}'", service);
151 +         println!("Added API key for service '{service}'");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/keys.rs:153:13
    |
153 |             println!("Key will expire in {} days", days);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
153 -             println!("Key will expire in {} days", days);
153 +             println!("Key will expire in {days} days");
    |

warning: unused `self` argument
   --> llmspell-cli/src/commands/keys.rs:159:19
    |
159 |     fn rotate_key(&self, manager: &ApiKeyManager, service: &str, new_key: &str) -> Result<()> {
    |                   ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/keys.rs:163:9
    |
163 |         println!("Rotated API key for service '{}'", service);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
163 -         println!("Rotated API key for service '{}'", service);
163 +         println!("Rotated API key for service '{service}'");
    |

warning: unused `self` argument
   --> llmspell-cli/src/commands/keys.rs:167:19
    |
167 |     fn remove_key(&self, _manager: &ApiKeyManager, service: &str) -> Result<()> {
    |                   ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessary
   --> llmspell-cli/src/commands/keys.rs:167:5
    |
167 | /     fn remove_key(&self, _manager: &ApiKeyManager, service: &str) -> Result<()> {
168 | |         // In a real implementation, this would deactivate the key
169 | |         println!("Removed API key for service '{}'", service);
170 | |         println!("Note: Key removal not yet implemented in persistent storage");
171 | |         Ok(())
172 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove the return type...
    |
167 -     fn remove_key(&self, _manager: &ApiKeyManager, service: &str) -> Result<()> {
167 +     fn remove_key(&self, _manager: &ApiKeyManager, service: &str) -> () {
    |
help: ...and then remove returned values
    |
171 -         Ok(())
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/keys.rs:169:9
    |
169 |         println!("Removed API key for service '{}'", service);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
169 -         println!("Removed API key for service '{}'", service);
169 +         println!("Removed API key for service '{service}'");
    |

warning: unused `self` argument
   --> llmspell-cli/src/commands/keys.rs:174:19
    |
174 |     fn show_audit(&self, manager: &ApiKeyManager, limit: usize) -> Result<()> {
    |                   ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessary
   --> llmspell-cli/src/commands/keys.rs:174:5
    |
174 | /     fn show_audit(&self, manager: &ApiKeyManager, limit: usize) -> Result<()> {
175 | |         let entries = manager.get_audit_log(Some(limit));
176 | |
177 | |         println!("API Key Audit Log (last {} entries):", limit);
...   |
190 | |         Ok(())
191 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove the return type...
    |
174 -     fn show_audit(&self, manager: &ApiKeyManager, limit: usize) -> Result<()> {
174 +     fn show_audit(&self, manager: &ApiKeyManager, limit: usize) -> () {
    |
help: ...and then remove returned values
    |
190 -         Ok(())
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/commands/keys.rs:177:9
    |
177 |         println!("API Key Audit Log (last {} entries):", limit);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
177 -         println!("API Key Audit Log (last {} entries):", limit);
177 +         println!("API Key Audit Log (last {limit} entries):");
    |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/providers.rs:10:1
   |
10 | / pub async fn list_providers(
11 | |     _runtime_config: RuntimeConfig,
12 | |     detailed: bool,
13 | |     output_format: OutputFormat,
14 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/commands/providers.rs:34:21
   |
34 |                     println!("• {}", name);
   |                     ^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
34 -                     println!("• {}", name);
34 +                     println!("• {name}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/commands/providers.rs:40:37
   |
40 | ...                   println!("    - {}", model_str);
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
40 -                                     println!("    - {}", model_str);
40 +                                     println!("    - {model_str}");
   |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/repl.rs:10:1
   |
10 | / pub async fn start_repl(
11 | |     engine: ScriptEngine,
12 | |     _runtime_config: RuntimeConfig,
13 | |     _history_file: Option<PathBuf>,
14 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/run.rs:12:1
   |
12 | / pub async fn execute_script_file(
13 | |     script_path: PathBuf,
14 | |     engine: ScriptEngine,
15 | |     runtime_config: RuntimeConfig,
...  |
18 | |     output_format: OutputFormat,
19 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/validate.rs:11:1
   |
11 | / pub async fn validate_config(
12 | |     config_path: Option<PathBuf>,
13 | |     output_format: OutputFormat,
14 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: you seem to be trying to use `match` for destructuring a single pattern. Consider using `if let`
  --> llmspell-cli/src/commands/validate.rs:20:40
   |
20 |       let (config_result, actual_path) = match path {
   |  ________________________________________^
21 | |         Some(p) => {
22 | |             let result = config::load_runtime_config(Some(p)).await;
23 | |             (result, p.to_string_lossy().to_string())
...  |
31 | |     };
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
   = note: `-W clippy::single-match-else` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_match_else)]`
help: try
   |
20 ~     let (config_result, actual_path) = if let Some(p) = path {
21 +         let result = config::load_runtime_config(Some(p)).await;
22 +         (result, p.to_string_lossy().to_string())
23 +     } else {
24 +         // Try to discover config file
25 +         let result = config::load_runtime_config(None).await;
26 +         let discovered_path = discover_actual_path().await;
27 +         (result, discovered_path)
28 ~     };
   |

warning: matching over `()` is more explicit
  --> llmspell-cli/src/commands/validate.rs:38:20
   |
38 |                 Ok(_) => {
   |                    ^ help: use `()` instead of `_`: `()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ignored_unit_patterns
   = note: `-W clippy::ignored-unit-patterns` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::ignored_unit_patterns)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/commands/validate.rs:53:33
   |
53 |                     errors.push(format!("Validation error: {}", e));
   |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
53 -                     errors.push(format!("Validation error: {}", e));
53 +                     errors.push(format!("Validation error: {e}"));
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/commands/validate.rs:59:25
   |
59 |             errors.push(format!("Failed to load configuration: {}", e));
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
59 -             errors.push(format!("Failed to load configuration: {}", e));
59 +             errors.push(format!("Failed to load configuration: {e}"));
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/commands/validate.rs:77:13
   |
77 |             println!("  File: {}", actual_path);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
77 -             println!("  File: {}", actual_path);
77 +             println!("  File: {actual_path}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/commands/validate.rs:88:21
   |
88 |                     println!("  ⚠ {}", warning);
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
88 -                     println!("  ⚠ {}", warning);
88 +                     println!("  ⚠ {warning}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/commands/validate.rs:95:21
   |
95 |                     println!("  ✗ {}", error);
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
95 -                     println!("  ✗ {}", error);
95 +                     println!("  ✗ {error}");
   |

warning: calling `to_string` on `&&str`
   --> llmspell-cli/src/commands/validate.rs:113:20
    |
113 |             return path.to_string();
    |                    ^^^^^^^^^^^^^^^^ help: try dereferencing the receiver: `(*path).to_string()`
    |
    = help: `&str` implements `ToString` through a slower blanket impl, but `str` has a fast specialization of `ToString`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#inefficient_to_string
    = note: `-W clippy::inefficient-to-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::inefficient_to_string)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/mod.rs:19:1
   |
19 | / pub async fn execute_command(
20 | |     command: Commands,
21 | |     engine: ScriptEngine,
22 | |     runtime_config: RuntimeConfig,
23 | |     output_format: OutputFormat,
24 | | ) -> Result<()> {
   | |_______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/commands/mod.rs:52:1
   |
52 | pub async fn create_runtime(engine: ScriptEngine, config: RuntimeConfig) -> Result<ScriptRuntime> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/config.rs:22:1
   |
22 | pub async fn load_runtime_config(config_path: Option<&Path>) -> Result<RuntimeConfig> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/config.rs:98:34
   |
98 |     if let Ok(engine) = env::var(format!("{}DEFAULT_ENGINE", ENV_PREFIX)) {
   |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
98 -     if let Ok(engine) = env::var(format!("{}DEFAULT_ENGINE", ENV_PREFIX)) {
98 +     if let Ok(engine) = env::var(format!("{ENV_PREFIX}DEFAULT_ENGINE")) {
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:104:36
    |
104 |     if let Ok(provider) = env::var(format!("{}DEFAULT_PROVIDER", ENV_PREFIX)) {
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
104 -     if let Ok(provider) = env::var(format!("{}DEFAULT_PROVIDER", ENV_PREFIX)) {
104 +     if let Ok(provider) = env::var(format!("{ENV_PREFIX}DEFAULT_PROVIDER")) {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:109:31
    |
109 |     if let Ok(val) = env::var(format!("{}ALLOW_FILE_ACCESS", ENV_PREFIX)) {
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
109 -     if let Ok(val) = env::var(format!("{}ALLOW_FILE_ACCESS", ENV_PREFIX)) {
109 +     if let Ok(val) = env::var(format!("{ENV_PREFIX}ALLOW_FILE_ACCESS")) {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:115:31
    |
115 |     if let Ok(val) = env::var(format!("{}ALLOW_NETWORK_ACCESS", ENV_PREFIX)) {
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
115 -     if let Ok(val) = env::var(format!("{}ALLOW_NETWORK_ACCESS", ENV_PREFIX)) {
115 +     if let Ok(val) = env::var(format!("{ENV_PREFIX}ALLOW_NETWORK_ACCESS")) {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:121:31
    |
121 |     if let Ok(val) = env::var(format!("{}MAX_MEMORY_MB", ENV_PREFIX)) {
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
121 -     if let Ok(val) = env::var(format!("{}MAX_MEMORY_MB", ENV_PREFIX)) {
121 +     if let Ok(val) = env::var(format!("{ENV_PREFIX}MAX_MEMORY_MB")) {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:129:31
    |
129 |     if let Ok(val) = env::var(format!("{}SCRIPT_TIMEOUT", ENV_PREFIX)) {
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
129 -     if let Ok(val) = env::var(format!("{}SCRIPT_TIMEOUT", ENV_PREFIX)) {
129 +     if let Ok(val) = env::var(format!("{ENV_PREFIX}SCRIPT_TIMEOUT")) {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:135:31
    |
135 |     if let Ok(val) = env::var(format!("{}ENABLE_STREAMING", ENV_PREFIX)) {
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
135 -     if let Ok(val) = env::var(format!("{}ENABLE_STREAMING", ENV_PREFIX)) {
135 +     if let Ok(val) = env::var(format!("{ENV_PREFIX}ENABLE_STREAMING")) {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:142:31
    |
142 |     if let Ok(val) = env::var(format!("{}ENABLE_SESSIONS", ENV_PREFIX)) {
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
142 -     if let Ok(val) = env::var(format!("{}ENABLE_SESSIONS", ENV_PREFIX)) {
142 +     if let Ok(val) = env::var(format!("{ENV_PREFIX}ENABLE_SESSIONS")) {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/config.rs:148:31
    |
148 |     if let Ok(val) = env::var(format!("{}SESSION_BACKEND", ENV_PREFIX)) {
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
148 -     if let Ok(val) = env::var(format!("{}SESSION_BACKEND", ENV_PREFIX)) {
148 +     if let Ok(val) = env::var(format!("{ENV_PREFIX}SESSION_BACKEND")) {
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-cli/src/config.rs:156:1
    |
156 | pub async fn create_default_config(path: &Path) -> Result<()> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-cli/src/config.rs:178:1
    |
178 | pub fn validate_config(config: &RuntimeConfig) -> Result<()> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/output.rs:15:1
   |
15 | pub fn format_output(output: &ScriptOutput, format: OutputFormat) -> Result<String> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: `format!(..)` appended to existing `String`
  --> llmspell-cli/src/output.rs:33:21
   |
33 |                     result.push_str(&format!("  {}\n", line));
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: consider using `write!` to avoid the extra allocation
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string
   = note: `-W clippy::format-push-string` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::format_push_string)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/output.rs:33:38
   |
33 |                     result.push_str(&format!("  {}\n", line));
   |                                      ^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
33 -                     result.push_str(&format!("  {}\n", line));
33 +                     result.push_str(&format!("  {line}\n"));
   |

warning: `format!(..)` appended to existing `String`
  --> llmspell-cli/src/output.rs:38:13
   |
38 | /             result.push_str(&format!(
39 | |                 "Output: {}\n",
40 | |                 serde_json::to_string_pretty(&output.output)?
41 | |             ));
   | |______________^
   |
   = help: consider using `write!` to avoid the extra allocation
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string

warning: `format!(..)` appended to existing `String`
  --> llmspell-cli/src/output.rs:44:13
   |
44 |             result.push_str(&format!("Engine: {}\n", output.metadata.engine));
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: consider using `write!` to avoid the extra allocation
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string

warning: `format!(..)` appended to existing `String`
  --> llmspell-cli/src/output.rs:45:13
   |
45 | /             result.push_str(&format!(
46 | |                 "Execution time: {}ms\n",
47 | |                 output.metadata.execution_time_ms
48 | |             ));
   | |______________^
   |
   = help: consider using `write!` to avoid the extra allocation
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string

warning: `format!(..)` appended to existing `String`
  --> llmspell-cli/src/output.rs:53:21
   |
53 |                     result.push_str(&format!("  ⚠ {}\n", warning));
   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: consider using `write!` to avoid the extra allocation
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string

warning: variables can be used directly in the `format!` string
  --> llmspell-cli/src/output.rs:53:38
   |
53 |                     result.push_str(&format!("  ⚠ {}\n", warning));
   |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
53 -                     result.push_str(&format!("  ⚠ {}\n", warning));
53 +                     result.push_str(&format!("  ⚠ {warning}\n"));
   |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-cli/src/output.rs:63:1
   |
63 | pub async fn print_stream(stream: &mut ScriptStream, format: OutputFormat) -> Result<()> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-cli/src/output.rs:69:9
   |
69 |         signal::ctrl_c().await.expect("Failed to listen for Ctrl+C");
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
   = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-cli/src/output.rs:63:1
   |
63 | pub async fn print_stream(stream: &mut ScriptStream, format: OutputFormat) -> Result<()> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (112/100)
   --> llmspell-cli/src/output.rs:111:1
    |
111 | / async fn print_stream_text(
112 | |     stream: &mut ScriptStream,
113 | |     show_progress: bool,
114 | |     interrupted: Arc<Mutex<bool>>,
...   |
242 | |     Ok(())
243 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:150:28
    |
150 |             pb.set_message(format!("Processing chunk {}", chunk_count));
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
150 -             pb.set_message(format!("Processing chunk {}", chunk_count));
150 +             pb.set_message(format!("Processing chunk {chunk_count}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:160:29
    |
160 | ...                   print!("{}", text);
    |                       ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
160 -                             print!("{}", text);
160 +                             print!("{text}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:165:21
    |
165 |                     print!("{}", text);
    |                     ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
165 -                     print!("{}", text);
165 +                     print!("{text}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:173:25
    |
173 |                         println!("\n🔧 Calling tool: {}...", tool_name);
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
173 -                         println!("\n🔧 Calling tool: {}...", tool_name);
173 +                         println!("\n🔧 Calling tool: {tool_name}...");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:175:36
    |
175 |                     pb.set_message(format!("Tool: {}", tool_name));
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
175 -                     pb.set_message(format!("Tool: {}", tool_name));
175 +                     pb.set_message(format!("Tool: {tool_name}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:177:21
    |
177 |                     println!("\n[Calling tool: {}...]", tool_name);
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
177 -                     println!("\n[Calling tool: {}...]", tool_name);
177 +                     println!("\n[Calling tool: {tool_name}...]");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:184:25
    |
184 |                         println!("✓ Tool call complete: {}", tool_name);
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
184 -                         println!("✓ Tool call complete: {}", tool_name);
184 +                         println!("✓ Tool call complete: {tool_name}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:187:21
    |
187 |                     println!("[Tool call complete: {}]", tool_name);
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
187 -                     println!("[Tool call complete: {}]", tool_name);
187 +                     println!("[Tool call complete: {tool_name}]");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:192:21
    |
192 |                     format!("📎 Media: {}", cap)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
192 -                     format!("📎 Media: {}", cap)
192 +                     format!("📎 Media: {cap}")
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:199:25
    |
199 |                         println!("\n{}", media_msg);
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
199 -                         println!("\n{}", media_msg);
199 +                         println!("\n{media_msg}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:202:21
    |
202 |                     println!("\n[{}]", media_msg);
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
202 -                     println!("\n[{}]", media_msg);
202 +                     println!("\n[{media_msg}]");
    |

warning: this match arm has an identical body to another arm
   --> llmspell-cli/src/output.rs:220:25
    |
220 | /                         ControlMessage::Heartbeat => {
221 | |                             // Keep spinner alive
222 | |                         }
    | |_________________________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~                         ControlMessage::Heartbeat | ControlMessage::Custom { .. } => {
221 |                             // Keep spinner alive
...
225 |                         }
226 ~                         }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:218:44
    |
218 | ...                   pb.set_message(format!("Stream cancelled: {}", reason));
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
218 -                             pb.set_message(format!("Stream cancelled: {}", reason));
218 +                             pb.set_message(format!("Stream cancelled: {reason}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-cli/src/output.rs:224:44
    |
224 | ...                   pb.set_message(format!("Rate limited ({} remaining)", remaining));
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
224 -                             pb.set_message(format!("Rate limited ({} remaining)", remaining));
224 +                             pb.set_message(format!("Rate limited ({remaining} remaining)"));
    |

warning: unused `async` for function with no await statements
  --> llmspell-cli/src/commands/info.rs:9:1
   |
9  | / pub async fn show_engine_info(
10 | |     current_engine: ScriptEngine,
11 | |     show_all: bool,
12 | |     output_format: OutputFormat,
...  |
58 | |     Ok(())
59 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
   = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-cli/src/commands/keys.rs:68:5
    |
68  | /     pub async fn execute(&self) -> Result<()> {
69  | |         // In a real implementation, this would use persistent storage
70  | |         // For now, we'll create a new manager each time
71  | |         let mut manager = ApiKeyManager::new();
...   |
110 | |         Ok(())
111 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
  --> llmspell-cli/src/commands/providers.rs:10:1
   |
10 | / pub async fn list_providers(
11 | |     _runtime_config: RuntimeConfig,
12 | |     detailed: bool,
13 | |     output_format: OutputFormat,
...  |
50 | |     Ok(())
51 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
  --> llmspell-cli/src/commands/repl.rs:10:1
   |
10 | / pub async fn start_repl(
11 | |     engine: ScriptEngine,
12 | |     _runtime_config: RuntimeConfig,
13 | |     _history_file: Option<PathBuf>,
...  |
20 | |     anyhow::bail!("REPL mode not implemented yet (coming in Phase 2)")
21 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
   --> llmspell-cli/src/commands/validate.rs:109:1
    |
109 | / async fn discover_actual_path() -> String {
110 | |     // Check standard paths
111 | |     for path in &["llmspell.toml", ".llmspell.toml", "config/llmspell.toml"] {
112 | |         if Path::new(path).exists() {
...   |
127 | |     "(no config file found - using defaults)".to_string()
128 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: unused `async` for function with no await statements
  --> llmspell-cli/src/config.rs:51:1
   |
51 | / async fn discover_config_file() -> Result<Option<PathBuf>> {
52 | |     // Check current directory first
53 | |     for path in CONFIG_SEARCH_PATHS {
54 | |         let path = PathBuf::from(path);
...  |
80 | |     Ok(None)
81 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: used underscore-prefixed binding
   --> llmspell-testing/src/agent_helpers.rs:421:20
    |
421 |         assert_eq!(agent._provider, "openai");
    |                    ^^^^^^^^^^^^^^^
    |
note: binding is defined here
   --> llmspell-testing/src/agent_helpers.rs:45:5
    |
45  |     _provider: String,
    |     ^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding
    = note: `-W clippy::used-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::used_underscore_binding)]`

warning: used underscore-prefixed binding
   --> llmspell-testing/src/agent_helpers.rs:422:20
    |
422 |         assert_eq!(agent._model, "gpt-4");
    |                    ^^^^^^^^^^^^
    |
note: binding is defined here
   --> llmspell-testing/src/agent_helpers.rs:46:5
    |
46  |     _model: String,
    |     ^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: used underscore-prefixed binding
   --> llmspell-testing/src/agent_helpers.rs:429:20
    |
429 |         assert_eq!(openai._provider, "openai");
    |                    ^^^^^^^^^^^^^^^^
    |
note: binding is defined here
   --> llmspell-testing/src/agent_helpers.rs:45:5
    |
45  |     _provider: String,
    |     ^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: used underscore-prefixed binding
   --> llmspell-testing/src/agent_helpers.rs:432:20
    |
432 |         assert_eq!(anthropic._provider, "anthropic");
    |                    ^^^^^^^^^^^^^^^^^^^
    |
note: binding is defined here
   --> llmspell-testing/src/agent_helpers.rs:45:5
    |
45  |     _provider: String,
    |     ^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/fixtures.rs:427:9
    |
427 | /         assert!(
428 | |             dir.exists(),
429 | |             "Fixtures directory should exist at: {:?}",
430 | |             dir
431 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/fixtures.rs:432:9
    |
432 | /         assert!(
433 | |             dir.is_dir(),
434 | |             "Fixtures path should be a directory: {:?}",
435 | |             dir
436 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/fixtures.rs:441:9
    |
441 | /         assert!(
442 | |             lua_dir.exists(),
443 | |             "Expected lua subdirectory at: {:?}",
444 | |             lua_dir
445 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/fixtures.rs:446:9
    |
446 | /         assert!(
447 | |             data_dir.exists(),
448 | |             "Expected data subdirectory at: {:?}",
449 | |             data_dir
450 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: `assert!(true)` will be optimized out by the compiler
   --> llmspell-testing/src/macros.rs:169:9
    |
169 |         assert!(true);
    |         ^^^^^^^^^^^^^
    |
    = help: remove it
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assertions_on_constants
    = note: `#[warn(clippy::assertions_on_constants)]` on by default

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/src/workflow_helpers.rs:224:13
    |
224 |             assert_eq!(step.name, format!("step_{}", i));
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
224 -             assert_eq!(step.name, format!("step_{}", i));
224 +             assert_eq!(step.name, format!("step_{i}"));
    |

warning: `llmspell-testing` (lib) generated 285 warnings (run `cargo clippy --fix --lib -p llmspell-testing` to apply 190 suggestions)
warning: `llmspell-cli` (lib) generated 101 warnings (run `cargo clippy --fix --lib -p llmspell-cli` to apply 57 suggestions)
warning: `llmspell-testing` (lib test) generated 287 warnings (277 duplicates) (run `cargo clippy --fix --lib -p llmspell-testing --tests` to apply 5 suggestions)
warning: this function has too many lines (123/100)
   --> llmspell-agents/examples/multi_agent_coordinator.rs:16:7
    |
16  |   async fn main() -> anyhow::Result<()> {
    |  _______^
17  | |     // Initialize logging
18  | |     tracing_subscriber::fmt().with_max_level(Level::INFO).init();
...   |
183 | |     Ok(())
184 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: binding to `_` prefixed variable with no side-effect
  --> llmspell-agents/examples/multi_agent_coordinator.rs:53:9
   |
53 |     let _data_agent = data_agent_result.agent;
   |         ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding
   = note: `-W clippy::no-effect-underscore-binding` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::no_effect_underscore_binding)]`

warning: binding to `_` prefixed variable with no side-effect
  --> llmspell-agents/examples/multi_agent_coordinator.rs:68:9
   |
68 |     let _analysis_agent = analysis_agent_result.agent;
   |         ^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding

warning: binding to `_` prefixed variable with no side-effect
  --> llmspell-agents/examples/multi_agent_coordinator.rs:79:9
   |
79 |     let _monitor_agent = monitor_result.agent;
   |         ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding

    Checking llmspell-agents v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents)
    Checking llmspell-bridge v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-bridge)
    Checking llmspell-sessions v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-sessions)
    Checking llmspell-testing v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-testing)
    Checking llmspell-state-persistence v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-state-persistence)
    Checking llmspell-tools v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-tools)
    Checking llmspell-core v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-core)
warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:19:9
   |
19 | /         b.iter(|| {
20 | |             rt.block_on(async {
21 | |                 let params = json!({
22 | |                     "name": "test_workflow",
...  |
32 | |             })
33 | |         })
   | |__________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
   = note: `-W clippy::semicolon-if-nothing-returned` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::semicolon_if_nothing_returned)]`
help: add a `;` here
   |
19 ~         b.iter(|| {
20 +             rt.block_on(async {
21 +                 let params = json!({
22 +                     "name": "test_workflow",
23 +                     "steps": [
24 +                         {"name": "step1", "tool": "mock_tool"}
25 +                     ]
26 +                 });
27 +                 let id = bridge
28 +                     .create_workflow("sequential", black_box(params))
29 +                     .await
30 +                     .unwrap();
31 +                 black_box(id);
32 +             })
33 +         });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:20:13
   |
20 | /             rt.block_on(async {
21 | |                 let params = json!({
22 | |                     "name": "test_workflow",
23 | |                     "steps": [
...  |
31 | |                 black_box(id);
32 | |             })
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
20 ~             rt.block_on(async {
21 +                 let params = json!({
22 +                     "name": "test_workflow",
23 +                     "steps": [
24 +                         {"name": "step1", "tool": "mock_tool"}
25 +                     ]
26 +                 });
27 +                 let id = bridge
28 +                     .create_workflow("sequential", black_box(params))
29 +                     .await
30 +                     .unwrap();
31 +                 black_box(id);
32 +             });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:37:9
   |
37 | /         b.iter(|| {
38 | |             rt.block_on(async {
39 | |                 let params = json!({
40 | |                     "name": "test_workflow",
...  |
51 | |             })
52 | |         })
   | |__________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
37 ~         b.iter(|| {
38 +             rt.block_on(async {
39 +                 let params = json!({
40 +                     "name": "test_workflow",
41 +                     "branches": [
42 +                         {"name": "branch1", "steps": []}
43 +                     ],
44 +                     "max_concurrency": 2
45 +                 });
46 +                 let id = bridge
47 +                     .create_workflow("parallel", black_box(params))
48 +                     .await
49 +                     .unwrap();
50 +                 black_box(id);
51 +             })
52 +         });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:38:13
   |
38 | /             rt.block_on(async {
39 | |                 let params = json!({
40 | |                     "name": "test_workflow",
41 | |                     "branches": [
...  |
50 | |                 black_box(id);
51 | |             })
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
38 ~             rt.block_on(async {
39 +                 let params = json!({
40 +                     "name": "test_workflow",
41 +                     "branches": [
42 +                         {"name": "branch1", "steps": []}
43 +                     ],
44 +                     "max_concurrency": 2
45 +                 });
46 +                 let id = bridge
47 +                     .create_workflow("parallel", black_box(params))
48 +                     .await
49 +                     .unwrap();
50 +                 black_box(id);
51 +             });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:62:9
   |
62 | /         b.iter(|| {
63 | |             rt.block_on(async {
64 | |                 let types = bridge.list_workflow_types().await;
65 | |                 black_box(types);
66 | |             })
67 | |         })
   | |__________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
62 ~         b.iter(|| {
63 +             rt.block_on(async {
64 +                 let types = bridge.list_workflow_types().await;
65 +                 black_box(types);
66 +             })
67 +         });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:63:13
   |
63 | /             rt.block_on(async {
64 | |                 let types = bridge.list_workflow_types().await;
65 | |                 black_box(types);
66 | |             })
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
63 ~             rt.block_on(async {
64 +                 let types = bridge.list_workflow_types().await;
65 +                 black_box(types);
66 +             });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:71:9
   |
71 | /         b.iter(|| {
72 | |             rt.block_on(async {
73 | |                 let info = bridge.get_workflow_info("sequential").await.unwrap();
74 | |                 black_box(info);
75 | |             })
76 | |         })
   | |__________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
71 ~         b.iter(|| {
72 +             rt.block_on(async {
73 +                 let info = bridge.get_workflow_info("sequential").await.unwrap();
74 +                 black_box(info);
75 +             })
76 +         });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:72:13
   |
72 | /             rt.block_on(async {
73 | |                 let info = bridge.get_workflow_info("sequential").await.unwrap();
74 | |                 black_box(info);
75 | |             })
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
72 ~             rt.block_on(async {
73 +                 let info = bridge.get_workflow_info("sequential").await.unwrap();
74 +                 black_box(info);
75 +             });
   |

warning: consider adding a `;` to the last statement for consistent formatting
  --> llmspell-bridge/benches/workflow_bridge_bench.rs:93:9
   |
93 | /         b.iter(|| {
94 | |             let params = json_to_workflow_params(black_box(json_params.clone())).unwrap();
95 | |             black_box(params);
96 | |         })
   | |__________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
   |
93 ~         b.iter(|| {
94 +             let params = json_to_workflow_params(black_box(json_params.clone())).unwrap();
95 +             black_box(params);
96 +         });
   |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:117:9
    |
117 | /         b.iter(|| {
118 | |             rt.block_on(async {
119 | |                 let input = json!({"test": "data"});
120 | |                 let result = bridge
...   |
125 | |             })
126 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
117 ~         b.iter(|| {
118 +             rt.block_on(async {
119 +                 let input = json!({"test": "data"});
120 +                 let result = bridge
121 +                     .execute_workflow(&workflow_id, black_box(input))
122 +                     .await
123 +                     .unwrap();
124 +                 black_box(result);
125 +             })
126 +         });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:118:13
    |
118 | /             rt.block_on(async {
119 | |                 let input = json!({"test": "data"});
120 | |                 let result = bridge
121 | |                     .execute_workflow(&workflow_id, black_box(input))
...   |
124 | |                 black_box(result);
125 | |             })
    | |______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
118 ~             rt.block_on(async {
119 +                 let input = json!({"test": "data"});
120 +                 let result = bridge
121 +                     .execute_workflow(&workflow_id, black_box(input))
122 +                     .await
123 +                     .unwrap();
124 +                 black_box(result);
125 +             });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:137:9
    |
137 | /         b.iter(|| {
138 | |             rt.block_on(async {
139 | |                 // Complete cycle: create, execute, get status
140 | |                 let params = json!({
...   |
159 | |             })
160 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
137 ~         b.iter(|| {
138 +             rt.block_on(async {
139 +                 // Complete cycle: create, execute, get status
140 +                 let params = json!({
141 +                     "name": "overhead_test",
142 +                     "steps": [{"name": "step1", "tool": "mock"}]
143 +                 });
144 + 
145 +                 let start = std::time::Instant::now();
146 + 
147 +                 // Create workflow
148 +                 let id = bridge.create_workflow("sequential", params).await.unwrap();
149 + 
150 +                 // Execute workflow
151 +                 let result = bridge.execute_workflow(&id, json!({})).await.unwrap();
152 + 
153 +                 // Get execution history instead of status
154 +                 let history = bridge.get_execution_history().await;
155 + 
156 +                 let duration = start.elapsed();
157 + 
158 +                 black_box((id, result, history, duration));
159 +             })
160 +         });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:138:13
    |
138 | /             rt.block_on(async {
139 | |                 // Complete cycle: create, execute, get status
140 | |                 let params = json!({
141 | |                     "name": "overhead_test",
...   |
158 | |                 black_box((id, result, history, duration));
159 | |             })
    | |______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
138 ~             rt.block_on(async {
139 +                 // Complete cycle: create, execute, get status
140 +                 let params = json!({
141 +                     "name": "overhead_test",
142 +                     "steps": [{"name": "step1", "tool": "mock"}]
143 +                 });
144 + 
145 +                 let start = std::time::Instant::now();
146 + 
147 +                 // Create workflow
148 +                 let id = bridge.create_workflow("sequential", params).await.unwrap();
149 + 
150 +                 // Execute workflow
151 +                 let result = bridge.execute_workflow(&id, json!({})).await.unwrap();
152 + 
153 +                 // Get execution history instead of status
154 +                 let history = bridge.get_execution_history().await;
155 + 
156 +                 let duration = start.elapsed();
157 + 
158 +                 black_box((id, result, history, duration));
159 +             });
    |

warning: this function has too many lines (140/100)
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:164:1
    |
164 | / fn benchmark_lua_workflow_api(c: &mut Criterion) {
165 | |     use llmspell_bridge::globals::{create_standard_registry, GlobalContext, GlobalInjector};
166 | |     use llmspell_bridge::providers::{ProviderManager, ProviderManagerConfig};
...   |
331 | |     });
332 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: redundant clone
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:176:55
    |
176 |     let context = Arc::new(GlobalContext::new(registry.clone(), providers));
    |                                                       ^^^^^^^^ help: remove this
    |
note: this value is dropped without further use
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:176:47
    |
176 |     let context = Arc::new(GlobalContext::new(registry.clone(), providers));
    |                                               ^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone
    = note: `-W clippy::redundant-clone` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::redundant_clone)]`

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:184:9
    |
184 | /         b.iter(|| {
185 | |             let start = std::time::Instant::now();
186 | |
187 | |             lua.load(
...   |
202 | |             black_box(duration);
203 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
184 ~         b.iter(|| {
185 +             let start = std::time::Instant::now();
186 + 
187 +             lua.load(
188 +                 r#"
189 +                 local workflow = Workflow.sequential({
190 +                     name = "bench_sequential",
191 +                     steps = {
192 +                         {name = "step1", type = "tool", tool = "mock_tool", input = {value = 42}}
193 +                     }
194 +                 })
195 +                 return workflow
196 +             "#,
197 +             )
198 +             .eval::<mlua::Value>()
199 +             .unwrap();
200 + 
201 +             let duration = start.elapsed();
202 +             black_box(duration);
203 +         });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:208:9
    |
208 | /         b.iter(|| {
209 | |             let start = std::time::Instant::now();
210 | |
211 | |             lua.load(
...   |
232 | |             black_box(duration);
233 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
208 ~         b.iter(|| {
209 +             let start = std::time::Instant::now();
210 + 
211 +             lua.load(
212 +                 r#"
213 +                 local workflow = Workflow.conditional({
214 +                     name = "bench_conditional",
215 +                     branches = {
216 +                         {
217 +                             name = "branch1",
218 +                             condition = {type = "always"},
219 +                             steps = {
220 +                                 {name = "step1", type = "tool", tool = "mock_tool", input = {}}
221 +                             }
222 +                         }
223 +                     }
224 +                 })
225 +                 return workflow
226 +             "#,
227 +             )
228 +             .eval::<mlua::Value>()
229 +             .unwrap();
230 + 
231 +             let duration = start.elapsed();
232 +             black_box(duration);
233 +         });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:238:9
    |
238 | /         b.iter(|| {
239 | |             let start = std::time::Instant::now();
240 | |
241 | |             lua.load(
...   |
260 | |             black_box(duration);
261 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
238 ~         b.iter(|| {
239 +             let start = std::time::Instant::now();
240 + 
241 +             lua.load(
242 +                 r#"
243 +                 local workflow = Workflow.loop({
244 +                     name = "bench_loop",
245 +                     iterator = "range",
246 +                     start = 1,
247 +                     ["end"] = 10,
248 +                     step = 1,
249 +                     body = {
250 +                         {name = "step1", type = "tool", tool = "mock_tool", input = {}}
251 +                     }
252 +                 })
253 +                 return workflow
254 +             "#,
255 +             )
256 +             .eval::<mlua::Value>()
257 +             .unwrap();
258 + 
259 +             let duration = start.elapsed();
260 +             black_box(duration);
261 +         });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:266:9
    |
266 | /         b.iter(|| {
267 | |             let start = std::time::Instant::now();
268 | |
269 | |             lua.load(
...   |
290 | |             black_box(duration);
291 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
266 ~         b.iter(|| {
267 +             let start = std::time::Instant::now();
268 + 
269 +             lua.load(
270 +                 r#"
271 +                 local workflow = Workflow.parallel({
272 +                     name = "bench_parallel",
273 +                     max_concurrency = 4,
274 +                     branches = {
275 +                         {
276 +                             name = "branch1",
277 +                             steps = {
278 +                                 {name = "step1", type = "tool", tool = "mock_tool", input = {}}
279 +                             }
280 +                         }
281 +                     }
282 +                 })
283 +                 return workflow
284 +             "#,
285 +             )
286 +             .eval::<mlua::Value>()
287 +             .unwrap();
288 + 
289 +             let duration = start.elapsed();
290 +             black_box(duration);
291 +         });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:296:9
    |
296 | /         b.iter(|| {
297 | |             let start = std::time::Instant::now();
298 | |
299 | |             lua.load("return Workflow.list()")
...   |
304 | |             black_box(duration);
305 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
296 ~         b.iter(|| {
297 +             let start = std::time::Instant::now();
298 + 
299 +             lua.load("return Workflow.list()")
300 +                 .eval::<mlua::Value>()
301 +                 .unwrap();
302 + 
303 +             let duration = start.elapsed();
304 +             black_box(duration);
305 +         });
    |

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-bridge/benches/workflow_bridge_bench.rs:310:9
    |
310 | /         b.iter(|| {
311 | |             let start = std::time::Instant::now();
312 | |
313 | |             lua.load(
...   |
329 | |             black_box(duration);
330 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
310 ~         b.iter(|| {
311 +             let start = std::time::Instant::now();
312 + 
313 +             lua.load(
314 +                 r#"
315 +                 local workflow = Workflow.sequential({
316 +                     name = "bench_complete",
317 +                     steps = {
318 +                         {name = "step1", type = "tool", tool = "mock_tool", input = {data = "test"}}
319 +                     }
320 +                 })
321 +                 local result = workflow:execute({input = "test_data"})
322 +                 return result
323 +             "#,
324 +             )
325 +             .eval::<mlua::Value>()
326 +             .unwrap();
327 + 
328 +             let duration = start.elapsed();
329 +             black_box(duration);
330 +         });
    |

warning: `llmspell-agents` (example "multi_agent_coordinator") generated 4 warnings
warning: `llmspell-bridge` (bench "workflow_bridge_bench") generated 21 warnings (run `cargo clippy --fix --bench "workflow_bridge_bench"` to apply 20 suggestions)
warning: long literal lacking separators
   --> llmspell-state-persistence/examples/schema_evolution.rs:261:34
    |
261 |             "created_timestamp": 1640995200 // 2022-01-01 00:00:00 UTC
    |                                  ^^^^^^^^^^ help: consider: `1_640_995_200`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal
    = note: `-W clippy::unreadable-literal` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unreadable_literal)]`

warning: long literal lacking separators
   --> llmspell-state-persistence/examples/schema_evolution.rs:268:34
    |
268 |             "created_timestamp": 1641081600 // 2022-01-02 00:00:00 UTC
    |                                  ^^^^^^^^^^ help: consider: `1_641_081_600`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: long literal lacking separators
   --> llmspell-state-persistence/examples/schema_evolution.rs:599:38
    |
599 |                 "created_timestamp": 1640995200 + i as i64
    |                                      ^^^^^^^^^^ help: consider: `1_640_995_200`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal

warning: usage of wildcard import
 --> llmspell-state-persistence/examples/schema_evolution.rs:6:44
  |
6 |     migration::{planner::MigrationPlanner, transforms::*, validator::*},
  |                                            ^^^^^^^^^^^^^ help: try: `transforms::{DataTransformer, FieldTransform, StateTransformation}`
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports
  = note: `-W clippy::wildcard-imports` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::wildcard_imports)]`

warning: usage of wildcard import
 --> llmspell-state-persistence/examples/schema_evolution.rs:6:59
  |
6 |     migration::{planner::MigrationPlanner, transforms::*, validator::*},
  |                                                           ^^^^^^^^^^^^ help: try: `validator::{MigrationValidator, ValidationRules}`
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: usage of wildcard import
 --> llmspell-state-persistence/examples/schema_evolution.rs:7:5
  |
7 |     schema::*,
  |     ^^^^^^^^^ help: try: `schema::{CompatibilityChecker, EnhancedStateSchema, SemanticVersion}`
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports

warning: this function has too many lines (529/100)
   --> llmspell-state-persistence/examples/schema_evolution.rs:12:7
    |
12  |   async fn main() -> Result<(), Box<dyn std::error::Error>> {
    |  _______^
13  | |     println!("🧬 rs-llmspell Schema Evolution Example");
14  | |     println!("======================================");
...   |
660 | |     Ok(())
661 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:275:39
    |
275 |             .set(StateScope::Global, &format!("user:v1:{}", i), user.clone())
    |                                       ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
275 -             .set(StateScope::Global, &format!("user:v1:{}", i), user.clone())
275 +             .set(StateScope::Global, &format!("user:v1:{i}"), user.clone())
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:473:13
    |
473 |             println!("\n🛤️  Migration Path: {} -> {} ({})", from, to, description);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
473 -             println!("\n🛤️  Migration Path: {} -> {} ({})", from, to, description);
473 +             println!("\n🛤️  Migration Path: {from} -> {to} ({description})");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:491:13
    |
491 |             println!("\n🛤️  Migration Path: {} -> {} - ❌ NOT POSSIBLE", from, to);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
491 -             println!("\n🛤️  Migration Path: {} -> {} - ❌ NOT POSSIBLE", from, to);
491 +             println!("\n🛤️  Migration Path: {from} -> {to} - ❌ NOT POSSIBLE");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:568:17
    |
568 |                 println!("         💡 Suggestion: {}", suggestion);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
568 -                 println!("         💡 Suggestion: {}", suggestion);
568 +                 println!("         💡 Suggestion: {suggestion}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:593:18
    |
593 |             key: format!("batch_user:{}", i),
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
593 -             key: format!("batch_user:{}", i),
593 +             key: format!("batch_user:{i}"),
    |

warning: casts from `i32` to `i64` can be expressed infallibly using `From`
   --> llmspell-state-persistence/examples/schema_evolution.rs:599:51
    |
599 |                 "created_timestamp": 1640995200 + i as i64
    |                                                   ^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `i64::from` instead
    |
599 -                 "created_timestamp": 1640995200 + i as i64
599 +                 "created_timestamp": 1640995200 + i64::from(i)
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:607:5
    |
607 | /     println!(
608 | |         "   • Created 1000 test states in: {:?}",
609 | |         batch_creation_time
610 | |     );
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:626:5
    |
626 | /     println!(
627 | |         "   • Transformed {} states in: {:?}",
628 | |         transformed_count, transform_duration
629 | |     );
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-state-persistence/examples/schema_evolution.rs:630:5
    |
630 | /     println!(
631 | |         "   • Average time per transformation: {:?}",
632 | |         avg_transform_time
633 | |     );
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: item in documentation is missing backticks
 --> llmspell-core/tests/types_tests.rs:3:36
  |
3 | //! These tests verify behavior of ComponentId, Version, and ComponentMetadata
  |                                    ^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
3 - //! These tests verify behavior of ComponentId, Version, and ComponentMetadata
3 + //! These tests verify behavior of `ComponentId`, Version, and ComponentMetadata
  |

warning: item in documentation is missing backticks
 --> llmspell-core/tests/types_tests.rs:3:62
  |
3 | //! These tests verify behavior of ComponentId, Version, and ComponentMetadata
  |                                                              ^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
3 - //! These tests verify behavior of ComponentId, Version, and ComponentMetadata
3 + //! These tests verify behavior of ComponentId, Version, and `ComponentMetadata`
  |

warning: variables can be used directly in the `format!` string
  --> llmspell-core/tests/types_tests.rs:28:64
   |
28 |         .map(|i| thread::spawn(move || ComponentId::from_name(&format!("thread-{}", i))))
   |                                                                ^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
28 -         .map(|i| thread::spawn(move || ComponentId::from_name(&format!("thread-{}", i))))
28 +         .map(|i| thread::spawn(move || ComponentId::from_name(&format!("thread-{i}"))))
   |

warning: `llmspell-state-persistence` (example "schema_evolution") generated 16 warnings (run `cargo clippy --fix --example "schema_evolution"` to apply 12 suggestions)
warning: variables can be used directly in the `format!` string
  --> llmspell-core/tests/integration_tests.rs:28:64
   |
28 |             metadata: ComponentMetadata::new(name.to_string(), format!("Test agent: {}", name)),
   |                                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
28 -             metadata: ComponentMetadata::new(name.to_string(), format!("Test agent: {}", name)),
28 +             metadata: ComponentMetadata::new(name.to_string(), format!("Test agent: {name}")),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-core/tests/integration_tests.rs:74:30
   |
74 |         Ok(AgentOutput::text(format!("Error handled: {}", error)))
   |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
74 -         Ok(AgentOutput::text(format!("Error handled: {}", error)))
74 +         Ok(AgentOutput::text(format!("Error handled: {error}")))
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/tests/integration_tests.rs:108:64
    |
108 |             metadata: ComponentMetadata::new(name.to_string(), format!("Test tool: {}", name)),
    |                                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
108 -             metadata: ComponentMetadata::new(name.to_string(), format!("Test tool: {}", name)),
108 +             metadata: ComponentMetadata::new(name.to_string(), format!("Test tool: {name}")),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-core/tests/integration_tests.rs:159:30
    |
159 |         Ok(AgentOutput::text(format!("Tool error: {}", error)))
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
159 -         Ok(AgentOutput::text(format!("Tool error: {}", error)))
159 +         Ok(AgentOutput::text(format!("Tool error: {error}")))
    |

warning: empty String is being created manually
   --> llmspell-core/tests/integration_tests.rs:322:34
    |
322 |     let input = AgentInput::text("".to_string());
    |                                  ^^^^^^^^^^^^^^ help: consider using: `String::new()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_string_new
    = note: `-W clippy::manual-string-new` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::manual_string_new)]`

warning: `llmspell-core` (test "integration_tests") generated 5 warnings (run `cargo clippy --fix --test "integration_tests"` to apply 5 suggestions)
warning: variables can be used directly in the `format!` string
  --> llmspell-testing/benches/event_throughput_simple.rs:59:35
   |
59 |                     let pattern = format!("test.event.{}", i);
   |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
59 -                     let pattern = format!("test.event.{}", i);
59 +                     let pattern = format!("test.event.{i}");
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput_simple.rs:203:9
    |
203 |         println!("Basic publishing: {:.0} events/sec", basic_throughput);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
203 -         println!("Basic publishing: {:.0} events/sec", basic_throughput);
203 +         println!("Basic publishing: {basic_throughput:.0} events/sec");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput_simple.rs:212:27
    |
212 |             let pattern = format!("perf.sub.{}", i);
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
212 -             let pattern = format!("perf.sub.{}", i);
212 +             let pattern = format!("perf.sub.{i}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput_simple.rs:240:9
    |
240 | /         println!(
241 | |             "With 10 subscribers: {:.0} events/sec ({} processed)",
242 | |             sub_throughput, processed
243 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput_simple.rs:279:9
    |
279 | /         println!(
280 | |             "With pattern matching: {:.0} events/sec ({} matches)",
281 | |             pattern_throughput, pattern_processed
282 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: `llmspell-core` (test "types_tests") generated 3 warnings (run `cargo clippy --fix --test "types_tests"` to apply 3 suggestions)
warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/tests/bridge_provider_test.rs:89:5
   |
89 |     assert!(result.is_ok(), "Basic script should work: {:?}", result);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
89 -     assert!(result.is_ok(), "Basic script should work: {:?}", result);
89 +     assert!(result.is_ok(), "Basic script should work: {result:?}");
   |

warning: you seem to be trying to use `match` for destructuring a single pattern. Consider using `if let`
   --> llmspell-bridge/tests/bridge_provider_test.rs:93:5
    |
93  | /     match global_check {
94  | |         Ok(output) => {
...   |
105 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
    = note: `-W clippy::single-match-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_match_else)]`
help: try
    |
93  ~     if let Ok(output) = global_check {
94  +         // Tool might be nil which is expected
95  +         // Check if the output is null/nil
96  +         assert!(
97  +             output.output.is_null(),
98  +             "Tool should be nil without inject_apis"
99  +         );
100 +     } else {
101 +         // Or it might error which is also fine
102 +     }
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/bridge_provider_test.rs:159:26
    |
159 |             let script = format!("return 'task {}'", i);
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
159 -             let script = format!("return 'task {}'", i);
159 +             let script = format!("return 'task {i}'");
    |

warning: `llmspell-bridge` (test "bridge_provider_test") generated 3 warnings (run `cargo clippy --fix --test "bridge_provider_test"` to apply 3 suggestions)
warning: item in documentation is missing backticks
 --> llmspell-sessions/tests/security_validation_test.rs:2:42
  |
2 | //! ABOUTME: Tests injection prevention, DoS protection, ID unpredictability, and data protection
  |                                          ^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
2 - //! ABOUTME: Tests injection prevention, DoS protection, ID unpredictability, and data protection
2 + //! ABOUTME: Tests injection prevention, `DoS` protection, ID unpredictability, and data protection
  |

warning: variables can be used directly in the `format!` string
  --> llmspell-testing/benches/migration_performance.rs:17:14
   |
17 |         key: format!("item_{}", id),
   |              ^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
17 -         key: format!("item_{}", id),
17 +         key: format!("item_{id}"),
   |

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-testing/benches/migration_performance.rs:21:22
   |
21 |             "price": id as f64 * 10.0,
   |                      ^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
   = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `usize` to `f64` causes a loss of precision on targets with 64-bit wide pointers (`usize` is 64 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-testing/benches/migration_performance.rs:34:31
   |
34 |                     "weight": id as f64 * 0.5
   |                               ^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/migration_performance.rs:139:30
    |
139 |         group.bench_function(format!("batch_{}", size), |b| {
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
139 -         group.bench_function(format!("batch_{}", size), |b| {
139 +         group.bench_function(format!("batch_{size}"), |b| {
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/migration_performance.rs:176:30
    |
176 |         group.bench_function(format!("batch_{}", size), |b| {
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
176 -         group.bench_function(format!("batch_{}", size), |b| {
176 +         group.bench_function(format!("batch_{size}"), |b| {
    |

warning: empty String is being created manually
   --> llmspell-testing/benches/migration_performance.rs:200:79
    |
200 |         let mut transformation = StateTransformation::new("copy".to_string(), "".to_string(), 1, 2);
    |                                                                               ^^^^^^^^^^^^^^ help: consider using: `String::new()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_string_new
    = note: `-W clippy::manual-string-new` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::manual_string_new)]`

warning: empty String is being created manually
   --> llmspell-testing/benches/migration_performance.rs:219:60
    |
219 |             StateTransformation::new("remove".to_string(), "".to_string(), 1, 2);
    |                                                            ^^^^^^^^^^^^^^ help: consider using: `String::new()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_string_new

warning: empty String is being created manually
   --> llmspell-testing/benches/migration_performance.rs:237:61
    |
237 |             StateTransformation::new("default".to_string(), "".to_string(), 1, 2);
    |                                                             ^^^^^^^^^^^^^^ help: consider using: `String::new()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_string_new

warning: empty String is being created manually
   --> llmspell-testing/benches/migration_performance.rs:256:60
    |
256 |             StateTransformation::new("custom".to_string(), "".to_string(), 1, 2);
    |                                                            ^^^^^^^^^^^^^^ help: consider using: `String::new()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_string_new

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/migration_performance.rs:285:30
    |
285 |         group.bench_function(format!("migrate_{}_items", size), |b| {
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
285 -         group.bench_function(format!("migrate_{}_items", size), |b| {
285 +         group.bench_function(format!("migrate_{size}_items"), |b| {
    |

warning: calling `CreateSessionOptions::default()` is more clear than this expression
  --> llmspell-sessions/tests/security_validation_test.rs:39:49
   |
39 |         let session_id = manager.create_session(Default::default()).await.unwrap();
   |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: adding items after statements is confusing, since items exist from the start of the scope
   --> llmspell-testing/benches/migration_performance.rs:313:5
    |
313 | /     fn create_nested_state(depth: usize) -> SerializableState {
314 | |         let mut value = json!({"value": 42});
315 | |         for i in 0..depth {
316 | |             value = json!({
...   |
327 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements
    = note: `-W clippy::items-after-statements` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::items_after_statements)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-sessions/tests/security_validation_test.rs:78:21
   |
78 | /                     eprintln!(
79 | |                         "WARNING: Path traversal not prevented for: {}",
80 | |                         malicious_name
81 | |                     );
   | |_____________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/migration_performance.rs:330:30
    |
330 |         group.bench_function(format!("depth_{}", depth), |b| {
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
330 -         group.bench_function(format!("depth_{}", depth), |b| {
330 +         group.bench_function(format!("depth_{depth}"), |b| {
    |

warning: empty String is being created manually
   --> llmspell-testing/benches/migration_performance.rs:333:64
    |
333 |                 StateTransformation::new("nested".to_string(), "".to_string(), 1, 2);
    |                                                                ^^^^^^^^^^^^^^ help: consider using: `String::new()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_string_new

warning: `format!(..)` appended to existing `String`
   --> llmspell-testing/benches/migration_performance.rs:341:17
    |
341 |                 path.push_str(&format!("level_{}", i));
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: consider using `write!` to avoid the extra allocation
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string
    = note: `-W clippy::format-push-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::format_push_string)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/migration_performance.rs:341:32
    |
341 |                 path.push_str(&format!("level_{}", i));
    |                                ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
341 -                 path.push_str(&format!("level_{}", i));
341 +                 path.push_str(&format!("level_{i}"));
    |

warning: calling `CreateSessionOptions::default()` is more clear than this expression
  --> llmspell-sessions/tests/security_validation_test.rs:89:49
   |
89 |         let session_id = manager.create_session(Default::default()).await.unwrap();
   |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `CreateSessionOptions::default()` is more clear than this expression
   --> llmspell-sessions/tests/security_validation_test.rs:127:53
    |
127 |             let session_id = manager.create_session(Default::default()).await.unwrap();
    |                                                     ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: redundant closure
   --> llmspell-sessions/tests/security_validation_test.rs:133:62
    |
133 |         let id_strings: Vec<String> = session_ids.iter().map(|id| id.to_string()).collect();
    |                                                              ^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::string::ToString::to_string`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/security_validation_test.rs:154:9
    |
154 |         config.max_storage_size_bytes = 5 * 1024; // 5KB total
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::SessionManagerConfig { max_storage_size_bytes: 5 * 1024, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/security_validation_test.rs:150:9
    |
150 |         let mut config = SessionManagerConfig::default();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default
    = note: `#[warn(clippy::field_reassign_with_default)]` on by default

warning: calling `CreateSessionOptions::default()` is more clear than this expression
   --> llmspell-sessions/tests/security_validation_test.rs:157:49
    |
157 |         let session_id = manager.create_session(Default::default()).await.unwrap();
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-sessions/tests/security_validation_test.rs:165:21
    |
165 |                     format!("artifact_{}.txt", i),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
165 -                     format!("artifact_{}.txt", i),
165 +                     format!("artifact_{i}.txt"),
    |

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/security_validation_test.rs:183:9
    |
183 |         config.max_storage_size_bytes = 10 * 1024;
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::SessionManagerConfig { max_storage_size_bytes: 10 * 1024, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/security_validation_test.rs:181:9
    |
181 |         let mut config = SessionManagerConfig::default();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: calling `CreateSessionOptions::default()` is more clear than this expression
   --> llmspell-sessions/tests/security_validation_test.rs:186:49
    |
186 |         let session_id = manager.create_session(Default::default()).await.unwrap();
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-sessions/tests/security_validation_test.rs:194:21
    |
194 |                     format!("large_{}.txt", i),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
194 -                     format!("large_{}.txt", i),
194 +                     format!("large_{i}.txt"),
    |

warning: calling `CreateSessionOptions::default()` is more clear than this expression
   --> llmspell-sessions/tests/security_validation_test.rs:210:49
    |
210 |         let session_id = manager.create_session(Default::default()).await.unwrap();
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-sessions/tests/security_validation_test.rs:222:21
    |
222 |                     format!("rapid_{}.txt", i),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
222 -                     format!("rapid_{}.txt", i),
222 +                     format!("rapid_{i}.txt"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-sessions/tests/security_validation_test.rs:245:9
    |
245 | /         println!(
246 | |             "Success: {}, Errors: {}, Time: {:?}",
247 | |             success_count, error_count, elapsed
248 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: calling `CreateSessionOptions::default()` is more clear than this expression
   --> llmspell-sessions/tests/security_validation_test.rs:303:49
    |
303 |         let session_id = manager.create_session(Default::default()).await.unwrap();
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `CreateSessionOptions::default()` is more clear than this expression
   --> llmspell-sessions/tests/security_validation_test.rs:342:49
    |
342 |         let session_id = manager.create_session(Default::default()).await.unwrap();
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-sessions/tests/security_validation_test.rs:351:21
    |
351 |                     format!("cleanup_test_{}.txt", i),
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
351 -                     format!("cleanup_test_{}.txt", i),
351 +                     format!("cleanup_test_{i}.txt"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-sessions/tests/security_validation_test.rs:369:17
    |
369 | /                 eprintln!(
370 | |                     "WARNING: Artifact {} still accessible after session deletion",
371 | |                     artifact_id
372 | |                 );
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: calling `CreateSessionOptions::default()` is more clear than this expression
   --> llmspell-sessions/tests/security_validation_test.rs:383:49
    |
383 |         let session_id = manager.create_session(Default::default()).await.unwrap();
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `CreateSessionOptions::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: `llmspell-testing` (bench "event_throughput_simple") generated 5 warnings (run `cargo clippy --fix --bench "event_throughput_simple"` to apply 5 suggestions)
warning: `llmspell-testing` (bench "migration_performance") generated 15 warnings (run `cargo clippy --fix --bench "migration_performance"` to apply 11 suggestions)
warning: unused `async` for function with no await statements
  --> llmspell-bridge/tests/sync_behavior_test.rs:12:1
   |
12 | / async fn create_test_registry() -> Arc<ComponentRegistry> {
13 | |     let registry = Arc::new(ComponentRegistry::new());
14 | |     registry
15 | |         .register_tool("calculator".to_string(), Arc::new(CalculatorTool::new()))
16 | |         .unwrap();
17 | |     registry
18 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
   = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
  --> llmspell-bridge/tests/sync_behavior_test.rs:31:1
   |
31 | / async fn create_test_engine() -> LuaEngine {
32 | |     let config = LuaConfig::default();
33 | |     LuaEngine::new(&config).expect("Failed to create Lua engine")
34 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: `llmspell-sessions` (test "security_validation_test") generated 20 warnings (run `cargo clippy --fix --test "security_validation_test"` to apply 9 suggestions)
warning: this function has too many lines (144/100)
   --> llmspell-agents/examples/code_gen_agent.rs:13:7
    |
13  |   async fn main() -> anyhow::Result<()> {
    |  _______^
14  | |     // Initialize logging
15  | |     tracing_subscriber::fmt().with_max_level(Level::INFO).init();
...   |
195 | |     Ok(())
196 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: this function has too many lines (150/100)
   --> llmspell-agents/examples/data_pipeline_agent.rs:13:7
    |
13  |   async fn main() -> anyhow::Result<()> {
    |  _______^
14  | |     // Initialize logging
15  | |     tracing_subscriber::fmt().with_max_level(Level::INFO).init();
...   |
201 | |     Ok(())
202 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

    Checking llmspell-hooks v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-hooks)
warning: item in documentation is missing backticks
 --> llmspell-tools/tests/calculator_dos_protection.rs:4:24
  |
4 | //! Security tests for CalculatorTool DoS protection
  |                        ^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
4 - //! Security tests for CalculatorTool DoS protection
4 + //! Security tests for `CalculatorTool` DoS protection
  |

warning: item in documentation is missing backticks
 --> llmspell-tools/tests/calculator_dos_protection.rs:4:39
  |
4 | //! Security tests for CalculatorTool DoS protection
  |                                       ^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
4 - //! Security tests for CalculatorTool DoS protection
4 + //! Security tests for CalculatorTool `DoS` protection
  |

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:14:5
   |
14 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:13:5
   |
13 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = note: `#[warn(unused_attributes)]` on by default

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:15:5
   |
15 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:13:5
   |
13 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:16:5
   |
16 |     #[ignore = "Workflow execution without steps not implemented - placeholder test"]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:13:5
   |
13 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:58:5
   |
58 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:57:5
   |
57 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:59:5
   |
59 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:57:5
   |
57 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:60:5
   |
60 |     #[ignore = "Workflow oneshot execution not implemented - placeholder test"]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:57:5
   |
57 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:89:5
   |
89 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:88:5
   |
88 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:90:5
   |
90 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:88:5
   |
88 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:91:5
   |
91 |     #[ignore = "Workflow metrics tracking not implemented - placeholder test"]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:88:5
   |
88 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:131:5
    |
131 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:130:5
    |
130 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:132:5
    |
132 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:130:5
    |
130 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:157:5
    |
157 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:156:5
    |
156 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:158:5
    |
158 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:156:5
    |
156 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:177:5
    |
177 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:176:5
    |
176 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:178:5
    |
178 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:176:5
    |
176 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:179:5
    |
179 |     #[ignore = "Workflow execution history not implemented - placeholder test"]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:176:5
    |
176 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:214:5
    |
214 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:213:5
    |
213 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:215:5
    |
215 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:213:5
    |
213 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:216:5
    |
216 |     #[ignore = "Workflow concurrent execution not implemented - placeholder test"]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:213:5
    |
213 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/calculator_dos_protection.rs:27:28
   |
27 |                 return Err(format!("Evaluation took too long: {:?}", elapsed));
   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
27 -                 return Err(format!("Evaluation took too long: {:?}", elapsed));
27 +                 return Err(format!("Evaluation took too long: {elapsed:?}"));
   |

warning: use Option::map_or_else instead of an if let/else
  --> llmspell-tools/tests/calculator_dos_protection.rs:34:17
   |
34 | /                 if let Some(error) = output.get("error") {
35 | |                     if let Some(message) = error.get("message") {
36 | |                         Err(message.as_str().unwrap_or("Unknown error").to_string())
37 | |                     } else {
...  |
41 | |                     Err("Unknown error".to_string())
42 | |                 }
   | |_________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
   = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
   = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`
help: try
   |
34 ~                 output.get("error").map_or_else(|| Err("Unknown error".to_string()), |error| if let Some(message) = error.get("message") {
35 +                         Err(message.as_str().unwrap_or("Unknown error").to_string())
36 +                     } else {
37 +                         Err("Unknown error".to_string())
38 +                     })
   |

warning: use Option::map_or_else instead of an if let/else
  --> llmspell-tools/tests/calculator_dos_protection.rs:35:21
   |
35 | /                     if let Some(message) = error.get("message") {
36 | |                         Err(message.as_str().unwrap_or("Unknown error").to_string())
37 | |                     } else {
38 | |                         Err("Unknown error".to_string())
39 | |                     }
   | |_____________________^ help: try: `error.get("message").map_or_else(|| Err("Unknown error".to_string()), |message| Err(message.as_str().unwrap_or("Unknown error").to_string()))`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: use of `format!` to build up a string from an iterator
  --> llmspell-tools/tests/calculator_dos_protection.rs:65:20
   |
65 |     let many_ops = (0..110).map(|i| format!("{} + ", i)).collect::<String>() + "0";
   |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
help: call `fold` instead
  --> llmspell-tools/tests/calculator_dos_protection.rs:65:29
   |
65 |     let many_ops = (0..110).map(|i| format!("{} + ", i)).collect::<String>() + "0";
   |                             ^^^
help: ... and use the `write!` macro here
  --> llmspell-tools/tests/calculator_dos_protection.rs:65:37
   |
65 |     let many_ops = (0..110).map(|i| format!("{} + ", i)).collect::<String>() + "0";
   |                                     ^^^^^^^^^^^^^^^^^^^
   = note: this can be written more efficiently by appending to a `String` directly
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_collect
   = note: `-W clippy::format-collect` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::format_collect)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/calculator_dos_protection.rs:65:37
   |
65 |     let many_ops = (0..110).map(|i| format!("{} + ", i)).collect::<String>() + "0";
   |                                     ^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
65 -     let many_ops = (0..110).map(|i| format!("{} + ", i)).collect::<String>() + "0";
65 +     let many_ops = (0..110).map(|i| format!("{i} + ")).collect::<String>() + "0";
   |

warning: use Option::map_or instead of an if let/else
  --> llmspell-tools/tests/calculator_dos_protection.rs:77:13
   |
77 | /             if let Ok(ref output) = result {
78 | |                 output["result"]["result"].as_str() == Some("Infinity")
79 | |             } else {
80 | |                 false
81 | |             }
   | |_____________^ help: try: `result.as_ref().map_or(false, |output| output["result"]["result"].as_str() == Some("Infinity"))`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: `llmspell-bridge` (test "sync_behavior_test") generated 2 warnings
warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:39:5
   |
39 |     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
   = note: `-W clippy::bool-assert-comparison` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::bool_assert_comparison)]`
help: replace it with `assert!(..)`
   |
39 -     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
39 +     assert!(result.get("success").unwrap().as_bool().unwrap());
   |

warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:40:5
   |
40 | /     assert_eq!(
41 | |         result
42 | |             .get("migration_available")
43 | |             .unwrap()
...  |
46 | |         true
47 | |     );
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
   |
40 ~     assert!(
41 |         result
...
44 |             .as_bool()
45 ~             .unwrap()
   |

warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:82:5
   |
82 |     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
   |
82 -     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
82 +     assert!(result.get("success").unwrap().as_bool().unwrap());
   |

warning: casts from `i32` to `f64` can be expressed infallibly using `From`
   --> llmspell-tools/tests/calculator_dos_protection.rs:135:43
    |
135 |         vars[format!("var{}", i)] = json!(i as f64);
    |                                           ^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `f64::from` instead
    |
135 -         vars[format!("var{}", i)] = json!(i as f64);
135 +         vars[format!("var{}", i)] = json!(f64::from(i));
    |

warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:83:5
   |
83 | /     assert_eq!(
84 | |         result.get("has_migration_api").unwrap().as_bool().unwrap(),
85 | |         false
86 | |     );
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
   |
83 ~     assert!(
84 ~         !result.get("has_migration_api").unwrap().as_bool().unwrap()
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:135:14
    |
135 |         vars[format!("var{}", i)] = json!(i as f64);
    |              ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
135 -         vars[format!("var{}", i)] = json!(i as f64);
135 +         vars[format!("var{i}")] = json!(i as f64);
    |

warning: used `assert_eq!` with a literal bool
   --> llmspell-bridge/tests/migration_runtime_test.rs:128:5
    |
128 |     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
    |
128 -     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
128 +     assert!(result.get("success").unwrap().as_bool().unwrap());
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:140:18
    |
140 |         .map(|i| format!("var{}", i))
    |                  ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
140 -         .map(|i| format!("var{}", i))
140 +         .map(|i| format!("var{i}"))
    |

warning: used `assert_eq!` with a literal bool
   --> llmspell-bridge/tests/migration_runtime_test.rs:129:5
    |
129 |     assert_eq!(result.get("state_works").unwrap().as_bool().unwrap(), true);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
    |
129 -     assert_eq!(result.get("state_works").unwrap().as_bool().unwrap(), true);
129 +     assert!(result.get("state_works").unwrap().as_bool().unwrap());
    |

warning: used `assert_eq!` with a literal bool
   --> llmspell-bridge/tests/migration_runtime_test.rs:130:5
    |
130 | /     assert_eq!(
131 | |         result.get("has_migration_api").unwrap().as_bool().unwrap(),
132 | |         false
133 | |     );
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
    |
130 ~     assert!(
131 ~         !result.get("has_migration_api").unwrap().as_bool().unwrap()
    |

error[E0425]: cannot find function `init_lua_globals` in crate `llmspell_bridge`
  --> llmspell-testing/tests/lua/mod.rs:50:22
   |
50 |     llmspell_bridge::init_lua_globals(&lua)?;
   |                      ^^^^^^^^^^^^^^^^ not found in `llmspell_bridge`

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:186:18
    |
186 |         .map(|i| format!("sin({})", i))
    |                  ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
186 -         .map(|i| format!("sin({})", i))
186 +         .map(|i| format!("sin({i})"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:216:13
    |
216 | /             assert!(
217 | |                 (value - expected).abs() < 0.0001,
218 | |                 "Expression {} = {} (expected {})",
219 | |                 expr,
220 | |                 value,
221 | |                 expected
222 | |             );
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:230:18
    |
230 |         .map(|i| format!("var{}", i))
    |                  ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
230 -         .map(|i| format!("var{}", i))
230 +         .map(|i| format!("var{i}"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:256:18
    |
256 |         .map(|i| format!("sin({}) + cos({}) + tan({})", i, i, i))
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
256 -         .map(|i| format!("sin({}) + cos({}) + tan({})", i, i, i))
256 +         .map(|i| format!("sin({i}) + cos({i}) + tan({i})"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:305:9
    |
305 |         assert!(result.is_ok(), "Expression {} failed", expr);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
305 -         assert!(result.is_ok(), "Expression {} failed", expr);
305 +         assert!(result.is_ok(), "Expression {expr} failed");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/calculator_dos_protection.rs:306:9
    |
306 | /         assert!(
307 | |             elapsed.as_millis() < 50,
308 | |             "Expression {} took too long: {:?}",
309 | |             expr,
310 | |             elapsed
311 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: calling `FileOperationsConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_sandbox_escape_tests.rs:13:45
   |
13 |     let file_tool = FileOperationsTool::new(Default::default());
   |                                             ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: `llmspell-agents` (example "data_pipeline_agent") generated 1 warning
warning: calling `FileOperationsConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_sandbox_escape_tests.rs:57:45
   |
57 |     let file_tool = FileOperationsTool::new(Default::default());
   |                                             ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ProcessExecutorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_sandbox_escape_tests.rs:83:49
   |
83 |     let process_tool = ProcessExecutorTool::new(Default::default());
   |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `ProcessExecutorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileSearchConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:136:43
    |
136 |     let search_tool = FileSearchTool::new(Default::default(), sandbox);
    |                                           ^^^^^^^^^^^^^^^^^^ help: try: `FileSearchConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: this function's return value is unnecessary
  --> llmspell-agents/examples/context_usage.rs:74:1
   |
74 | / fn basic_context_example() -> Result<()> {
75 | |     // Create context with builder
76 | |     let context = ExecutionContextBuilder::new()
77 | |         .conversation_id("conv-123".to_string())
...  |
90 | |     Ok(())
91 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
   = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove the return type...
   |
74 - fn basic_context_example() -> Result<()> {
74 + fn basic_context_example() -> () {
   |
help: ...and then remove returned values
   |
90 -     Ok(())
   |

warning: item in documentation is missing backticks
 --> llmspell-tools/tests/web_search_real_integration.rs:1:41
  |
1 | //! ABOUTME: Real integration tests for WebSearchTool with actual API calls
  |                                         ^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
1 - //! ABOUTME: Real integration tests for WebSearchTool with actual API calls
1 + //! ABOUTME: Real integration tests for `WebSearchTool` with actual API calls
  |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/state_operations.rs:108:18
    |
108 |                 &format!("key_{}", i),
    |                  ^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
108 -                 &format!("key_{}", i),
108 +                 &format!("key_{i}"),
    |

warning: item in documentation is missing backticks
 --> llmspell-tools/tests/web_search_real_integration.rs:2:20
  |
2 | //! ABOUTME: Tests DuckDuckGo and other providers with network connectivity
  |                    ^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
2 - //! ABOUTME: Tests DuckDuckGo and other providers with network connectivity
2 + //! ABOUTME: Tests `DuckDuckGo` and other providers with network connectivity
  |

warning: `llmspell-agents` (example "code_gen_agent") generated 1 warning
warning: calling `SystemMonitorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:173:47
    |
173 |     let monitor_tool = SystemMonitorTool::new(Default::default());
    |                                               ^^^^^^^^^^^^^^^^^^ help: try: `SystemMonitorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-testing/benches/state_operations.rs:152:13
    |
152 | /             rt.block_on(async {
153 | |                 let mut handles = vec![];
154 | |
155 | |                 for i in 0..10 {
...   |
172 | |             })
    | |______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
    = note: `-W clippy::semicolon-if-nothing-returned` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::semicolon_if_nothing_returned)]`
help: add a `;` here
    |
152 ~             rt.block_on(async {
153 +                 let mut handles = vec![];
154 + 
155 +                 for i in 0..10 {
156 +                     let sm = state_manager.clone();
157 +                     let handle = tokio::spawn(async move {
158 +                         sm.set(
159 +                             StateScope::Global,
160 +                             &format!("concurrent_{}", i),
161 +                             serde_json::json!({ "thread": i }),
162 +                         )
163 +                         .await
164 +                         .unwrap();
165 +                     });
166 +                     handles.push(handle);
167 +                 }
168 + 
169 +                 for handle in handles {
170 +                     handle.await.unwrap();
171 +                 }
172 +             });
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/state_operations.rs:160:30
    |
160 | ...                   &format!("concurrent_{}", i),
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
160 -                             &format!("concurrent_{}", i),
160 +                             &format!("concurrent_{i}"),
    |

warning: calling `FileOperationsConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:206:45
    |
206 |     let file_tool = FileOperationsTool::new(Default::default());
    |                                             ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

For more information about this error, try `rustc --explain E0425`.
warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/state_operations.rs:183:26
    |
183 |                         &format!("read_key_{}", i),
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
183 -                         &format!("read_key_{}", i),
183 +                         &format!("read_key_{i}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:105:38
    |
105 |                     hook_data.insert(format!("hook-{}", i), format!("data-{}", i));
    |                                      ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
105 -                     hook_data.insert(format!("hook-{}", i), format!("data-{}", i));
105 +                     hook_data.insert(format!("hook-{i}"), format!("data-{}", i));
    |

warning: calling `ProcessExecutorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:246:49
    |
246 |     let process_tool = ProcessExecutorTool::new(Default::default());
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `ProcessExecutorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ProviderManagerConfig::default()` is more clear than this expression
  --> llmspell-bridge/tests/lua_integration_tests.rs:17:51
   |
17 |     let providers = Arc::new(ProviderManager::new(Default::default()).await.unwrap());
   |                                                   ^^^^^^^^^^^^^^^^^^ help: try: `ProviderManagerConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: consider adding a `;` to the last statement for consistent formatting
   --> llmspell-testing/benches/state_operations.rs:192:13
    |
192 | /             rt.block_on(async {
193 | |                 let mut handles = vec![];
194 | |
195 | |                 for i in 0..10 {
...   |
210 | |             })
    | |______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#semicolon_if_nothing_returned
help: add a `;` here
    |
192 ~             rt.block_on(async {
193 +                 let mut handles = vec![];
194 + 
195 +                 for i in 0..10 {
196 +                     let sm = state_manager.clone();
197 +                     let handle = tokio::spawn(async move {
198 +                         let value = sm
199 +                             .get(StateScope::Global, &format!("read_key_{}", i))
200 +                             .await
201 +                             .unwrap();
202 +                         black_box(value)
203 +                     });
204 +                     handles.push(handle);
205 +                 }
206 + 
207 +                 for handle in handles {
208 +                     handle.await.unwrap();
209 +                 }
210 +             });
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:105:61
    |
105 |                     hook_data.insert(format!("hook-{}", i), format!("data-{}", i));
    |                                                             ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
105 -                     hook_data.insert(format!("hook-{}", i), format!("data-{}", i));
105 +                     hook_data.insert(format!("hook-{}", i), format!("data-{i}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/state_operations.rs:199:55
    |
199 | ...                   .get(StateScope::Global, &format!("read_key_{}", i))
    |                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
199 -                             .get(StateScope::Global, &format!("read_key_{}", i))
199 +                             .get(StateScope::Global, &format!("read_key_{i}"))
    |

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-testing/benches/hook_overhead.rs:164:33
    |
164 |         let overhead_percent = (overhead_ns as f64 / baseline.as_nanos() as f64) * 100.0;
    |                                 ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-testing/benches/hook_overhead.rs:164:54
    |
164 |         let overhead_percent = (overhead_ns as f64 / baseline.as_nanos() as f64) * 100.0;
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:166:9
    |
166 |         println!("Baseline execution: {:?}", baseline);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
166 -         println!("Baseline execution: {:?}", baseline);
166 +         println!("Baseline execution: {baseline:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:167:9
    |
167 |         println!("With simulated hooks: {:?}", with_hooks);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
167 -         println!("With simulated hooks: {:?}", with_hooks);
167 +         println!("With simulated hooks: {with_hooks:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:168:9
    |
168 |         println!("Hook overhead: {:.2}%", overhead_percent);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
168 -         println!("Hook overhead: {:.2}%", overhead_percent);
168 +         println!("Hook overhead: {overhead_percent:.2}%");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/web_search_real_integration.rs:42:13
   |
42 |             println!("Parsed response: {:#?}", response);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
42 -             println!("Parsed response: {:#?}", response);
42 +             println!("Parsed response: {response:#?}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/web_search_real_integration.rs:45:13
   |
45 |             println!("Search failed with error: {}", e);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
45 -             println!("Search failed with error: {}", e);
45 +             println!("Search failed with error: {e}");
   |

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-testing/benches/hook_overhead.rs:201:14
    |
201 |             (hook_only_overhead_ns as f64 / hook_baseline.as_nanos() as f64) * 100.0;
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-testing/benches/hook_overhead.rs:201:45
    |
201 |             (hook_only_overhead_ns as f64 / hook_baseline.as_nanos() as f64) * 100.0;
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/state_operations.rs:297:38
    |
297 | ...                   &format!("entry_{}", i),
    |                        ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
297 -                                     &format!("entry_{}", i),
297 +                                     &format!("entry_{i}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:203:9
    |
203 |         println!("Hook baseline: {:?}", hook_baseline);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
203 -         println!("Hook baseline: {:?}", hook_baseline);
203 +         println!("Hook baseline: {hook_baseline:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:204:9
    |
204 |         println!("Hook operations: {:?}", hook_operations);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
204 -         println!("Hook operations: {:?}", hook_operations);
204 +         println!("Hook operations: {hook_operations:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/hook_overhead.rs:205:9
    |
205 |         println!("Hook-only overhead: {:.2}%", hook_only_overhead_percent);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
205 -         println!("Hook-only overhead: {:.2}%", hook_only_overhead_percent);
205 +         println!("Hook-only overhead: {hook_only_overhead_percent:.2}%");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/web_search_real_integration.rs:87:9
   |
87 |         eprintln!("Fallback test failed with error: {}", e);
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
87 -         eprintln!("Fallback test failed with error: {}", e);
87 +         eprintln!("Fallback test failed with error: {e}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/tests/lua_integration_tests.rs:30:48
   |
30 |         .map_err(|e| mlua::Error::RuntimeError(format!("Failed to read {}: {}", file_path, e)))?;
   |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
30 -         .map_err(|e| mlua::Error::RuntimeError(format!("Failed to read {}: {}", file_path, e)))?;
30 +         .map_err(|e| mlua::Error::RuntimeError(format!("Failed to read {file_path}: {e}")))?;
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/web_search_real_integration.rs:128:9
    |
128 |         eprintln!("Search error: {}", e);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
128 -         eprintln!("Search error: {}", e);
128 +         eprintln!("Search error: {e}");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/tests/lua_integration_tests.rs:56:13
   |
56 |             panic!("Failed to run basic hooks test: {}", e);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
56 -             panic!("Failed to run basic hooks test: {}", e);
56 +             panic!("Failed to run basic hooks test: {e}");
   |

warning: unused `async` for function with no await statements
   --> llmspell-agents/examples/context_usage.rs:93:1
    |
93  | / async fn hierarchical_context_example() -> Result<()> {
94  | |     let mut hierarchy = HierarchicalContext::new();
...   |
132 | |     Ok(())
133 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
   --> llmspell-agents/examples/context_usage.rs:182:1
    |
182 | / async fn shared_memory_example() -> Result<()> {
183 | |     let memory_manager = SharedMemoryManager::new();
184 | |
185 | |     let agent1 = ComponentId::from_name("agent-1");
...   |
227 | |     Ok(())
228 | | }
    | |_^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/tests/lua_integration_tests.rs:81:13
   |
81 |             panic!("Failed to run cross-language test: {}", e);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
81 -             panic!("Failed to run cross-language test: {}", e);
81 +             panic!("Failed to run cross-language test: {e}");
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/lua_integration_tests.rs:106:13
    |
106 |             panic!("Failed to run performance test: {}", e);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
106 -             panic!("Failed to run performance test: {}", e);
106 +             panic!("Failed to run performance test: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/web_search_real_integration.rs:253:13
    |
253 |             println!("Failed to parse JSON: {}", e);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
253 -             println!("Failed to parse JSON: {}", e);
253 +             println!("Failed to parse JSON: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/web_search_real_integration.rs:254:13
    |
254 |             println!("Raw response: {}", text);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
254 -             println!("Raw response: {}", text);
254 +             println!("Raw response: {text}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/web_search_real_integration.rs:276:9
    |
276 |         println!("Testing provider: {}", provider);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
276 -         println!("Testing provider: {}", provider);
276 +         println!("Testing provider: {provider}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/web_search_real_integration.rs:293:21
    |
293 |                     println!("✓ {} provider working", provider);
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
293 -                     println!("✓ {} provider working", provider);
293 +                     println!("✓ {provider} provider working");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/web_search_real_integration.rs:295:21
    |
295 |                     println!("✗ {} provider returned success=false", provider);
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
295 -                     println!("✗ {} provider returned success=false", provider);
295 +                     println!("✗ {provider} provider returned success=false");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/web_search_real_integration.rs:299:17
    |
299 |                 println!("✗ {} provider failed: {}", provider, e);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
299 -                 println!("✗ {} provider failed: {}", provider, e);
299 +                 println!("✗ {provider} provider failed: {e}");
    |

warning: `llmspell-bridge` (test "migration_runtime_test") generated 7 warnings (run `cargo clippy --fix --test "migration_runtime_test"` to apply 7 suggestions)
error: could not compile `llmspell-testing` (test "lua") due to 1 previous error
warning: build failed, waiting for other jobs to finish...
warning: `llmspell-tools` (test "calculator_dos_protection") generated 17 warnings (run `cargo clippy --fix --test "calculator_dos_protection"` to apply 13 suggestions)
warning: `llmspell-tools` (test "security_sandbox_escape_tests") generated 7 warnings
warning: `llmspell-testing` (bench "hook_overhead") generated 12 warnings (run `cargo clippy --fix --bench "hook_overhead"` to apply 8 suggestions)
warning: `llmspell-tools` (test "web_search_real_integration") generated 12 warnings (run `cargo clippy --fix --test "web_search_real_integration"` to apply 12 suggestions)
warning: field assignment outside of initializer for an instance created with Default::default()
  --> llmspell-agents/tests/multi_agent_state.rs:20:9
   |
20 |         config.enabled = true;
   |         ^^^^^^^^^^^^^^^^^^^^^^
   |
note: consider initializing the variable with `llmspell_state_persistence::PersistenceConfig { enabled: true, ..Default::default() }` and removing relevant reassignments
  --> llmspell-agents/tests/multi_agent_state.rs:19:9
   |
19 |         let mut config = PersistenceConfig::default();
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default
   = note: `-W clippy::field-reassign-with-default` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::field_reassign_with_default)]`

warning: `llmspell-agents` (example "context_usage") generated 3 warnings
warning: item in documentation is missing backticks
 --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:1:36
  |
1 | //! ABOUTME: Integration tests for WorkflowBridge with standardized factory
  |                                    ^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
1 - //! ABOUTME: Integration tests for WorkflowBridge with standardized factory
1 + //! ABOUTME: Integration tests for `WorkflowBridge` with standardized factory
  |

warning: `llmspell-bridge` (test "lua_integration_tests") generated 5 warnings (run `cargo clippy --fix --test "lua_integration_tests"` to apply 4 suggestions)
warning: `llmspell-testing` (bench "state_operations") generated 7 warnings (run `cargo clippy --fix --bench "state_operations"` to apply 7 suggestions)
warning: `llmspell-agents` (test "multi_agent_state") generated 1 warning
warning: `llmspell-bridge` (test "workflow_bridge_integration_tests") generated 20 warnings (run `cargo clippy --fix --test "workflow_bridge_integration_tests"` to apply 20 suggestions)
warning: this import is redundant
  --> llmspell-bridge/tests/integration/session_workflow.rs:11:1
   |
11 | use tokio;
   | ^^^^^^^^^^ help: remove it entirely
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_component_path_imports
   = note: `-W clippy::single-component-path-imports` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::single_component_path_imports)]`

warning: unnecessary hashes around raw string literal
  --> llmspell-bridge/tests/integration/session_workflow.rs:28:20
   |
28 |       let lua_code = r#"
   |  ____________________^
29 | |         -- Test API availability for workflows
30 | |         local workflow_result = {}
...  |
53 | |         return workflow_result
54 | |     "#;
   | |______^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_raw_string_hashes
   = note: `-W clippy::needless-raw-string-hashes` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_raw_string_hashes)]`
help: remove all the hashes around the string literal
   |
28 ~     let lua_code = r"
29 |         -- Test API availability for workflows
...
53 |         return workflow_result
54 ~     ";
   |

warning: unnecessary hashes around raw string literal
   --> llmspell-bridge/tests/integration/session_workflow.rs:435:17
    |
435 | /                 r#"
436 | |                 -- Concurrent operations test {}
437 | |                 local thread_id = {}
...   |
457 | |                 }}
458 | |             "#,
    | |______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_raw_string_hashes
help: remove all the hashes around the string literal
    |
435 ~                 r"
436 |                 -- Concurrent operations test {}
...
457 |                 }}
458 ~             ",
    |

warning: unnecessary hashes around raw string literal
   --> llmspell-bridge/tests/integration/session_workflow.rs:506:20
    |
506 |       let lua_code = r#"
    |  ____________________^
507 | |         -- Comprehensive API method availability test
508 | |         local api_test = {}
...   |
588 | |         return api_test
589 | |     "#;
    | |______^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_raw_string_hashes
help: remove all the hashes around the string literal
    |
506 ~     let lua_code = r"
507 |         -- Comprehensive API method availability test
...
588 |         return api_test
589 ~     ";
    |

warning: unnecessary hashes around raw string literal
   --> llmspell-bridge/tests/lua_workflow_api_tests.rs:249:18
    |
249 |       let script = r#"
    |  __________________^
250 | |         local success, err = pcall(function()
251 | |             local workflow = Workflow.sequential({
252 | |                 -- Missing required 'name' field
...   |
261 | |     "#;
    | |______^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_raw_string_hashes
    = note: `-W clippy::needless-raw-string-hashes` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_raw_string_hashes)]`
help: remove all the hashes around the string literal
    |
249 ~     let script = r"
250 |         local success, err = pcall(function()
...
260 |         }
261 ~     ";
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/circuit_breaker.rs:154:63
    |
154 |                 let component_names: Vec<_> = (0..10).map(|i| format!("agent-{}", i)).collect();
    |                                                               ^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
154 -                 let component_names: Vec<_> = (0..10).map(|i| format!("agent-{}", i)).collect();
154 +                 let component_names: Vec<_> = (0..10).map(|i| format!("agent-{i}")).collect();
    |

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-testing/benches/circuit_breaker.rs:215:33
    |
215 |         let overhead_percent = (overhead_ns as f64 / baseline.as_nanos() as f64) * 100.0;
    |                                 ^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-testing/benches/circuit_breaker.rs:215:54
    |
215 |         let overhead_percent = (overhead_ns as f64 / baseline.as_nanos() as f64) * 100.0;
    |                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/circuit_breaker.rs:217:9
    |
217 |         println!("Baseline execution: {:?}", baseline);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
217 -         println!("Baseline execution: {:?}", baseline);
217 +         println!("Baseline execution: {baseline:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/circuit_breaker.rs:218:9
    |
218 |         println!("With circuit breaker: {:?}", with_breaker);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
218 -         println!("With circuit breaker: {:?}", with_breaker);
218 +         println!("With circuit breaker: {with_breaker:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/circuit_breaker.rs:219:9
    |
219 |         println!("Overhead: {:.2}%", overhead_percent);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
219 -         println!("Overhead: {:.2}%", overhead_percent);
219 +         println!("Overhead: {overhead_percent:.2}%");
    |

warning: long literal lacking separators
  --> llmspell-testing/benches/event_throughput.rs:21:38
   |
21 |     for event_count in [1000, 10000, 100000].iter() {
   |                                      ^^^^^^ help: consider: `100_000`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unreadable_literal
   = note: `-W clippy::unreadable-literal` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unreadable_literal)]`

warning: binding's name is too similar to existing binding
  --> llmspell-testing/benches/event_throughput.rs:79:29
   |
79 |                     let mut received = 0;
   |                             ^^^^^^^^
   |
note: existing binding defined here
  --> llmspell-testing/benches/event_throughput.rs:66:29
   |
66 |                     let mut receiver = event_bus.subscribe(pattern).await.unwrap();
   |                             ^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names
   = note: `-W clippy::similar-names` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::similar_names)]`

warning: `llmspell-testing` (bench "circuit_breaker") generated 6 warnings (run `cargo clippy --fix --bench "circuit_breaker"` to apply 4 suggestions)
warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/tests/integration/session_workflow.rs:92:5
   |
92 |     println!("Available APIs: {}/7", available_count);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
92 -     println!("Available APIs: {}/7", available_count);
92 +     println!("Available APIs: {available_count}/7");
   |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:250:9
    |
250 | /         println!(
251 | |             "Memory usage after GC (iteration {}): {:.2} KB",
252 | |             i, memory_usage
253 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:331:5
    |
331 |     println!("Operation time: {:.4}s", operation_time);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
331 -     println!("Operation time: {:.4}s", operation_time);
331 +     println!("Operation time: {operation_time:.4}s");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:332:5
    |
332 |     println!("String operation time: {:.4}s", string_time);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
332 -     println!("String operation time: {:.4}s", string_time);
332 +     println!("String operation time: {string_time:.4}s");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:333:5
    |
333 |     println!("Total test execution time: {:?}", total_time);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
333 -     println!("Total test execution time: {:?}", total_time);
333 +     println!("Total test execution time: {total_time:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:434:28
    |
434 |               let lua_code = format!(
    |  ____________________________^
435 | |                 r#"
436 | |                 -- Concurrent operations test {}
437 | |                 local thread_id = {}
...   |
459 | |                 i, i
460 | |             );
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: unused `async` for function with no await statements
  --> llmspell-bridge/tests/lua_workflow_api_tests.rs:12:1
   |
12 | / async fn create_test_engine() -> LuaEngine {
13 | |     let config = LuaConfig::default();
14 | |     LuaEngine::new(&config).expect("Failed to create Lua engine")
15 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
   = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: unused `async` for function with no await statements
  --> llmspell-bridge/tests/lua_workflow_api_tests.rs:28:1
   |
28 | / async fn create_test_registry() -> Arc<ComponentRegistry> {
29 | |     let registry = Arc::new(ComponentRegistry::new());
30 | |     registry
31 | |         .register_tool("calculator".to_string(), Arc::new(CalculatorTool::new()))
32 | |         .unwrap();
33 | |     registry
34 | | }
   | |_^
   |
   = help: consider removing the `async` from this function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async

warning: casting `usize` to `i64` may wrap around the value on targets with 64-bit wide pointers
   --> llmspell-bridge/tests/integration/session_workflow.rs:481:68
    |
481 |         assert_eq!(output.get("thread_id").unwrap().as_i64(), Some(i as i64));
    |                                                                    ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap
    = note: `-W clippy::cast-possible-wrap` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_wrap)]`

warning: casting `usize` to `i64` may wrap around the value on targets with 64-bit wide pointers
   --> llmspell-bridge/tests/integration/session_workflow.rs:489:18
    |
489 |             Some(expected_last_computed as i64)
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap

warning: this function has too many lines (134/100)
   --> llmspell-bridge/tests/integration/session_workflow.rs:496:7
    |
496 |   async fn test_comprehensive_api_methods() {
    |  _______^
497 | |     let lua_config = LuaConfig::default();
498 | |     let mut engine = EngineFactory::create_lua_engine(&lua_config).unwrap();
...   |
652 | |     );
653 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: it is more concise to loop over references to containers instead of using explicit iteration methods
   --> llmspell-bridge/tests/integration/session_workflow.rs:603:25
    |
603 |     for (key, value) in api_test.iter() {
    |                         ^^^^^^^^^^^^^^^ help: to write this more concisely, try: `api_test`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_iter_loop
    = note: `-W clippy::explicit-iter-loop` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::explicit_iter_loop)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:604:9
    |
604 |         println!("  {}: {:?}", key, value);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
604 -         println!("  {}: {:?}", key, value);
604 +         println!("  {key}: {value:?}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:625:5
    |
625 |     println!("Tool.create available: {}", tool_create);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
625 -     println!("Tool.create available: {}", tool_create);
625 +     println!("Tool.create available: {tool_create}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/integration/session_workflow.rs:626:5
    |
626 |     println!("Workflow.create available: {}", workflow_create);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
626 -     println!("Workflow.create available: {}", workflow_create);
626 +     println!("Workflow.create available: {workflow_create}");
    |

warning: it is more concise to loop over references to containers instead of using explicit iteration methods
  --> llmspell-testing/benches/event_throughput.rs:21:24
   |
21 |     for event_count in [1000, 10000, 100000].iter() {
   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: to write this more concisely, try: `&[1000, 10000, 100000]`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_iter_loop
   = note: `-W clippy::explicit-iter-loop` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::explicit_iter_loop)]`

warning: casting `i32` to `u64` may lose the sign of the value
  --> llmspell-testing/benches/event_throughput.rs:22:47
   |
22 |         group.throughput(Throughput::Elements(*event_count as u64));
   |                                               ^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
   = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput.rs:110:37
    |
110 |                         .subscribe(&format!("concurrent.{}.>", i))
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
110 -                         .subscribe(&format!("concurrent.{}.>", i))
110 +                         .subscribe(&format!("concurrent.{i}.>"))
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput.rs:169:43
    |
169 |                     let _correlation_id = format!("chain-{}", chain_id);
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
169 -                     let _correlation_id = format!("chain-{}", chain_id);
169 +                     let _correlation_id = format!("chain-{chain_id}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput.rs:278:25
    |
278 |                         format!("memory.test.{}", i),
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
278 -                         format!("memory.test.{}", i),
278 +                         format!("memory.test.{i}"),
    |

warning: casts from `i32` to `f64` can be expressed infallibly using `From`
   --> llmspell-testing/benches/event_throughput.rs:328:26
    |
328 |         let throughput = events_to_publish as f64 / elapsed.as_secs_f64();
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
    = note: `-W clippy::cast-lossless` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_lossless)]`
help: use `f64::from` instead
    |
328 -         let throughput = events_to_publish as f64 / elapsed.as_secs_f64();
328 +         let throughput = f64::from(events_to_publish) / elapsed.as_secs_f64();
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput.rs:329:9
    |
329 |         println!("Publishing throughput: {:.0} events/sec", throughput);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
329 -         println!("Publishing throughput: {:.0} events/sec", throughput);
329 +         println!("Publishing throughput: {throughput:.0} events/sec");
    |

warning: casts from `i32` to `f64` can be expressed infallibly using `From`
   --> llmspell-testing/benches/event_throughput.rs:368:26
    |
368 |         let throughput = received as f64 / elapsed.as_secs_f64();
    |                          ^^^^^^^^^^^^^^^
    |
    = help: an `as` cast can become silently lossy if the types change in the future
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_lossless
help: use `f64::from` instead
    |
368 -         let throughput = received as f64 / elapsed.as_secs_f64();
368 +         let throughput = f64::from(received) / elapsed.as_secs_f64();
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-testing/benches/event_throughput.rs:369:9
    |
369 |         println!("End-to-end throughput: {:.0} events/sec", throughput);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
369 -         println!("End-to-end throughput: {:.0} events/sec", throughput);
369 +         println!("End-to-end throughput: {throughput:.0} events/sec");
    |

warning: binding to `_` prefixed variable with no side-effect
   --> llmspell-hooks/tests/hook_persistence.rs:237:13
    |
237 |         let _replay_options = ReplayOptions {
    |             ^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding
    = note: `-W clippy::no-effect-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::no_effect_underscore_binding)]`

warning: adding items after statements is confusing, since items exist from the start of the scope
  --> llmspell-tools/tests/dry_principle_verification_test.rs:38:9
   |
38 |         use llmspell_utils::encoding::{hash_string, to_hex_string, HashAlgorithm};
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements
   = note: `-W clippy::items-after-statements` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::items_after_statements)]`

warning: adding items after statements is confusing, since items exist from the start of the scope
  --> llmspell-tools/tests/dry_principle_verification_test.rs:38:40
   |
38 |         use llmspell_utils::encoding::{hash_string, to_hex_string, HashAlgorithm};
   |                                        ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: adding items after statements is confusing, since items exist from the start of the scope
  --> llmspell-tools/tests/dry_principle_verification_test.rs:38:53
   |
38 |         use llmspell_utils::encoding::{hash_string, to_hex_string, HashAlgorithm};
   |                                                     ^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: adding items after statements is confusing, since items exist from the start of the scope
  --> llmspell-tools/tests/dry_principle_verification_test.rs:38:68
   |
38 |         use llmspell_utils::encoding::{hash_string, to_hex_string, HashAlgorithm};
   |                                                                    ^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/tests/hook_persistence.rs:370:9
    |
370 | /         assert!(
371 | |             recording_time < tokio::time::Duration::from_secs(1),
372 | |             "Recording took too long: {:?}",
373 | |             recording_time
374 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/tests/hook_persistence.rs:403:9
    |
403 | /         assert!(
404 | |             replay_time < tokio::time::Duration::from_secs(2),
405 | |             "Replay took too long: {:?}",
406 | |             replay_time
407 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-hooks/tests/hook_persistence.rs:410:30
    |
410 |         let overhead_ratio = replay_time.as_millis() as f64 / recording_time.as_millis() as f64;
    |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-hooks/tests/hook_persistence.rs:410:63
    |
410 |         let overhead_ratio = replay_time.as_millis() as f64 / recording_time.as_millis() as f64;
    |                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/tests/hook_persistence.rs:411:9
    |
411 | /         assert!(
412 | |             overhead_ratio < 5.0,
413 | |             "Replay overhead too high: {:.2}x",
414 | |             overhead_ratio
415 | |         );
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: binding to `_` prefixed variable with no side-effect
   --> llmspell-hooks/tests/hook_persistence.rs:388:13
    |
388 |         let _replay_options = ReplayOptions {
    |             ^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding

warning: this function has too many lines (717/100)
   --> llmspell-bridge/tests/simple_tool_integration_test.rs:5:7
    |
5   |   async fn test_simple_tool_integration() {
    |  _______^
6   | |     use llmspell_bridge::{
7   | |         engine::factory::{EngineFactory, LuaConfig},
8   | |         providers::{ProviderManager, ProviderManagerConfig},
...   |
875 | |     println!("\n✅ All integration tests passed!");
876 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/tests/hook_persistence.rs:496:47
    |
496 |             let hook = StatefulTestHook::new(&format!("registry_hook_{}", i));
    |                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
496 -             let hook = StatefulTestHook::new(&format!("registry_hook_{}", i));
496 +             let hook = StatefulTestHook::new(&format!("registry_hook_{i}"));
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-hooks/tests/hook_persistence.rs:518:17
    |
518 |                 assert_eq!(data["hook"], format!("registry_hook_{}", i));
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
518 -                 assert_eq!(data["hook"], format!("registry_hook_{}", i));
518 +                 assert_eq!(data["hook"], format!("registry_hook_{i}"));
    |

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/dry_principle_verification_test.rs:17:49
   |
17 |         let hash_tool = HashCalculatorTool::new(Default::default());
   |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: adding items after statements is confusing, since items exist from the start of the scope
  --> llmspell-tools/tests/dry_principle_verification_test.rs:69:9
   |
69 |         use llmspell_utils::encoding::base64_encode;
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#items_after_statements

warning: strict comparison of `f32` or `f64`
   --> llmspell-bridge/tests/simple_tool_integration_test.rs:161:13
    |
161 |             assert_eq!(obj.get("result").unwrap().as_f64().unwrap(), 14.0);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#float_cmp
    = note: `-W clippy::float-cmp` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::float_cmp)]`
    = note: this warning originates in the macro `assert_eq` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/dry_principle_verification_test.rs:79:48
   |
79 |         let uuid_tool = UuidGeneratorTool::new(Default::default());
   |                                                ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `JsonProcessorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/dry_principle_verification_test.rs:115:48
    |
115 |         let json_tool = JsonProcessorTool::new(Default::default());
    |                                                ^^^^^^^^^^^^^^^^^^ help: try: `JsonProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-bridge/tests/simple_tool_integration_test.rs:939:25
    |
939 |         let per_op_ms = elapsed.as_micros() as f64 / f64::from(iterations) / 1000.0;
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: `llmspell-bridge` (test "lua_workflow_api_tests") generated 3 warnings (run `cargo clippy --fix --test "lua_workflow_api_tests"` to apply 1 suggestion)
warning: calling `HashCalculatorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/dry_principle_verification_test.rs:176:49
    |
176 |         let hash_tool = HashCalculatorTool::new(Default::default());
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/dry_principle_verification_test.rs:221:46
    |
221 |             Box::new(HashCalculatorTool::new(Default::default())),
    |                                              ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/dry_principle_verification_test.rs:223:45
    |
223 |             Box::new(UuidGeneratorTool::new(Default::default())),
    |                                             ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: `llmspell-bridge` (test "session_workflow") generated 17 warnings (run `cargo clippy --fix --test "session_workflow"` to apply 14 suggestions)
warning: this looks like a formatting argument but it is not part of a formatting macro
 --> llmspell-agents/tests/communication_tests.rs:1:56
  |
1 | //! ABOUTME: Integration tests for agent communication patterns and message passing
  |                                                        ^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#literal_string_with_formatting_args
  = note: `-W clippy::literal-string-with-formatting-args` implied by `-W clippy::nursery`
  = help: to override `-W clippy::nursery` add `#[allow(clippy::literal_string_with_formatting_args)]`

warning: this looks like a formatting argument but it is not part of a formatting macro
   --> llmspell-agents/tests/communication_tests.rs:166:45
    |
166 |         .with_response(None, "Preprocessed: {input}")
    |                                             ^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#literal_string_with_formatting_args

warning: `llmspell-testing` (bench "event_throughput") generated 11 warnings (run `cargo clippy --fix --bench "event_throughput"` to apply 8 suggestions)
warning: item in documentation is missing backticks
 --> llmspell-tools/tests/data_validation_integration.rs:1:36
  |
1 | //! ABOUTME: Integration tests for DataValidationTool
  |                                    ^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
1 - //! ABOUTME: Integration tests for DataValidationTool
1 + //! ABOUTME: Integration tests for `DataValidationTool`
  |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/tests/communication_tests.rs:360:21
    |
359 |           for i in 0..5 {
    |  _______________________-
360 | |             let mut state = state_clone.write().await;
    | |                     ^^^^^
361 | |             state.insert(format!("key{i}"), format!("value{i}"));
362 | |             tokio::time::sleep(Duration::from_millis(10)).await;
363 | |         }
    | |_________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
    = note: `-W clippy::significant-drop-tightening` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_tightening)]`
help: merge the temporary construction with its single usage
    |
360 ~             
361 +             state_clone.write().await.insert(format!("key{i}"), format!("value{i}"));
362 ~             
    |

warning: `llmspell-hooks` (test "hook_persistence") generated 9 warnings (run `cargo clippy --fix --test "hook_persistence"` to apply 5 suggestions)
warning: `llmspell-tools` (test "dry_principle_verification_test") generated 11 warnings
warning: `llmspell-bridge` (test "simple_tool_integration_test") generated 3 warnings
warning: `llmspell-agents` (test "communication_tests") generated 3 warnings
warning: `llmspell-tools` (test "data_validation_integration") generated 1 warning (run `cargo clippy --fix --test "data_validation_integration"` to apply 1 suggestion)
