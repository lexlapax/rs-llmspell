    Checking llmspell-core v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-core)
    Checking llmspell-state-traits v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-state-traits)
    Checking llmspell-utils v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-utils)
    Checking llmspell-storage v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-storage)
    Checking llmspell-security v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-security)
    Checking llmspell-providers v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-providers)
    Checking llmspell-config v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-config)
    Checking llmspell-events v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-events)
    Checking llmspell-hooks v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-hooks)
    Checking llmspell-state-persistence v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-state-persistence)
    Checking llmspell-tools v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-tools)
    Checking llmspell-sessions v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-sessions)
    Checking llmspell-workflows v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-workflows)
warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/communication/database_connector.rs:392:37
    |
392 | / ...                   if let Ok(v) = row.try_get::<String, _>(i) {
393 | | ...                       serde_json::Value::String(v)
394 | | ...                   } else if let Ok(v) = row.try_get::<i64, _>(i) {
395 | | ...                       serde_json::Value::Number(v.into())
...   |
404 | | ...                       serde_json::Value::Null
405 | | ...                   };
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
    = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`
help: try
    |
392 ~                                     row.try_get::<String, _>(i).map_or_else(|_| if let Ok(v) = row.try_get::<i64, _>(i) {
393 +                                         serde_json::Value::Number(v.into())
394 +                                     } else if let Ok(v) = row.try_get::<f64, _>(i) {
395 +                                         serde_json::Value::Number(
396 +                                             serde_json::Number::from_f64(v)
397 +                                                 .unwrap_or(serde_json::Number::from(0)),
398 +                                         )
399 +                                     } else if let Ok(v) = row.try_get::<bool, _>(i) {
400 +                                         serde_json::Value::Bool(v)
401 +                                     } else {
402 +                                         serde_json::Value::Null
403 ~                                     }, |v| serde_json::Value::String(v));
    |

warning: function call inside of `unwrap_or`
   --> llmspell-tools/src/communication/database_connector.rs:399:50
    |
399 | ...                   .unwrap_or(serde_json::Number::from(0)),
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| serde_json::Number::from(0))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call
    = note: `-W clippy::or-fun-call` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::or_fun_call)]`

warning: unused `self` argument
    --> llmspell-tools/src/data/csv_analyzer.rs:1112:9
     |
1112 |         &self,
     |         ^^^^^
     |
     = help: consider refactoring to an associated function
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
     = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: this function's return value is unnecessarily wrapped by `Result`
    --> llmspell-tools/src/data/csv_analyzer.rs:1111:5
     |
1111 | /     fn get_column_value(
1112 | |         &self,
1113 | |         name: &str,
1114 | |         headers: &csv::StringRecord,
...    |
1125 | |         Ok(name.to_string())
1126 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
     = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove `Result` from the return type...
     |
1116 -     ) -> Result<String> {
1116 +     ) -> std::string::String {
     |
help: ...and then change returning expressions
     |
1120 ~                 return record.get(i).unwrap_or("").to_string();
1121 |             }
 ...
1124 |         // If not a column name, return as literal
1125 ~         name.to_string()
     |

warning: unused `self` argument
   --> llmspell-tools/src/data/json_processor.rs:313:9
    |
313 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: the function has a cognitive complexity of (39/25)
   --> llmspell-tools/src/fs/archive_handler.rs:286:8
    |
286 |     fn extract_zip(
    |        ^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity
    = note: `-W clippy::cognitive-complexity` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::cognitive_complexity)]`

warning: the function has a cognitive complexity of (35/25)
   --> llmspell-tools/src/fs/archive_handler.rs:378:8
    |
378 |     fn extract_tar(
    |        ^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: the function has a cognitive complexity of (35/25)
   --> llmspell-tools/src/fs/archive_handler.rs:446:8
    |
446 |     fn extract_tar_gz(
    |        ^^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: this function has too many lines (136/100)
    --> llmspell-tools/src/fs/archive_handler.rs:917:5
     |
917  | /     async fn list_archive(&self, params: &Value) -> Result<Value> {
918  | |         let archive_path = params.get("path").and_then(|v| v.as_str()).ok_or_else(|| {
919  | |             LLMSpellError::Validation {
920  | |                 message: "Missing 'path' parameter".to_string(),
...    |
1063 | |             .build())
1064 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
     = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: this function has too many lines (160/100)
   --> llmspell-tools/src/fs/file_converter.rs:263:5
    |
263 | /     async fn execute(
264 | |         &self,
265 | |         input: AgentInput,
266 | |         _context: ExecutionContext,
...   |
461 | |         Ok(AgentOutput::text(output_text).with_metadata(metadata))
462 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-tools/src/fs/file_operations.rs:486:21
    |
486 |     fn get_metadata(&self, path: &Path, sandbox: &FileSandbox) -> Result<Value> {
    |                     ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-tools/src/fs/file_operations.rs:531:20
    |
531 |     fn file_exists(&self, path: &Path, sandbox: &FileSandbox) -> Result<bool> {
    |                    ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function has too many lines (192/100)
   --> llmspell-tools/src/fs/file_operations.rs:607:5
    |
607 | /     async fn execute(&self, input: AgentInput, context: ExecutionContext) -> Result<AgentOutput> {
608 | |         // Get parameters using shared utility
609 | |         let params = extract_parameters(&input)?;
610 | |         let parameters = self.parse_parameters(params)?;
...   |
807 | |         Ok(AgentOutput::text(output_text).with_metadata(metadata))
808 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-tools/src/fs/file_watcher.rs:183:13
    |
183 | /             notify::EventKind::Other => FileEventType::Other,
184 | |             _ => FileEventType::Other,
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-tools/src/fs/file_watcher.rs:184:13
    |
184 |             _ => FileEventType::Other,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: this function has too many lines (113/100)
   --> llmspell-tools/src/lifecycle/hook_integration.rs:286:5
    |
286 | /     pub async fn execute_tool_with_hooks(
287 | |         &self,
288 | |         tool: &dyn Tool,
289 | |         input: AgentInput,
...   |
444 | |         final_result
445 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-tools/src/lifecycle/hook_integration.rs:377:25
    |
377 |                         audit_entry.resource_metrics = tool_context.resource_metrics.clone();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `audit_entry.resource_metrics.clone_from(&tool_context.resource_metrics)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones
    = note: `-W clippy::assigning-clones` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::assigning_clones)]`

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-tools/src/lifecycle/hook_integration.rs:394:25
    |
394 |                         audit_entry.resource_metrics = tool_context.resource_metrics.clone();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `audit_entry.resource_metrics.clone_from(&tool_context.resource_metrics)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones

warning: assigning the result of `Clone::clone()` may be inefficient
   --> llmspell-tools/src/lifecycle/hook_integration.rs:433:9
    |
433 |         audit_entry.resource_metrics = tool_context.resource_metrics.clone();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use `clone_from()`: `audit_entry.resource_metrics.clone_from(&tool_context.resource_metrics)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assigning_clones

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/src/lifecycle/hook_integration.rs:521:29
    |
521 |                     .insert(format!("resource_{}", key), value.clone());
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
    |
521 -                     .insert(format!("resource_{}", key), value.clone());
521 +                     .insert(format!("resource_{key}"), value.clone());
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-tools/src/lifecycle/state_machine.rs:102:17
    |
101 |       pub async fn transition_to(&self, new_state: ToolExecutionState) -> Result<()> {
    |  ____________________________________________________________________________________-
102 | |         let mut state_guard = self.state.write().await;
    | |                 ^^^^^^^^^^^
103 | |         let current_state = *state_guard;
...   |
137 | |         Ok(())
138 | |     }
    | |_____- temporary `state_guard` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
    = note: `-W clippy::significant-drop-tightening` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_tightening)]`
help: drop the temporary after the end of its last usage
    |
130 ~         *state_guard = new_state;
131 +         drop(state_guard);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-tools/src/lifecycle/state_machine.rs:205:13
    |
204 |       pub async fn get_execution_stats(&self) -> ExecutionStats {
    |  _______________________________________________________________-
205 | |         let history = self.transition_history.read().await;
    | |             ^^^^^^^
206 | |         let current_state = *self.state.read().await;
...   |
240 | |     }
    | |_____- temporary `history` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
224 ~         }
225 +         drop(history);
    |

warning: unused `self` argument
   --> llmspell-tools/src/lifecycle/state_machine.rs:243:34
    |
243 |     const fn is_valid_transition(&self, from: ToolExecutionState, to: ToolExecutionState) -> bool {
    |                                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: wildcard pattern covers any other pattern as it will match anyway
   --> llmspell-tools/src/lifecycle/state_machine.rs:259:13
    |
259 |             (Terminated, _) | _ => false,
    |             ^^^^^^^^^^^^^^^^^^^
    |
    = help: consider handling `_` separately
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_in_or_patterns
    = note: `-W clippy::wildcard-in-or-patterns` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::wildcard_in_or_patterns)]`

warning: called `map(<f>).unwrap_or_else(<g>)` on an `Option` value
   --> llmspell-tools/src/media/audio_processor.rs:555:37
    |
555 |                   let target_format = extract_optional_string(params, "target_format")
    |  _____________________________________^
556 | |                     .map(|s| match s.to_lowercase().as_str() {
557 | |                         "wav" => AudioFormat::Wav,
558 | |                         "mp3" => AudioFormat::Mp3,
559 | |                         _ => AudioFormat::Unknown,
560 | |                     })
561 | |                     .unwrap_or_else(|| AudioFormat::from_extension(Path::new(target_path)));
    | |___________________________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`

warning: this function has too many lines (234/100)
   --> llmspell-tools/src/media/image_processor.rs:441:5
    |
441 | /     async fn execute(
442 | |         &self,
443 | |         input: AgentInput,
444 | |         _context: ExecutionContext,
...   |
720 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: called `map(<f>).unwrap_or_else(<g>)` on an `Option` value
   --> llmspell-tools/src/media/image_processor.rs:548:37
    |
548 |                   let target_format = extract_optional_string(params, "target_format")
    |  _____________________________________^
549 | |                     .map(|s| match s.to_lowercase().as_str() {
550 | |                         "png" => ImageFormat::Png,
551 | |                         "jpeg" | "jpg" => ImageFormat::Jpeg,
...   |
555 | |                     })
556 | |                     .unwrap_or_else(|| ImageFormat::from_extension(Path::new(output_path)));
    | |___________________________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or

warning: unused `self` argument
   --> llmspell-tools/src/media/video_processor.rs:101:18
    |
101 |     const fn gcd(&self, a: u32, b: u32) -> u32 {
    |                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function has too many lines (109/100)
   --> llmspell-tools/src/search/providers/brave.rs:132:5
    |
132 | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
133 | |         let api_key = self
134 | |             .api_key
135 | |             .as_ref()
...   |
257 | |         Ok(results)
258 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (120/100)
   --> llmspell-tools/src/search/providers/duckduckgo.rs:45:5
    |
45  | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
46  | |         // DuckDuckGo Instant Answer API only supports web search
47  | |         if options.search_type != SearchType::Web {
48  | |             return Err(LLMSpellError::Validation {
...   |
183 | |         Ok(results)
184 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (159/100)
   --> llmspell-tools/src/search/providers/serpapi.rs:130:5
    |
130 | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
131 | |         let api_key = self
132 | |             .api_key
133 | |             .as_ref()
...   |
306 | |         Ok(results)
307 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (147/100)
   --> llmspell-tools/src/search/providers/serperdev.rs:146:5
    |
146 | /     async fn search(&self, query: &str, options: &SearchOptions) -> Result<Vec<SearchResult>> {
147 | |         let api_key = self
148 | |             .api_key
149 | |             .as_ref()
...   |
312 | |         Ok(results)
313 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (108/100)
   --> llmspell-tools/src/search/web_search.rs:177:5
    |
177 | /     pub fn new(config: WebSearchConfig) -> Result<Self> {
178 | |         let mut providers = HashMap::new();
...   |
291 | |         })
292 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or instead of an if let/else
   --> llmspell-tools/src/search/web_search.rs:472:27
    |
472 |           let max_results = if let Some(n) = params
    |  ___________________________^
473 | |             .get("max_results")
474 | |             .and_then(serde_json::Value::as_u64)
...   |
478 | |             self.config.max_results
479 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
472 ~         let max_results = params
473 +             .get("max_results")
474 ~             .and_then(serde_json::Value::as_u64).map_or(self.config.max_results, |n| usize::try_from(n).unwrap_or(usize::MAX));
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-tools/src/search/web_search.rs:506:29
    |
506 |           let provider_used = if let Some(r) = results.first() {
    |  _____________________________^
507 | |             r.provider.clone()
508 | |         } else {
509 | |             "unknown".to_string()
510 | |         };
    | |_________^ help: try: `results.first().map_or_else(|| "unknown".to_string(), |r| r.provider.clone())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: the function has a cognitive complexity of (42/25)
   --> llmspell-tools/src/system/environment_reader.rs:129:8
    |
129 |     fn is_var_allowed(&self, var_name: &str) -> bool {
    |        ^^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: the function has a cognitive complexity of (26/25)
   --> llmspell-tools/src/system/process_executor.rs:216:8
    |
216 |     fn is_executable_allowed(&self, executable: &str) -> bool {
    |        ^^^^^^^^^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: this function has too many lines (112/100)
   --> llmspell-tools/src/system/process_executor.rs:270:5
    |
270 | /     async fn execute_process(
271 | |         &self,
272 | |         executable: &str,
273 | |         args: &[String],
...   |
416 | |         Ok(process_result)
417 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (105/100)
   --> llmspell-tools/src/system/service_checker.rs:209:5
    |
209 | /     async fn check_tcp_port(
210 | |         &self,
211 | |         host: &str,
212 | |         port: u16,
...   |
328 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (117/100)
   --> llmspell-tools/src/system/service_checker.rs:331:5
    |
331 | /     async fn check_http_service(
332 | |         &self,
333 | |         url: &str,
334 | |         timeout_duration: Duration,
...   |
466 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (126/100)
   --> llmspell-tools/src/system/service_checker.rs:475:5
    |
475 | /     async fn execute(
476 | |         &self,
477 | |         input: AgentInput,
478 | |         _context: ExecutionContext,
...   |
624 | |         Ok(AgentOutput::text(serde_json::to_string_pretty(&response)?))
625 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (102/100)
   --> llmspell-tools/src/util/base64_encoder.rs:64:5
    |
64  | /     async fn process_operation(&self, params: &Value) -> Result<Value> {
65  | |         // Extract parameters using utilities
66  | |         let operation = extract_required_string(params, "operation")?;
67  | |         validate_enum(&operation, &["encode", "decode"], "operation")?;
...   |
187 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused "map closure" when calling `Result::map_or_else` value
   --> llmspell-tools/src/util/base64_encoder.rs:172:21
    |
172 | /                     String::from_utf8(result_data.clone())
173 | |                         .map_or_else(|_| hex::encode(&result_data), |s| s)
    | |__________________________________________________________________________^ help: consider using `unwrap_or_else`: `String::from_utf8(result_data.clone()).unwrap_or_else(|_| hex::encode(&result_data))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_result_map_or_else
    = note: `-W clippy::unnecessary-result-map-or-else` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::unnecessary_result_map_or_else)]`

warning: this function's return value is unnecessary
   --> llmspell-tools/src/util/data_validation.rs:268:5
    |
268 | /     fn validate_value(
269 | |         &self,
270 | |         field: &str,
271 | |         value: &Value,
...   |
293 | |         Ok(())
294 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove the return type...
    |
274 -     ) -> Result<()> {
274 +     ) -> () {
    |
help: ...and then remove returned values
    |
293 -         Ok(())
    |

warning: the function has a cognitive complexity of (31/25)
   --> llmspell-tools/src/util/data_validation.rs:297:8
    |
297 |     fn validate_rule(
    |        ^^^^^^^^^^^^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: this function has too many lines (231/100)
   --> llmspell-tools/src/util/data_validation.rs:297:5
    |
297 | /     fn validate_rule(
298 | |         &self,
299 | |         field: &str,
300 | |         value: &Value,
...   |
558 | |         Ok(())
559 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this looks like a formatting argument but it is not part of a formatting macro
   --> llmspell-tools/src/util/data_validation.rs:568:32
    |
568 |             |msg| msg.replace("{field}", field),
    |                                ^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#literal_string_with_formatting_args
    = note: `-W clippy::literal-string-with-formatting-args` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::literal_string_with_formatting_args)]`

warning: this function has too many lines (234/100)
   --> llmspell-tools/src/util/date_time_handler.rs:69:5
    |
69  | /     async fn process_operation(&self, params: &Value) -> Result<Value> {
70  | |         let operation = extract_string_with_default(params, "operation", "parse");
71  | |
72  | |         match operation {
...   |
328 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this function has too many lines (114/100)
   --> llmspell-tools/src/util/diff_calculator.rs:88:5
    |
88  | /     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
89  | |         use std::fmt::Write;
90  | |
91  | |         let diff = TextDiff::from_lines(old, new);
...   |
215 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-tools/src/util/diff_calculator.rs:88:65
   |
88 |     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
   |                                                                 ^^^^^^^^^^ help: consider taking a reference instead: `&DiffFormat`
   |
help: or consider marking this type as `Copy`
  --> llmspell-tools/src/util/diff_calculator.rs:35:1
   |
35 | enum DiffFormat {
   | ^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
   = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-tools/src/util/diff_calculator.rs:88:5
    |
88  | /     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
89  | |         use std::fmt::Write;
90  | |
91  | |         let diff = TextDiff::from_lines(old, new);
...   |
215 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
88  -     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> Result<String> {
88  +     fn calculate_text_diff(&self, old: &str, new: &str, format: DiffFormat) -> std::string::String {
    |
help: ...and then change returning expressions
    |
94  ~             DiffFormat::Unified => diff
95  +                 .unified_diff()
96  +                 .context_radius(3)
97  +                 .header("old", "new")
98  ~                 .to_string(),
99  |             DiffFormat::Context => {
...
156 |                 }
157 ~                 output
158 |             }
...
169 |                 }
170 ~                 output
171 |             }
...
211 |                 output.insert_str(0, &format!("Total changes: {changes}\n\n"));
212 ~                 output
    |

warning: this function has too many lines (111/100)
   --> llmspell-tools/src/util/diff_calculator.rs:328:5
    |
328 | /     async fn process_operation(&self, params: &Value) -> Result<Value> {
329 | |         let diff_type = extract_string_with_default(params, "type", "text");
330 | |
331 | |         match diff_type {
...   |
452 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:132:46
    |
132 |         let hash = self.compute_hash(params, &input_type, algorithm).await?;
    |                                              ^^^^^^^^^^^ help: change this to: `input_type`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow
    = note: `-W clippy::needless-borrow` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::needless_borrow)]`

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:163:74
    |
163 |         let expected_hash = self.decode_expected_hash(expected_hash_str, &expected_format)?;
    |                                                                          ^^^^^^^^^^^^^^^^ help: change this to: `expected_format`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:164:53
    |
164 |         let actual_hash = self.compute_hash(params, &input_type, algorithm).await?;
    |                                                     ^^^^^^^^^^^ help: change this to: `input_type`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:180:90
    |
180 |                     "expected": self.format_hash(&expected_hash, &self.parse_format(Some(&expected_format))),
    |                                                                                          ^^^^^^^^^^^^^^^^ help: change this to: `expected_format`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: this expression creates a reference which is immediately dereferenced by the compiler
   --> llmspell-tools/src/util/hash_calculator.rs:181:86
    |
181 |                     "actual": self.format_hash(&actual_hash, &self.parse_format(Some(&expected_format))),
    |                                                                                      ^^^^^^^^^^^^^^^^ help: change this to: `expected_format`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow

warning: unused `self` argument
   --> llmspell-tools/src/util/hash_calculator.rs:217:9
    |
217 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
  --> llmspell-tools/src/util/uuid_generator.rs:97:9
   |
97 |         &self,
   |         ^^^^^
   |
   = help: consider refactoring to an associated function
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this match arm has an identical body to another arm
   --> llmspell-tools/src/util/uuid_generator.rs:113:21
    |
113 |                     Some("dns") => Uuid::NAMESPACE_DNS,
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
113 ~                     Some("dns") | None => Uuid::NAMESPACE_DNS,
114 |                     Some("url") => Uuid::NAMESPACE_URL,
...
125 |                     }
126 ~                     // Default namespace
    |

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-tools/src/util/uuid_generator.rs:142:47
    |
142 |     fn format_uuid(&self, uuid: Uuid, format: &UuidFormat) -> String {
    |                                               ^^^^^^^^^^^ help: consider passing by value instead: `UuidFormat`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref
    = note: `-W clippy::trivially-copy-pass-by-ref` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::trivially_copy_pass_by_ref)]`

warning: this function has too many lines (135/100)
   --> llmspell-tools/src/util/uuid_generator.rs:211:5
    |
211 | /     async fn execute(&self, input: AgentInput, _context: ExecutionContext) -> Result<AgentOutput> {
212 | |         // Get parameters from input using shared utility
213 | |         let params = extract_parameters(&input)?;
...   |
375 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-tools/src/util/uuid_generator.rs:300:21
    |
300 | /                     "agent" => *NAMESPACE_AGENT,
301 | |                     "tool" => *NAMESPACE_TOOL,
    | |____________________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-tools/src/util/uuid_generator.rs:303:21
    |
303 |                     _ => *NAMESPACE_AGENT,
    |                     ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: function call inside of `unwrap_or`
   --> llmspell-tools/src/web/api_tester.rs:212:44
    |
212 |                 "body": body_json.as_ref().unwrap_or(&json!(body_text)),
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &json!(body_text))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-tools/src/web/sitemap_crawler.rs:330:5
    |
330 | /     fn parse_sitemap(&self, xml_content: &str) -> Result<Vec<Value>> {
331 | |         let mut urls = Vec::new();
332 | |         let lines: Vec<&str> = xml_content.lines().collect();
...   |
405 | |         Ok(urls)
406 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
330 -     fn parse_sitemap(&self, xml_content: &str) -> Result<Vec<Value>> {
330 +     fn parse_sitemap(&self, xml_content: &str) -> std::vec::Vec<serde_json::Value> {
    |
help: ...and then change returning expressions
    |
405 -         Ok(urls)
405 +         urls
    |

warning: this function has too many lines (138/100)
   --> llmspell-tools/src/web/web_scraper.rs:90:5
    |
90  | /     async fn scrape_page(
91  | |         &self,
92  | |         url: &str,
93  | |         options: &ScrapeOptions,
...   |
259 | |         Ok(json!(result))
260 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: called `map_or(None, ..)` on an `Option` value
   --> llmspell-tools/src/web/web_scraper.rs:403:25
    |
403 |           let selectors = extract_optional_object(params, "selectors").map_or(None, |obj| {
    |  _________________________^
404 | |             serde_json::from_value::<HashMap<String, String>>(serde_json::Value::Object(
405 | |                 obj.clone(),
406 | |             ))
407 | |             .ok()
408 | |         });
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_map_or_none
    = note: `-W clippy::option-map-or-none` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::option_map_or_none)]`
help: consider using `and_then`
    |
403 ~         let selectors = extract_optional_object(params, "selectors").and_then(|obj| {
404 +             serde_json::from_value::<HashMap<String, String>>(serde_json::Value::Object(
405 +                 obj.clone(),
406 +             ))
407 +             .ok()
408 ~         });
    |

warning: this function has too many lines (126/100)
   --> llmspell-tools/src/web/webhook_caller.rs:124:5
    |
124 | /     async fn execute(&self, input: AgentInput, _context: ExecutionContext) -> Result<AgentOutput> {
125 | |         let params = extract_parameters(&input)?;
126 | |         let url = extract_required_string(params, "input")?;
127 | |         let payload = extract_optional_object(params, "payload");
...   |
280 | |         ))
281 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-tools/src/web/webhook_caller.rs:166:17
    |
166 | /                 "POST" => client.post(url),
167 | |                 "PUT" => client.put(url),
    | |________________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-tools/src/web/webhook_caller.rs:171:17
    |
171 |                 _ => client.post(url), // Default to POST for unknown methods
    |                 ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: function call inside of `unwrap_or`
   --> llmspell-tools/src/web/webhook_caller.rs:228:56
    |
228 | ...                   "body": body_json.as_ref().unwrap_or(&json!(body_text)),
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &json!(body_text))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: unused `self` argument
   --> llmspell-tools/src/web/webpage_monitor.rs:258:9
    |
258 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: `llmspell-tools` (lib) generated 70 warnings (run `cargo clippy --fix --lib -p llmspell-tools` to apply 8 suggestions)
    Checking llmspell-agents v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents)
warning: unnested or-patterns
   --> llmspell-agents/src/context/inheritance.rs:284:13
    |
284 |             Some(FieldTransform::Copy) | Some(FieldTransform::Custom(_)) | None => value.clone(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnested_or_patterns
    = note: `-W clippy::unnested-or-patterns` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnested_or_patterns)]`
help: nest the patterns
    |
284 -             Some(FieldTransform::Copy) | Some(FieldTransform::Custom(_)) | None => value.clone(),
284 +             Some(FieldTransform::Copy | FieldTransform::Custom(_)) | None => value.clone(),
    |

warning: unnested or-patterns
   --> llmspell-agents/src/lifecycle/state_machine.rs:268:13
    |
268 | /             (Uninitialized, Initializing | Error)
269 | |             | (Initializing, Ready | Error | Terminating)
270 | |             | (Ready, Running | Paused | Terminating | Error)
271 | |             | (Running, Ready | Paused | Terminating | Error)
...   |
274 | |             | (Recovering, Ready | Error | Terminating)
275 | |             | (Terminating, Terminated | Error) => true,
    | |_______________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnested_or_patterns
help: nest the patterns
    |
268 ~             (Uninitialized, Initializing | Error) |
269 + (Initializing | Recovering, Ready | Error | Terminating) |
270 + (Ready, Running | Paused | Terminating | Error) |
271 + (Running, Ready | Paused | Terminating | Error) |
272 + (Paused, Ready | Running | Terminating | Error) |
273 + (Error, Recovering | Terminating | Terminated) |
274 ~ (Terminating, Terminated | Error) => true,
    |

warning: redundant closure
   --> llmspell-agents/src/agent_wrapped_tool.rs:296:13
    |
296 |             |template| template.clone(),
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::clone::Clone::clone`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
    = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: redundant closure
   --> llmspell-agents/src/agent_wrapped_tool.rs:438:17
    |
438 |                 |name| name.clone(),
    |                 ^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::clone::Clone::clone`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-agents/src/agent_wrapped_tool.rs:455:17
    |
455 |                 |description| description.clone(),
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::clone::Clone::clone`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:145:23
    |
145 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
    = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
    |
145 -     /// Panics if the RwLock is poisoned
145 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:191:23
    |
191 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
191 -     /// Panics if the RwLock is poisoned
191 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:215:23
    |
215 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
215 -     /// Panics if the RwLock is poisoned
215 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:225:23
    |
225 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
225 -     /// Panics if the RwLock is poisoned
225 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:236:23
    |
236 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
236 -     /// Panics if the RwLock is poisoned
236 +     /// Panics if the `RwLock` is poisoned
    |

warning: it is more concise to loop over references to containers instead of using explicit iteration methods
   --> llmspell-agents/src/composition/capabilities.rs:248:22
    |
248 |         for entry in capabilities_vec.iter() {
    |                      ^^^^^^^^^^^^^^^^^^^^^^^ help: to write this more concisely, try: `&capabilities_vec`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_iter_loop
    = note: `-W clippy::explicit-iter-loop` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::explicit_iter_loop)]`

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:290:23
    |
290 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
290 -     /// Panics if the RwLock is poisoned
290 +     /// Panics if the `RwLock` is poisoned
    |

warning: this `map_or` can be simplified
   --> llmspell-agents/src/composition/capabilities.rs:302:12
    |
302 |           if requirement
    |  ____________^
303 | |             .category
304 | |             .as_ref()
305 | |             .map_or(false, |req_category| &capability.category != req_category)
    | |_______________________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
    = note: `-W clippy::unnecessary-map-or` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::unnecessary_map_or)]`
help: use is_some_and instead
    |
305 -             .map_or(false, |req_category| &capability.category != req_category)
305 +             .is_some_and(|req_category| &capability.category != req_category)
    |

warning: this `map_or` can be simplified
   --> llmspell-agents/src/composition/capabilities.rs:312:16
    |
312 |               if capability
    |  ________________^
313 | |                 .version
314 | |                 .as_ref()
315 | |                 .map_or(true, |cap_version| cap_version < min_version)
    | |______________________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
help: use is_none_or instead
    |
315 -                 .map_or(true, |cap_version| cap_version < min_version)
315 +                 .is_none_or(|cap_version| cap_version < min_version)
    |

warning: this `map_or` can be simplified
   --> llmspell-agents/src/composition/capabilities.rs:331:16
    |
331 |               if self
    |  ________________^
332 | |                 .capabilities
333 | |                 .read()
334 | |                 .unwrap()
335 | |                 .get(&cap_id)
336 | |                 .map_or(false, |entry| entry.score < min_score)
    | |_______________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
help: use is_some_and instead
    |
336 -                 .map_or(false, |entry| entry.score < min_score)
336 +                 .is_some_and(|entry| entry.score < min_score)
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/capabilities.rs:346:24
    |
346 |     fn matches_pattern(&self, text: &str, pattern: &str) -> bool {
    |                        ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:393:23
    |
393 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
393 -     /// Panics if the RwLock is poisoned
393 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:440:23
    |
440 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
440 -     /// Panics if the RwLock is poisoned
440 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:454:23
    |
454 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
454 -     /// Panics if the RwLock is poisoned
454 +     /// Panics if the `RwLock` is poisoned
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/capabilities.rs:473:5
    |
473 | /     pub fn set_availability(
474 | |         &self,
475 | |         provider_id: &str,
476 | |         capability_name: &str,
477 | |         available: bool,
478 | |     ) -> Result<()> {
    | |___________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/capabilities.rs:481:32
    |
481 |         let mut capabilities = self.capabilities.write().unwrap();
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc
    = note: `-W clippy::missing-panics-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_panics_doc)]`

warning: item in documentation is missing backticks
   --> llmspell-agents/src/composition/capabilities.rs:500:23
    |
500 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
500 -     /// Panics if the RwLock is poisoned
500 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:257:25
    |
256 |               DelegationStrategy::RoundRobin => {
    |  _______________________________________________-
257 | |                 let mut index = self.round_robin_index.write().unwrap();
    | |                         ^^^^^
258 | |                 let selected = matching_agents[*index % matching_agents.len()].clone();
259 | |                 *index += 1;
260 | |                 Some(selected)
261 | |             }
    | |_____________- temporary `index` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
    = note: `-W clippy::significant-drop-tightening` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_tightening)]`
help: drop the temporary after the end of its last usage
    |
259 ~                 *index += 1;
260 +                 drop(index);
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/delegation.rs:293:5
    |
293 |     pub async fn delegate(&self, request: DelegationRequest) -> Result<DelegationResult> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/delegation.rs:311:31
    |
311 |             let mut metrics = self.metrics.write().unwrap();
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:320:13
    |
293 |       pub async fn delegate(&self, request: DelegationRequest) -> Result<DelegationResult> {
    |  __________________________________________________________________________________________-
294 | |         let start_time = std::time::Instant::now();
...   |
320 | |         let agents = self.agents.read().await;
    | |             ^^^^^^
...   |
380 | |     }
    | |_____- temporary `agents` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
320 ~         
321 +         let agent = self.agents.read().await.;
322 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:345:25
    |
344 |               Ok(output) => {
    |  ___________________________-
345 | |                 let mut metrics = self.metrics.write().unwrap();
    | |                         ^^^^^^^
346 | |                 metrics.successful_delegations += 1;
347 | |                 metrics.avg_delegation_time = std::time::Duration::from_secs(
...   |
360 | |                 })
361 | |             }
    | |_____________- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
351 ~                 );
352 +                 drop(metrics);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/delegation.rs:363:25
    |
362 |               Err(e) => {
    |  _______________________-
363 | |                 let mut metrics = self.metrics.write().unwrap();
    | |                         ^^^^^^^
364 | |                 metrics.failed_delegations += 1;
...   |
377 | |                 })
378 | |             }
    | |_____________- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
363 ~                 
364 +                 self.metrics.write().unwrap().;
365 ~                 
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/delegation.rs:383:5
    |
383 |     pub fn set_strategy(&self, strategy: DelegationStrategy) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/delegation.rs:384:10
    |
384 |         *self.strategy.write().unwrap() = strategy;
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/delegation.rs:388:5
    |
388 |     pub fn metrics(&self) -> DelegationMetrics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/delegation.rs:389:9
    |
389 |         self.metrics.read().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/hierarchical.rs:119:5
    |
119 |     pub fn set_parent(&self, parent: Weak<dyn HierarchicalAgent>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/hierarchical.rs:120:32
    |
120 |         let mut parent_guard = self.parent.write().unwrap();
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:160:13
    |
156 |       async fn aggregate_capabilities(&self) -> Vec<Capability> {
    |  _______________________________________________________________-
157 | |         let mut capabilities = self.capabilities.read().unwrap().clone();
...   |
160 | |         let children = self.children.read().await;
    | |             ^^^^^^^^
...   |
185 | |         capabilities
186 | |     }
    | |_____- temporary `children` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
160 ~         
161 +         self.children.read().await.;
162 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:173:13
    |
156 |       async fn aggregate_capabilities(&self) -> Vec<Capability> {
    |  _______________________________________________________________-
157 | |         let mut capabilities = self.capabilities.read().unwrap().clone();
...   |
173 | |         let components = self.components.read().await;
    | |             ^^^^^^^^^^
...   |
185 | |         capabilities
186 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
173 ~         
174 +         self.components.read().await.;
175 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:223:13
    |
220 | #[async_trait]
    | -------------- temporary `tools` is currently being dropped at the end of its contained scope
...
223 |         let tools = self.tools.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
223 ~         
224 +         self.tools.read().await.;
225 |         let mut infos = Vec::new();
226 |
227 ~         
    |

warning: this `map_or` can be simplified
   --> llmspell-agents/src/composition/hierarchical.rs:228:16
    |
228 |               if query
    |  ________________^
229 | |                 .text_search
230 | |                 .as_ref()
231 | |                 .map_or(false, |text| !name.contains(text))
    | |___________________________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
help: use is_some_and instead
    |
231 -                 .map_or(false, |text| !name.contains(text))
231 +                 .is_some_and(|text| !name.contains(text))
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:309:17
    |
306 | #[async_trait]
    | -------------- temporary `components` is currently being dropped at the end of its contained scope
...
309 |         let mut components = self.components.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
309 ~         
310 +         self.components.write().await.insert(component.metadata().id.to_string(), component);
311 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:315:17
    |
306 | #[async_trait]
    | -------------- temporary `components` is currently being dropped at the end of its contained scope
...
315 |         let mut components = self.components.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
315 ~         
316 +         self.components.write().await.;
317 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:385:21
    |
383 |               ExecutionPattern::Sequential => {
    |  _____________________________________________-
384 | |                 let mut result = input;
385 | |                 let components = self.components.read().await;
    | |                     ^^^^^^^^^^
...   |
393 | |                 Ok(result)
394 | |             }
    | |_____________- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
385 ~                 
386 +                 self.components.read().await.;
387 |
388 ~                 
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:396:21
    |
395 |               ExecutionPattern::Parallel => {
    |  ___________________________________________-
396 | |                 let components = self.components.read().await;
    | |                     ^^^^^^^^^^
397 | |                 let mut handles = Vec::new();
...   |
419 | |                 Ok(Value::Array(results))
420 | |             }
    | |_____________- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
396 ~                 
397 +                 self.components.read().await.;
398 |                 let mut handles = Vec::new();
399 |
400 ~                 
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:463:17
    |
429 | #[async_trait]
    | -------------- temporary `children` is currently being dropped at the end of its contained scope
...
463 |         let mut children = self.children.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
463 ~         
464 +         self.children.write().await.push(child);
465 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:469:17
    |
429 | #[async_trait]
    | -------------- temporary `children` is currently being dropped at the end of its contained scope
...
469 |         let mut children = self.children.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
469 ~         
470 +         self.children.write().await.clear();
471 |         // Remove child by comparing against child_id
472 |         // Since HierarchicalAgent doesn't have id() method, we need a different approach
473 |         // For now, we'll remove all children - this is a limitation
474 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/hierarchical.rs:493:13
    |
429 | #[async_trait]
    | -------------- temporary `children` is currently being dropped at the end of its contained scope
...
493 |         let children = self.children.read().await;
    |             ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
493 ~         
494 +         self.children.read().await.;
495 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/hierarchical.rs:569:5
    |
569 |     pub fn build(self) -> HierarchicalCompositeAgent {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/hierarchical.rs:577:10
    |
577 |         *agent.execution_pattern.write().unwrap() = self.initial_pattern;
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: manual `Debug` impl does not include all fields
  --> llmspell-agents/src/composition/lifecycle.rs:57:1
   |
57 | / impl std::fmt::Debug for ComponentLifecycle {
58 | |     fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {
59 | |         f.debug_struct("ComponentLifecycle")
60 | |             .field("id", &self.id)
...  |
67 | | }
   | |_^
   |
note: this field is unused
  --> llmspell-agents/src/composition/lifecycle.rs:46:5
   |
46 |     pub component: Arc<dyn BaseAgent>,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: consider including all fields in this `Debug` impl
   = help: consider calling `.finish_non_exhaustive()` if you intend to ignore fields
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_fields_in_debug
   = note: `-W clippy::missing-fields-in-debug` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_fields_in_debug)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:183:17
    |
170 |       pub async fn initialize_composite(&self, agent: &dyn CompositeAgent) -> Result<()> {
    |  ________________________________________________________________________________________-
171 | |         // Set state to initializing
172 | |         *self.state.write().await = LifecycleState::Initializing;
...   |
183 | |         let mut component_lifecycles = self.components.write().await;
    | |                 ^^^^^^^^^^^^^^^^^^^^
...   |
221 | |     }
    | |_____- temporary `component_lifecycles` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
183 ~         
184 +             self.components.write().await.insert(component_id.clone(), lifecycle);
185 |
...
198 |
199 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:225:17
    |
224 |       async fn initialize_all_components(&self) -> Result<()> {
    |  _____________________________________________________________-
225 | |         let mut components = self.components.write().await;
    | |                 ^^^^^^^^^^
226 | |
227 | |         for (id, lifecycle) in components.iter_mut() {
...   |
240 | |         Ok(())
241 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
225 ~         
226 +         self.components.write().await.;
227 |
228 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:310:17
    |
309 |       async fn shutdown_all_components(&self) -> Result<()> {
    |  ___________________________________________________________-
310 | |         let mut components = self.components.write().await;
    | |                 ^^^^^^^^^^
311 | |
312 | |         for (id, lifecycle) in components.iter_mut() {
...   |
324 | |         Ok(())
325 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
310 ~         
311 +         self.components.write().await.;
312 |
313 ~         
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/lifecycle.rs:362:34
    |
362 |     const fn is_valid_transition(&self, from: &LifecycleState, to: &LifecycleState) -> bool {
    |                                  ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:429:13
    |
428 |       async fn emit_event(&self, event: LifecycleEvent) -> Result<()> {
    |  _____________________________________________________________________-
429 | |         let handlers = self.event_handlers.read().await;
    | |             ^^^^^^^^
430 | |         for handler in handlers.iter() {
431 | |             handler.handle_event(&event).await?;
432 | |         }
433 | |         Ok(())
434 | |     }
    | |_____- temporary `handlers` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
429 ~         
430 +         self.event_handlers.read().await.;
431 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:458:13
    |
456 |       pub async fn health_check(&self) -> Result<HealthCheckResult> {
    |  ___________________________________________________________________-
457 | |         let state = self.state.read().await.clone();
458 | |         let components = self.components.read().await;
    | |             ^^^^^^^^^^
...   |
496 | |         })
497 | |     }
    | |_____- temporary `components` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
458 ~         
459 +         self.components.read().await.;
460 |
...
463 |
464 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/composition/lifecycle.rs:591:17
    |
586 |       pub async fn initialize_hierarchical(&self, agent: &dyn HierarchicalAgent) -> Result<()> {
    |  ______________________________________________________________________________________________-
587 | |         // Initialize base
588 | |         self.base.initialize_composite(agent).await?;
...   |
591 | |         let mut hierarchy = self.hierarchy.write().await;
    | |                 ^^^^^^^^^
...   |
602 | |         Ok(())
603 | |     }
    | |_____- temporary `hierarchy` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
591 ~         
592 +         self.hierarchy.write().await.insert(agent_id, children);
593 |         let agent_id = agent.metadata().id.to_string();
...
600 |
601 ~         
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/lifecycle.rs:681:30
    |
681 |     fn parse_lifecycle_state(&self, state: &str) -> LifecycleState {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: wildcard pattern covers any other pattern as it will match anyway
   --> llmspell-agents/src/composition/lifecycle.rs:688:13
    |
688 |             "ready" | _ => LifecycleState::Ready,
    |             ^^^^^^^^^^^
    |
    = help: consider handling `_` separately
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_in_or_patterns
    = note: `-W clippy::wildcard-in-or-patterns` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::wildcard_in_or_patterns)]`

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/composition/tool_composition.rs:316:5
    |
316 | /     pub async fn execute<T>(
317 | |         &self,
318 | |         tool_provider: &T,
319 | |         initial_parameters: JsonValue,
...   |
322 | |     where
323 | |         T: ToolProvider,
    | |________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/composition/tool_composition.rs:391:33
    |
391 | ...                   step.retry_config.as_ref().unwrap(),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/composition/tool_composition.rs:316:5
    |
316 | /     pub async fn execute<T>(
317 | |         &self,
318 | |         tool_provider: &T,
319 | |         initial_parameters: JsonValue,
...   |
322 | |     where
323 | |         T: ToolProvider,
    | |________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
    = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: future cannot be sent between threads safely
   --> llmspell-agents/src/composition/tool_composition.rs:316:5
    |
316 | /     pub async fn execute<T>(
317 | |         &self,
318 | |         tool_provider: &T,
319 | |         initial_parameters: JsonValue,
...   |
322 | |     where
323 | |         T: ToolProvider,
    | |________________________^ future returned by `execute` is not `Send`
    |
note: future is not `Send` as this value is used across an await
   --> llmspell-agents/src/composition/tool_composition.rs:358:22
    |
318 |         tool_provider: &T,
    |         ------------- has type `&T` which is not `Send`
...
358 |                     .await
    |                      ^^^^^ await occurs here, with `tool_provider` maybe used later
    = note: `T` doesn't implement `std::marker::Sync`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#future_not_send
    = note: `-W clippy::future-not-send` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::future_not_send)]`

warning: this `map_or` can be simplified
   --> llmspell-agents/src/composition/tool_composition.rs:384:28
    |
384 |                           if step.retry_config.as_ref().map_or(false, |retry_config| {
    |  ____________________________^
385 | |                             retry_attempts < retry_config.max_attempts
386 | |                         }) {
    | |__________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
help: use is_some_and instead
    |
384 -                         if step.retry_config.as_ref().map_or(false, |retry_config| {
384 +                         if step.retry_config.as_ref().is_some_and(|retry_config| {
    |

warning: unused `self` argument
   --> llmspell-agents/src/composition/tool_composition.rs:559:9
    |
559 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/composition/tool_composition.rs:592:21
    |
592 | /                     if let Ok(n) = s.parse::<f64>() {
593 | |                         Ok(JsonValue::Number(
594 | |                             serde_json::Number::from_f64(n)
595 | |                                 .unwrap_or_else(|| serde_json::Number::from(0)),
...   |
598 | |                         Ok(JsonValue::Number(serde_json::Number::from(0)))
599 | |                     }
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
    = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`
help: try
    |
592 ~                     s.parse::<f64>().map_or_else(|_| Ok(JsonValue::Number(serde_json::Number::from(0))), |n| Ok(JsonValue::Number(
593 +                             serde_json::Number::from_f64(n)
594 +                                 .unwrap_or_else(|| serde_json::Number::from(0)),
595 +                         )))
    |

warning: future cannot be sent between threads safely
   --> llmspell-agents/src/composition/tool_composition.rs:612:5
    |
612 | /     async fn execute_step<T>(
613 | |         &self,
614 | |         tool_provider: &T,
615 | |         step: &CompositionStep,
...   |
619 | |     where
620 | |         T: ToolProvider,
    | |________________________^ future returned by `execute_step` is not `Send`
    |
note: captured value is not `Send` because `&` references cannot be sent unless their referent is `Sync`
   --> llmspell-agents/src/composition/tool_composition.rs:614:9
    |
614 |         tool_provider: &T,
    |         ^^^^^^^^^^^^^ has type `&T` which is not `Send`, because `T` is not `Sync`
    = note: `T` doesn't implement `std::marker::Sync`
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#future_not_send

warning: unused `self` argument
   --> llmspell-agents/src/composition/tool_composition.rs:641:30
    |
641 |     fn calculate_retry_delay(&self, retry_config: &RetryConfig, attempt: u32) -> Duration {
    |                              ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/composition/tool_composition.rs:724:24
    |
724 |     fn new(parameters: JsonValue, shared_context: &HashMap<String, JsonValue>) -> Self {
    |                        ^^^^^^^^^ help: consider taking a reference instead: `&JsonValue`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
    = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:264:17
    |
262 |       pub async fn refresh_nodes(&self) -> Result<()> {
    |  _____________________________________________________-
263 | |         let discovered = self.discovery.discover().await?;
264 | |         let mut nodes = self.nodes.write().await;
    | |                 ^^^^^
...   |
273 | |         Ok(())
274 | |     }
    | |_____- temporary `nodes` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
269 ~                 nodes.insert(node.id.clone(), node);
270 +                 drop(nodes);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:307:17
    |
281 |       pub async fn replicate(&self, context: &ExecutionContext) -> Result<()> {
    |  _____________________________________________________________________________-
282 | |         let replication = self.replication.read().await;
283 | |
284 | |         let target_nodes = match replication.strategy {
...   |
307 | |         let mut replication = self.replication.write().await;
    | |                 ^^^^^^^^^^^
...   |
323 | |         Ok(())
324 | |     }
    | |_____- temporary `replication` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
307 ~         
308 +         self.replication.write().await.insert(context.id.clone(), pending);
309 ~         
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/context/distributed.rs:445:9
    |
445 | /         if let Some(node) = nodes.get(node_id) {
446 | |             // In real implementation, would send over network
447 | |             tracing::info!(
448 | |                 target_node = %node_id,
...   |
457 | |             })
458 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
445 ~         nodes.get(node_id).map_or_else(|| Err(LLMSpellError::Component {
446 +                 message: format!("Node not found: {node_id}"),
447 +                 source: None,
448 +             }), |node| {
449 +             // In real implementation, would send over network
450 +             tracing::info!(
451 +                 target_node = %node_id,
452 +                 address = %node.address,
453 +                 "Sending sync message"
454 +             );
455 +             Ok(())
456 +         })
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:565:17
    |
557 | #[async_trait]
    | -------------- temporary `nodes` is currently being dropped at the end of its contained scope
...
565 |         let mut nodes = self.nodes.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
565 ~         
566 +         self.nodes.write().await.push(node);
567 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:571:17
    |
557 | #[async_trait]
    | -------------- temporary `nodes` is currently being dropped at the end of its contained scope
...
571 |         let mut nodes = self.nodes.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
571 ~         
572 +         self.nodes.write().await.retain(|n| n.id != node_id);
573 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/distributed.rs:577:17
    |
557 | #[async_trait]
    | -------------- temporary `nodes` is currently being dropped at the end of its contained scope
...
577 |         let mut nodes = self.nodes.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
577 ~         
578 +         self.nodes.write().await.;
579 ~         
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/context/event_integration.rs:248:5
    |
248 | /     pub async fn subscribe(
249 | |         &self,
250 | |         context_scope: ContextScope,
251 | |         event_types: Vec<String>,
252 | |         handler: Arc<dyn EventHandler>,
253 | |     ) -> Result<String> {
    | |_______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:263:17
    |
253 |       ) -> Result<String> {
    |  _________________________-
254 | |         let subscription = Subscription {
255 | |             id: uuid::Uuid::new_v4().to_string(),
256 | |             context_scope,
...   |
263 | |         let mut subscriptions = self.subscriptions.write().await;
    | |                 ^^^^^^^^^^^^^
...   |
266 | |         Ok(sub_id)
267 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
263 ~         
264 +         self.subscriptions.write().await.push(subscription);
265 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:275:17
    |
274 |       pub async fn unsubscribe(&self, subscription_id: &str) -> Result<()> {
    |  __________________________________________________________________________-
275 | |         let mut subscriptions = self.subscriptions.write().await;
    | |                 ^^^^^^^^^^^^^
276 | |         subscriptions.retain(|sub| sub.id != subscription_id);
277 | |         Ok(())
278 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
275 ~         
276 +         self.subscriptions.write().await.retain(|sub| sub.id != subscription_id);
277 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:300:13
    |
299 |       async fn dispatch_to_handlers(&self, event: ContextEvent) -> Result<()> {
    |  _____________________________________________________________________________-
300 | |         let subscriptions = self.subscriptions.read().await;
    | |             ^^^^^^^^^^^^^
...   |
359 | |         Ok(())
360 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
300 ~         
301 +         let handlers = self.subscriptions.read().await.collect();
302 |
303 |         // Filter relevant subscriptions
304 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:364:13
    |
363 |       pub async fn stats(&self) -> EventBusStats {
    |  ________________________________________________-
364 | |         let subscriptions = self.subscriptions.read().await;
    | |             ^^^^^^^^^^^^^
365 | |         let history = self.history.read().await;
...   |
382 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
364 ~         
365 +         let subscription_count = self.subscriptions.read().await.len();
366 |         let history = self.history.read().await;
367 |
368 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/event_integration.rs:365:13
    |
363 |       pub async fn stats(&self) -> EventBusStats {
    |  ________________________________________________-
364 | |         let subscriptions = self.subscriptions.read().await;
365 | |         let history = self.history.read().await;
    | |             ^^^^^^^
...   |
382 | |     }
    | |_____- temporary `history` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
374 ~             .collect();
375 +         drop(history);
    |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/context/hierarchy.rs:67:5
   |
67 |     pub fn find_by_id(&self, id: &str) -> Option<Arc<RwLock<Self>>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/context/hierarchy.rs:75:30
   |
75 |             let child_node = child.read().unwrap();
   |                              ^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/context/hierarchy.rs:90:5
   |
90 |     pub fn descendants(&self) -> Vec<Arc<RwLock<Self>>> {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/context/hierarchy.rs:95:30
   |
95 |             let child_node = child.read().unwrap();
   |                              ^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:133:5
    |
133 |     pub fn create_root(&mut self, name: String, context: ExecutionContext) -> Result<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:138:9
    |
138 | /         self.index
139 | |             .write()
140 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:153:5
    |
153 | /     pub fn create_child(
154 | |         &self,
155 | |         parent_id: &str,
156 | |         scope: ContextScope,
157 | |         inheritance: InheritancePolicy,
158 | |     ) -> Result<ExecutionContext> {
    | |_________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:161:25
    |
161 |             let index = self.index.read().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:188:5
    |
188 |     pub fn get(&self, id: &str) -> Option<ExecutionContext> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:189:21
    |
189 |         let index = self.index.read().unwrap();
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:202:5
    |
202 |     pub fn remove(&mut self, id: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:203:25
    |
203 |         let mut index = self.index.write().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/hierarchy.rs:203:17
    |
202 |       pub fn remove(&mut self, id: &str) -> Result<()> {
    |  ______________________________________________________-
203 | |         let mut index = self.index.write().unwrap();
    | |                 ^^^^^
204 | |
205 | |         if let Some(node) = index.remove(id) {
...   |
227 | |     }
    | |_____- temporary `index` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
211 ~                 index.remove(&desc_guard.context.id);
212 +                 drop(index);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/hierarchy.rs:206:17
    |
205 |           if let Some(node) = index.remove(id) {
    |  ______________________________________________-
206 | |             let node_guard = node.read().unwrap();
    | |                 ^^^^^^^^^^
...   |
220 | |             Ok(())
221 | |         } else {
    | |_________- temporary `node_guard` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
206 ~             
207 +             node.read().unwrap().;
208 |
209 |             // Remove all descendants from index
210 ~             
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:231:5
    |
231 |     pub fn roots(&self) -> HashMap<String, ExecutionContext> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:235:38
    |
235 |                 let mut node_guard = node.write().unwrap();
    |                                      ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/context/hierarchy.rs:244:5
    |
244 |     pub fn stats(&self) -> ContextStats {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/context/hierarchy.rs:245:21
    |
245 |         let index = self.index.read().unwrap();
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/hierarchy.rs:245:13
    |
244 |       pub fn stats(&self) -> ContextStats {
    |  _________________________________________-
245 | |         let index = self.index.read().unwrap();
    | |             ^^^^^
246 | |         let total_contexts = index.len();
...   |
271 | |     }
    | |_____- temporary `index` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
245 ~         
246 +         let total_contexts = self.index.read().unwrap().len();
247 ~         
    |

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/context/inheritance.rs:152:5
    |
152 | /     pub fn apply(
153 | |         &self,
154 | |         parent_ctx: &ExecutionContext,
155 | |         child_ctx: &mut ExecutionContext,
156 | |     ) -> Result<(), String> {
    | |___________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-agents/src/context/inheritance.rs:240:72
    |
240 |     fn should_inherit_field(&self, field: &str, value: &Value, policy: &InheritancePolicy) -> bool {
    |                                                                        ^^^^^^^^^^^^^^^^^^ help: consider passing by value instead: `InheritancePolicy`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref
    = note: `-W clippy::trivially-copy-pass-by-ref` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::trivially_copy_pass_by_ref)]`

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/context/inheritance.rs:271:17
    |
271 | /                 if let Some(str_val) = value.as_str() {
272 | |                     Value::String(format!("{prefix}{str_val}"))
273 | |                 } else {
274 | |                     value.clone()
275 | |                 }
    | |_________________^ help: try: `value.as_str().map_or_else(|| value.clone(), |str_val| Value::String(format!("{prefix}{str_val}")))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/context/inheritance.rs:278:17
    |
278 | /                 if let Some(str_val) = value.as_str() {
279 | |                     Value::String(format!("{str_val}{suffix}"))
280 | |                 } else {
281 | |                     value.clone()
282 | |                 }
    | |_________________^ help: try: `value.as_str().map_or_else(|| value.clone(), |str_val| Value::String(format!("{str_val}{suffix}")))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `self` argument
   --> llmspell-agents/src/context/inheritance.rs:327:21
    |
327 |     fn merge_values(&self, existing: &Value, new: &Value) -> Value {
    |                     ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/context/inheritance.rs:363:13
    |
363 | /             if let Some(level) = value.as_str() {
364 | |                 ["low", "medium", "high", "critical"].contains(&level)
365 | |             } else {
366 | |                 false
367 | |             }
    | |_____________^ help: try: `value.as_str().map_or(false, |level| ["low", "medium", "high", "critical"].contains(&level))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:123:23
    |
123 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
123 -     /// Panics if the RwLock is poisoned
123 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:133:23
    |
133 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
133 -     /// Panics if the RwLock is poisoned
133 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:143:23
    |
143 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
143 -     /// Panics if the RwLock is poisoned
143 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:163:23
    |
163 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
163 -     /// Panics if the RwLock is poisoned
163 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:188:23
    |
188 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
188 -     /// Panics if the RwLock is poisoned
188 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:200:17
    |
189 |       pub fn set(&self, key: String, value: Value, accessor: &ComponentId) -> Result<()> {
    |  ________________________________________________________________________________________-
190 | |         if !self.has_permission(accessor, MemoryPermission::Write) {
191 | |             return Err(LLMSpellError::Security {
192 | |                 message: format!(
...   |
200 | |         let mut data = self.data.write().unwrap();
    | |                 ^^^^
...   |
220 | |         Ok(())
221 | |     }
    | |_____- temporary `data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
207 ~         data.insert(key.clone(), value);
208 +         drop(data);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:231:23
    |
231 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
231 -     /// Panics if the RwLock is poisoned
231 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:243:17
    |
232 |       pub fn remove(&self, key: &str, accessor: &ComponentId) -> Result<Option<Value>> {
    |  ______________________________________________________________________________________-
233 | |         if !self.has_permission(accessor, MemoryPermission::Write) {
234 | |             return Err(LLMSpellError::Security {
235 | |                 message: format!(
...   |
243 | |         let mut data = self.data.write().unwrap();
    | |                 ^^^^
...   |
259 | |         Ok(removed)
260 | |     }
    | |_____- temporary `data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
243 ~         
244 +         let removed = self.data.write().unwrap().remove(key);
245 ~         
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:276:23
    |
276 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
276 -     /// Panics if the RwLock is poisoned
276 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:300:23
    |
300 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
300 -     /// Panics if the RwLock is poisoned
300 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:312:17
    |
301 |       pub fn clear(&self, accessor: &ComponentId) -> Result<()> {
    |  _______________________________________________________________-
302 | |         if !self.has_permission(accessor, MemoryPermission::Write) {
303 | |             return Err(LLMSpellError::Security {
304 | |                 message: format!(
...   |
312 | |         let mut data = self.data.write().unwrap();
    | |                 ^^^^
...   |
316 | |         Ok(())
317 | |     }
    | |_____- temporary `data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
312 ~         
313 +         self.data.write().unwrap().clear();
314 ~         
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:406:23
    |
406 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
406 -     /// Panics if the RwLock is poisoned
406 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:408:17
    |
407 |       pub fn create_region(&self, id: String, scope: ContextScope, owner: ComponentId) -> Result<()> {
    |  ____________________________________________________________________________________________________-
408 | |         let mut regions = self.regions.write().unwrap();
    | |                 ^^^^^^^
...   |
430 | |         Ok(())
431 | |     }
    | |_____- temporary `regions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
429 ~         regions.insert(id, region);
430 +         drop(regions);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:437:23
    |
437 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
437 -     /// Panics if the RwLock is poisoned
437 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:454:23
    |
454 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
454 -     /// Panics if the RwLock is poisoned
454 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:456:17
    |
455 |       pub fn delete_region(&self, id: &str, requester: &ComponentId) -> Result<()> {
    |  __________________________________________________________________________________-
456 | |         let mut regions = self.regions.write().unwrap();
    | |                 ^^^^^^^
457 | |
458 | |         if let Some(region) = regions.get(id) {
...   |
473 | |         Ok(())
474 | |     }
    | |_____- temporary `regions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
471 ~         })?;
472 +         drop(regions);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:480:23
    |
480 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
480 -     /// Panics if the RwLock is poisoned
480 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:495:23
    |
495 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
495 -     /// Panics if the RwLock is poisoned
495 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/context/shared_memory.rs:498:13
    |
497 |       pub fn stats(&self) -> MemoryStats {
    |  ________________________________________-
498 | |         let regions = self.regions.read().unwrap();
    | |             ^^^^^^^
499 | |
500 | |         let total_regions = regions.len();
...   |
508 | |     }
    | |_____- temporary `regions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
501 ~         let total_size: usize = regions.values().map(|r| r.metadata.size_bytes).sum();
502 +         drop(regions);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/context/shared_memory.rs:514:23
    |
514 |     /// Panics if the RwLock is poisoned or if duration conversion fails
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
514 -     /// Panics if the RwLock is poisoned or if duration conversion fails
514 +     /// Panics if the `RwLock` is poisoned or if duration conversion fails
    |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/di.rs:44:17
   |
43 |       pub async fn register_tool(&self, id: String, tool: Arc<dyn Tool>) -> Result<()> {
   |  ______________________________________________________________________________________-
44 | |         let mut tools = self.tools.write().await;
   | |                 ^^^^^
45 | |         if tools.contains_key(&id) {
46 | |             anyhow::bail!("Tool with id '{}' already registered", id);
...  |
49 | |         Ok(())
50 | |     }
   | |_____- temporary `tools` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
48 ~         tools.insert(id, tool);
49 +         drop(tools);
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/di.rs:71:17
   |
69 |       pub async fn register_service<T: Any + Send + Sync + 'static>(&self, service: T) -> Result<()> {
   |  ____________________________________________________________________________________________________-
70 | |         let type_id = TypeId::of::<T>();
71 | |         let mut services = self.services.write().await;
   | |                 ^^^^^^^^
72 | |         if services.contains_key(&type_id) {
...  |
79 | |         Ok(())
80 | |     }
   | |_____- temporary `services` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
78 ~         services.insert(type_id, Box::new(service));
79 +         drop(services);
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/di.rs:101:17
    |
100 |       ) -> Result<()> {
    |  _____________________-
101 | |         let mut instances = self.named_instances.write().await;
    | |                 ^^^^^^^^^
102 | |         if instances.contains_key(&name) {
103 | |             anyhow::bail!("Named instance '{}' already registered", name);
...   |
106 | |         Ok(())
107 | |     }
    | |_____- temporary `instances` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
105 ~         instances.insert(name, Box::new(instance));
106 +         drop(instances);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/di.rs:152:17
    |
150 |       pub async fn register_scoped<T: Any + Send + Sync + 'static>(&self, service: T) -> Result<()> {
    |  ___________________________________________________________________________________________________-
151 | |         let type_id = TypeId::of::<T>();
152 | |         let mut services = self.scoped_services.write().await;
    | |                 ^^^^^^^^
153 | |         services.insert(type_id, Box::new(service));
154 | |         Ok(())
155 | |     }
    | |_____- temporary `services` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
152 ~         
153 +         self.scoped_services.write().await.insert(type_id, Box::new(service));
154 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/di.rs:162:13
    |
158 |       pub async fn get_service<T: Any + Send + Sync + Clone + 'static>(&self) -> Option<Arc<T>> {
    |  _______________________________________________________________________________________________-
159 | |         let type_id = TypeId::of::<T>();
...   |
162 | |         let scoped = self.scoped_services.read().await;
    | |             ^^^^^^
...   |
168 | |         self.parent.get_service::<T>().await
169 | |     }
    | |_____- temporary `scoped` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
162 ~         
163 +         self.scoped_services.read().await.;
164 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/di.rs:193:5
    |
193 |     pub fn with_tool(self, id: String, tool: Arc<dyn Tool>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/di.rs:197:17
    |
197 |                 self.container.register_tool(id, tool).await.unwrap();
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: unused `self` argument
   --> llmspell-agents/src/factory.rs:389:35
    |
389 |     fn initialize_agent_lifecycle(&self, agent_type: &str, agent_name: &str) -> Result<()> {
    |                                   ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessary
   --> llmspell-agents/src/factory.rs:389:5
    |
389 | /     fn initialize_agent_lifecycle(&self, agent_type: &str, agent_name: &str) -> Result<()> {
390 | |         info!(
391 | |             "Agent '{}' of type '{}' created with lifecycle management",
392 | |             agent_name, agent_type
...   |
397 | |         Ok(())
398 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove the return type...
    |
389 -     fn initialize_agent_lifecycle(&self, agent_type: &str, agent_name: &str) -> Result<()> {
389 +     fn initialize_agent_lifecycle(&self, agent_type: &str, agent_name: &str) -> () {
    |
help: ...and then remove returned values
    |
397 -         Ok(())
    |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:37:17
   |
36 |       ) -> Result<()> {
   |  _____________________-
37 | |         let mut factories = self.factories.write().await;
   | |                 ^^^^^^^^^
38 | |         if factories.contains_key(&name) {
39 | |             anyhow::bail!("Factory '{}' is already registered", name);
...  |
49 | |         Ok(())
50 | |     }
   | |_____- temporary `factories` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
41 ~         factories.insert(name.clone(), factory);
42 +         drop(factories);
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:44:17
   |
36 |       ) -> Result<()> {
   |  _____________________-
37 | |         let mut factories = self.factories.write().await;
38 | |         if factories.contains_key(&name) {
39 | |             anyhow::bail!("Factory '{}' is already registered", name);
...  |
44 | |         let mut default = self.default_factory.write().await;
   | |                 ^^^^^^^
...  |
49 | |         Ok(())
50 | |     }
   | |_____- temporary `default` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
46 ~             *default = Some(name);
47 +             drop(default);
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:74:13
   |
73 |       pub async fn set_default_factory(&self, name: String) -> Result<()> {
   |  _________________________________________________________________________-
74 | |         let factories = self.factories.read().await;
   | |             ^^^^^^^^^
75 | |         if !factories.contains_key(&name) {
76 | |             anyhow::bail!("Factory '{}' is not registered", name);
...  |
81 | |         Ok(())
82 | |     }
   | |_____- temporary `factories` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
   |
74 ~         
75 +         self.factories.read().await.;
76 ~         
   |

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/factory_registry.rs:79:17
   |
73 |       pub async fn set_default_factory(&self, name: String) -> Result<()> {
   |  _________________________________________________________________________-
74 | |         let factories = self.factories.read().await;
75 | |         if !factories.contains_key(&name) {
76 | |             anyhow::bail!("Factory '{}' is not registered", name);
...  |
79 | |         let mut default = self.default_factory.write().await;
   | |                 ^^^^^^^
80 | |         *default = Some(name);
81 | |         Ok(())
82 | |     }
   | |_____- temporary `default` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
   |
79 ~         
80 +         self.default_factory.write().await.;
81 ~         
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/health.rs:276:17
    |
275 |       pub async fn add_health_check(&self, check: Arc<dyn HealthCheck>) {
    |  _______________________________________________________________________-
276 | |         let mut checks = self.health_checks.write().await;
    | |                 ^^^^^^
277 | |         checks.push(check);
...   |
285 | |     }
    | |_____- temporary `checks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
280 ~         checks.sort_by_key(|c| c.priority());
281 +         drop(checks);
    |

warning: this function has too many lines (121/100)
   --> llmspell-agents/src/health.rs:292:5
    |
292 | /     pub async fn check_health(&self) -> Result<HealthCheckResult> {
293 | |         let start_time = Instant::now();
294 | |
295 | |         if self.config.enable_logging {
...   |
436 | |         Ok(final_result)
437 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/health.rs:306:13
    |
292 |       pub async fn check_health(&self) -> Result<HealthCheckResult> {
    |  ___________________________________________________________________-
293 | |         let start_time = Instant::now();
294 | |
295 | |         if self.config.enable_logging {
...   |
306 | |         let checks = self.health_checks.read().await;
    | |             ^^^^^^
...   |
436 | |         Ok(final_result)
437 | |     }
    | |_____- temporary `checks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
306 ~         
307 +         self.health_checks.read().await.;
308 ~         
    |

warning: more than 3 bools in a struct
  --> llmspell-agents/src/hooks/state_persistence_hook.rs:20:1
   |
20 | / pub struct PersistenceConfig {
21 | |     /// Interval for automatic saves (None disables auto-save)
22 | |     pub auto_save_interval: Option<Duration>,
23 | |     /// Maximum number of retry attempts
...  |
36 | |     pub non_blocking: bool,
37 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
   = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:146:43
    |
146 |                           let should_save = if let Some(last_save) = last_saves.get(agent_id) {
    |  ___________________________________________^
147 | |                             now.duration_since(*last_save)
148 | |                                 .unwrap_or(Duration::from_secs(0))
149 | |                                 >= interval
150 | |                         } else {
151 | |                             true // Never saved
152 | |                         };
    | |_________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
146 ~                         let should_save = last_saves.get(agent_id).map_or(true, |last_save| now.duration_since(*last_save)
147 ~                                 .unwrap_or(Duration::from_secs(0)) >= interval);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:213:33
    |
211 |                       Ok(()) => {
    |  _______________________________-
212 | |                         // Reset failure count on success
213 | |                         let mut counts = self.failure_counts.write().await;
    | |                                 ^^^^^^
214 | |                         counts.remove(agent_id);
...   |
222 | |                         return Ok(());
223 | |                     }
    | |_____________________- temporary `counts` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
213 ~                         
214 +                         self.failure_counts.write().await.remove(agent_id);
215 ~                         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:217:33
    |
211 |                       Ok(()) => {
    |  _______________________________-
212 | |                         // Reset failure count on success
213 | |                         let mut counts = self.failure_counts.write().await;
214 | |                         counts.remove(agent_id);
...   |
217 | |                         let mut times = self.last_save_times.write().await;
    | |                                 ^^^^^
...   |
222 | |                         return Ok(());
223 | |                     }
    | |_____________________- temporary `times` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
217 ~                         
218 +                         self.last_save_times.write().await.insert(agent_id.to_string(), SystemTime::now());
219 ~                         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:242:37
    |
235 |                           } else {
    |  ________________________________-
236 | |                             error!(
237 | |                                 "All {} save attempts failed for agent {}: {}",
238 | |                                 attempts, agent_id, e
...   |
242 | |                             let mut counts = self.failure_counts.write().await;
    | |                                     ^^^^^^
...   |
246 | |                             return Err(e);
247 | |                         }
    | |_________________________- temporary `counts` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
242 ~                             
243 +                             self.failure_counts.write().await.;
244 ~                             
    |

warning: unused `self` argument
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:257:23
    |
257 |     fn try_save_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<()> {
    |                       ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessary
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:257:5
    |
257 | /     fn try_save_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<()> {
...   |
268 | |         Ok(())
269 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove the return type...
    |
257 -     fn try_save_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<()> {
257 +     fn try_save_state(&self, _agent: &AgentRef, agent_id: &str) -> () {
    |
help: ...and then remove returned values
    |
268 -         Ok(())
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:282:9
    |
282 | /         if let Some(agent) = agent {
283 | |             match self.try_restore_state(&agent, agent_id) {
284 | |                 Ok(restored) => {
285 | |                     if restored {
...   |
302 | |             Ok(())
303 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
282 ~         agent.map_or_else(|| Ok(()), |agent| match self.try_restore_state(&agent, agent_id) {
283 +                 Ok(restored) => {
284 +                     if restored {
285 +                         self.metrics
286 +                             .restores_succeeded
287 +                             .fetch_add(1, Ordering::Relaxed);
288 +                         info!("Successfully restored state for agent {}", agent_id);
289 +                     } else {
290 +                         debug!("No saved state found for agent {}", agent_id);
291 +                     }
292 +                     Ok(())
293 +                 }
294 +                 Err(e) => {
295 +                     error!("Failed to restore state for agent {}: {}", agent_id, e);
296 +                     self.metrics.restores_failed.fetch_add(1, Ordering::Relaxed);
297 +                     Err(e)
298 +                 }
299 +             })
    |

warning: unused `self` argument
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:307:26
    |
307 |     fn try_restore_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<bool> {
    |                          ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-agents/src/hooks/state_persistence_hook.rs:307:5
    |
307 | /     fn try_restore_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<bool> {
...   |
316 | |         Ok(false)
317 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
307 -     fn try_restore_state(&self, _agent: &AgentRef, agent_id: &str) -> Result<bool> {
307 +     fn try_restore_state(&self, _agent: &AgentRef, agent_id: &str) -> bool {
    |
help: ...and then change returning expressions
    |
316 -         Ok(false)
316 +         false
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:332:17
    |
330 |       pub async fn subscribe(&self, subscription: EventSubscription) -> String {
    |  ______________________________________________________________________________-
331 | |         let subscription_id = subscription.id.clone();
332 | |         let mut subscriptions = self.subscriptions.write().await;
    | |                 ^^^^^^^^^^^^^
333 | |         subscriptions.insert(subscription_id.clone(), subscription);
...   |
339 | |         subscription_id
340 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
332 ~         
333 +         self.subscriptions.write().await.insert(subscription_id.clone(), subscription);
334 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:440:13
    |
439 |       async fn process_subscriptions(&self, event: &LifecycleEvent) -> Result<()> {
    |  _________________________________________________________________________________-
440 | |         let subscriptions = self.subscriptions.read().await;
    | |             ^^^^^^^^^^^^^
441 | |         let matching_subscriptions: Vec<_> = subscriptions
442 | |             .values()
...   |
492 | |         Ok(())
493 | |     }
    | |_____- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
440 ~         
441 +         let matching_subscriptions = self.subscriptions.read().await.collect();
442 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:611:17
    |
610 |       pub async fn clear_history(&self) {
    |  _______________________________________-
611 | |         let mut history = self.event_history.lock().await;
    | |                 ^^^^^^^
612 | |         history.clear();
...   |
617 | |     }
    | |_____- temporary `history` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
611 ~         
612 +         self.event_history.lock().await.clear();
613 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/events.rs:740:17
    |
736 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
740 |         let mut metrics = self.metrics.lock().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
740 ~         
741 +         self.metrics.lock().await.;
742 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/hooks.rs:193:17
    |
190 | #[async_trait]
    | -------------- temporary `times` is currently being dropped at the end of its contained scope
...
193 |         let mut times = self.start_times.lock().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
193 ~         
194 +         self.start_times.lock().await.insert(config.name.clone(), std::time::Instant::now());
195 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/hooks.rs:200:17
    |
190 | #[async_trait]
    | -------------- temporary `times` is currently being dropped at the end of its contained scope
...
200 |         let mut times = self.start_times.lock().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
200 ~         
201 +         self.start_times.lock().await.;
202 |
203 ~         
    |

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/lifecycle/middleware.rs:1:1
  |
1 | / //! ABOUTME: Lifecycle middleware system for intercepting and augmenting agent lifecycle transitions
2 | | //! ABOUTME: Provides composable middleware chain for logging, metrics, security, and custom lifecycle behavior
  | |_^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph
  = note: `-W clippy::too-long-first-doc-paragraph` implied by `-W clippy::nursery`
  = help: to override `-W clippy::nursery` add `#[allow(clippy::too_long_first_doc_paragraph)]`

warning: more than 3 bools in a struct
   --> llmspell-agents/src/lifecycle/middleware.rs:190:1
    |
190 | / pub struct MiddlewareConfig {
191 | |     /// Enable middleware execution
192 | |     pub enabled: bool,
193 | |     /// Maximum execution time per middleware
...   |
202 | |     pub emit_events: bool,
203 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/middleware.rs:666:17
    |
662 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
666 |         let mut metrics = self.metrics.write().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
666 ~         
667 +         self.metrics.write().await.;
668 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/middleware.rs:675:17
    |
662 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
675 |         let mut metrics = self.metrics.write().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
679 ~         *metrics.entry(completed_key).or_insert(0.0) += 1.0;
680 +         drop(metrics);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/middleware.rs:689:17
    |
662 | #[async_trait]
    | -------------- temporary `metrics` is currently being dropped at the end of its contained scope
...
689 |         let mut metrics = self.metrics.write().await;
    |                 ^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
689 ~         
690 +         self.metrics.write().await.;
691 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/resources.rs:310:21
    |
309 | /         {
310 | |             let mut stats = self.usage_stats.lock().await;
    | |                     ^^^^^
311 | |             stats.total_allocations += 1;
312 | |             stats.current_allocations += 1;
...   |
331 | |         }
    | |_________- temporary `stats` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
327 ~                 .or_insert(0);
328 +             drop(stats);
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/lifecycle/resources.rs:505:9
    |
505 | /         if let Some(agent_allocations) = allocations.get(agent_id) {
506 | |             agent_allocations
507 | |                 .iter()
508 | |                 .filter(|a| a.resource_type == *resource_type)
...   |
512 | |             0
513 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
505 ~         allocations.get(agent_id).map_or(0, |agent_allocations| agent_allocations
506 +                 .iter()
507 +                 .filter(|a| a.resource_type == *resource_type)
508 +                 .map(|a| a.amount)
509 +                 .sum())
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/resources.rs:528:13
    |
527 |       async fn find_allocation(&self, allocation_id: &str) -> Result<ResourceAllocation> {
    |  ________________________________________________________________________________________-
528 | |         let allocations = self.allocations.read().await;
    | |             ^^^^^^^^^^^
529 | |         for agent_allocations in allocations.values() {
530 | |             if let Some(allocation) = agent_allocations.iter().find(|a| a.id == allocation_id) {
...   |
534 | |         Err(anyhow!("Allocation not found: {}", allocation_id))
535 | |     }
    | |_____- temporary `allocations` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
528 ~         
529 +         self.allocations.read().await.;
530 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/lifecycle/shutdown.rs:213:5
    |
213 |     pub async fn add_hook(&self, hook: Arc<dyn ShutdownHook>) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/lifecycle/shutdown.rs:223:17
    |
223 |                 hooks.last().unwrap().priority()
    |                 ^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this function has too many lines (145/100)
   --> llmspell-agents/src/lifecycle/shutdown.rs:236:5
    |
236 | /     pub async fn shutdown_agent(
237 | |         &self,
238 | |         request: ShutdownRequest,
239 | |         state_machine: Arc<AgentStateMachine>,
...   |
410 | |         Ok(result)
411 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/shutdown.rs:332:13
    |
240 |       ) -> Result<ShutdownResult> {
    |  _________________________________-
241 | |         let start_time = Instant::now();
242 | |         let request_id = request.id.clone();
243 | |         let agent_id = request.agent_id.clone();
...   |
332 | |         let hooks = self.hooks.read().await;
    | |             ^^^^^
...   |
410 | |         Ok(result)
411 | |     }
    | |_____- temporary `hooks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
332 ~         
333 +         self.hooks.read().await.;
334 ~         
    |

warning: function call inside of `unwrap_or`
   --> llmspell-agents/src/lifecycle/shutdown.rs:369:30
    |
369 | ...                   .unwrap_or(&"Unknown error".to_string())
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &"Unknown error".to_string())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call
    = note: `-W clippy::or-fun-call` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::or_fun_call)]`

warning: function call inside of `unwrap_or`
   --> llmspell-agents/src/lifecycle/shutdown.rs:405:26
    |
405 |                         .unwrap_or(&"Unknown error".to_string())
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &"Unknown error".to_string())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/lifecycle/shutdown.rs:422:13
    |
418 |       ) -> Result<u32> {
    |  ______________________-
419 | |         let agent_id = &request.agent_id;
...   |
422 | |         let hooks = self.hooks.read().await;
    | |             ^^^^^
...   |
470 | |         Ok(resources_cleaned)
471 | |     }
    | |_____- temporary `hooks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
454 ~         }
455 +         drop(hooks);
    |

warning: function call inside of `unwrap_or`
   --> llmspell-agents/src/lifecycle/shutdown.rs:709:22
    |
709 |                     .unwrap_or(&"Unknown error".to_string())
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `unwrap_or_else(|| &"Unknown error".to_string())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#or_fun_call

warning: more than 3 bools in a struct
   --> llmspell-agents/src/lifecycle/state_machine.rs:111:1
    |
111 | / pub struct StateMachineConfig {
112 | |     /// Maximum time allowed for state transitions
113 | |     pub max_transition_time: Duration,
114 | |     /// Enable automatic recovery from error states
...   |
133 | |     pub circuit_breaker_config: BreakerConfig,
134 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-agents/src/lifecycle/state_machine.rs:278:13
    |
278 | /             (Terminated, _) => false,
279 | |
280 | |             // All others not allowed
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-agents/src/lifecycle/state_machine.rs:281:13
    |
281 |             _ => false,
    |             ^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: this could be rewritten as `let...else`
   --> llmspell-agents/src/lifecycle/state_machine.rs:428:9
    |
428 | /         let (hook_executor, hook_registry) = match (&self.hook_executor, &self.hook_registry) {
429 | |             (Some(executor), Some(registry)) => (executor, registry),
430 | |             _ => return Ok(()), // No hooks configured
431 | |         };
    | |__________^ help: consider writing: `let (Some(hook_executor), Some(hook_registry)) = (&self.hook_executor, &self.hook_registry) else { return Ok(()) };`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else
    = note: `-W clippy::manual-let-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::manual_let_else)]`

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/lifecycle/state_machine.rs:542:9
    |
542 | /         if let Some(token) = tokens.get(&transition_id) {
543 | |             token.cancel();
544 | |             true
545 | |         } else {
546 | |             false
547 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
542 ~         tokens.get(&transition_id).map_or(false, |token| {
543 +             token.cancel();
544 +             true
545 +         })
    |

warning: this function has too many lines (128/100)
   --> llmspell-agents/src/lifecycle/state_machine.rs:651:5
    |
651 | /     async fn execute_state_transition(
652 | |         &self,
653 | |         current: AgentState,
654 | |         target_state: AgentState,
...   |
821 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/lifecycle/state_machine.rs:814:9
    |
814 | /         match timeout_result {
815 | |             Ok(result) => result,
816 | |             Err(_) => Err(anyhow!(
817 | |                 "State transition timed out after {:?}",
818 | |                 self.config.max_transition_time
819 | |             )),
820 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
814 ~         timeout_result.map_or_else(|_| Err(anyhow!(
815 +                 "State transition timed out after {:?}",
816 +                 self.config.max_transition_time
817 +             )), |result| result)
    |

warning: this method could have a `#[must_use]` attribute
    --> llmspell-agents/src/lifecycle/state_machine.rs:1058:5
     |
1058 |     pub fn get_hook_metrics(&self, hook_name: &str) -> Option<llmspell_hooks::PerformanceMetrics> {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_hook_metrics(&self, hook_name: &str) -> Option<llmspell_hooks::PerformanceMetrics>`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
     = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/lifecycle/benchmarks.rs:28:5
   |
28 |     pub fn get_log_count(&self) -> u64 {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/lifecycle/benchmarks.rs:29:10
   |
29 |         *self.log_count.lock().unwrap()
   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/lifecycle/benchmarks.rs:80:5
   |
80 |     pub fn get_metrics_count(&self) -> usize {
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/lifecycle/benchmarks.rs:81:9
   |
81 |         self.metrics.lock().unwrap().len()
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/monitoring/alerts.rs:147:9
    |
147 | /         if let Some(resolved_at) = self.resolved_at {
148 | |             (resolved_at - self.triggered_at)
149 | |                 .to_std()
150 | |                 .unwrap_or_default()
...   |
154 | |                 .unwrap_or_default()
155 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
147 ~         self.resolved_at.map_or_else(|| (Utc::now() - self.triggered_at)
148 +                 .to_std()
149 +                 .unwrap_or_default(), |resolved_at| (resolved_at - self.triggered_at)
150 +                 .to_std()
151 +                 .unwrap_or_default())
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:343:5
    |
343 |     pub fn register_rule(&self, rule: AlertRule) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:344:9
    |
344 |         self.rules.write().unwrap().insert(rule.id.clone(), rule);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:348:5
    |
348 |     pub fn register_channel(&self, name: String, channel: Arc<dyn NotificationChannel>) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:349:9
    |
349 |         self.channels.write().unwrap().insert(name, channel);
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:360:5
    |
360 |     pub async fn evaluate_rules(&self, context: AlertContext<'_>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:362:25
    |
362 |             let rules = self.rules.read().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this `map_or` can be simplified
   --> llmspell-agents/src/monitoring/alerts.rs:379:22
    |
379 |                   } => context
    |  ______________________^
380 | |                     .metrics
381 | |                     .get(metric_name)
382 | |                     .map_or(false, |metric| match metric {
...   |
389 | |                         _ => false,
390 | |                     }),
    | |______________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
help: use is_some_and instead
    |
382 -                     .map_or(false, |metric| match metric {
382 +                     .is_some_and(|metric| match metric {
    |

warning: this `map_or` can be simplified
   --> llmspell-agents/src/monitoring/alerts.rs:431:9
    |
431 | /         last_triggers.get(rule_id).map_or(false, |last_trigger| {
432 | |             let elapsed = (Utc::now() - *last_trigger).to_std().unwrap_or_default();
433 | |             elapsed < self.config.default_cooldown
434 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
help: use is_some_and instead
    |
431 -         last_triggers.get(rule_id).map_or(false, |last_trigger| {
431 +         last_triggers.get(rule_id).is_some_and(|last_trigger| {
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:520:5
    |
520 |     pub fn get_active_alerts(&self) -> Vec<Alert> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:521:9
    |
521 | /         self.active_alerts
522 | |             .read()
523 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:534:5
    |
534 |     pub fn acknowledge_alert(&self, alert_id: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:535:9
    |
535 | /         self.active_alerts
536 | |             .write()
537 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:558:5
    |
558 |     pub fn resolve_alert(&self, alert_id: &str) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:559:34
    |
559 |         if let Some(mut alert) = self.active_alerts.write().unwrap().remove(alert_id) {
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` in `if let` scrutinee will live until the end of the `if let` expression
   --> llmspell-agents/src/monitoring/alerts.rs:559:34
    |
559 |         if let Some(mut alert) = self.active_alerts.write().unwrap().remove(alert_id) {
    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
568 |         }
    |          - temporary lives until here
    |
    = note: this might lead to deadlocks or other unexpected behavior
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_in_scrutinee
    = note: `-W clippy::significant-drop-in-scrutinee` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_in_scrutinee)]`
help: try moving the temporary above the match
    |
559 ~         let value = self.active_alerts.write().unwrap().remove(alert_id);
560 ~         if let Some(mut alert) = value {
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/monitoring/alerts.rs:559:9
    |
559 | /         if let Some(mut alert) = self.active_alerts.write().unwrap().remove(alert_id) {
560 | |             alert.resolve();
561 | |             self.add_to_history(alert);
562 | |             Ok(())
...   |
567 | |             })
568 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
559 ~         self.active_alerts.write().unwrap().remove(alert_id).map_or_else(|| Err(llmspell_core::LLMSpellError::Component {
560 +                 message: format!("Alert {alert_id} not found"),
561 +                 source: None,
562 +             }), |mut alert| {
563 +             alert.resolve();
564 +             self.add_to_history(alert);
565 +             Ok(())
566 +         })
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/alerts.rs:573:5
    |
573 |     pub fn get_statistics(&self) -> AlertStatistics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/alerts.rs:574:22
    |
574 |         let active = self.active_alerts.read().unwrap();
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: manual `Debug` impl does not include all fields
   --> llmspell-agents/src/monitoring/events.rs:173:1
    |
173 | / impl std::fmt::Debug for EventLogger {
174 | |     /// # Panics
175 | |     ///
176 | |     /// Panics if the RwLock is poisoned
...   |
186 | | }
    | |_^
    |
note: this field is unused
   --> llmspell-agents/src/monitoring/events.rs:164:5
    |
164 |     buffer: Arc<RwLock<VecDeque<LogEvent>>>,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: consider including all fields in this `Debug` impl
    = help: consider calling `.finish_non_exhaustive()` if you intend to ignore fields
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_fields_in_debug

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:176:23
    |
176 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
176 -     /// Panics if the RwLock is poisoned
176 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:206:23
    |
206 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
206 -     /// Panics if the RwLock is poisoned
206 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:215:23
    |
215 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
215 -     /// Panics if the RwLock is poisoned
215 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:238:23
    |
238 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
238 -     /// Panics if the RwLock is poisoned
238 +     /// Panics if the `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/events.rs:258:17
    |
239 |       pub fn log(&self, event: LogEvent) -> Result<()> {
    |  ______________________________________________________-
240 | |         // Check minimum level
241 | |         if !event.level.should_log(self.get_level()) {
242 | |             return Ok(());
...   |
258 | |         let mut buffer = self.buffer.write().unwrap();
    | |                 ^^^^^^
...   |
264 | |         Ok(())
265 | |     }
    | |_____- temporary `buffer` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
262 ~         buffer.push_back(event);
263 +         drop(buffer);
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:371:23
    |
371 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
371 -     /// Panics if the RwLock is poisoned
371 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:381:23
    |
381 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
381 -     /// Panics if the RwLock is poisoned
381 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:395:23
    |
395 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
395 -     /// Panics if the RwLock is poisoned
395 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/events.rs:409:23
    |
409 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
409 -     /// Panics if the RwLock is poisoned
409 +     /// Panics if the `RwLock` is poisoned
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/events.rs:415:5
    |
415 |     pub fn get_statistics(&self) -> EventStatistics {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/events.rs:416:22
    |
416 |         let buffer = self.buffer.read().unwrap();
    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/metrics.rs:417:5
    |
417 |     pub fn register(&self, name: String, metric: Arc<dyn MetricAccess>) -> Result<()> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/metrics.rs:418:27
    |
418 |         let mut metrics = self.metrics.write().unwrap();
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/metrics.rs:418:17
    |
417 |       pub fn register(&self, name: String, metric: Arc<dyn MetricAccess>) -> Result<()> {
    |  _______________________________________________________________________________________-
418 | |         let mut metrics = self.metrics.write().unwrap();
    | |                 ^^^^^^^
419 | |         metrics.insert(name, metric);
420 | |         Ok(())
421 | |     }
    | |_____- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
418 ~         
419 +         self.metrics.write().unwrap().insert(name, metric);
420 ~         
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/metrics.rs:425:5
    |
425 |     pub fn get(&self, name: &str) -> Option<Arc<dyn MetricAccess>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/metrics.rs:426:9
    |
426 |         self.metrics.read().unwrap().get(name).cloned()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/metrics.rs:431:5
    |
431 |     pub fn get_agent_metrics(&self, agent_id: &str) -> Arc<AgentMetrics> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/metrics.rs:432:33
    |
432 |         let mut agent_metrics = self.agent_metrics.write().unwrap();
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/performance.rs:98:5
    |
98  |     pub fn from_snapshots(snapshots: &[PerformanceSnapshot]) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/performance.rs:103:26
    |
103 |         let start_time = snapshots.first().unwrap().timestamp;
    |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: casting `f64` to `usize` may lose the sign of the value
   --> llmspell-agents/src/monitoring/performance.rs:344:31
    |
344 |         let active_requests = self.metrics.requests_active.get() as usize;
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
    = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/performance.rs:395:5
    |
395 |     pub fn generate_report(&self) -> PerformanceReport {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/performance.rs:396:25
    |
396 |         let snapshots = self.snapshots.read().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/performance.rs:396:13
    |
395 |       pub fn generate_report(&self) -> PerformanceReport {
    |  ________________________________________________________-
396 | |         let snapshots = self.snapshots.read().unwrap();
    | |             ^^^^^^^^^
397 | |         let snapshots_vec: Vec<_> = snapshots.iter().cloned().collect();
398 | |         PerformanceReport::from_snapshots(&snapshots_vec)
399 | |     }
    | |_____- temporary `snapshots` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
396 ~         
397 +         let snapshots_vec = self.snapshots.read().unwrap().collect();
398 ~         
    |

warning: item in documentation is missing backticks
  --> llmspell-agents/src/monitoring/tracing.rs:94:23
   |
94 |     /// Panics if the end_time calculation results in a negative duration
   |                       ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
94 -     /// Panics if the end_time calculation results in a negative duration
94 +     /// Panics if the `end_time` calculation results in a negative duration
   |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:212:23
    |
212 |     /// Panics if any RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
212 -     /// Panics if any RwLock is poisoned
212 +     /// Panics if any `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:250:23
    |
250 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
250 -     /// Panics if the RwLock is poisoned
250 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:269:23
    |
269 |     /// Panics if any RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
269 -     /// Panics if any RwLock is poisoned
269 +     /// Panics if any `RwLock` is poisoned
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/monitoring/tracing.rs:271:17
    |
270 |       fn complete_span(&self, span_id: &str, status: SpanStatus) -> Result<()> {
    |  ______________________________________________________________________________-
271 | |         let mut active = self.active_spans.write().unwrap();
    | |                 ^^^^^^
272 | |
273 | |         if let Some(mut span) = active.remove(span_id) {
...   |
289 | |         Ok(())
290 | |     }
    | |_____- temporary `active` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
271 ~         
272 +         self.active_spans.write().unwrap().;
273 |
274 ~         
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:296:23
    |
296 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
296 -     /// Panics if the RwLock is poisoned
296 +     /// Panics if the `RwLock` is poisoned
    |

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:306:23
    |
306 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
306 -     /// Panics if the RwLock is poisoned
306 +     /// Panics if the `RwLock` is poisoned
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/tracing.rs:319:5
    |
319 |     pub fn get_all_traces(&self) -> HashMap<String, Vec<TraceSpan>> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/tracing.rs:322:21
    |
322 |         for span in self.completed_spans.read().unwrap().iter() {
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: item in documentation is missing backticks
   --> llmspell-agents/src/monitoring/tracing.rs:336:23
    |
336 |     /// Panics if the RwLock is poisoned
    |                       ^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
336 -     /// Panics if the RwLock is poisoned
336 +     /// Panics if the `RwLock` is poisoned
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/tracing.rs:350:5
    |
350 |     pub fn add_tag(&self, key: String, value: String) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/tracing.rs:351:29
    |
351 |           if let Some(span) = self
    |  _____________________________^
352 | |             .collector
353 | |             .active_spans
354 | |             .write()
355 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/monitoring/tracing.rs:363:5
    |
363 |     pub fn add_event(&self, event: TraceEvent) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/monitoring/tracing.rs:364:29
    |
364 |           if let Some(span) = self
    |  _____________________________^
365 | |             .collector
366 | |             .active_spans
367 | |             .write()
368 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:198:17
    |
190 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
198 |         let mut agents = self.agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
198 ~         
199 +         self.agents.write().await.insert(id.clone(), agent);
200 |         let mut metadata_store = self.metadata.write().await;
201 |
202 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:199:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata_store` is currently being dropped at the end of its contained scope
...
199 |         let mut metadata_store = self.metadata.write().await;
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
199 ~         
200 +         self.metadata.write().await.insert(id, metadata);
201 |
202 |         agents.insert(id.clone(), agent);
203 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:208:17
    |
190 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
208 |         let mut agents = self.agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
208 ~         
209 +         self.agents.write().await.remove(id);
210 |         let mut metadata_store = self.metadata.write().await;
211 |         let mut heartbeats = self.heartbeats.write().await;
212 |
213 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:209:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata_store` is currently being dropped at the end of its contained scope
...
209 |         let mut metadata_store = self.metadata.write().await;
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
209 ~         
210 +         self.metadata.write().await.remove(id);
211 |         let mut heartbeats = self.heartbeats.write().await;
212 |
213 |         agents.remove(id);
214 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:210:17
    |
190 | #[async_trait]
    | -------------- temporary `heartbeats` is currently being dropped at the end of its contained scope
...
210 |         let mut heartbeats = self.heartbeats.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
210 ~         
211 +         self.heartbeats.write().await.remove(id);
212 |
213 |         agents.remove(id);
214 |         metadata_store.remove(id);
215 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:230:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata_store` is currently being dropped at the end of its contained scope
...
230 |         let mut metadata_store = self.metadata.write().await;
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
230 ~         
231 +         self.metadata.write().await.insert(id.to_string(), metadata);
232 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:236:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata` is currently being dropped at the end of its contained scope
...
236 |         let mut metadata = self.metadata.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
236 ~         
237 +         self.metadata.write().await.;
238 |
239 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:249:13
    |
190 | #[async_trait]
    | -------------- temporary `metadata` is currently being dropped at the end of its contained scope
...
249 |         let metadata = self.metadata.read().await;
    |             ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
249 ~         
250 +         self.metadata.read().await.;
251 |         let mut results = Vec::new();
252 |
253 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:308:17
    |
190 | #[async_trait]
    | -------------- temporary `metadata` is currently being dropped at the end of its contained scope
...
308 |         let mut metadata = self.metadata.write().await;
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
308 ~         
309 +         self.metadata.write().await.;
310 |
311 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/types.rs:321:17
    |
190 | #[async_trait]
    | -------------- temporary `heartbeats` is currently being dropped at the end of its contained scope
...
321 |         let mut heartbeats = self.heartbeats.write().await;
    |                 ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
321 ~         
322 +             self.heartbeats.write().await.insert(id.to_string(), std::time::Instant::now());
323 |
324 |         if self.metadata.read().await.contains_key(id) {
325 ~             
    |

warning: this could be rewritten as `let...else`
   --> llmspell-agents/src/registry/discovery.rs:216:9
    |
216 | /         let reference = match self.registry.get_metadata(agent_id).await? {
217 | |             Some(metadata) => metadata,
218 | |             None => anyhow::bail!("Agent '{}' not found", agent_id),
219 | |         };
    | |__________^ help: consider writing: `let Some(reference) = self.registry.get_metadata(agent_id).await? else { anyhow::bail!("Agent '{}' not found", agent_id) };`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/registry/discovery.rs:244:5
    |
244 | /     pub async fn get_recommendations(
245 | |         &self,
246 | |         context: &RecommendationContext,
247 | |     ) -> Result<Vec<SearchResult>> {
    | |__________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/registry/discovery.rs:278:44
    |
278 |                     .signed_duration_since(result.metadata.metrics.last_execution_time.unwrap())
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: unused `self` argument
   --> llmspell-agents/src/registry/discovery.rs:313:9
    |
313 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: it is more idiomatic to use `Option<&T>` instead of `&Option<T>`
   --> llmspell-agents/src/registry/discovery.rs:312:5
    |
312 | /     fn sort_results(
313 | |         &self,
314 | |         results: &mut [SearchResult],
315 | |         sort_by: &Option<SortField>,
    | |                  ------------------ help: change this to: `Option<&SortField>`
...   |
348 | |         });
349 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ref_option
    = note: `-W clippy::ref-option` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::ref_option)]`

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-agents/src/registry/persistence.rs:83:13
   |
82 |       pub async fn persist(&self) -> Result<()> {
   |  _______________________________________________-
83 | |         let cache = self.metadata_cache.read().await;
   | |             ^^^^^
...  |
98 | |         Ok(())
99 | |     }
   | |_____- temporary `cache` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
   |
93 ~         let snapshot_data = cache.to_storage_bytes()?;
94 +         drop(cache);
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:133:17
    |
119 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
133 |         let mut agents = self.runtime_agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
133 ~         
134 +         self.runtime_agents.write().await.insert(id.clone(), agent);
135 |         let mut cache = self.metadata_cache.write().await;
136 |
137 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:134:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
134 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
134 ~         
135 +         self.metadata_cache.write().await.insert(id, metadata);
136 |
137 |         agents.insert(id.clone(), agent);
138 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:148:17
    |
119 | #[async_trait]
    | -------------- temporary `agents` is currently being dropped at the end of its contained scope
...
148 |         let mut agents = self.runtime_agents.write().await;
    |                 ^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
148 ~         
149 +         self.runtime_agents.write().await.remove(id);
150 |         let mut cache = self.metadata_cache.write().await;
151 |
152 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:149:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
149 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
149 ~         
150 +         self.metadata_cache.write().await.remove(id);
151 |
152 |         agents.remove(id);
153 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:163:13
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
163 |         let cache = self.metadata_cache.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
163 ~         
164 +         self.metadata_cache.read().await.;
165 |
166 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:187:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
187 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
187 ~         
188 +         self.metadata_cache.write().await.insert(id.to_string(), metadata);
189 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:194:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
194 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
194 ~         
195 +         self.metadata_cache.write().await.;
196 |
197 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:212:13
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
212 |         let cache = self.metadata_cache.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
212 ~         
213 +         self.metadata_cache.read().await.;
214 |         let mut results = Vec::new();
215 |
216 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:271:17
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
271 |         let mut cache = self.metadata_cache.write().await;
    |                 ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
271 ~         
272 +         self.metadata_cache.write().await.;
273 |
274 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/registry/persistence.rs:299:13
    |
119 | #[async_trait]
    | -------------- temporary `cache` is currently being dropped at the end of its contained scope
...
299 |         let cache = self.metadata_cache.read().await;
    |             ^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
299 ~         
300 +         self.metadata_cache.read().await.;
301 |
302 ~         
    |

warning: this `map_or` can be simplified
   --> llmspell-agents/src/state/isolation.rs:133:9
    |
133 | /         scope.parent().map_or(false, |parent| {
134 | |             self.has_permission(agent_id, &parent, permission)
135 | |         })
    | |__________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_map_or
help: use is_some_and instead
    |
133 -         scope.parent().map_or(false, |parent| {
133 +         scope.parent().is_some_and(|parent| {
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:219:13
    |
197 |     #[instrument(skip(self))]
    |     ------------------------- temporary `boundaries` is currently being dropped at the end of its contained scope
...
219 |         let boundaries = self.boundaries.read();
    |             ^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
219 ~         
220 +         let boundary = self.boundaries.read().unwrap_or(&IsolationBoundary::Strict);
221 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:251:13
    |
197 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
...
251 |         let access_control = self.access_control.read();
    |             ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
251 ~         
252 +         let has_permission = self.access_control.read().has_permission(agent_id, target_scope, &permission);
253 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:292:17
    |
285 |     #[instrument(skip(self))]
    |     ------------------------- temporary `shared_scopes` is currently being dropped at the end of its contained scope
...
292 |         let mut shared_scopes = self.shared_scopes.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
298 ~         shared_scopes.insert(scope_id.to_string(), config.clone());
299 +         drop(shared_scopes);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:301:17
    |
285 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
...
301 |         let mut access_control = self.access_control.write();
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
301 ~         
302 +                     self.access_control.write().grant_permission(
303 +                         agent_id,
304 +                         StateScope::Custom(format!("shared:{scope_id}")),
305 +                         permission.clone(),
306 +                     );
307 |         for agent_id in &config.allowed_agents {
308 |             if let Some(permissions) = config.permissions.get(agent_id) {
309 |                 for permission in permissions {
310 ~                     
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:289:25
    |
289 |         owner_agent_id: Option<String>,
    |                         ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:290:17
    |
290 |         config: SharedScopeConfig,
    |                 ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&SharedScopeConfig`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:335:25
    |
333 |               |config| {
    |  ______________________-
334 | |                 // Revoke permissions from all agents
335 | |                 let mut access_control = self.access_control.write();
    | |                         ^^^^^^^^^^^^^^
336 | |                 for agent_id in &config.allowed_agents {
...   |
343 | |                 Ok(())
344 | |             },
    | |_____________- temporary `access_control` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
335 ~                 
336 +                     self.access_control.write().revoke_permissions(
337 +                         agent_id,
338 +                         StateScope::Custom(format!("shared:{scope_id}")),
339 +                     );
340 |                 for agent_id in &config.allowed_agents {
341 ~                     
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:351:17
    |
349 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
350 |     pub fn grant_permission(&self, agent_id: &str, scope: StateScope, permission: StatePermission) {
351 |         let mut access_control = self.access_control.write();
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
351 ~         
352 +         self.access_control.write().grant_permission(agent_id, scope.clone(), permission.clone());
353 ~         
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:350:59
    |
350 |     pub fn grant_permission(&self, agent_id: &str, scope: StateScope, permission: StatePermission) {
    |                                                           ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:350:83
    |
350 |     pub fn grant_permission(&self, agent_id: &str, scope: StateScope, permission: StatePermission) {
    |                                                                                   ^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&StatePermission`
    |
help: or consider marking this type as `Copy`
   --> llmspell-agents/src/state/isolation.rs:54:1
    |
54  | pub enum StatePermission {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/isolation.rs:362:17
    |
360 |     #[instrument(skip(self))]
    |     ------------------------- temporary `access_control` is currently being dropped at the end of its contained scope
361 |     pub fn revoke_permissions(&self, agent_id: &str, scope: StateScope) {
362 |         let mut access_control = self.access_control.write();
    |                 ^^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
362 ~         
363 +         self.access_control.write().revoke_permissions(agent_id, scope.clone());
364 ~         
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:361:61
    |
361 |     pub fn revoke_permissions(&self, agent_id: &str, scope: StateScope) {
    |                                                             ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/state/isolation.rs:374:9
    |
374 | /         match limit {
375 | |             Some(n) => audit_log.iter().rev().take(n).cloned().collect(),
376 | |             None => audit_log.clone(),
377 | |         }
    | |_________^ help: try: `limit.map_or_else(|| audit_log.clone(), |n| audit_log.iter().rev().take(n).cloned().collect())`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `self` argument
   --> llmspell-agents/src/state/isolation.rs:389:25
    |
389 |     fn agent_owns_scope(&self, agent_id: &str, scope: &StateScope) -> bool {
    |                         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:508:30
    |
508 |     pub fn get(&self, scope: StateScope, _key: &str) -> Result<Option<serde_json::Value>> {
    |                              ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:527:30
    |
527 |     pub fn set(&self, scope: StateScope, _key: &str, _value: serde_json::Value) -> Result<()> {
    |                              ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:545:33
    |
545 |     pub fn delete(&self, scope: StateScope, _key: &str) -> Result<()> {
    |                                 ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/isolation.rs:563:36
    |
563 |     pub fn list_keys(&self, scope: StateScope) -> Result<Vec<String>> {
    |                                    ^^^^^^^^^^ help: consider taking a reference instead: `&StateScope`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/state/persistence.rs:103:17
    |
103 |                 MessageRole::Assistant => CoreMessageRole::Assistant,
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
103 ~                 MessageRole::Assistant | MessageRole::Tool => CoreMessageRole::Assistant,
104 |                 MessageRole::System => CoreMessageRole::System,
105 ~                 // Map Tool to Assistant for now
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:135:17
    |
132 |     #[instrument(skip(self))]
    |     ------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
135 |         let mut channels = self.channels.write();
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
135 ~         
136 +         let channel = self.channels.write().;
137 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:146:17
    |
132 |     #[instrument(skip(self))]
    |     ------------------------- temporary `subscriptions` is currently being dropped at the end of its contained scope
...
146 |         let mut subscriptions = self.subscriptions.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
146 ~         
147 +         let agent_subs = self.subscriptions.write().or_default();
148 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:166:17
    |
163 |     #[instrument(skip(self))]
    |     ------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
166 |         let mut channels = self.channels.write();
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
166 ~         
167 +         self.channels.write().;
168 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:172:17
    |
163 |     #[instrument(skip(self))]
    |     ------------------------- temporary `subscriptions` is currently being dropped at the end of its contained scope
...
172 |         let mut subscriptions = self.subscriptions.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
172 ~         
173 +         self.subscriptions.write().;
174 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:202:13
    |
192 |     #[instrument(skip(self, payload))]
    |     ---------------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
202 |         let channels = self.channels.read();
    |             ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
202 ~         
203 +         let channel = self.channels.read().;
204 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:230:17
    |
192 |     #[instrument(skip(self, payload))]
    |     ---------------------------------- temporary `message_queue` is currently being dropped at the end of its contained scope
...
230 |         let mut message_queue = self.message_queue.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
230 ~         
231 +         self.message_queue.write().;
232 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:300:17
    |
264 |     #[instrument(skip(self, payload))]
    |     ---------------------------------- temporary `message_queue` is currently being dropped at the end of its contained scope
...
300 |         let mut message_queue = self.message_queue.write();
    |                 ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
300 ~         
301 +         self.message_queue.write().;
302 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:320:13
    |
313 |     #[instrument(skip(self))]
    |     ------------------------- temporary `subscriptions` is currently being dropped at the end of its contained scope
...
320 |         let subscriptions = self.subscriptions.read();
    |             ^^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
320 ~         
321 +         let agent_channels = self.subscriptions.read().;
322 ~         
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-agents/src/state/sharing.rs:334:25
    |
334 | /                         if let Some(since_time) = since {
335 | |                             m.timestamp > since_time
336 | |                         } else {
337 | |                             true
338 | |                         }
    | |_________________________^ help: try: `since.map_or(true, |since_time| m.timestamp > since_time)`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:438:17
    |
419 |     #[instrument(skip(self))]
    |     ------------------------- temporary `channels` is currently being dropped at the end of its contained scope
...
438 |         let mut channels = self.channels.write();
    |                 ^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
438 ~         
439 +         self.channels.write().;
440 ~         
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/state/sharing.rs:423:17
    |
423 |         stages: Vec<String>, // Agent IDs in order
    |                 ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:471:17
    |
470 |           let (stages, current_index) = {
    |  _______________________________________-
471 | |             let channels = self.channels.read();
    | |                 ^^^^^^^^
472 | |             let channel = channels
473 | |                 .get(pipeline_id)
...   |
490 | |             (stages, current_index)
491 | |         };
    | |_________- temporary `channels` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
471 ~             
472 +             let channel = self.channels.read().;
473 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:515:17
    |
514 |       pub fn cleanup_expired_channels(&self) {
    |  ____________________________________________-
515 | |         let mut channels = self.channels.write();
    | |                 ^^^^^^^^
516 | |         let now = SystemTime::now();
...   |
548 | |     }
    | |_____- temporary `channels` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
534 ~             channels.remove(&channel_id);
535 +             drop(channels);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:537:21
    |
533 |           for channel_id in expired {
    |  ___________________________________-
534 | |             channels.remove(&channel_id);
...   |
537 | |             let mut message_queue = self.message_queue.write();
    | |                     ^^^^^^^^^^^^^
...   |
546 | |             info!("Cleaned up expired channel {}", channel_id);
547 | |         }
    | |_________- temporary `message_queue` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
537 ~             
538 +             self.message_queue.write().remove(&channel_id);
539 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/state/sharing.rs:541:21
    |
533 |           for channel_id in expired {
    |  ___________________________________-
534 | |             channels.remove(&channel_id);
...   |
541 | |             let mut subscriptions = self.subscriptions.write();
    | |                     ^^^^^^^^^^^^^
...   |
546 | |             info!("Cleaned up expired channel {}", channel_id);
547 | |         }
    | |_________- temporary `subscriptions` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
541 ~             
542 +             self.subscriptions.write().;
543 ~             
    |

warning: unused `self` argument
   --> llmspell-agents/src/state/sharing.rs:553:9
    |
553 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this argument (1 byte) is passed by reference, but would be more efficient if passed by value (limit: 8 byte)
   --> llmspell-agents/src/state/sharing.rs:554:18
    |
554 |         pattern: &SharingPattern,
    |                  ^^^^^^^^^^^^^^^ help: consider passing by value instead: `SharingPattern`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-agents/src/state/sharing.rs:565:13
    |
565 | /             SharingPattern::Pipeline => {
...   |
569 | |             _ => {
    | |____________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-agents/src/state/sharing.rs:569:13
    |
569 | /             _ => {
570 | |                 // Other patterns allow any participant to publish
571 | |             }
    | |_____________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:7:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
7 | / /// Base template trait and factory
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: this function has too many lines (124/100)
   --> llmspell-agents/src/templates/base.rs:140:5
    |
140 | /     async fn validate_parameter_value(
141 | |         &self,
142 | |         param_def: &ParameterDefinition,
143 | |         value: &serde_json::Value,
...   |
275 | |         Ok(())
276 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: redundant closure
   --> llmspell-agents/src/templates/base.rs:228:86
    |
228 |                         .map_or_else(|| value.as_array().map_or(0, |arr| arr.len()), |s| s.len());
    |                                                                                      ^^^^^^^^^^^ help: replace the closure with the method itself: `str::len`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-agents/src/templates/base.rs:228:68
    |
228 |                         .map_or_else(|| value.as_array().map_or(0, |arr| arr.len()), |s| s.len());
    |                                                                    ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::vec::Vec::len`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-agents/src/templates/base.rs:240:86
    |
240 |                         .map_or_else(|| value.as_array().map_or(0, |arr| arr.len()), |s| s.len());
    |                                                                                      ^^^^^^^^^^^ help: replace the closure with the method itself: `str::len`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-agents/src/templates/base.rs:240:68
    |
240 |                         .map_or_else(|| value.as_array().map_or(0, |arr| arr.len()), |s| s.len());
    |                                                                    ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::vec::Vec::len`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/base.rs:416:9
    |
416 | /         if let Some(template_ids) = self.templates_by_category.get(category) {
417 | |             template_ids
418 | |                 .iter()
419 | |                 .filter_map(|id| self.get_template(id))
...   |
422 | |             Vec::new()
423 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
416 ~         self.templates_by_category.get(category).map_or_else(Vec::new, |template_ids| template_ids
417 +                 .iter()
418 +                 .filter_map(|id| self.get_template(id))
419 +                 .collect())
    |

warning: this function has too many lines (145/100)
   --> llmspell-agents/src/templates/tool_agent.rs:60:5
    |
60  | /     pub fn new() -> Self {
61  | |         let metadata = TemplateMetadata {
62  | |             id: "tool_agent".to_string(),
63  | |             name: "Tool Agent".to_string(),
...   |
218 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-agents/src/templates/tool_agent.rs:340:9
    |
340 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:13:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
13| / /// Orchestrator agent template  
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: this function has too many lines (227/100)
   --> llmspell-agents/src/templates/orchestrator_agent.rs:104:5
    |
104 | /     pub fn new() -> Self {
105 | |         let metadata = TemplateMetadata {
106 | |             id: "orchestrator_agent".to_string(),
107 | |             name: "Orchestrator Agent".to_string(),
...   |
344 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-agents/src/templates/orchestrator_agent.rs:475:9
    |
475 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:16:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
16| / /// Monitor agent template
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: more than 3 bools in a struct
   --> llmspell-agents/src/templates/monitor_agent.rs:76:1
    |
76  | / pub struct MonitorAgentConfig {
77  | |     /// Monitoring scopes this agent covers
78  | |     pub monitoring_scopes: Vec<MonitoringScope>,
79  | |     /// Monitoring interval in seconds
...   |
102 | |     pub max_concurrent_tasks: usize,
103 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: this function has too many lines (154/100)
   --> llmspell-agents/src/templates/monitor_agent.rs:144:5
    |
144 | /     pub fn new() -> Self {
145 | |         let metadata = TemplateMetadata {
146 | |             id: "monitor_agent".to_string(),
147 | |             name: "Monitor Agent".to_string(),
...   |
400 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: unused `self` argument
   --> llmspell-agents/src/templates/monitor_agent.rs:508:9
    |
508 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:19:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
19| / /// Template customization API
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: first doc comment paragraph is too long
 --> llmspell-agents/src/templates/mod.rs:22:1
  |
2 | | //! ABOUTME: Provides schema, base traits, implementations, customization, and validation for agent templates
  | |_^
...
22| / /// Template validation utilities
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_long_first_doc_paragraph

warning: unused `self` argument
   --> llmspell-agents/src/templates/validation.rs:433:9
    |
433 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/validation.rs:463:30
    |
463 |                   let length = if let Some(s) = value.as_str() {
    |  ______________________________^
464 | |                     s.len()
465 | |                 } else if let Some(arr) = value.as_array() {
466 | |                     arr.len()
467 | |                 } else {
468 | |                     0
469 | |                 };
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
463 ~                 let length = value.as_str().map_or_else(|| if let Some(arr) = value.as_array() {
464 +                     arr.len()
465 +                 } else {
466 +                     0
467 ~                 }, |s| s.len());
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/templates/validation.rs:479:30
    |
479 |                   let length = if let Some(s) = value.as_str() {
    |  ______________________________^
480 | |                     s.len()
481 | |                 } else if let Some(arr) = value.as_array() {
482 | |                     arr.len()
483 | |                 } else {
484 | |                     0
485 | |                 };
    | |_________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
479 ~                 let length = value.as_str().map_or_else(|| if let Some(arr) = value.as_array() {
480 +                     arr.len()
481 +                 } else {
482 +                     0
483 ~                 }, |s| s.len());
    |

warning: docs for function which may panic missing `# Panics` section
  --> llmspell-agents/src/templates/mod.rs:51:1
   |
51 | pub fn create_builtin_templates() -> TemplateFactory {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: first possible panic found here
  --> llmspell-agents/src/templates/mod.rs:55:5
   |
55 | /     factory
56 | |         .register_template(Box::new(ToolAgentTemplate::new()))
57 | |         .unwrap();
   | |_________________^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this could be a `const fn`
   --> llmspell-agents/src/tool_context.rs:149:5
    |
149 | /     pub fn context_id(&self) -> &str {
150 | |         &self.context_id
151 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
    = note: `-W clippy::missing-const-for-fn` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::missing_const_for_fn)]`
help: make the function `const`
    |
149 |     pub const fn context_id(&self) -> &str {
    |         +++++

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/tool_context.rs:294:13
    |
290 |       pub async fn get_all_data(&self) -> HashMap<String, JsonValue> {
    |  ____________________________________________________________________-
291 | |         let mut all_data = HashMap::new();
...   |
294 | |         let tool_data = self.tool_data.read().await;
    | |             ^^^^^^^^^
...   |
303 | |         all_data
304 | |     }
    | |_____- temporary `tool_data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
294 ~         
295 +         self.tool_data.read().await.extend(tool_data.clone());
296 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/tool_context.rs:298:13
    |
290 |       pub async fn get_all_data(&self) -> HashMap<String, JsonValue> {
    |  ____________________________________________________________________-
291 | |         let mut all_data = HashMap::new();
...   |
298 | |         let shared_data = self.shared_data.read().await;
    | |             ^^^^^^^^^^^
...   |
303 | |         all_data
304 | |     }
    | |_____- temporary `shared_data` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
298 ~         
299 +         self.shared_data.read().await.;
300 ~         
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/tool_discovery.rs:151:9
    |
151 | /         if let Some(registry_info) = self.registry.get_tool_info(name).await {
152 | |             Ok(Some(self.convert_registry_info(&registry_info)))
153 | |         } else {
154 | |             Ok(None)
155 | |         }
    | |_________^ help: try: `(self.registry.get_tool_info(name).await).map_or_else(|| Ok(None), |registry_info| Ok(Some(self.convert_registry_info(&registry_info))))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: unused `self` argument
   --> llmspell-agents/src/tool_discovery.rs:296:9
    |
296 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_discovery.rs:318:32
    |
318 |     fn string_to_tool_category(&self, category_str: &str) -> ToolCategory {
    |                                ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_discovery.rs:333:33
    |
333 |     fn string_to_security_level(&self, level_str: &str) -> Option<SecurityLevel> {
    |                                 ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
198 ~             Self::InvocationFailed { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:197:13
    |
197 |             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
197 ~             Self::RegistrationFailed { .. } | Self::ParameterValidation { .. } => ErrorSeverity::Medium,
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
200 ~             Self::Timeout { .. } => ErrorSeverity::Medium,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:197:13
    |
197 |             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
197 ~             Self::RegistrationFailed { .. } | Self::Timeout { .. } => ErrorSeverity::Medium,
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
201 ~             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:200:13
    |
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
200 ~             Self::ParameterValidation { .. } | Self::Timeout { .. } => ErrorSeverity::Medium,
201 ~             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:202:13
    |
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
200 |             Self::Timeout { .. } => ErrorSeverity::Medium,
201 ~             Self::CompositionFailed { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
199 ~             Self::InvocationFailed { .. } | Self::CompositionFailed { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
201 |             Self::Timeout { .. } => ErrorSeverity::Medium,
202 ~             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:197:13
    |
197 |             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
197 ~             Self::RegistrationFailed { .. } | Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
203 ~             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:200:13
    |
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
200 ~             Self::ParameterValidation { .. } | Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
201 |             Self::Timeout { .. } => ErrorSeverity::Medium,
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
203 ~             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:201:13
    |
201 |             Self::Timeout { .. } => ErrorSeverity::Medium,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
201 ~             Self::Timeout { .. } | Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
203 ~             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:198:13
    |
198 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
198 ~             Self::DiscoveryFailed { .. } | Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
...
203 |             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
204 ~             Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:205:13
    |
205 |             Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
203 |             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
204 ~             Self::ResourceLimitExceeded { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
199 ~             Self::InvocationFailed { .. } | Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
...
204 |             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
205 ~             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:202:13
    |
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
202 ~             Self::CompositionFailed { .. } | Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
203 |             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
204 |             Self::ContextPropagationFailed { .. } => ErrorSeverity::Low,
205 ~             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:207:13
    |
207 |             Self::DependencyResolution { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
196 ~             Self::RegistrationFailed { .. } => ErrorSeverity::Medium,
197 |             Self::DiscoveryFailed { .. } => ErrorSeverity::Low,
...
205 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
206 ~             Self::DependencyResolution { .. } | Self::ToolNotFound { .. } => ErrorSeverity::High,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:199:13
    |
199 |             Self::InvocationFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
199 ~             Self::InvocationFailed { .. } | Self::DependencyResolution { .. } => ErrorSeverity::High,
200 |             Self::ParameterValidation { .. } => ErrorSeverity::Medium,
...
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
207 ~             Self::StateCorruption { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:202:13
    |
202 |             Self::CompositionFailed { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
202 ~             Self::CompositionFailed { .. } | Self::DependencyResolution { .. } => ErrorSeverity::High,
203 |             Self::AgentWrappingFailed { .. } => ErrorSeverity::Medium,
...
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
207 ~             Self::StateCorruption { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:205:13
    |
205 |             Self::ResourceLimitExceeded { .. } => ErrorSeverity::High,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
205 ~             Self::ResourceLimitExceeded { .. } | Self::DependencyResolution { .. } => ErrorSeverity::High,
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
207 ~             Self::StateCorruption { .. } => ErrorSeverity::Critical,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:206:13
    |
206 |             Self::SecurityViolation { .. } => ErrorSeverity::Critical,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
206 ~             Self::SecurityViolation { .. } | Self::StateCorruption { .. } => ErrorSeverity::Critical,
207 |             Self::DependencyResolution { .. } => ErrorSeverity::High,
208 ~             }
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:217:13
    |
217 |             Self::RegistrationFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
216 -             Self::ToolNotFound { .. } => false,
217 -             Self::RegistrationFailed { .. } => false,
216 +             Self::RegistrationFailed { .. } | Self::ToolNotFound { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::InvocationFailed { .. } => true,
219 ~             Self::ParameterValidation { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::ParameterValidation { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
220 ~             Self::Timeout { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::ParameterValidation { .. } => true,
220 ~             Self::Timeout { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::Timeout { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 ~             Self::CompositionFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::Timeout { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 ~             Self::CompositionFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::Timeout { .. } => true,
221 ~             Self::CompositionFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::CompositionFailed { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 |             Self::Timeout { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::CompositionFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
221 |             Self::Timeout { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::CompositionFailed { .. } => true,
221 |             Self::Timeout { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::CompositionFailed { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:223:13
    |
223 |             Self::AgentWrappingFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
216 ~             Self::RegistrationFailed { .. } => false,
217 |             Self::DiscoveryFailed { .. } => true,
...
221 |             Self::CompositionFailed { .. } => true,
222 ~             Self::AgentWrappingFailed { .. } | Self::ToolNotFound { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:217:13
    |
217 |             Self::RegistrationFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
217 ~             Self::RegistrationFailed { .. } | Self::AgentWrappingFailed { .. } => false,
218 |             Self::DiscoveryFailed { .. } => true,
...
222 |             Self::CompositionFailed { .. } => true,
223 ~             Self::ContextPropagationFailed { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::ContextPropagationFailed { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
...
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::ContextPropagationFailed { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
...
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::ContextPropagationFailed { .. } => true,
221 |             Self::Timeout { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::ContextPropagationFailed { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:222:13
    |
222 |             Self::CompositionFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
222 ~             Self::CompositionFailed { .. } | Self::ContextPropagationFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 ~             Self::ResourceLimitExceeded { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
...
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
...
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::ResourceLimitExceeded { .. } => true,
221 |             Self::Timeout { .. } => true,
...
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::ResourceLimitExceeded { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:222:13
    |
222 |             Self::CompositionFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
222 ~             Self::CompositionFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
224 |             Self::ContextPropagationFailed { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:224:13
    |
224 |             Self::ContextPropagationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
224 ~             Self::ContextPropagationFailed { .. } | Self::ResourceLimitExceeded { .. } => true,
225 ~             Self::SecurityViolation { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:226:13
    |
226 |             Self::SecurityViolation { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
216 ~             Self::RegistrationFailed { .. } => false,
217 |             Self::DiscoveryFailed { .. } => true,
...
224 |             Self::ResourceLimitExceeded { .. } => true,
225 ~             Self::SecurityViolation { .. } | Self::ToolNotFound { .. } => false,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:217:13
    |
217 |             Self::RegistrationFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
217 ~             Self::RegistrationFailed { .. } | Self::SecurityViolation { .. } => false,
218 |             Self::DiscoveryFailed { .. } => true,
...
225 |             Self::ResourceLimitExceeded { .. } => true,
226 ~             Self::DependencyResolution { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:223:13
    |
223 |             Self::AgentWrappingFailed { .. } => false,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
223 ~             Self::AgentWrappingFailed { .. } | Self::SecurityViolation { .. } => false,
224 |             Self::ContextPropagationFailed { .. } => true,
225 |             Self::ResourceLimitExceeded { .. } => true,
226 ~             Self::DependencyResolution { .. } => true,
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:218:13
    |
218 |             Self::DiscoveryFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
218 ~             Self::DiscoveryFailed { .. } | Self::DependencyResolution { .. } => true,
219 |             Self::InvocationFailed { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:219:13
    |
219 |             Self::InvocationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
219 ~             Self::InvocationFailed { .. } | Self::DependencyResolution { .. } => true,
220 |             Self::ParameterValidation { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:220:13
    |
220 |             Self::ParameterValidation { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
220 ~             Self::ParameterValidation { .. } | Self::DependencyResolution { .. } => true,
221 |             Self::Timeout { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:221:13
    |
221 |             Self::Timeout { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
221 ~             Self::Timeout { .. } | Self::DependencyResolution { .. } => true,
222 |             Self::CompositionFailed { .. } => true,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:222:13
    |
222 |             Self::CompositionFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
222 ~             Self::CompositionFailed { .. } | Self::DependencyResolution { .. } => true,
223 |             Self::AgentWrappingFailed { .. } => false,
...
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:224:13
    |
224 |             Self::ContextPropagationFailed { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
224 ~             Self::ContextPropagationFailed { .. } | Self::DependencyResolution { .. } => true,
225 |             Self::ResourceLimitExceeded { .. } => true,
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/tool_errors.rs:225:13
    |
225 |             Self::ResourceLimitExceeded { .. } => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
225 ~             Self::ResourceLimitExceeded { .. } | Self::DependencyResolution { .. } => true,
226 |             Self::SecurityViolation { .. } => false,
227 ~             Self::StateCorruption {
    |

warning: casting `u128` to `u64` may truncate the value
   --> llmspell-agents/src/tool_errors.rs:329:35
    |
329 |                 duration_ms: Some(duration.as_millis() as u64),
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
    = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
    |
329 -                 duration_ms: Some(duration.as_millis() as u64),
329 +                 duration_ms: Some(u64::try_from(duration.as_millis())),
    |

warning: this function has too many lines (121/100)
   --> llmspell-agents/src/tool_errors.rs:358:5
    |
358 | /     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
359 | |         match self {
360 | |             Self::ToolNotFound {
361 | |                 tool_name,
...   |
480 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-agents/src/tool_errors.rs:574:5
    |
574 | /     pub async fn handle_error(
575 | |         &self,
576 | |         error: ToolIntegrationError,
577 | |         context: &mut ErrorContext,
578 | |     ) -> Result<Option<JsonValue>> {
    | |__________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: more than 3 bools in a struct
  --> llmspell-agents/src/tool_invocation.rs:45:1
   |
45 | / pub struct InvocationConfig {
46 | |     /// Maximum execution time per tool call
47 | |     pub max_execution_time: Duration,
48 | |     /// Whether to validate parameters before invocation
...  |
59 | |     pub custom_validators: Vec<String>,
60 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: unused `self` argument
   --> llmspell-agents/src/tool_invocation.rs:340:9
    |
340 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: this could be rewritten as `let...else`
   --> llmspell-agents/src/tool_manager.rs:292:9
    |
292 | /         let registry_info = match self.registry.get_tool_info(tool_name).await {
293 | |             Some(info) => info,
294 | |             None => return Ok(None),
295 | |         };
    | |__________^ help: consider writing: `let Some(registry_info) = self.registry.get_tool_info(tool_name).await else { return Ok(None) };`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_let_else

warning: item in documentation is missing backticks
   --> llmspell-agents/src/tool_manager.rs:315:31
    |
315 |     /// - Any step fails with ErrorStrategy::Fail
    |                               ^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
315 -     /// - Any step fails with ErrorStrategy::Fail
315 +     /// - Any step fails with `ErrorStrategy::Fail`
    |

warning: used underscore-prefixed binding
   --> llmspell-agents/src/tool_manager.rs:369:56
    |
369 | ...                   return Err(_last_error);
    |                                  ^^^^^^^^^^^
    |
note: binding is defined here
   --> llmspell-agents/src/tool_manager.rs:348:33
    |
348 | ...                   let mut _last_error = error;
    |                           ^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding
    = note: `-W clippy::used-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::used_underscore_binding)]`

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/tool_manager.rs:384:9
    |
384 | /         if let Some(final_output) = results.last() {
385 | |             Ok(final_output.clone())
386 | |         } else {
387 | |             Ok(AgentOutput::text(
388 | |                 "Composition completed with no output".to_string(),
389 | |             ))
390 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
384 ~         results.last().map_or_else(|| Ok(AgentOutput::text(
385 +                 "Composition completed with no output".to_string(),
386 +             )), |final_output| Ok(final_output.clone()))
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-agents/src/tool_manager.rs:415:5
    |
415 | /     fn prepare_step_parameters(
416 | |         &self,
417 | |         base_parameters: &JsonValue,
418 | |         context_mode: &ContextMode,
...   |
442 | |         Ok(parameters)
443 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
421 -     ) -> Result<JsonValue> {
421 +     ) -> serde_json::Value {
    |
help: ...and then change returning expressions
    |
442 -         Ok(parameters)
442 +         parameters
    |

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:447:9
    |
447 |         &self,
    |         ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:465:35
    |
465 |     fn registry_info_to_tool_info(&self, registry_info: &RegistryToolInfo) -> ToolInfo {
    |                                   ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:486:32
    |
486 |     fn string_to_tool_category(&self, category_str: &str) -> ToolCategory {
    |                                ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: unused `self` argument
   --> llmspell-agents/src/tool_manager.rs:501:33
    |
501 |     fn string_to_security_level(&self, level_str: &str) -> Option<SecurityLevel> {
    |                                 ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self

warning: more than 3 bools in a struct
  --> llmspell-agents/src/testing/framework.rs:26:1
   |
26 | / pub struct TestConfig {
27 | |     /// Maximum test duration before timeout
28 | |     pub timeout: Duration,
29 | |     /// Enable debug logging
...  |
38 | |     pub metadata: HashMap<String, serde_json::Value>,
39 | | }
   | |_^
   |
   = help: consider using a state machine or refactoring bools into two-variant enums
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools

warning: this method could have a `#[must_use]` attribute
   --> llmspell-agents/src/testing/framework.rs:125:5
    |
125 |     pub fn new(config: TestConfig) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn new(config: TestConfig) -> Self`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:158:5
    |
158 | /     pub async fn run_test<F, Fut>(
159 | |         &self,
160 | |         agent_config: AgentConfig,
161 | |         test_fn: F,
...   |
164 | |         F: FnOnce(Arc<dyn Agent>) -> Fut,
165 | |         Fut: std::future::Future<Output = Result<()>>,
    | |______________________________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:187:29
    |
187 |             let mut guard = self.interactions.lock().unwrap();
    |                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:208:5
    |
208 | /     pub async fn execute_and_record(
209 | |         &self,
210 | |         agent: Arc<dyn Agent>,
211 | |         input: AgentInput,
212 | |         context: ExecutionContext,
213 | |     ) -> Result<AgentOutput, LLMSpellError> {
    | |___________________________________________^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:231:36
    |
231 |             let mut interactions = self.interactions.lock().unwrap();
    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:274:5
    |
274 |     pub fn record_resource_usage(&self, memory: usize, cpu_time: Duration, tool_calls: usize) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:275:25
    |
275 |         let mut usage = self.resource_usage.lock().unwrap();
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:542:5
    |
542 |     pub fn new(receiver: broadcast::Receiver<LifecycleEvent>) -> Self {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:552:17
    |
552 |                 events_clone.lock().unwrap().push(event);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:564:5
    |
564 |     pub fn get_events(&self) -> Vec<LifecycleEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:565:9
    |
565 |         self.events.lock().unwrap().clone()
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:569:5
    |
569 |     pub fn clear(&self) {
    |     ^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:570:9
    |
570 |         self.events.lock().unwrap().clear();
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/framework.rs:575:5
    |
575 |     pub fn find_events(&self, event_type: LifecycleEventType) -> Vec<LifecycleEvent> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/framework.rs:576:9
    |
576 | /         self.events
577 | |             .lock()
578 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-agents/src/testing/framework.rs:575:43
    |
575 |     pub fn find_events(&self, event_type: LifecycleEventType) -> Vec<LifecycleEvent> {
    |                                           ^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&LifecycleEventType`
    |
help: or consider marking this type as `Copy`
   --> llmspell-agents/src/lifecycle/events.rs:17:1
    |
17  | pub enum LifecycleEventType {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: calling `StateMachineConfig::default()` is more clear than this expression
   --> llmspell-agents/src/testing/mocks.rs:118:70
    |
118 |             AgentStateMachine::new(config.agent_config.name.clone(), Default::default());
    |                                                                      ^^^^^^^^^^^^^^^^^^ help: try: `StateMachineConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: calling `ToolUsageStats::default()` is more clear than this expression
   --> llmspell-agents/src/testing/mocks.rs:527:31
    |
527 |             tool_usage_stats: Default::default(),
    |                               ^^^^^^^^^^^^^^^^^^ help: try: `ToolUsageStats::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/testing/mocks.rs:556:17
    |
460 | #[async_trait]
    | -------------- temporary `conversation` is currently being dropped at the end of its contained scope
...
556 |         let mut conversation = self.conversation.lock().unwrap();
    |                 ^^^^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
579 ~             });
580 +             drop(conversation);
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/testing/mocks.rs:567:17
    |
567 | /                 llmspell_state_persistence::agent_state::MessageRole::Assistant => {
568 | |                     llmspell_core::traits::agent::MessageRole::Assistant
569 | |                 }
    | |_________________^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
567 ~                 llmspell_state_persistence::agent_state::MessageRole::Assistant | llmspell_state_persistence::agent_state::MessageRole::Tool => {
568 |                     llmspell_core::traits::agent::MessageRole::Assistant
569 |                 }
570 ~                 // Map Tool to Assistant
    |

warning: docs for function which may panic missing `# Panics` section
   --> llmspell-agents/src/testing/mocks.rs:621:5
    |
621 |     pub fn set_response(&self, input_key: &str, output: ToolOutput) {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: first possible panic found here
   --> llmspell-agents/src/testing/mocks.rs:622:9
    |
622 | /         self.responses
623 | |             .lock()
624 | |             .unwrap()
    | |_____________________^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_panics_doc

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-agents/src/testing/mocks.rs:684:13
    |
649 | #[async_trait]
    | -------------- temporary `responses` is currently being dropped at the end of its contained scope
...
684 |         let responses = self.responses.lock().unwrap();
    |             ^^^^^^^^^
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
684 ~         
685 +         let tool_output = self.responses.lock().unwrap().;
686 |
687 ~         
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/testing/mocks.rs:686:27
    |
686 |           let tool_output = if let Some(response) = responses.get(&input_str) {
    |  ___________________________^
687 | |             response.clone()
688 | |         } else {
...   |
701 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
686 ~         let tool_output = responses.get(&input_str).map_or_else(|| ToolOutput {
687 +                 success: true,
688 +                 data: serde_json::json!({
689 +                     "mock": true,
690 +                     "tool": self.metadata.name,
691 +                     "input": params,
692 +                     "timestamp": chrono::Utc::now().to_rfc3339(),
693 +                 }),
694 +                 error: None,
695 +                 execution_time_ms: Some(10),
696 ~             }, |response| response.clone());
    |

warning: this match arm has an identical body to another arm
   --> llmspell-agents/src/testing/scenarios.rs:137:13
    |
137 |             (Self::Success, Ok(_)) => true,
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: try changing either arm body
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
help: or try merging the arm patterns and removing the obsolete arm
    |
136 -             (Self::Error, Err(_)) => true,
137 -             (Self::Success, Ok(_)) => true,
136 +             (Self::Success, Ok(_)) | (Self::Error, Err(_)) => true,
    |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-agents/src/testing/utils.rs:190:9
    |
190 | /         match tokio::time::timeout(duration, future).await {
191 | |             Ok(result) => Ok(result),
192 | |             Err(_) => Err(format!("Operation timed out after {duration:?}")),
193 | |         }
    | |_________^ help: try: `(tokio::time::timeout(duration, future).await).map_or_else(|_| Err(format!("Operation timed out after {duration:?}")), |result| Ok(result))`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: this argument is a mutable reference, but not used mutably
   --> llmspell-agents/src/tool_manager.rs:398:18
    |
398 |         context: &mut ExecutionContext,
    |                  ^^^^^^^^^^^^^^^^^^^^^ help: consider changing to: `&ExecutionContext`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_ref_mut
    = note: `-W clippy::needless-pass-by-ref-mut` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::needless_pass_by_ref_mut)]`

warning: `llmspell-agents` (lib) generated 384 warnings (run `cargo clippy --fix --lib -p llmspell-agents` to apply 61 suggestions)
    Checking llmspell-bridge v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-bridge)
warning: very complex type used. Consider factoring parts into `type` definitions
   --> llmspell-bridge/src/engine/factory.rs:391:25
    |
391 | static PLUGIN_REGISTRY: LazyLock<Arc<RwLock<HashMap<String, Box<dyn ScriptEnginePlugin>>>>> =
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#type_complexity
    = note: `-W clippy::type-complexity` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::type_complexity)]`

warning: this function has too many lines (260/100)
   --> llmspell-bridge/src/providers_discovery.rs:44:5
    |
44  | /     pub fn new() -> Self {
45  | |         let mut provider_types = HashMap::new();
...   |
326 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:394:5
    |
394 | /     pub fn javascript_config(mut self, config: JSConfig) -> Self {
395 | |         self.config.engines.javascript = config;
396 | |         self
397 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
    = note: `-W clippy::missing-const-for-fn` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::missing_const_for_fn)]`
help: make the function `const`
    |
394 |     pub const fn javascript_config(mut self, config: JSConfig) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:491:5
    |
491 | /     pub fn max_concurrent_scripts(mut self, max: usize) -> Self {
492 | |         self.config.max_concurrent_scripts = max;
493 | |         self
494 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
491 |     pub const fn max_concurrent_scripts(mut self, max: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:498:5
    |
498 | /     pub fn script_timeout_seconds(mut self, timeout: u64) -> Self {
499 | |         self.config.script_timeout_seconds = timeout;
500 | |         self
501 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
498 |     pub const fn script_timeout_seconds(mut self, timeout: u64) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:505:5
    |
505 | /     pub fn enable_streaming(mut self, enable: bool) -> Self {
506 | |         self.config.enable_streaming = enable;
507 | |         self
508 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
505 |     pub const fn enable_streaming(mut self, enable: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/runtime.rs:512:5
    |
512 | /     pub fn security(mut self, security: SecurityConfig) -> Self {
513 | |         self.config.security = security;
514 | |         self
515 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
512 |     pub const fn security(mut self, security: SecurityConfig) -> Self {
    |         +++++

warning: more than 3 bools in a struct
   --> llmspell-bridge/src/runtime.rs:575:1
    |
575 | / pub struct StatePersistenceConfig {
576 | |     /// Enable state persistence
577 | |     pub enabled: bool,
578 | |     /// Backend type for storage (memory, file, redis, etc.)
...   |
591 | |     pub backup: Option<BackupConfig>,
592 | | }
    | |_^
    |
    = help: consider using a state machine or refactoring bools into two-variant enums
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_excessive_bools
    = note: `-W clippy::struct-excessive-bools` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_excessive_bools)]`

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/storage.rs:2:78
  |
2 | //! ABOUTME: Provides discovery of available storage backends (Memory, Sled, RocksDB)
  |                                                                              ^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
2 - //! ABOUTME: Provides discovery of available storage backends (Memory, Sled, RocksDB)
2 + //! ABOUTME: Provides discovery of available storage backends (Memory, Sled, `RocksDB`)
  |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:252:58
    |
252 |     /// Performance optimization preset (fast, balanced, storage_optimized)
    |                                                          ^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
252 -     /// Performance optimization preset (fast, balanced, storage_optimized)
252 +     /// Performance optimization preset (fast, balanced, `storage_optimized`)
    |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:269:34
    |
269 |     /// Create a new builder for StorageConfig
    |                                  ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
269 -     /// Create a new builder for StorageConfig
269 +     /// Create a new builder for `StorageConfig`
    |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:276:17
    |
276 | /// Builder for StorageConfig
    |                 ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
276 - /// Builder for StorageConfig
276 + /// Builder for `StorageConfig`
    |

warning: this could be a `const fn`
   --> llmspell-bridge/src/storage.rs:312:5
    |
312 | /     pub fn enable_compression(mut self, enable: bool) -> Self {
313 | |         self.config.enable_compression = enable;
314 | |         self
315 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
312 |     pub const fn enable_compression(mut self, enable: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/storage.rs:319:5
    |
319 | /     pub fn enable_encryption(mut self, enable: bool) -> Self {
320 | |         self.config.enable_encryption = enable;
321 | |         self
322 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
319 |     pub const fn enable_encryption(mut self, enable: bool) -> Self {
    |         +++++

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/storage.rs:358:25
    |
358 |     /// Build the final StorageConfig
    |                         ^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
358 -     /// Build the final StorageConfig
358 +     /// Build the final `StorageConfig`
    |

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/tools.rs:57:15
   |
57 |     registry: Arc<ComponentRegistry>,
   |               ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value
   = note: `-W clippy::needless-pass-by-value` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::needless_pass_by_value)]`

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/tools.rs:74:15
   |
74 |     registry: Arc<ComponentRegistry>,
   |               ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/tools.rs:92:15
   |
92 |     registry: Arc<ComponentRegistry>,
   |               ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/tools.rs:109:37
    |
109 | pub fn get_all_tool_names(registry: Arc<ComponentRegistry>) -> Vec<String> {
    |                                     ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/tools.rs:115:35
    |
115 | pub fn get_tool_by_name(registry: Arc<ComponentRegistry>, name: &str) -> Option<Arc<dyn Tool>> {
    |                                   ^^^^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<ComponentRegistry>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:133:33
    |
133 |         HashCalculatorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: calling `TextManipulatorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:137:34
    |
137 |         TextManipulatorTool::new(Default::default())
    |                                  ^^^^^^^^^^^^^^^^^^ help: try: `TextManipulatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:140:32
    |
140 |         UuidGeneratorTool::new(Default::default())
    |                                ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `CsvAnalyzerConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:150:30
    |
150 |         CsvAnalyzerTool::new(Default::default())
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `CsvAnalyzerConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `JsonProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:153:32
    |
153 |         JsonProcessorTool::new(Default::default())
    |                                ^^^^^^^^^^^^^^^^^^ help: try: `JsonProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `GraphQLConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:156:31
    |
156 |         GraphQLQueryTool::new(Default::default())
    |                               ^^^^^^^^^^^^^^^^^^ help: try: `GraphQLConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:159:30
    |
159 |         HttpRequestTool::new(Default::default())
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileConverterConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:177:40
    |
177 |         move || FileConverterTool::new(Default::default(), file_sandbox_converter),
    |                                        ^^^^^^^^^^^^^^^^^^ help: try: `FileConverterConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileOperationsConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:181:33
    |
181 |         FileOperationsTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileSearchConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:190:37
    |
190 |         move || FileSearchTool::new(Default::default(), file_sandbox_search),
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `FileSearchConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileWatcherConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:199:38
    |
199 |         move || FileWatcherTool::new(Default::default(), file_sandbox_watcher),
    |                                      ^^^^^^^^^^^^^^^^^^ help: try: `FileWatcherConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `EnvironmentReaderConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:209:36
    |
209 |         EnvironmentReaderTool::new(Default::default())
    |                                    ^^^^^^^^^^^^^^^^^^ help: try: `EnvironmentReaderConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ProcessExecutorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:212:34
    |
212 |         ProcessExecutorTool::new(Default::default())
    |                                  ^^^^^^^^^^^^^^^^^^ help: try: `ProcessExecutorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ServiceCheckerConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:215:33
    |
215 |         ServiceCheckerTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `ServiceCheckerConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `SystemMonitorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:218:32
    |
218 |         SystemMonitorTool::new(Default::default())
    |                                ^^^^^^^^^^^^^^^^^^ help: try: `SystemMonitorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `AudioProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:228:33
    |
228 |         AudioProcessorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `AudioProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ImageProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:231:33
    |
231 |         ImageProcessorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `ImageProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `VideoProcessorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:234:33
    |
234 |         VideoProcessorTool::new(Default::default())
    |                                 ^^^^^^^^^^^^^^^^^^ help: try: `VideoProcessorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `WebSearchConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:244:28
    |
244 |         WebSearchTool::new(Default::default())
    |                            ^^^^^^^^^^^^^^^^^^ help: try: `WebSearchConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `WebScraperConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:253:29
    |
253 |         WebScraperTool::new(Default::default())
    |                             ^^^^^^^^^^^^^^^^^^ help: try: `WebScraperConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `EmailSenderConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:267:30
    |
267 |         EmailSenderTool::new(Default::default())
    |                              ^^^^^^^^^^^^^^^^^^ help: try: `EmailSenderConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `DatabaseConnectorConfig::default()` is more clear than this expression
   --> llmspell-bridge/src/tools.rs:270:36
    |
270 |         DatabaseConnectorTool::new(Default::default())
    |                                    ^^^^^^^^^^^^^^^^^^ help: try: `DatabaseConnectorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: this could be a `const fn`
   --> llmspell-bridge/src/tools.rs:303:5
    |
303 | /     pub fn new(registry: Arc<ComponentRegistry>) -> Self {
304 | |         Self { registry }
305 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
303 |     pub const fn new(registry: Arc<ComponentRegistry>) -> Self {
    |         +++++

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/event_bridge.rs:53:29
   |
53 |     /// Returns an error if EventBridge initialization fails
   |                             ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
53 -     /// Returns an error if EventBridge initialization fails
53 +     /// Returns an error if `EventBridge` initialization fails
   |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-bridge/src/event_bridge.rs:210:5
    |
210 |     pub fn get_stats(&self) -> serde_json::Value {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_stats(&self) -> serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate
    = note: `-W clippy::must-use-candidate` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::must_use_candidate)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/agent_global.rs:97:26
   |
97 |                 message: format!("Failed to inject Agent global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
97 -                 message: format!("Failed to inject Agent global for JavaScript: {}", e),
97 +                 message: format!("Failed to inject Agent global for JavaScript: {e}"),
   |

warning: this function has too many lines (291/100)
   --> llmspell-bridge/src/globals/event_global.rs:55:5
    |
55  | /     fn inject_lua(&self, lua: &mlua::Lua, context: &GlobalContext) -> Result<(), LLMSpellError> {
56  | |         use crate::lua::sync_utils::block_on_async;
57  | |         use std::time::Duration;
...   |
410 | |         Ok(())
411 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this could be a `const fn`
   --> llmspell-bridge/src/globals/injection.rs:199:5
    |
199 | /     pub fn get_metrics(&self) -> &InjectionMetrics {
200 | |         self.registry.metrics()
201 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
199 |     pub const fn get_metrics(&self) -> &InjectionMetrics {
    |         +++++

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-bridge/src/globals/session_infrastructure.rs:16:1
   |
16 | / pub async fn get_or_create_session_infrastructure(
17 | |     context: &GlobalContext,
18 | |     config: &SessionConfig,
19 | | ) -> Result<SessionInfrastructure> {
   | |__________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc
   = note: `-W clippy::missing-errors-doc` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::missing_errors_doc)]`

warning: casting `u64` to `i64` may wrap around the value
  --> llmspell-bridge/src/globals/session_infrastructure.rs:42:13
   |
42 |             config.session_timeout_seconds as i64,
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap
   = note: `-W clippy::cast-possible-wrap` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_wrap)]`

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/session_infrastructure.rs:99:1
    |
99  | / fn get_or_create_hook_registry(context: &GlobalContext) -> Result<Arc<HookRegistry>> {
100 | |     if let Some(registry) = context.get_bridge::<HookRegistry>("hook_registry") {
101 | |         return Ok(registry);
...   |
107 | |     Ok(registry)
108 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
    = note: `-W clippy::unnecessary-wraps` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unnecessary_wraps)]`
help: remove `Result` from the return type...
    |
99  - fn get_or_create_hook_registry(context: &GlobalContext) -> Result<Arc<HookRegistry>> {
99  + fn get_or_create_hook_registry(context: &GlobalContext) -> std::sync::Arc<llmspell_hooks::HookRegistry> {
    |
help: ...and then change returning expressions
    |
101 ~         return registry;
102 |     }
...
106 |     context.set_bridge("hook_registry", registry.clone());
107 ~     registry
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/session_infrastructure.rs:111:1
    |
111 | / fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
112 | |     if let Some(executor) = context.get_bridge::<HookExecutor>("hook_executor") {
113 | |         return Ok(executor);
...   |
119 | |     Ok(executor)
120 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
111 - fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
111 + fn get_or_create_hook_executor(context: &GlobalContext) -> std::sync::Arc<llmspell_hooks::HookExecutor> {
    |
help: ...and then change returning expressions
    |
113 ~         return executor;
114 |     }
...
118 |     context.set_bridge("hook_executor", executor.clone());
119 ~     executor
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/session_infrastructure.rs:123:1
    |
123 | / fn get_or_create_event_bus(context: &GlobalContext) -> Result<Arc<EventBus>> {
124 | |     if let Some(event_bus) = context.get_bridge::<EventBus>("event_bus") {
125 | |         return Ok(event_bus);
...   |
131 | |     Ok(event_bus)
132 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
123 - fn get_or_create_event_bus(context: &GlobalContext) -> Result<Arc<EventBus>> {
123 + fn get_or_create_event_bus(context: &GlobalContext) -> std::sync::Arc<llmspell_events::EventBus> {
    |
help: ...and then change returning expressions
    |
125 ~         return event_bus;
126 |     }
...
130 |     context.set_bridge("event_bus", event_bus.clone());
131 ~     event_bus
    |

warning: this function has too many lines (555/100)
   --> llmspell-bridge/src/globals/state_global.rs:144:5
    |
144 | /     fn inject_lua(&self, lua: &mlua::Lua, _context: &GlobalContext) -> Result<(), LLMSpellError> {
145 | |         use crate::lua::sync_utils::block_on_async;
146 | |
147 | |         let state_manager = self.state_manager.clone();
...   |
794 | |         Ok(())
795 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/globals/state_global.rs:268:33
    |
265 |                       } else {
    |  ____________________________-
266 | |                         // Fallback to in-memory storage
267 | |                         let full_key = format!("{scope_str}:{key}");
268 | |                         let mut state = set_fallback_state.write();
    | |                                 ^^^^^
269 | |                         state.insert(full_key, json_value);
270 | |                         Ok(())
271 | |                     }
    | |_____________________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
    = note: `-W clippy::significant-drop-tightening` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::significant_drop_tightening)]`
help: merge the temporary construction with its single usage
    |
268 ~                         
269 +                         set_fallback_state.write().insert(full_key, json_value);
270 ~                         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/globals/state_global.rs:323:29
    |
320 |                   } else {
    |  ________________________-
321 | |                     // Fallback to in-memory storage
322 | |                     let full_key = format!("{scope_str}:{key}");
323 | |                     let mut state = delete_fallback_state.write();
    | |                             ^^^^^
324 | |                     state.remove(&full_key);
325 | |                     Ok(())
326 | |                 }
    | |_________________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
323 ~                     
324 +                     delete_fallback_state.write().remove(&full_key);
325 ~                     
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/globals/state_global.rs:368:25
    |
366 |                   } else {
    |  ________________________-
367 | |                     // Fallback to in-memory storage
368 | |                     let state = list_fallback_state.read();
    | |                         ^^^^^
369 | |                     let prefix = format!("{scope_str}:");
...   |
380 | |                     Ok(table)
381 | |                 }
    | |_________________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
368 ~                     
369 +                     let keys = list_fallback_state.read().collect();
370 |                     let prefix = format!("{scope_str}:");
371 ~                     
    |

warning: casting `u64` to `i64` may wrap around the value
   --> llmspell-bridge/src/globals/state_global.rs:660:37
    |
660 | / ...                   backup
661 | | ...                       .created_at
662 | | ...                       .duration_since(std::time::UNIX_EPOCH)
663 | | ...                       .unwrap()
664 | | ...                       .as_secs() as i64,
    | |___________________________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-bridge/src/globals/state_infrastructure.rs:20:1
   |
20 | / pub async fn get_or_create_state_infrastructure(
21 | |     context: &GlobalContext,
22 | |     config: &StatePersistenceConfig,
23 | | ) -> Result<StateInfrastructure> {
   | |________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (119/100)
   --> llmspell-bridge/src/globals/state_infrastructure.rs:20:1
    |
20  | / pub async fn get_or_create_state_infrastructure(
21  | |     context: &GlobalContext,
22  | |     config: &StatePersistenceConfig,
23  | | ) -> Result<StateInfrastructure> {
...   |
177 | |     })
178 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/globals/state_infrastructure.rs:123:29
    |
123 |           let backup_config = if let Some(ref backup_cfg) = config.backup {
    |  _____________________________^
124 | |             // Convert from runtime BackupConfig to state-persistence BackupConfig
125 | |             llmspell_state_persistence::config::BackupConfig {
126 | |                 backup_dir: std::path::PathBuf::from(
...   |
146 | |             llmspell_state_persistence::config::BackupConfig::default()
147 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
    = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
    = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`
help: try
    |
123 ~         let backup_config = config.backup.as_ref().map_or_else(llmspell_state_persistence::config::BackupConfig::default, |backup_cfg| llmspell_state_persistence::config::BackupConfig {
124 +                 backup_dir: std::path::PathBuf::from(
125 +                     backup_cfg.backup_dir.as_deref().unwrap_or("./backups"),
126 +                 ),
127 +                 compression_enabled: backup_cfg.compression_enabled,
128 +                 compression_type: match backup_cfg.compression_type.as_str() {
129 +                     "gzip" => llmspell_state_persistence::config::CompressionType::Gzip,
130 +                     "lz4" => llmspell_state_persistence::config::CompressionType::Lz4,
131 +                     "brotli" => llmspell_state_persistence::config::CompressionType::Brotli,
132 +                     _ => llmspell_state_persistence::config::CompressionType::Zstd,
133 +                 },
134 +                 compression_level: backup_cfg.compression_level,
135 +                 encryption_enabled: false, // Not exposed in runtime config yet
136 +                 max_backups: backup_cfg.max_backups,
137 +                 max_backup_age: backup_cfg
138 +                     .max_backup_age
139 +                     .map(std::time::Duration::from_secs),
140 +                 incremental_enabled: backup_cfg.incremental_enabled,
141 +                 full_backup_interval: std::time::Duration::from_secs(86400), // 24 hours default
142 ~             });
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/state_infrastructure.rs:187:1
    |
187 | / fn create_backend_type(config: &StatePersistenceConfig) -> Result<StorageBackendType> {
188 | |     match config.backend_type.as_str() {
189 | |         "memory" => {
190 | |             debug!("Creating in-memory storage backend type");
...   |
208 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
187 - fn create_backend_type(config: &StatePersistenceConfig) -> Result<StorageBackendType> {
187 + fn create_backend_type(config: &StatePersistenceConfig) -> llmspell_state_persistence::StorageBackendType {
    |
help: ...and then change returning expressions
    |
191 ~             StorageBackendType::Memory
192 |         }
...
196 |                 .unwrap_or_else(|_| "./llmspell_state".to_string());
197 ~             StorageBackendType::Sled(SledConfig {
198 +                 path: std::path::PathBuf::from(path),
199 +                 cache_capacity: 64 * 1024 * 1024, // 64MB
200 +                 use_compression: true,
201 +             })
202 |         }
203 |         backend => {
204 |             warn!("Unknown backend type '{}', falling back to memory", backend);
205 ~             StorageBackendType::Memory
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/state_infrastructure.rs:211:1
    |
211 | / fn get_or_create_event_bus(context: &GlobalContext) -> Result<Arc<EventBus>> {
212 | |     if let Some(event_bus) = context.get_bridge::<EventBus>("event_bus") {
213 | |         return Ok(event_bus);
...   |
219 | |     Ok(event_bus)
220 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
211 - fn get_or_create_event_bus(context: &GlobalContext) -> Result<Arc<EventBus>> {
211 + fn get_or_create_event_bus(context: &GlobalContext) -> std::sync::Arc<llmspell_events::EventBus> {
    |
help: ...and then change returning expressions
    |
213 ~         return event_bus;
214 |     }
...
218 |     context.set_bridge("event_bus", event_bus.clone());
219 ~     event_bus
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/state_infrastructure.rs:223:1
    |
223 | / fn get_or_create_correlation_tracker(
224 | |     context: &GlobalContext,
225 | | ) -> Result<Arc<EventCorrelationTracker>> {
226 | |     if let Some(tracker) = context.get_bridge::<EventCorrelationTracker>("correlation_tracker") {
...   |
233 | |     Ok(tracker)
234 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
225 - ) -> Result<Arc<EventCorrelationTracker>> {
225 + ) -> std::sync::Arc<llmspell_events::EventCorrelationTracker> {
    |
help: ...and then change returning expressions
    |
227 ~         return tracker;
228 |     }
...
232 |     context.set_bridge("correlation_tracker", tracker.clone());
233 ~     tracker
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/globals/state_infrastructure.rs:237:1
    |
237 | / fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
238 | |     if let Some(executor) = context.get_bridge::<HookExecutor>("hook_executor") {
239 | |         return Ok(executor);
...   |
245 | |     Ok(executor)
246 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
237 - fn get_or_create_hook_executor(context: &GlobalContext) -> Result<Arc<HookExecutor>> {
237 + fn get_or_create_hook_executor(context: &GlobalContext) -> std::sync::Arc<llmspell_hooks::HookExecutor> {
    |
help: ...and then change returning expressions
    |
239 ~         return executor;
240 |     }
...
244 |     context.set_bridge("hook_executor", executor.clone());
245 ~     executor
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/streaming_global.rs:54:26
   |
54 |                 message: format!("Failed to inject Streaming global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
54 -                 message: format!("Failed to inject Streaming global for JavaScript: {}", e),
54 +                 message: format!("Failed to inject Streaming global for JavaScript: {e}"),
   |

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/globals/tool_api_standard.rs:79:9
   |
79 | //! ### ToolInfo
   |         ^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
79 - //! ### ToolInfo
79 + //! ### `ToolInfo`
   |

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/globals/tool_api_standard.rs:89:9
   |
89 | //! ### ToolSchema
   |         ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
89 - //! ### ToolSchema
89 + //! ### `ToolSchema`
   |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/globals/tool_api_standard.rs:127:27
    |
127 | //! - Direct tool access (Tool.tool_name) uses lazy loading
    |                           ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
127 - //! - Direct tool access (Tool.tool_name) uses lazy loading
127 + //! - Direct tool access (`Tool.tool_name`) uses lazy loading
    |

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/globals/tool_api_standard.rs:172:23
    |
172 | /// Convert from core ToolSchema to standard schema
    |                       ^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
172 - /// Convert from core ToolSchema to standard schema
172 + /// Convert from core `ToolSchema` to standard schema
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/tool_global.rs:57:26
   |
57 |                 message: format!("Failed to inject Tool global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
57 -                 message: format!("Failed to inject Tool global for JavaScript: {}", e),
57 +                 message: format!("Failed to inject Tool global for JavaScript: {e}"),
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/src/globals/workflow_global.rs:65:26
   |
65 |                 message: format!("Failed to inject Workflow global for JavaScript: {}", e),
   |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
65 -                 message: format!("Failed to inject Workflow global for JavaScript: {}", e),
65 +                 message: format!("Failed to inject Workflow global for JavaScript: {e}"),
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:151:17
    |
150 |       ) -> Result<(), LLMSpellError> {
    |  ____________________________________-
151 | |         let mut adapters = self.adapters.write().await;
    | |                 ^^^^^^^^
152 | |         adapters.insert(language, adapter);
153 | |         Ok(())
154 | |     }
    | |_____- temporary `adapters` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
151 ~         
152 +         self.adapters.write().await.insert(language, adapter);
153 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:201:13
    |
199 |       ) -> Result<HookHandle, LLMSpellError> {
    |  ____________________________________________-
200 | |         // Get the adapter for this language
201 | |         let adapters = self.adapters.read().await;
    | |             ^^^^^^^^
202 | |         let adapter = adapters
...   |
245 | |         })
246 | |     }
    | |_____- temporary `adapters` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
201 ~         
202 +         let adapter = self.adapters.read().await.clone();
203 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:276:13
    |
275 |       ) -> Result<Vec<HookMetadata>, LLMSpellError> {
    |  ___________________________________________________-
276 | |         let language_hooks = self.language_hooks.read().await;
    | |             ^^^^^^^^^^^^^^
277 | |         let mut metadata = Vec::new();
...   |
291 | |         Ok(metadata)
292 | |     }
    | |_____- temporary `language_hooks` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
276 ~         
277 +         self.language_hooks.read().await.;
278 |         let mut metadata = Vec::new();
279 |
280 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:330:21
    |
329 |           if let Some(hook) = language_hooks.get(hook_id) {
    |  _________________________________________________________-
330 | |             let mut enabled = hook.enabled.write().await;
    | |                     ^^^^^^^
331 | |             *enabled = true;
332 | |             Ok(true)
333 | |         } else {
    | |_________- temporary `enabled` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
330 ~             
331 +             hook.enabled.write().await.;
332 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/hook_bridge.rs:347:21
    |
346 |           if let Some(hook) = language_hooks.get(hook_id) {
    |  _________________________________________________________-
347 | |             let mut enabled = hook.enabled.write().await;
    | |                     ^^^^^^^
348 | |             *enabled = false;
349 | |             Ok(true)
350 | |         } else {
    | |_________- temporary `enabled` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
347 ~             
348 +             hook.enabled.write().await.;
349 ~             
    |

warning: this function's return value is unnecessarily wrapped by `Result`
   --> llmspell-bridge/src/hook_bridge.rs:415:5
    |
415 | /     fn create_hook_event(
416 | |         hook_point: &HookPoint,
417 | |         status: &str,
418 | |         correlation_id: Uuid,
...   |
442 | |         Ok(event)
443 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_wraps
help: remove `Result` from the return type...
    |
420 -     ) -> Result<UniversalEvent, LLMSpellError> {
420 +     ) -> llmspell_events::UniversalEvent {
    |
help: ...and then change returning expressions
    |
442 -         Ok(event)
442 +         event
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-bridge/src/agent_bridge.rs:106:5
    |
106 |     pub fn list_agent_types(&self) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn list_agent_types(&self) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-bridge/src/agent_bridge.rs:111:5
    |
111 |     pub fn list_templates(&self) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn list_templates(&self) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:622:13
    |
621 |       pub async fn get_agent_state(&self, agent_instance: &str) -> Result<AgentState> {
    |  _____________________________________________________________________________________-
622 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
623 | |         let state_machine =
624 | |             machines
...   |
631 | |         Ok(state_machine.current_state().await)
632 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
622 ~         
623 +         let state_machine = self.state_machines.read().await.;
624 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:640:13
    |
639 |       pub async fn initialize_agent(&self, agent_instance: &str) -> Result<()> {
    |  ______________________________________________________________________________-
640 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
641 | |         let state_machine =
642 | |             machines
...   |
655 | |             })
656 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
640 ~         
641 +         let state_machine = self.state_machines.read().await.;
642 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:664:13
    |
663 |       pub async fn start_agent(&self, agent_instance: &str) -> Result<()> {
    |  _________________________________________________________________________-
664 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
665 | |         let state_machine =
666 | |             machines
...   |
679 | |             })
680 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
664 ~         
665 +         let state_machine = self.state_machines.read().await.;
666 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:688:13
    |
687 |       pub async fn pause_agent(&self, agent_instance: &str) -> Result<()> {
    |  _________________________________________________________________________-
688 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
689 | |         let state_machine =
690 | |             machines
...   |
703 | |             })
704 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
688 ~         
689 +         let state_machine = self.state_machines.read().await.;
690 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:712:13
    |
711 |       pub async fn resume_agent(&self, agent_instance: &str) -> Result<()> {
    |  __________________________________________________________________________-
712 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
713 | |         let state_machine =
714 | |             machines
...   |
727 | |             })
728 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
712 ~         
713 +         let state_machine = self.state_machines.read().await.;
714 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:736:13
    |
735 |       pub async fn stop_agent(&self, agent_instance: &str) -> Result<()> {
    |  ________________________________________________________________________-
736 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
737 | |         let state_machine =
738 | |             machines
...   |
751 | |             })
752 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
736 ~         
737 +         let state_machine = self.state_machines.read().await.;
738 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:760:13
    |
759 |       pub async fn terminate_agent(&self, agent_instance: &str) -> Result<()> {
    |  _____________________________________________________________________________-
760 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
761 | |         let state_machine =
762 | |             machines
...   |
775 | |             })
776 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
760 ~         
761 +         let state_machine = self.state_machines.read().await.;
762 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:784:13
    |
783 |       pub async fn error_agent(&self, agent_instance: &str, error_message: String) -> Result<()> {
    |  ________________________________________________________________________________________________-
784 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
785 | |         let state_machine =
786 | |             machines
...   |
799 | |             })
800 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
784 ~         
785 +         let state_machine = self.state_machines.read().await.;
786 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:808:13
    |
807 |       pub async fn recover_agent(&self, agent_instance: &str) -> Result<()> {
    |  ___________________________________________________________________________-
808 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
809 | |         let state_machine =
810 | |             machines
...   |
823 | |             })
824 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
808 ~         
809 +         let state_machine = self.state_machines.read().await.;
810 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:835:13
    |
834 |       ) -> Result<Vec<serde_json::Value>> {
    |  _________________________________________-
835 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
836 | |         let state_machine =
837 | |             machines
...   |
858 | |             .collect())
859 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
835 ~         
836 +         let state_machine = self.state_machines.read().await.;
837 ~         
    |

warning: called `map(<f>).unwrap_or(<a>)` on an `Option` value
   --> llmspell-bridge/src/agent_bridge.rs:853:32
    |
853 |                     "elapsed": transition.duration.map(|d| d.as_secs_f64()).unwrap_or(0.0),
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
    = note: `-W clippy::map-unwrap-or` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::map_unwrap_or)]`
help: use `map_or(<a>, <f>)` instead
    |
853 -                     "elapsed": transition.duration.map(|d| d.as_secs_f64()).unwrap_or(0.0),
853 +                     "elapsed": transition.duration.map_or(0.0, |d| d.as_secs_f64()),
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:867:13
    |
866 |       pub async fn get_agent_last_error(&self, agent_instance: &str) -> Result<Option<String>> {
    |  ______________________________________________________________________________________________-
867 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
868 | |         let state_machine =
869 | |             machines
...   |
876 | |         Ok(state_machine.get_last_error().await)
877 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
867 ~         
868 +         let state_machine = self.state_machines.read().await.;
869 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:885:13
    |
884 |       pub async fn get_agent_recovery_attempts(&self, agent_instance: &str) -> Result<usize> {
    |  ____________________________________________________________________________________________-
885 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
886 | |         let state_machine =
887 | |             machines
...   |
894 | |         Ok(state_machine.get_recovery_attempts().await)
895 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
885 ~         
886 +         let state_machine = self.state_machines.read().await.;
887 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:903:13
    |
902 |       pub async fn is_agent_healthy(&self, agent_instance: &str) -> Result<bool> {
    |  ________________________________________________________________________________-
903 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
904 | |         let state_machine =
905 | |             machines
...   |
912 | |         Ok(state_machine.is_healthy().await)
913 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
903 ~         
904 +         let state_machine = self.state_machines.read().await.;
905 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/agent_bridge.rs:921:13
    |
920 |       pub async fn get_agent_state_metrics(&self, agent_instance: &str) -> Result<serde_json::Value> {
    |  ____________________________________________________________________________________________________-
921 | |         let machines = self.state_machines.read().await;
    | |             ^^^^^^^^
922 | |         let state_machine =
923 | |             machines
...   |
939 | |         }))
940 | |     }
    | |_____- temporary `machines` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
921 ~         
922 +         let state_machine = self.state_machines.read().await.;
923 ~         
    |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1082:13
     |
1081 |       ) -> Result<()> {
     |  _____________________-
1082 | |         let contexts = self.contexts.read().await;
     | |             ^^^^^^^^
1083 | |         let context = contexts
1084 | |             .get(context_id)
...    |
1094 | |         Ok(())
1095 | |     }
     | |_____- temporary `contexts` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1082 ~         
1083 +         let context = self.contexts.read().await.;
1084 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1107:13
     |
1106 |       ) -> Result<Option<serde_json::Value>> {
     |  ____________________________________________-
1107 | |         let contexts = self.contexts.read().await;
     | |             ^^^^^^^^
1108 | |         let context = contexts
1109 | |             .get(context_id)
...    |
1115 | |         Ok(context.get(key))
1116 | |     }
     | |_____- temporary `contexts` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1107 ~         
1108 +         let context = self.contexts.read().await.;
1109 ~         
     |

warning: this argument is passed by value, but not consumed in the function body
    --> llmspell-bridge/src/agent_bridge.rs:1125:16
     |
1125 |         scope: serde_json::Value,
     |                ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
    --> llmspell-bridge/src/agent_bridge.rs:1141:16
     |
1141 |         scope: serde_json::Value,
     |                ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1290:17
     |
1289 |       pub async fn remove_context(&self, context_id: &str) -> Result<()> {
     |  ________________________________________________________________________-
1290 | |         let mut contexts = self.contexts.write().await;
     | |                 ^^^^^^^^
1291 | |         contexts
1292 | |             .remove(context_id)
...    |
1297 | |         Ok(())
1298 | |     }
     | |_____- temporary `contexts` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1290 ~         
1291 +         self.contexts.write().await.;
1292 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1354:13
     |
1353 |       pub async fn list_agent_capabilities(&self) -> Result<serde_json::Value> {
     |  ______________________________________________________________________________-
1354 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
1355 | |         let mut capabilities = serde_json::Map::new();
...    |
1377 | |         Ok(serde_json::Value::Object(capabilities))
1378 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1354 ~         
1355 +         self.active_agents.read().await.;
1356 |         let mut capabilities = serde_json::Map::new();
1357 |
1358 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1512:13
     |
1511 |       pub async fn discover_agents_by_capability(&self, capability: &str) -> Result<Vec<String>> {
     |  ________________________________________________________________________________________________-
1512 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
1513 | |         let mut matching_agents = Vec::new();
...    |
1537 | |         Ok(matching_agents)
1538 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1512 ~         
1513 +         self.active_agents.read().await.;
1514 |         let mut matching_agents = Vec::new();
1515 |
1516 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1587:13
     |
1577 |       pub async fn save_agent_state(&self, agent_name: &str) -> Result<()> {
     |  __________________________________________________________________________-
1578 | |         let state_manager =
1579 | |             self.state_manager
1580 | |                 .as_ref()
...    |
1587 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
...    |
1648 | |         Ok(())
1649 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1587 ~         
1588 +         let agent = self.active_agents.read().await.;
1589 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/agent_bridge.rs:1670:13
     |
1656 |       pub async fn load_agent_state(&self, agent_name: &str) -> Result<bool> {
     |  ____________________________________________________________________________-
1657 | |         let state_manager =
1658 | |             self.state_manager
1659 | |                 .as_ref()
...    |
1670 | |         let agents = self.active_agents.read().await;
     | |             ^^^^^^
...    |
1702 | |     }
     | |_____- temporary `agents` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1670 ~         
1671 +         let agent = self.active_agents.read().await.;
1672 ~         
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1719:24
     |
1719 |           let agent_id = if let Some(agent) = self.get_agent(agent_name).await {
     |  ________________________^
1720 | |             agent.metadata().id.to_string()
1721 | |         } else {
...    |
1724 | |         };
     | |_________^ help: try: `(self.get_agent(agent_name).await).map_or_else(|| agent_name.to_string(), |agent| agent.metadata().id.to_string())`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1764:9
     |
1764 | /         match saved_agents {
1765 | |             Some(registry) => {
1766 | |                 // Parse the registry
1767 | |                 if let Some(agents) = registry.as_array() {
...    |
1776 | |             None => Ok(vec![]),
1777 | |         }
     | |_________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1764 ~         saved_agents.map_or_else(|| Ok(vec![]), |registry| if let Some(agents) = registry.as_array() {
1765 +                     Ok(agents
1766 +                         .iter()
1767 +                         .filter_map(|v| v.as_str().map(String::from))
1768 +                         .collect())
1769 +                 } else {
1770 +                     Ok(vec![])
1771 +                 })
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1767:17
     |
1767 | /                 if let Some(agents) = registry.as_array() {
1768 | |                     Ok(agents
1769 | |                         .iter()
1770 | |                         .filter_map(|v| v.as_str().map(String::from))
...    |
1773 | |                     Ok(vec![])
1774 | |                 }
     | |_________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1767 ~                 registry.as_array().map_or_else(|| Ok(vec![]), |agents| Ok(agents
1768 +                         .iter()
1769 +                         .filter_map(|v| v.as_str().map(String::from))
1770 +                         .collect()))
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1796:17
     |
1796 | /                 if let Some(agents) = registry.as_array() {
1797 | |                     agents
1798 | |                         .iter()
1799 | |                         .filter_map(|v| v.as_str().map(String::from))
...    |
1802 | |                     vec![]
1803 | |                 }
     | |_________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1796 ~                 registry.as_array().map_or_else(|| vec![], |agents| agents
1797 +                         .iter()
1798 +                         .filter_map(|v| v.as_str().map(String::from))
1799 +                         .collect::<Vec<_>>())
     |

warning: use Option::map_or_else instead of an if let/else
    --> llmspell-bridge/src/agent_bridge.rs:1845:17
     |
1845 | /                 if let Some(agents) = registry.as_array() {
1846 | |                     agents
1847 | |                         .iter()
1848 | |                         .filter_map(|v| v.as_str().map(String::from))
...    |
1852 | |                     vec![]
1853 | |                 }
     | |_________________^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
     |
1845 ~                 registry.as_array().map_or_else(|| vec![], |agents| agents
1846 +                         .iter()
1847 +                         .filter_map(|v| v.as_str().map(String::from))
1848 +                         .filter(|name| name != agent_name)
1849 +                         .collect::<Vec<_>>())
     |

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/multi_agent.rs:48:13
   |
48 |     agents: Vec<String>,
   |             ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/multi_agent.rs:49:20
   |
49 |     initial_input: Value,
   |                    ^^^^^ help: consider taking a reference instead: `&Value`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/multi_agent.rs:89:51
   |
89 |     #[allow(unused_variables)] aggregation_agent: Option<String>,
   |                                                   ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:124:14
    |
124 |     options: Value,
    |              ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:160:24
    |
160 |     coordinator_agent: String,
    |                        ^^^^^^ help: consider changing the type to: `&str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:161:20
    |
161 |     worker_agents: Vec<(String, String)>, // (agent_id, specialization)
    |                    ^^^^^^^^^^^^^^^^^^^^^ help: consider changing the type to: `&[(String, String)]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:162:11
    |
162 |     task: Value,
    |           ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:222:27
    |
222 |     collaborating_agents: Vec<String>,
    |                           ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:224:22
    |
224 |     initial_context: Value,
    |                      ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: casting `usize` to `i64` may wrap around the value on targets with 64-bit wide pointers
   --> llmspell-bridge/src/multi_agent.rs:226:68
    |
226 |     let mut builder = LoopWorkflowBuilder::new(name).with_range(0, collaboration_rounds as i64, 1);
    |                                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_wrap

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:265:20
    |
265 |     manager_agent: String,
    |                    ^^^^^^ help: consider changing the type to: `&str`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:266:17
    |
266 |     team_leads: Vec<String>,
    |                 ^^^^^^^^^^^ help: consider changing the type to: `&[String]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:267:14
    |
267 |     workers: Vec<Vec<String>>, // Workers per team lead
    |              ^^^^^^^^^^^^^^^^ help: consider changing the type to: `&[Vec<String>]`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/multi_agent.rs:268:11
    |
268 |     task: Value,
    |           ^^^^^ help: consider taking a reference instead: `&Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this could be a `const fn`
  --> llmspell-bridge/src/orchestration.rs:83:5
   |
83 | /     pub fn max_concurrent_workflows(mut self, max: usize) -> Self {
84 | |         self.limits.max_concurrent_workflows = max;
85 | |         self
86 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
83 |     pub const fn max_concurrent_workflows(mut self, max: usize) -> Self {
   |         +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/orchestration.rs:90:5
   |
90 | /     pub fn max_agent_invocations(mut self, max: usize) -> Self {
91 | |         self.limits.max_agent_invocations = max;
92 | |         self
93 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
90 |     pub const fn max_agent_invocations(mut self, max: usize) -> Self {
   |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:97:5
    |
97  | /     pub fn max_memory_mb(mut self, max: usize) -> Self {
98  | |         self.limits.max_memory_mb = max;
99  | |         self
100 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
97  |     pub const fn max_memory_mb(mut self, max: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:104:5
    |
104 | /     pub fn build(self) -> ResourceLimits {
105 | |         self.limits
106 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
104 |     pub const fn build(self) -> ResourceLimits {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:152:5
    |
152 | /     pub fn strategy(mut self, strategy: OrchestrationStrategy) -> Self {
153 | |         self.config.strategy = strategy;
154 | |         self
155 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
152 |     pub const fn strategy(mut self, strategy: OrchestrationStrategy) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:159:5
    |
159 | /     pub fn max_depth(mut self, depth: usize) -> Self {
160 | |         self.config.max_depth = depth;
161 | |         self
162 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
159 |     pub const fn max_depth(mut self, depth: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:166:5
    |
166 | /     pub fn timeout_seconds(mut self, timeout: u64) -> Self {
167 | |         self.config.timeout_seconds = timeout;
168 | |         self
169 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
166 |     pub const fn timeout_seconds(mut self, timeout: u64) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:173:5
    |
173 | /     pub fn allow_parallel(mut self, allow: bool) -> Self {
174 | |         self.config.allow_parallel = allow;
175 | |         self
176 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
173 |     pub const fn allow_parallel(mut self, allow: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:180:5
    |
180 | /     pub fn resource_limits(mut self, limits: ResourceLimits) -> Self {
181 | |         self.config.resource_limits = limits;
182 | |         self
183 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
180 |     pub const fn resource_limits(mut self, limits: ResourceLimits) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:187:5
    |
187 | /     pub fn build(self) -> OrchestrationConfig {
188 | |         self.config
189 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
187 |     pub const fn build(self) -> OrchestrationConfig {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:302:5
    |
302 | /     pub fn max_attempts(mut self, attempts: usize) -> Self {
303 | |         self.config.max_attempts = attempts;
304 | |         self
305 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
302 |     pub const fn max_attempts(mut self, attempts: usize) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:309:5
    |
309 | /     pub fn backoff_ms(mut self, ms: u64) -> Self {
310 | |         self.config.backoff_ms = ms;
311 | |         self
312 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
309 |     pub const fn backoff_ms(mut self, ms: u64) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:316:5
    |
316 | /     pub fn exponential_backoff(mut self, exponential: bool) -> Self {
317 | |         self.config.exponential_backoff = exponential;
318 | |         self
319 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
316 |     pub const fn exponential_backoff(mut self, exponential: bool) -> Self {
    |         +++++

warning: this could be a `const fn`
   --> llmspell-bridge/src/orchestration.rs:323:5
    |
323 | /     pub fn build(self) -> RetryConfig {
324 | |         self.config
325 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
323 |     pub const fn build(self) -> RetryConfig {
    |         +++++

warning: unused `self` argument
   --> llmspell-bridge/src/orchestration.rs:446:36
    |
446 |     fn is_orchestration_successful(&self, state: &OrchestrationState) -> bool {
    |                                    ^^^^^
    |
    = help: consider refactoring to an associated function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_self
    = note: `-W clippy::unused-self` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_self)]`

warning: unnecessary closure used to substitute value for `Option::None`
  --> llmspell-bridge/src/standardized_workflows.rs:38:20
   |
38 |           let name = params
   |  ____________________^
39 | |             .get("name")
40 | |             .and_then(|v| v.as_str())
41 | |             .unwrap_or_else(|| workflow_type)
   | |_____________________________________________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_lazy_evaluations
   = note: `-W clippy::unnecessary-lazy-evaluations` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::unnecessary_lazy_evaluations)]`
help: use `unwrap_or` instead
   |
41 -             .unwrap_or_else(|| workflow_type)
41 +             .unwrap_or(workflow_type)
   |

warning: called `map(f)` on an `Option` value where `f` is a closure that returns the unit type `()`
  --> llmspell-bridge/src/standardized_workflows.rs:47:9
   |
47 | /         params
48 | |             .get("timeout")
49 | |             .and_then(|v| v.as_u64())
50 | |             .map(|timeout_ms| {
51 | |                 config.max_execution_time = Some(Duration::from_millis(timeout_ms));
52 | |             });
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_map_unit_fn
   = note: `-W clippy::option-map-unit-fn` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::option_map_unit_fn)]`
help: try
   |
47 ~         if let Some(timeout_ms) = params
48 +             .get("timeout")
49 +             .and_then(|v| v.as_u64()) { config.max_execution_time = Some(Duration::from_millis(timeout_ms)); }
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:49:23
   |
49 |             .and_then(|v| v.as_u64())
   |                       ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
   = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: called `map(f)` on an `Option` value where `f` is a closure that returns the unit type `()`
  --> llmspell-bridge/src/standardized_workflows.rs:54:9
   |
54 | /         params
55 | |             .get("continue_on_error")
56 | |             .and_then(|v| v.as_bool())
57 | |             .map(|continue_on_error| {
58 | |                 config.continue_on_error = continue_on_error;
59 | |             });
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_map_unit_fn
help: try
   |
54 ~         if let Some(continue_on_error) = params
55 +             .get("continue_on_error")
56 +             .and_then(|v| v.as_bool()) { config.continue_on_error = continue_on_error; }
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:56:23
   |
56 |             .and_then(|v| v.as_bool())
   |                       ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: called `map(f)` on an `Option` value where `f` is a closure that returns the unit type `()`
  --> llmspell-bridge/src/standardized_workflows.rs:61:9
   |
61 | /         params
62 | |             .get("max_retry_attempts")
63 | |             .and_then(|v| v.as_u64())
64 | |             .map(|max_retries| {
65 | |                 config.max_retry_attempts = max_retries as u32;
66 | |             });
   | |______________^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_map_unit_fn
help: try
   |
61 ~         if let Some(max_retries) = params
62 +             .get("max_retry_attempts")
63 +             .and_then(|v| v.as_u64()) { config.max_retry_attempts = max_retries as u32; }
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:63:23
   |
63 |             .and_then(|v| v.as_u64())
   |                       ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: casting `u64` to `u32` may truncate the value
  --> llmspell-bridge/src/standardized_workflows.rs:65:45
   |
65 |                 config.max_retry_attempts = max_retries as u32;
   |                                             ^^^^^^^^^^^^^^^^^^
   |
   = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
   = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
   |
65 -                 config.max_retry_attempts = max_retries as u32;
65 +                 config.max_retry_attempts = u32::try_from(max_retries);
   |

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:76:79
   |
76 |                     "max_concurrency": params.get("max_concurrency").and_then(|v| v.as_u64()).unwrap_or(4),
   |                                                                               ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:77:67
   |
77 |                     "fail_fast": params.get("fail_fast").and_then(|v| v.as_bool()).unwrap_or(false),
   |                                                                   ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:78:105
   |
78 |                     "continue_on_optional_failure": params.get("continue_on_optional_failure").and_then(|v| v.as_bool()).unwrap_or(true),
   |                                                                                                         ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/src/standardized_workflows.rs:90:83
   |
90 |                     "continue_on_error": params.get("continue_on_error").and_then(|v| v.as_bool()).unwrap_or(false),
   |                                                                                   ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-bridge/src/standardized_workflows.rs:102:59
    |
102 |                     params.get("max_iterations").and_then(|v| v.as_u64())
    |                                                           ^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::Value::as_u64`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: this macro has been superceded by `std::sync::LazyLock`
  --> llmspell-bridge/src/workflow_performance.rs:10:1
   |
10 | / lazy_static! {
11 | |     /// Cache for workflow type information to avoid repeated discovery
12 | |     static ref WORKFLOW_TYPE_CACHE: Arc<RwLock<HashMap<String, WorkflowTypeInfo>>> =
13 | |         Arc::new(RwLock::new(HashMap::new()));
14 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#non_std_lazy_statics
   = note: `-W clippy::non-std-lazy-statics` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::non_std_lazy_statics)]`

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflow_performance.rs:116:17
    |
115 |       pub fn get(&self, workflow_id: &str) -> Option<Value> {
    |  ___________________________________________________________-
116 | |         let mut cache = self.cache.write();
    | |                 ^^^^^
117 | |         if let Some(cached) = cache.get(workflow_id) {
...   |
123 | |         None
124 | |     }
    | |_____- temporary `cache` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
116 ~         
117 +         self.cache.write().;
118 ~         
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflow_performance.rs:182:13
    |
181 |       pub fn average_duration_ms(&self) -> f64 {
    |  ______________________________________________-
182 | |         let metrics = self.metrics.read();
    | |             ^^^^^^^
183 | |         if metrics.total_operations == 0 {
184 | |             0.0
...   |
192 | |     }
    | |_____- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
189 ~             let total_ops = metrics.total_operations as f64;
190 +             drop(metrics);
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflow_performance.rs:197:13
    |
196 |       pub fn p99_duration_ms(&self) -> u64 {
    |  __________________________________________-
197 | |         let metrics = self.metrics.read();
    | |             ^^^^^^^
198 | |         if metrics.operation_durations.is_empty() {
199 | |             return 0;
...   |
208 | |         durations.get(idx).copied().unwrap_or(0)
209 | |     }
    | |_____- temporary `metrics` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
    |
202 ~         let mut durations = metrics.operation_durations.clone();
203 +         drop(metrics);
    |

warning: this function could have a `#[must_use]` attribute
   --> llmspell-bridge/src/workflow_performance.rs:219:1
    |
219 | pub fn get_workflow_info_cached(workflow_type: &str) -> Option<WorkflowTypeInfo> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_workflow_info_cached(workflow_type: &str) -> Option<WorkflowTypeInfo>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/workflows.rs:271:39
    |
271 | fn create_sequential_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
    |                                       ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/workflows.rs:300:40
    |
300 | fn create_conditional_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
    |                                        ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/workflows.rs:416:33
    |
416 | fn create_loop_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
    |                                 ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/workflows.rs:453:37
    |
453 | fn create_parallel_workflow(params: serde_json::Value) -> Result<impl WorkflowExecutor> {
    |                                     ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/workflows.rs:618:5
    |
618 | /     if let Some(collection) = config.get("collection").and_then(|v| v.as_array()) {
619 | |         Ok(LoopIterator::Collection {
620 | |             values: collection.clone(),
621 | |         })
...   |
649 | |         })
650 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
618 ~     config.get("collection").and_then(|v| v.as_array()).map_or_else(|| if let Some(range) = config.get("range").and_then(|v| v.as_object()) {
619 +         let start = range
620 +             .get("start")
621 +             .and_then(serde_json::Value::as_i64)
622 +             .unwrap_or(0);
623 +         let end = range
624 +             .get("end")
625 +             .and_then(serde_json::Value::as_i64)
626 +             .unwrap_or(10);
627 +         let step = range
628 +             .get("step")
629 +             .and_then(serde_json::Value::as_i64)
630 +             .unwrap_or(1);
631 +         Ok(LoopIterator::Range { start, end, step })
632 +     } else if let Some(condition) = config.get("while_condition").and_then(|v| v.as_str()) {
633 +         Ok(LoopIterator::WhileCondition {
634 +             condition: condition.to_string(),
635 +             max_iterations: config
636 +                 .get("max_iterations")
637 +                 .and_then(serde_json::Value::as_u64)
638 +                 .map(|v| usize::try_from(v).unwrap_or(usize::MAX))
639 +                 .unwrap_or(100),
640 +         })
641 +     } else {
642 +         Err(llmspell_core::LLMSpellError::Configuration {
643 +             message: "Iterator must have 'collection', 'range', or 'while_condition'".to_string(),
644 +             source: None,
645 +         })
646 +     }, |collection| Ok(LoopIterator::Collection {
647 +             values: collection.clone(),
648 +         }))
    |

warning: called `map(<f>).unwrap_or(<a>)` on an `Option` value
   --> llmspell-bridge/src/workflows.rs:639:29
    |
639 |               max_iterations: config
    |  _____________________________^
640 | |                 .get("max_iterations")
641 | |                 .and_then(serde_json::Value::as_u64)
642 | |                 .map(|v| usize::try_from(v).unwrap_or(usize::MAX))
643 | |                 .unwrap_or(100),
    | |_______________________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#map_unwrap_or
help: use `map_or(<a>, <f>)` instead
    |
642 -                 .map(|v| usize::try_from(v).unwrap_or(usize::MAX))
642 +                 .map_or(100, |v| usize::try_from(v).unwrap_or(usize::MAX)),
    |

warning: this method could have a `#[must_use]` attribute
   --> llmspell-bridge/src/workflows.rs:848:5
    |
848 |     pub fn list_workflow_types(&self) -> Vec<String> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn list_workflow_types(&self) -> Vec<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-bridge/src/workflows.rs:853:5
    |
853 |     pub fn get_workflow_info(&self, workflow_type: &str) -> Option<WorkflowInfo> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_workflow_info(&self, workflow_type: &str) -> Option<WorkflowInfo>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: this method could have a `#[must_use]` attribute
   --> llmspell-bridge/src/workflows.rs:858:5
    |
858 |     pub fn get_all_workflow_info(&self) -> Vec<(String, WorkflowInfo)> {
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add the attribute: `#[must_use] pub fn get_all_workflow_info(&self) -> Vec<(String, WorkflowInfo)>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#must_use_candidate

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/workflows.rs:878:17
    |
871 |       ) -> Result<String> {
    |  _________________________-
872 | |         let workflow = self
873 | |             .standardized_factory
874 | |             .create_from_type_json(workflow_type, params)
...   |
878 | |         let mut workflows = self.active_workflows.write().await;
    | |                 ^^^^^^^^^
...   |
889 | |         Ok(workflow_id)
890 | |     }
    | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
878 ~         
879 +         self.active_workflows.write().await.insert(workflow_id.clone(), Arc::new(workflow));
880 ~         
    |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1024:13
     |
1023 |       pub async fn get_workflow(&self, workflow_id: &str) -> Result<WorkflowInfo> {
     |  _________________________________________________________________________________-
1024 | |         let workflows = self.active_workflows.read().await;
     | |             ^^^^^^^^^
1025 | |         let workflow = workflows
1026 | |             .get(workflow_id)
...    |
1039 | |         })
1040 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1024 ~         
1025 +         let workflow = self.active_workflows.read().await.;
1026 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1048:17
     |
1047 |       pub async fn remove_workflow(&self, workflow_id: &str) -> Result<()> {
     |  __________________________________________________________________________-
1048 | |         let mut workflows = self.active_workflows.write().await;
     | |                 ^^^^^^^^^
1049 | |         workflows
1050 | |             .remove(workflow_id)
...    |
1057 | |         Ok(())
1058 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1048 ~         
1049 +         self.active_workflows.write().await.;
1050 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1084:17
     |
1082 |           if workflows.contains_key(workflow_id) {
     |  ________________________________________________-
1083 | |             // Check if workflow is in execution history
1084 | |             let history = self.execution_history.read().await;
     | |                 ^^^^^^^
1085 | |             let recent_execution = history
...    |
1096 | |             Ok(status)
1097 | |         } else {
     | |_________- temporary `history` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1084 ~             
1085 +             let recent_execution = self.execution_history.read().await.rfind(|record| record.workflow_id == workflow_id);
1086 ~             
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1134:17
     |
1133 |       pub async fn clear_execution_history(&self) {
     |  _________________________________________________-
1134 | |         let mut history = self.execution_history.write().await;
     | |                 ^^^^^^^
1135 | |         history.clear();
1136 | |         debug!("Cleared workflow execution history");
1137 | |     }
     | |_____- temporary `history` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1134 ~         
1135 +         self.execution_history.write().await.clear();
1136 ~         
     |

warning: all fields have the same prefix: `total`
    --> llmspell-bridge/src/workflows.rs:1264:1
     |
1264 | / struct RegistryMetrics {
1265 | |     /// Total workflows registered
1266 | |     total_registered: AtomicU64,
1267 | |     /// Total templates registered
...    |
1270 | |     total_executions: AtomicU64,
1271 | | }
     | |_^
     |
     = help: remove the prefixes
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#struct_field_names
     = note: `-W clippy::struct-field-names` implied by `-W clippy::pedantic`
     = help: to override `-W clippy::pedantic` add `#[allow(clippy::struct_field_names)]`

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1307:17
     |
1299 |       ) -> Result<()> {
     |  _____________________-
1300 | |         let registration = WorkflowRegistration {
1301 | |             _id: id.clone(),
1302 | |             workflow: Arc::new(workflow),
...    |
1307 | |         let mut workflows = self.workflows.write().await;
     | |                 ^^^^^^^^^
...    |
1320 | |         Ok(())
1321 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: drop the temporary after the end of its last usage
     |
1315 ~         workflows.insert(id, registration);
1316 +         drop(workflows);
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1329:17
     |
1328 |       pub async fn unregister_workflow(&self, id: &str) -> Result<()> {
     |  _____________________________________________________________________-
1329 | |         let mut workflows = self.workflows.write().await;
     | |                 ^^^^^^^^^
1330 | |         workflows
1331 | |             .remove(id)
...    |
1337 | |         Ok(())
1338 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1329 ~         
1330 +         self.workflows.write().await.;
1331 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1389:17
     |
1388 |       ) -> Result<()> {
     |  _____________________-
1389 | |         let mut workflows = self.workflows.write().await;
     | |                 ^^^^^^^^^
1390 | |         let registration = workflows
1391 | |             .get_mut(id)
...    |
1415 | |         Ok(())
1416 | |     }
     | |_____- temporary `workflows` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1389 ~         
1390 +         let registration = self.workflows.write().await.;
1391 ~         
     |

warning: temporary with significant `Drop` can be early dropped
    --> llmspell-bridge/src/workflows.rs:1440:17
     |
1439 |       pub async fn register_template(&self, template: WorkflowTemplate) -> Result<()> {
     |  _____________________________________________________________________________________-
1440 | |         let mut templates = self.templates.write().await;
     | |                 ^^^^^^^^^
1441 | |         templates.insert(template.id.clone(), template);
1442 | |         self.metrics.total_templates.fetch_add(1, Ordering::Relaxed);
1443 | |         Ok(())
1444 | |     }
     | |_____- temporary `templates` is currently being dropped at the end of its contained scope
     |
     = note: this might lead to unnecessary resource contention
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
     |
1440 ~         
1441 +         self.templates.write().await.insert(template.id.clone(), template);
1442 ~         
     |

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/conversion.rs:104:13
    |
104 | /             if let Some(i) = n.as_i64() {
105 | |                 Ok(LuaValue::Integer(i))
106 | |             } else if let Some(f) = n.as_f64() {
107 | |                 Ok(LuaValue::Number(f))
108 | |             } else {
109 | |                 Ok(LuaValue::Nil)
110 | |             }
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
104 ~             n.as_i64().map_or_else(|| if let Some(f) = n.as_f64() {
105 +                 Ok(LuaValue::Number(f))
106 +             } else {
107 +                 Ok(LuaValue::Nil)
108 +             }, |i| Ok(LuaValue::Integer(i)))
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/conversion.rs:140:51
    |
140 | pub fn lua_table_to_agent_input(lua: &Lua, table: Table) -> mlua::Result<AgentInput> {
    |                                                   ^^^^^ help: consider taking a reference instead: `&Table`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: binding to `_` prefixed variable with no side-effect
   --> llmspell-bridge/src/lua/conversion.rs:155:9
    |
155 |     let _context: Option<ExecutionContext> = None;
    |         ^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding
    = note: `-W clippy::no-effect-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::no_effect_underscore_binding)]`

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/conversion.rs:207:43
    |
207 | fn parse_media_content(_lua: &Lua, table: Table) -> mlua::Result<MediaContent> {
    |                                           ^^^^^ help: consider taking a reference instead: `&Table`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: use Option::map_or instead of an if let/else
   --> llmspell-bridge/src/lua/conversion.rs:226:20
    |
226 |       let metadata = if let Ok(width) = table.get::<_, u32>("width") {
    |  ____________________^
227 | |         if let Ok(height) = table.get::<_, u32>("height") {
228 | |             let color_space = table
229 | |                 .get::<_, String>("color_space")
...   |
251 | |         None
252 | |     };
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
226 ~     let metadata = table.get::<_, u32>("width").map_or(None, |width| if let Ok(height) = table.get::<_, u32>("height") {
227 +             let color_space = table
228 +                 .get::<_, String>("color_space")
229 +                 .ok()
230 +                 .and_then(|cs| match cs.as_str() {
231 +                     "rgb" => Some(ColorSpace::RGB),
232 +                     "rgba" => Some(ColorSpace::RGBA),
233 +                     "grayscale" => Some(ColorSpace::Grayscale),
234 +                     "cmyk" => Some(ColorSpace::CMYK),
235 +                     _ => None,
236 +                 })
237 +                 .unwrap_or(ColorSpace::RGB);
238 + 
239 +             Some(ImageMetadata {
240 +                 width,
241 +                 height,
242 +                 color_space,
243 +                 has_transparency: false,
244 +                 dpi: None,
245 +             })
246 +         } else {
247 +             None
248 ~         });
    |

warning: use Option::map_or instead of an if let/else
   --> llmspell-bridge/src/lua/conversion.rs:227:9
    |
227 | /         if let Ok(height) = table.get::<_, u32>("height") {
228 | |             let color_space = table
229 | |                 .get::<_, String>("color_space")
230 | |                 .ok()
...   |
248 | |             None
249 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
227 ~         table.get::<_, u32>("height").map_or(None, |height| {
228 +             let color_space = table
229 +                 .get::<_, String>("color_space")
230 +                 .ok()
231 +                 .and_then(|cs| match cs.as_str() {
232 +                     "rgb" => Some(ColorSpace::RGB),
233 +                     "rgba" => Some(ColorSpace::RGBA),
234 +                     "grayscale" => Some(ColorSpace::Grayscale),
235 +                     "cmyk" => Some(ColorSpace::CMYK),
236 +                     _ => None,
237 +                 })
238 +                 .unwrap_or(ColorSpace::RGB);
239 + 
240 +             Some(ImageMetadata {
241 +                 width,
242 +                 height,
243 +                 color_space,
244 +                 has_transparency: false,
245 +                 dpi: None,
246 +             })
247 +         })
    |

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/conversion.rs:413:56
    |
413 | pub fn workflow_result_to_lua_table(lua: &Lua, result: serde_json::Value) -> mlua::Result<Table> {
    |                                                        ^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&serde_json::Value`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/engine.rs:104:21
    |
103 |               let result = {
    |  __________________________-
104 | |                 let lua = self.lua.lock();
    | |                     ^^^
105 | |                 let lua_result: mlua::Result<mlua::Value> = lua.load(script).eval();
106 | |                 match lua_result {
...   |
117 | |             };
    | |_____________- temporary `lua` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
104 ~                 
105 +                 let lua_result = self.lua.lock().eval();
106 ~                 
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/engine.rs:156:21
    |
155 |               let chunk = {
    |  _________________________-
156 | |                 let lua = self.lua.lock();
    | |                     ^^^
157 | |                 let lua_result: mlua::Result<mlua::Value> = lua.load(script).eval();
158 | |                 match lua_result {
...   |
190 | |             };
    | |_____________- temporary `lua` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
156 ~                 
157 +                 let lua_result = self.lua.lock().eval();
158 ~                 
    |

warning: this function has too many lines (622/100)
   --> llmspell-bridge/src/lua/globals/agent.rs:21:5
    |
21  | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
22  | |         // invoke method (same as execute in API) - synchronous wrapper
23  | |         methods.add_method("invoke", |lua, this, input: Table| {
24  | |             let agent_input = lua_table_to_agent_input(lua, input)?;
...   |
796 | |         });
797 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this could be a `const fn`
   --> llmspell-bridge/src/lua/globals/agent.rs:822:5
    |
822 | /     fn new(bridge: Arc<AgentBridge>) -> Self {
823 | |         Self {
824 | |             bridge,
825 | |             name: None,
...   |
841 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
    |
822 |     const fn new(bridge: Arc<AgentBridge>) -> Self {
    |     +++++

warning: this function has too many lines (155/100)
    --> llmspell-bridge/src/lua/globals/agent.rs:845:5
     |
845  | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
846  | |         // name method
847  | |         methods.add_method_mut("name", |_, this, name: String| {
848  | |             this.name = Some(name);
...    |
1047 | |         });
1048 | |     }
     | |_____^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/agent.rs:1026:45
     |
1026 |             let agent_name_for_create = name.clone();
     |                                             ^^^^^^^^ help: remove this
     |
note: this value is dropped without further use
    --> llmspell-bridge/src/lua/globals/agent.rs:1026:41
     |
1026 |             let agent_name_for_create = name.clone();
     |                                         ^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone
     = note: `-W clippy::redundant-clone` implied by `-W clippy::nursery`
     = help: to override `-W clippy::nursery` add `#[allow(clippy::redundant_clone)]`

warning: this function has too many lines (366/100)
    --> llmspell-bridge/src/lua/globals/agent.rs:1058:1
     |
1058 | / pub fn inject_agent_global(
1059 | |     lua: &Lua,
1060 | |     context: &GlobalContext,
1061 | |     bridge: Arc<AgentBridge>,
...    |
1552 | |     Ok(())
1553 | | }
     | |_^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
    --> llmspell-bridge/src/lua/globals/agent.rs:1061:13
     |
1061 |     bridge: Arc<AgentBridge>,
     |             ^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<AgentBridge>`
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/agent.rs:1507:36
     |
1507 |     let bridge_for_builder = bridge.clone();
     |                                    ^^^^^^^^ help: remove this
     |
note: this value is dropped without further use
    --> llmspell-bridge/src/lua/globals/agent.rs:1507:30
     |
1507 |     let bridge_for_builder = bridge.clone();
     |                              ^^^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: this function has too many lines (236/100)
   --> llmspell-bridge/src/lua/globals/artifact.rs:21:1
    |
21  | / pub fn inject_artifact_global(
22  | |     lua: &Lua,
23  | |     _context: &GlobalContext,
24  | |     artifact_bridge: Arc<ArtifactBridge>,
...   |
349 | |     Ok(())
350 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/globals/hook.rs:235:22
    |
235 | fn parse_priority(s: Option<String>) -> Priority {
    |                      ^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Option<String>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: docs for function returning `Result` missing `# Errors` section
   --> llmspell-bridge/src/lua/globals/hook.rs:246:1
    |
246 | / pub fn inject_hook_global(
247 | |     lua: &Lua,
248 | |     _context: &GlobalContext,
249 | |     hook_bridge: Arc<HookBridge>,
250 | | ) -> Result<()> {
    | |_______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: this function has too many lines (188/100)
   --> llmspell-bridge/src/lua/globals/hook.rs:246:1
    |
246 | / pub fn inject_hook_global(
247 | |     lua: &Lua,
248 | |     _context: &GlobalContext,
249 | |     hook_bridge: Arc<HookBridge>,
...   |
477 | |     Ok(())
478 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/globals/hook.rs:439:13
    |
439 | /             if let Ok(lua_handle) = handle.borrow::<LuaHookHandle>() {
440 | |                 block_on_async::<_, _, LLMSpellError>(
441 | |                     "hook_unregister_standalone",
442 | |                     async move {
...   |
454 | |                 Ok(false) // Invalid handle, return false instead of error
455 | |             }
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
439 ~             handle.borrow::<LuaHookHandle>().map_or_else(|_| Ok(false), |lua_handle| block_on_async::<_, _, LLMSpellError>(
440 +                     "hook_unregister_standalone",
441 +                     async move {
442 +                         let mut handle_lock = lua_handle.handle.write().await;
443 +                         if let Some(h) = handle_lock.take() {
444 +                             lua_handle.hook_bridge.unregister_hook(&h).await?;
445 +                             Ok::<bool, LLMSpellError>(true)
446 +                         } else {
447 +                             Ok::<bool, LLMSpellError>(false)
448 +                         }
449 +                     },
450 +                     None,
451 +                 ))
    |

warning: docs for function returning `Result` missing `# Errors` section
  --> llmspell-bridge/src/lua/globals/json.rs:10:1
   |
10 | pub fn inject_json_global(lua: &Lua) -> Result<(), LLMSpellError> {
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_errors_doc

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/replay.rs:156:48
    |
156 |                     arr.push(lua_value_to_json(_lua, v)?);
    |                                                ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/replay.rs:125:22
    |
125 | fn lua_value_to_json(_lua: &Lua, value: Value) -> LuaResult<serde_json::Value> {
    |                      ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding
    = note: `-W clippy::used-underscore-binding` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::used_underscore_binding)]`

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/replay.rs:163:53
    |
163 |                     map.insert(k, lua_value_to_json(_lua, v)?);
    |                                                     ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/replay.rs:125:22
    |
125 | fn lua_value_to_json(_lua: &Lua, value: Value) -> LuaResult<serde_json::Value> {
    |                      ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/lua/globals/session.rs:16:5
   |
16 | /// SessionBuilder for creating sessions with method chaining
   |     ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
16 - /// SessionBuilder for creating sessions with method chaining
16 + /// `SessionBuilder` for creating sessions with method chaining
   |

warning: this could be a `const fn`
  --> llmspell-bridge/src/lua/globals/session.rs:26:5
   |
26 | /     fn new(bridge: Arc<SessionBridge>) -> Self {
27 | |         Self {
28 | |             bridge,
29 | |             name: None,
...  |
33 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
26 |     const fn new(bridge: Arc<SessionBridge>) -> Self {
   |     +++++

warning: this function has too many lines (244/100)
   --> llmspell-bridge/src/lua/globals/session.rs:97:1
    |
97  | / pub fn inject_session_global(
98  | |     lua: &Lua,
99  | |     _context: &GlobalContext,
100 | |     session_bridge: Arc<SessionBridge>,
...   |
428 | |     Ok(())
429 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/globals/session.rs:100:21
    |
100 |     session_bridge: Arc<SessionBridge>,
    |                     ^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<SessionBridge>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: redundant clone
   --> llmspell-bridge/src/lua/globals/session.rs:419:44
    |
419 |     let bridge_for_builder = session_bridge.clone();
    |                                            ^^^^^^^^ help: remove this
    |
note: this value is dropped without further use
   --> llmspell-bridge/src/lua/globals/session.rs:419:30
    |
419 |     let bridge_for_builder = session_bridge.clone();
    |                              ^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/globals/session.rs:163:29
    |
163 |           let session_query = if let Some(q) = query {
    |  _____________________________^
164 | |             // Convert Lua table to SessionQuery
165 | |             let mut query = SessionQuery::default();
...   |
181 | |             SessionQuery::default()
182 | |         };
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
163 ~         let session_query = query.map_or_else(SessionQuery::default, |q| {
164 +             // Convert Lua table to SessionQuery
165 +             let mut query = SessionQuery::default();
166 + 
167 +             if let Ok(Some(_status)) = q.get::<_, Option<String>>("status") {
168 +                 // Parse status - implementation would need the actual status parsing
169 +             }
170 + 
171 +             if let Ok(Some(tags)) = q.get::<_, Option<Vec<String>>>("tags") {
172 +                 query.tags = tags;
173 +             }
174 + 
175 +             if let Ok(Some(limit)) = q.get::<_, Option<usize>>("limit") {
176 +                 query.limit = Some(limit);
177 +             }
178 + 
179 +             query
180 ~         });
    |

warning: this function has too many lines (290/100)
   --> llmspell-bridge/src/lua/globals/state.rs:15:1
    |
15  | / pub fn inject_state_global(
16  | |     lua: &Lua,
17  | |     _context: &GlobalContext,
18  | |     state_global: &StateGlobal,
...   |
391 | |     Ok(())
392 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: temporary with significant `Drop` can be early dropped
  --> llmspell-bridge/src/lua/globals/state.rs:49:25
   |
46 |               } else {
   |  ____________________-
47 | |                 // Fallback to in-memory storage
48 | |                 let full_key = format!("{scope_str}:{key}");
49 | |                 let mut state = save_fallback_state.write();
   | |                         ^^^^^
50 | |                 state.insert(full_key, json_value);
51 | |                 Ok(())
52 | |             }
   | |_____________- temporary `state` is currently being dropped at the end of its contained scope
   |
   = note: this might lead to unnecessary resource contention
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
   |
49 ~                 
50 +                 save_fallback_state.write().insert(full_key, json_value);
51 ~                 
   |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/globals/state.rs:110:21
    |
107 |           } else {
    |  ________________-
108 | |             // Fallback to in-memory storage
109 | |             let full_key = format!("{scope_str}:{key}");
110 | |             let mut state = delete_fallback_state.write();
    | |                     ^^^^^
111 | |             state.remove(&full_key);
112 | |             Ok(())
113 | |         }
    | |_________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
110 ~             
111 +             delete_fallback_state.write().remove(&full_key);
112 ~             
    |

warning: temporary with significant `Drop` can be early dropped
   --> llmspell-bridge/src/lua/globals/state.rs:141:17
    |
139 |           } else {
    |  ________________-
140 | |             // Fallback to in-memory storage
141 | |             let state = list_fallback_state.read();
    | |                 ^^^^^
142 | |             let prefix = format!("{scope_str}:");
...   |
153 | |             Ok(table)
154 | |         }
    | |_________- temporary `state` is currently being dropped at the end of its contained scope
    |
    = note: this might lead to unnecessary resource contention
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#significant_drop_tightening
help: merge the temporary construction with its single usage
    |
141 ~             
142 +             let keys = list_fallback_state.read().collect();
143 |             let prefix = format!("{scope_str}:");
144 ~             
    |

warning: all if blocks contain the same code at the end
  --> llmspell-bridge/src/lua/globals/streaming.rs:56:29
   |
56 | / ...                       Ok(value)
57 | | ...                   }
   | |_______________________^
   |
   = note: the end suggestion probably needs some adjustments to use the expression result correctly
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#branches_sharing_code
   = note: `-W clippy::branches-sharing-code` implied by `-W clippy::nursery`
   = help: to override `-W clippy::nursery` add `#[allow(clippy::branches_sharing_code)]`
help: consider moving these statements after the if
   |
56 ~                             }
57 +                             Ok(value)
   |

warning: this function has too many lines (264/100)
   --> llmspell-bridge/src/lua/globals/tool.rs:18:1
    |
18  | / pub fn inject_tool_global(
19  | |     lua: &Lua,
20  | |     _context: &GlobalContext,
21  | |     registry: Arc<ComponentRegistry>,
...   |
370 | |     Ok(())
371 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
  --> llmspell-bridge/src/lua/globals/workflow.rs:18:49
   |
18 | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
   |                                                 ^^^^^ help: consider taking a reference instead: `&Table`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: this match arm has an identical body to the `_` wildcard arm
   --> llmspell-bridge/src/lua/globals/workflow.rs:105:9
    |
105 | /         "fail_fast" | "failfast" => ErrorStrategy::FailFast,
106 | |         _ => ErrorStrategy::FailFast,
    | |________^ help: try removing the arm
    |
    = help: or try changing either arm body
note: `_` wildcard arm here
   --> llmspell-bridge/src/lua/globals/workflow.rs:106:9
    |
106 |         _ => ErrorStrategy::FailFast,
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_same_arms
    = note: `-W clippy::match-same-arms` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::match_same_arms)]`

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:153:45
    |
153 |                         and_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:1
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items
    = note: `-W clippy::used-underscore-items` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::used_underscore_items)]`

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/workflow.rs:153:62
    |
153 |                         and_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                                              ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:21
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    |                     ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:166:44
    |
166 |                         or_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:1
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/workflow.rs:166:61
    |
166 |                         or_conditions.push(_parse_condition(_lua, cond_value)?);
    |                                                             ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:21
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    |                     ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:176:45
    |
176 |                         condition: Box::new(_parse_condition(_lua, inner)?),
    |                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:1
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed binding
   --> llmspell-bridge/src/lua/globals/workflow.rs:176:62
    |
176 |                         condition: Box::new(_parse_condition(_lua, inner)?),
    |                                                              ^^^^
    |
note: binding is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:112:21
    |
112 | fn _parse_condition(_lua: &Lua, condition_value: Value) -> mlua::Result<Condition> {
    |                     ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_binding

warning: this function has too many lines (152/100)
   --> llmspell-bridge/src/lua/globals/workflow.rs:233:5
    |
233 | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
234 | |         // execute method
235 | |         methods.add_method("execute", |lua, this, input: Option<Table>| {
236 | |             let input_json = if let Some(input_table) = input {
...   |
437 | |         });
438 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: item in documentation is missing backticks
   --> llmspell-bridge/src/lua/globals/workflow.rs:441:5
    |
441 | /// WorkflowBuilder for creating workflows with method chaining
    |     ^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
    |
441 - /// WorkflowBuilder for creating workflows with method chaining
441 + /// `WorkflowBuilder` for creating workflows with method chaining
    |

warning: very complex type used. Consider factoring parts into `type` definitions
   --> llmspell-bridge/src/lua/globals/workflow.rs:451:16
    |
451 |     condition: Option<Box<dyn Fn(&serde_json::Value) -> bool + Send + Sync>>,
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#type_complexity

warning: very complex type used. Consider factoring parts into `type` definitions
   --> llmspell-bridge/src/lua/globals/workflow.rs:455:21
    |
455 |     loop_condition: Option<Box<dyn Fn(&serde_json::Value) -> bool + Send + Sync>>,
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#type_complexity

warning: this function has too many lines (187/100)
   --> llmspell-bridge/src/lua/globals/workflow.rs:482:5
    |
482 | /     fn add_methods<'lua, M: UserDataMethods<'lua, Self>>(methods: &mut M) {
483 | |         // Set workflow type
484 | |         methods.add_method_mut("sequential", |_, this, ()| {
485 | |             this.workflow_type = Some("sequential".to_string());
...   |
714 | |         });
715 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:527:24
    |
527 |             let step = _parse_workflow_step(lua, step_table)?;
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:18:1
    |
18  | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:545:24
    |
545 |             let step = _parse_workflow_step(lua, step_table)?;
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:18:1
    |
18  | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: used underscore-prefixed item
   --> llmspell-bridge/src/lua/globals/workflow.rs:551:24
    |
551 |             let step = _parse_workflow_step(lua, step_table)?;
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: item is defined here
   --> llmspell-bridge/src/lua/globals/workflow.rs:18:1
    |
18  | fn _parse_workflow_step(_lua: &Lua, step_table: Table) -> mlua::Result<WorkflowStep> {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#used_underscore_items

warning: redundant clone
   --> llmspell-bridge/src/lua/globals/workflow.rs:693:37
    |
693 |             let workflow_name = name.clone();
    |                                     ^^^^^^^^ help: remove this
    |
note: this value is dropped without further use
   --> llmspell-bridge/src/lua/globals/workflow.rs:693:33
    |
693 |             let workflow_name = name.clone();
    |                                 ^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: this function has too many lines (537/100)
    --> llmspell-bridge/src/lua/globals/workflow.rs:748:1
     |
748  | / pub fn inject_workflow_global(
749  | |     lua: &Lua,
750  | |     _context: &GlobalContext,
751  | |     workflow_bridge: Arc<WorkflowBridge>,
...    |
1414 | |     Ok(())
1415 | | }
     | |_^
     |
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines

warning: this argument is passed by value, but not consumed in the function body
   --> llmspell-bridge/src/lua/globals/workflow.rs:751:22
    |
751 |     workflow_bridge: Arc<WorkflowBridge>,
    |                      ^^^^^^^^^^^^^^^^^^^ help: consider taking a reference instead: `&Arc<WorkflowBridge>`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_pass_by_value

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/workflow.rs:1294:40
     |
1294 |     let _bridge_clone = workflow_bridge.clone();
     |                                        ^^^^^^^^ help: remove this
     |
note: cloned value is neither consumed nor mutated
    --> llmspell-bridge/src/lua/globals/workflow.rs:1294:25
     |
1294 |     let _bridge_clone = workflow_bridge.clone();
     |                         ^^^^^^^^^^^^^^^^^^^^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: redundant clone
    --> llmspell-bridge/src/lua/globals/workflow.rs:1406:45
     |
1406 |     let bridge_for_builder = workflow_bridge.clone();
     |                                             ^^^^^^^^ help: remove this
     |
note: this value is dropped without further use
    --> llmspell-bridge/src/lua/globals/workflow.rs:1406:30
     |
1406 |     let bridge_for_builder = workflow_bridge.clone();
     |                              ^^^^^^^^^^^^^^^
     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_clone

warning: item in documentation is missing backticks
  --> llmspell-bridge/src/lua/hook_adapter.rs:74:68
   |
74 |     /// Returns an error if the Lua value cannot be converted to a HookResult
   |                                                                    ^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
   |
74 -     /// Returns an error if the Lua value cannot be converted to a HookResult
74 +     /// Returns an error if the Lua value cannot be converted to a `HookResult`
   |

warning: redundant closure
   --> llmspell-bridge/src/lua/hook_adapter.rs:175:43
    |
175 |             .map_or(HookResult::Continue, |hook_result| hook_result.clone())
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `std::clone::Clone::clone`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: the function has a cognitive complexity of (45/25)
  --> llmspell-bridge/src/lua/sync_utils.rs:77:37
   |
77 |         tokio::task::block_in_place(|| {
   |                                     ^^
   |
   = help: you could split it up into multiple smaller functions
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity
   = note: `-W clippy::cognitive-complexity` implied by `-W clippy::nursery`
   = help: to override `-W clippy::nursery` add `#[allow(clippy::cognitive_complexity)]`

warning: the function has a cognitive complexity of (38/25)
   --> llmspell-bridge/src/lua/sync_utils.rs:180:37
    |
180 |         tokio::task::block_in_place(|| {
    |                                     ^^
    |
    = help: you could split it up into multiple smaller functions
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cognitive_complexity

warning: use Option::map_or_else instead of an if let/else
   --> llmspell-bridge/src/lua/sync_utils.rs:194:21
    |
194 | /                     match tokio::time::timeout(duration, future).await {
195 | |                         Ok(result) => result,
196 | |                         Err(_) => Err(mlua::Error::RuntimeError(format!(
197 | |                             "{op_name} timed out after {duration:?}"
198 | |                         ))),
199 | |                     }
    | |_____________________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
help: try
    |
194 ~                     (tokio::time::timeout(duration, future).await).map_or_else(|_| Err(mlua::Error::RuntimeError(format!(
195 +                             "{op_name} timed out after {duration:?}"
196 +                         ))), |result| result)
    |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/mod.rs:1:57
  |
1 | //! ABOUTME: JavaScript script engine implementation of ScriptEngineBridge
  |                                                         ^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: JavaScript script engine implementation of ScriptEngineBridge
1 + //! ABOUTME: JavaScript script engine implementation of `ScriptEngineBridge`
  |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/engine.rs:1:14
  |
1 | //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
  |              ^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
1 + //! ABOUTME: `JSEngine` implementation of ScriptEngineBridge trait
  |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/engine.rs:1:41
  |
1 | //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
  |                                         ^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
1 - //! ABOUTME: JSEngine implementation of ScriptEngineBridge trait
1 + //! ABOUTME: JSEngine implementation of `ScriptEngineBridge` trait
  |

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/engine.rs:31:5
   |
31 | /     pub fn engine_features() -> EngineFeatures {
32 | |         EngineFeatures {
33 | |             async_execution: true, // Native async/await
34 | |             streaming: true,       // Via async generators
...  |
41 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
31 |     pub const fn engine_features() -> EngineFeatures {
   |         +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/agent.rs:13:1
   |
13 | / pub fn inject_agent_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
22 | |     Ok(())
23 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_agent_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/event.rs:18:1
   |
18 | / pub fn inject_event_global(
19 | |     _ctx: &mut Context,
20 | |     _context: &GlobalContext,
21 | | ) -> Result<(), LLMSpellError> {
...  |
27 | |     Ok(())
28 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
18 | pub const fn inject_event_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/hook.rs:13:1
   |
13 | / pub fn inject_hook_global(_ctx: &mut boa_engine::Context, _context: &GlobalContext) -> Result<()> {
...  |
19 | |     Ok(())
20 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_hook_global(_ctx: &mut boa_engine::Context, _context: &GlobalContext) -> Result<()> {
   |     +++++

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/globals/json.rs:9:41
  |
9 | /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
  |                                         ^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
9 - /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
9 + /// Note: JavaScript already has native `JSON.parse()` and JSON.stringify()
  |

warning: item in documentation is missing backticks
 --> llmspell-bridge/src/javascript/globals/json.rs:9:58
  |
9 | /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
  |                                                          ^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
help: try
  |
9 - /// Note: JavaScript already has native JSON.parse() and JSON.stringify()
9 + /// Note: JavaScript already has native JSON.parse() and `JSON.stringify()`
  |

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/json.rs:16:1
   |
16 | / pub fn inject_json_global(
17 | |     _ctx: &mut boa_engine::Context,
18 | |     _context: &GlobalContext,
19 | | ) -> Result<(), LLMSpellError> {
...  |
25 | |     Ok(())
26 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
16 | pub const fn inject_json_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/state.rs:13:1
   |
13 | / pub fn inject_state_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | |     _state_global: &StateGlobal,
...  |
25 | |     Ok(())
26 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_state_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/streaming.rs:13:1
   |
13 | / pub fn inject_streaming_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
23 | |     Ok(())
24 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_streaming_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/tool.rs:13:1
   |
13 | / pub fn inject_tool_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
23 | |     Ok(())
24 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_tool_global(
   |     +++++

warning: this could be a `const fn`
  --> llmspell-bridge/src/javascript/globals/workflow.rs:13:1
   |
13 | / pub fn inject_workflow_global(
14 | |     _ctx: &mut boa_engine::Context,
15 | |     _context: &GlobalContext,
16 | | ) -> Result<(), LLMSpellError> {
...  |
23 | |     Ok(())
24 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#missing_const_for_fn
help: make the function `const`
   |
13 | pub const fn inject_workflow_global(
   |     +++++

warning: unused `async` for function with no await statements
   --> llmspell-bridge/src/workflows.rs:227:5
    |
227 | /     pub async fn create_workflow(
228 | |         workflow_type: &str,
229 | |         params: serde_json::Value,
230 | |     ) -> Result<Box<dyn WorkflowExecutor>> {
...   |
253 | |     }
    | |_____^
    |
    = help: consider removing the `async` from this function
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unused_async
    = note: `-W clippy::unused-async` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::unused_async)]`

warning: `llmspell-bridge` (lib) generated 252 warnings (run `cargo clippy --fix --lib -p llmspell-bridge` to apply 84 suggestions)
    Checking llmspell-testing v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-testing)
    Checking llmspell-cli v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-cli)
warning: `assert!(true)` will be optimized out by the compiler
   --> llmspell-testing/src/macros.rs:169:9
    |
169 |         assert!(true);
    |         ^^^^^^^^^^^^^
    |
    = help: remove it
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assertions_on_constants
    = note: `#[warn(clippy::assertions_on_constants)]` on by default

warning: `llmspell-testing` (lib test) generated 1 warning
warning: casting `usize` to `u32` may truncate the value on targets with 64-bit wide pointers
  --> llmspell-tools/tests/hook_performance_test.rs:93:45
   |
93 |         let avg_no_hooks = total_no_hooks / ITERATIONS as u32;
   |                                             ^^^^^^^^^^^^^^^^^
   |
   = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
   = note: `-W clippy::cast-possible-truncation` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_possible_truncation)]`
help: ... or use `try_from` and handle the error accordingly
   |
93 -         let avg_no_hooks = total_no_hooks / ITERATIONS as u32;
93 +         let avg_no_hooks = total_no_hooks / u32::try_from(ITERATIONS);
   |

warning: casting `usize` to `u32` may truncate the value on targets with 64-bit wide pointers
   --> llmspell-tools/tests/hook_performance_test.rs:106:49
    |
106 |         let avg_with_hooks = total_with_hooks / ITERATIONS as u32;
    |                                                 ^^^^^^^^^^^^^^^^^
    |
    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation
help: ... or use `try_from` and handle the error accordingly
    |
106 -         let avg_with_hooks = total_with_hooks / ITERATIONS as u32;
106 +         let avg_with_hooks = total_with_hooks / u32::try_from(ITERATIONS);
    |

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_performance_test.rs:109:31
    |
109 |         let overhead_micros = avg_with_hooks.as_micros() as f64 - avg_no_hooks.as_micros() as f64;
    |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_performance_test.rs:109:67
    |
109 |         let overhead_micros = avg_with_hooks.as_micros() as f64 - avg_no_hooks.as_micros() as f64;
    |                                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_performance_test.rs:111:32
    |
111 |             (overhead_micros / avg_no_hooks.as_micros() as f64) * 100.0
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `i32` to `u32` may lose the sign of the value
   --> llmspell-tools/tests/hook_performance_test.rs:158:41
    |
158 |     let avg_duration = total_duration / iterations as u32;
    |                                         ^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss
    = note: `-W clippy::cast-sign-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_sign_loss)]`

warning: casting `i32` to `u32` may lose the sign of the value
   --> llmspell-tools/tests/hook_performance_test.rs:199:41
    |
199 |     let avg_duration = total_duration / iterations as u32;
    |                                         ^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_sign_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_performance_test.rs:307:9
    |
307 |         duration_with_audit.as_millis() as f64 - duration_no_audit.as_millis() as f64;
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_performance_test.rs:307:50
    |
307 |         duration_with_audit.as_millis() as f64 - duration_no_audit.as_millis() as f64;
    |                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_performance_test.rs:309:28
    |
309 |         (overhead_millis / duration_no_audit.as_millis() as f64) * 100.0
    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:14:5
   |
14 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:13:5
   |
13 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = note: `#[warn(unused_attributes)]` on by default

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:15:5
   |
15 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:13:5
   |
13 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:16:5
   |
16 |     #[ignore = "Workflow execution without steps not implemented - placeholder test"]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:13:5
   |
13 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:58:5
   |
58 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:57:5
   |
57 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:59:5
   |
59 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:57:5
   |
57 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:60:5
   |
60 |     #[ignore = "Workflow oneshot execution not implemented - placeholder test"]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:57:5
   |
57 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:89:5
   |
89 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:88:5
   |
88 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:90:5
   |
90 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:88:5
   |
88 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:91:5
   |
91 |     #[ignore = "Workflow metrics tracking not implemented - placeholder test"]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
   |
note: attribute also specified here
  --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:88:5
   |
88 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:131:5
    |
131 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:130:5
    |
130 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:132:5
    |
132 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:130:5
    |
130 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:157:5
    |
157 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:156:5
    |
156 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:158:5
    |
158 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:156:5
    |
156 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> llmspell-bridge/benches/session_bench.rs:9:5
  |
9 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:177:5
    |
177 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:176:5
    |
176 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:178:5
    |
178 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:176:5
    |
176 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:179:5
    |
179 |     #[ignore = "Workflow execution history not implemented - placeholder test"]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:176:5
    |
176 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:214:5
    |
214 |     #[cfg_attr(feature = "bridge-tests", ignore = "bridge")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:213:5
    |
213 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:215:5
    |
215 |     #[cfg_attr(feature = "workflow-tests", ignore = "workflow")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:213:5
    |
213 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused attribute
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:216:5
    |
216 |     #[ignore = "Workflow concurrent execution not implemented - placeholder test"]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove this attribute
    |
note: attribute also specified here
   --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:213:5
    |
213 |     #[cfg_attr(feature = "integration-tests", ignore = "integration")]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: `llmspell-tools` (test "hook_performance_test") generated 10 warnings
warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/tests/streaming_test.rs:39:23
   |
39 |             Err(e) => panic!("Script execution failed: {:?}", e),
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
39 -             Err(e) => panic!("Script execution failed: {:?}", e),
39 +             Err(e) => panic!("Script execution failed: {e:?}"),
   |

warning: this function has too many lines (107/100)
   --> llmspell-agents/examples/provider_state_persistence.rs:27:7
    |
27  |   async fn main() -> Result<()> {
    |  _______^
28  | |     // Initialize logging
29  | |     tracing_subscriber::fmt().with_max_level(Level::INFO).init();
...   |
180 | |     Ok(())
181 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: this function has too many lines (170/100)
   --> llmspell-agents/examples/agent_library.rs:16:7
    |
16  |   async fn main() -> anyhow::Result<()> {
    |  _______^
17  | |     // Initialize logging
18  | |     tracing_subscriber::fmt().with_max_level(Level::INFO).init();
...   |
250 | |     Ok(())
251 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: redundant closure
  --> llmspell-bridge/tests/streaming_test.rs:77:55
   |
77 |                 assert_eq!(obj.get("exists").and_then(|v| v.as_bool()), Some(true));
   |                                                       ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls
   = note: `-W clippy::redundant-closure-for-method-calls` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::redundant_closure_for_method_calls)]`

warning: redundant closure
  --> llmspell-bridge/tests/streaming_test.rs:78:56
   |
78 |                 assert_eq!(obj.get("hasNext").and_then(|v| v.as_bool()), Some(true));
   |                                                        ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/tests/streaming_test.rs:79:58
   |
79 |                 assert_eq!(obj.get("hasIsDone").and_then(|v| v.as_bool()), Some(true));
   |                                                          ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
  --> llmspell-bridge/tests/streaming_test.rs:80:59
   |
80 |                 assert_eq!(obj.get("hasCollect").and_then(|v| v.as_bool()), Some(true));
   |                                                           ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: variables can be used directly in the `format!` string
  --> llmspell-bridge/tests/streaming_test.rs:82:23
   |
82 |             Err(e) => panic!("Script execution failed: {:?}", e),
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
82 -             Err(e) => panic!("Script execution failed: {:?}", e),
82 +             Err(e) => panic!("Script execution failed: {e:?}"),
   |

warning: redundant closure
   --> llmspell-bridge/tests/streaming_test.rs:127:59
    |
127 |                 assert_eq!(obj.get("toolExists").and_then(|v| v.as_bool()), Some(true));
    |                                                           ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-bridge/tests/streaming_test.rs:128:57
    |
128 |                 assert_eq!(obj.get("hasTools").and_then(|v| v.as_bool()), Some(true));
    |                                                         ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-bridge/tests/streaming_test.rs:129:58
    |
129 |                 assert_eq!(obj.get("toolWorks").and_then(|v| v.as_bool()), Some(true));
    |                                                          ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/streaming_test.rs:131:23
    |
131 |             Err(e) => panic!("Script execution failed: {:?}", e),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
131 -             Err(e) => panic!("Script execution failed: {:?}", e),
131 +             Err(e) => panic!("Script execution failed: {e:?}"),
    |

warning: redundant closure
   --> llmspell-bridge/tests/streaming_test.rs:191:56
    |
191 |                     obj.get("workflowExists").and_then(|v| v.as_bool()),
    |                                                        ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-bridge/tests/streaming_test.rs:203:55
    |
203 |                     obj.get("seqHasExecute").and_then(|v| v.as_bool()),
    |                                                       ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: redundant closure
   --> llmspell-bridge/tests/streaming_test.rs:207:55
    |
207 |                     obj.get("parHasExecute").and_then(|v| v.as_bool()),
    |                                                       ^^^^^^^^^^^^^^^ help: replace the closure with the method itself: `serde_json::value::Value::as_bool`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_closure_for_method_calls

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/streaming_test.rs:211:23
    |
211 |             Err(e) => panic!("Script execution failed: {:?}", e),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
211 -             Err(e) => panic!("Script execution failed: {:?}", e),
211 +             Err(e) => panic!("Script execution failed: {e:?}"),
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-bridge/tests/streaming_test.rs:235:23
    |
235 |             Err(e) => panic!("Streaming execution failed: {:?}", e),
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
235 -             Err(e) => panic!("Streaming execution failed: {:?}", e),
235 +             Err(e) => panic!("Streaming execution failed: {e:?}"),
    |

warning: you seem to want to iterate on a map's keys
   --> llmspell-agents/examples/agent_library.rs:246:26
    |
246 |     for (category, _) in &agent_catalog {
    |                          ^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#for_kv_map
    = note: `-W clippy::for-kv-map` implied by `-W clippy::all`
    = help: to override `-W clippy::all` add `#[allow(clippy::for_kv_map)]`
help: use the corresponding method
    |
246 -     for (category, _) in &agent_catalog {
246 +     for category in agent_catalog.keys() {
    |

warning: this function has too many lines (123/100)
   --> llmspell-agents/examples/multi_agent_coordinator.rs:16:7
    |
16  |   async fn main() -> anyhow::Result<()> {
    |  _______^
17  | |     // Initialize logging
18  | |     tracing_subscriber::fmt().with_max_level(Level::INFO).init();
...   |
183 | |     Ok(())
184 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: calling `PerformanceConfig::default()` is more clear than this expression
  --> llmspell-agents/examples/provider_state_persistence.rs:69:30
   |
69 |                 performance: Default::default(),
   |                              ^^^^^^^^^^^^^^^^^^ help: try: `PerformanceConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: binding to `_` prefixed variable with no side-effect
  --> llmspell-agents/examples/multi_agent_coordinator.rs:53:9
   |
53 |     let _data_agent = data_agent_result.agent;
   |         ^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding
   = note: `-W clippy::no-effect-underscore-binding` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::no_effect_underscore_binding)]`

warning: binding to `_` prefixed variable with no side-effect
  --> llmspell-agents/examples/multi_agent_coordinator.rs:68:9
   |
68 |     let _analysis_agent = analysis_agent_result.agent;
   |         ^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding

warning: binding to `_` prefixed variable with no side-effect
  --> llmspell-agents/examples/multi_agent_coordinator.rs:79:9
   |
79 |     let _monitor_agent = monitor_result.agent;
   |         ^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#no_effect_underscore_binding

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_resource_exhaustion_tests.rs:15:45
   |
15 |     let hash_tool = HashCalculatorTool::new(Default::default());
   |                                             ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: calling `ToolQuery::default()` is more clear than this expression
   --> llmspell-agents/tests/tool_integration_performance_tests.rs:288:41
    |
288 |     let tools = manager.discover_tools(&Default::default()).await.unwrap();
    |                                         ^^^^^^^^^^^^^^^^^^ help: try: `ToolQuery::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
    = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: calling `JsonProcessorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_resource_exhaustion_tests.rs:47:44
   |
47 |     let json_tool = JsonProcessorTool::new(Default::default());
   |                                            ^^^^^^^^^^^^^^^^^^ help: try: `JsonProcessorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `TextManipulatorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_resource_exhaustion_tests.rs:76:46
   |
76 |     let text_tool = TextManipulatorTool::new(Default::default());
   |                                              ^^^^^^^^^^^^^^^^^^ help: try: `TextManipulatorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `CsvAnalyzerConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_resource_exhaustion_tests.rs:152:41
    |
152 |     let csv_tool = CsvAnalyzerTool::new(Default::default());
    |                                         ^^^^^^^^^^^^^^^^^^ help: try: `CsvAnalyzerConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: `format!(..)` appended to existing `String`
   --> llmspell-tools/tests/security_resource_exhaustion_tests.rs:157:9
    |
157 |         csv_data.push_str(&format!("{},name{},{}\n", i, i, i * 100));
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: consider using `write!` to avoid the extra allocation
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#format_push_string
    = note: `-W clippy::format-push-string` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::format_push_string)]`

warning: calling `ToolQuery::default()` is more clear than this expression
   --> llmspell-agents/tests/tool_integration_performance_tests.rs:453:41
    |
453 |     let tools = manager.discover_tools(&Default::default()).await.unwrap();
    |                                         ^^^^^^^^^^^^^^^^^^ help: try: `ToolQuery::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_resource_exhaustion_tests.rs:231:54
    |
231 |     let hash_tool = Arc::new(HashCalculatorTool::new(Default::default()));
    |                                                      ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: item in documentation is missing backticks
 --> llmspell-bridge/tests/workflow_bridge_integration_tests.rs:1:36
  |
1 | //! ABOUTME: Integration tests for WorkflowBridge with standardized factory
  |                                    ^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
1 - //! ABOUTME: Integration tests for WorkflowBridge with standardized factory
1 + //! ABOUTME: Integration tests for `WorkflowBridge` with standardized factory
  |

warning: `llmspell-agents` (example "multi_agent_coordinator") generated 4 warnings
warning: `llmspell-agents` (example "agent_library") generated 2 warnings (run `cargo clippy --fix --example "agent_library"` to apply 1 suggestion)
warning: `llmspell-bridge` (test "streaming_test") generated 15 warnings (run `cargo clippy --fix --test "streaming_test"` to apply 15 suggestions)
error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:28:20
   |
28 |             engine.execute(lua_code).await.unwrap()
   |                    ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
28 |             engine.execute_script(lua_code).await.unwrap()
   |                           +++++++

warning: `llmspell-agents` (test "tool_integration_performance_tests") generated 2 warnings
error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:47:16
   |
47 |         engine.execute(create_code).await.unwrap()
   |                ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
47 |         engine.execute_script(create_code).await.unwrap()
   |                       +++++++

warning: `llmspell-tools` (test "security_resource_exhaustion_tests") generated 6 warnings
warning: `llmspell-agents` (example "provider_state_persistence") generated 2 warnings
error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:68:20
   |
68 |             engine.execute(&save_code).await.unwrap()
   |                    ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
68 |             engine.execute_script(&save_code).await.unwrap()
   |                           +++++++

warning: `llmspell-bridge` (test "workflow_bridge_integration_tests") generated 20 warnings (run `cargo clippy --fix --test "workflow_bridge_integration_tests"` to apply 20 suggestions)
error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:75:20
   |
75 |             engine.execute(&load_code).await.unwrap()
   |                    ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
75 |             engine.execute_script(&load_code).await.unwrap()
   |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:94:16
   |
94 |         engine.execute(create_code).await.unwrap()
   |                ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
94 |         engine.execute_script(create_code).await.unwrap()
   |                       +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:131:20
    |
131 |             engine.execute(&store_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
131 |             engine.execute_script(&store_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:138:20
    |
138 |             engine.execute(&list_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
138 |             engine.execute_script(&list_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:145:20
    |
145 |             engine.execute(&query_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
145 |             engine.execute_script(&query_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:178:28
    |
178 |                     engine.execute(&lua_code).await.unwrap()
    |                            ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
178 |                     engine.execute_script(&lua_code).await.unwrap()
    |                                   +++++++

warning: using `clone` on type `ComponentId` which implements the `Copy` trait
   --> llmspell-core/src/events/artifact_events.rs:437:13
    |
437 |             component_id.clone(),
    |             ^^^^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `component_id`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy
    = note: `#[warn(clippy::clone_on_copy)]` on by default

warning: using `clone` on type `ComponentId` which implements the `Copy` trait
   --> llmspell-core/src/events/artifact_events.rs:440:47
    |
440 |         let event = ArtifactEventBuilder::new(component_id.clone())
    |                                               ^^^^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `component_id`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy

warning: using `clone` on type `ComponentId` which implements the `Copy` trait
   --> llmspell-core/src/events/artifact_events.rs:461:21
    |
461 |                     component_id.clone(),
    |                     ^^^^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `component_id`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy

warning: using `clone` on type `ComponentId` which implements the `Copy` trait
   --> llmspell-core/src/events/artifact_events.rs:466:13
    |
466 |             component_id.clone(),
    |             ^^^^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `component_id`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:188:14
    |
187 | /         engine
188 | |             .execute(r#"return Session.create({ name = "batch_artifact_test" })"#)
    | |_____________-^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
188 |             .execute_script(r#"return Session.create({ name = "batch_artifact_test" })"#)
    |                     +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:219:28
    |
219 |                     engine.execute(&store_batch_code).await.unwrap()
    |                            ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
219 |                     engine.execute_script(&store_batch_code).await.unwrap()
    |                                   +++++++

warning: using `clone` on type `ComponentId` which implements the `Copy` trait
   --> llmspell-core/src/state/artifact_correlation.rs:370:54
    |
370 |             .correlate_creation(artifact_id.clone(), component_id.clone(), None)
    |                                                      ^^^^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `component_id`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy

warning: using `clone` on type `ComponentId` which implements the `Copy` trait
   --> llmspell-core/src/state/artifact_correlation.rs:393:52
    |
393 |             .correlate_creation(parent_id.clone(), component_id.clone(), None)
    |                                                    ^^^^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `component_id`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy

warning: using `clone` on type `ComponentId` which implements the `Copy` trait
   --> llmspell-core/src/state/artifact_correlation.rs:401:17
    |
401 |                 component_id.clone(),
    |                 ^^^^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `component_id`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:237:18
    |
236 | /             engine
237 | |                 .execute(r#"return Session.create({ name = "perf_test" })"#)
    | |_________________-^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
237 |                 .execute_script(r#"return Session.create({ name = "perf_test" })"#)
    |                         +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:247:14
    |
246 | /         engine
247 | |             .execute(r#"return Session.create({ name = "save_load_test" })"#)
    | |_____________-^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
247 |             .execute_script(r#"return Session.create({ name = "save_load_test" })"#)
    |                     +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:257:20
    |
257 |             engine.execute(&save_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
257 |             engine.execute_script(&save_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:266:20
    |
266 |             engine.execute(&load_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
266 |             engine.execute_script(&load_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:287:20
    |
287 |             engine.execute(&store_text_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
287 |             engine.execute_script(&store_text_code).await.unwrap()
    |                           +++++++

For more information about this error, try `rustc --explain E0599`.
warning: `llmspell-bridge` (bench "session_bench") generated 1 warning
error: could not compile `llmspell-bridge` (bench "session_bench") due to 16 previous errors; 1 warning emitted
warning: build failed, waiting for other jobs to finish...
warning: `llmspell-core` (lib test) generated 7 warnings (run `cargo clippy --fix --lib -p llmspell-core --tests` to apply 7 suggestions)
warning: single-character string constant used as pattern
  --> llmspell-tools/tests/hook_integration_tests.rs:52:34
   |
52 |     assert!(output.text.contains("4"));
   |                                  ^^^ help: consider using a `char`: `'4'`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_char_pattern
   = note: `-W clippy::single-char-pattern` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_char_pattern)]`

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_integration_tests.rs:262:23
    |
262 |     let overhead_ms = duration_with_hooks.as_millis() as f64 - duration_no_hooks.as_millis() as f64;
    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
    = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_integration_tests.rs:262:64
    |
262 |     let overhead_ms = duration_with_hooks.as_millis() as f64 - duration_no_hooks.as_millis() as f64;
    |                                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-tools/tests/hook_integration_tests.rs:264:24
    |
264 |         (overhead_ms / duration_no_hooks.as_millis() as f64) * 100.0
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/hook_integration_tests.rs:269:5
    |
269 | /     println!(
270 | |         "No hooks: {:?}, With hooks: {:?}, Overhead: {:.2}%",
271 | |         duration_no_hooks, duration_with_hooks, overhead_percent
272 | |     );
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/hook_integration_tests.rs:275:5
    |
275 | /     assert!(
276 | |         overhead_percent < 20.0,
277 | |         "Hook overhead {:.2}% exceeds 20% threshold",
278 | |         overhead_percent
279 | |     );
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/hook_integration_tests.rs:299:38
    |
299 |         let input = AgentInput::text(format!("Circuit breaker test {}", i)).with_parameter(
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
299 -         let input = AgentInput::text(format!("Circuit breaker test {}", i)).with_parameter(
299 +         let input = AgentInput::text(format!("Circuit breaker test {i}")).with_parameter(
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/hook_integration_tests.rs:353:38
    |
353 |         let input = AgentInput::text(format!("Test {}", name)).with_parameter("parameters", params);
    |                                      ^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
353 -         let input = AgentInput::text(format!("Test {}", name)).with_parameter("parameters", params);
353 +         let input = AgentInput::text(format!("Test {name}")).with_parameter("parameters", params);
    |

warning: single-character string constant used as pattern
   --> llmspell-tools/tests/hook_integration_tests.rs:413:34
    |
413 |     assert!(output.text.contains("4"));
    |                                  ^^^ help: consider using a `char`: `'4'`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_char_pattern

warning: field assignment outside of initializer for an instance created with Default::default()
  --> llmspell-sessions/tests/policy_test.rs:26:5
   |
26 |     policy_config.enable_timeout = true;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { enable_timeout: true, enable_resource_limits: false, enable_rate_limiting: false, ..Default::default() }` and removing relevant reassignments
  --> llmspell-sessions/tests/policy_test.rs:25:5
   |
25 |     let mut policy_config = SessionPolicyConfig::default();
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default
   = note: `#[warn(clippy::field_reassign_with_default)]` on by default

warning: field assignment outside of initializer for an instance created with Default::default()
  --> llmspell-sessions/tests/policy_test.rs:65:5
   |
65 |     policy_config.enable_timeout = false;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { enable_timeout: false, enable_resource_limits: true, enable_rate_limiting: false, ..Default::default() }` and removing relevant reassignments
  --> llmspell-sessions/tests/policy_test.rs:64:5
   |
64 |     let mut policy_config = SessionPolicyConfig::default();
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/policy_test.rs:101:5
    |
101 |     policy_config.enable_timeout = false;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { enable_timeout: false, enable_resource_limits: false, enable_rate_limiting: true, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/policy_test.rs:100:5
    |
100 |     let mut policy_config = SessionPolicyConfig::default();
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/policy_test.rs:134:5
    |
134 |     policy_config.composition_pattern = PolicyComposition::Sequential;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { composition_pattern: PolicyComposition::Sequential, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/policy_test.rs:133:5
    |
133 |     let mut policy_config = SessionPolicyConfig::default();
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/policy_test.rs:155:5
    |
155 |     policy_config.composition_pattern = PolicyComposition::Parallel;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { composition_pattern: PolicyComposition::Parallel, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/policy_test.rs:154:5
    |
154 |     let mut policy_config = SessionPolicyConfig::default();
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/policy_test.rs:182:5
    |
182 |     policy_config.composition_pattern = PolicyComposition::Voting { threshold: 0.6 };
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { composition_pattern: PolicyComposition::Voting { threshold: 0.6 }, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/policy_test.rs:181:5
    |
181 |     let mut policy_config = SessionPolicyConfig::default();
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/policy_test.rs:266:5
    |
266 |     new_config.enable_timeout = false;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { enable_timeout: false, enable_resource_limits: false, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/policy_test.rs:265:5
    |
265 |     let mut new_config = SessionPolicyConfig::default();
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> llmspell-sessions/tests/policy_test.rs:285:5
    |
285 |     policy_config.enable_timeout = false;
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llmspell_sessions::policies::SessionPolicyConfig { enable_timeout: false, enable_resource_limits: false, enable_rate_limiting: true, ..Default::default() }` and removing relevant reassignments
   --> llmspell-sessions/tests/policy_test.rs:284:5
    |
284 |     let mut policy_config = SessionPolicyConfig::default();
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#field_reassign_with_default

warning: binding's name is too similar to existing binding
   --> llmspell-tools/tests/webpage_monitor_integration.rs:149:25
    |
149 |                     let output_value: serde_json::Value =
    |                         ^^^^^^^^^^^^
    |
note: existing binding defined here
   --> llmspell-tools/tests/webpage_monitor_integration.rs:135:17
    |
135 |             let output1_value: serde_json::Value = serde_json::from_str(&output1.text).unwrap();
    |                 ^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#similar_names
    = note: `-W clippy::similar-names` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::similar_names)]`

warning: this function has too many lines (138/100)
   --> llmspell-agents/examples/research_agent.rs:13:7
    |
13  |   async fn main() -> anyhow::Result<()> {
    |  _______^
14  | |     // Initialize logging
15  | |     tracing_subscriber::fmt().with_max_level(Level::INFO).init();
...   |
189 | |     Ok(())
190 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#too_many_lines
    = note: `-W clippy::too-many-lines` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::too_many_lines)]`

warning: calling `TextManipulatorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_basic.rs:16:47
   |
16 |             Box::new(TextManipulatorTool::new(Default::default())),
   |                                               ^^^^^^^^^^^^^^^^^^ help: try: `TextManipulatorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_basic.rs:20:45
   |
20 |             Box::new(UuidGeneratorTool::new(Default::default())),
   |                                             ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_basic.rs:24:46
   |
24 |             Box::new(HashCalculatorTool::new(Default::default())),
   |                                              ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_basic.rs:93:45
   |
93 |             Box::new(UuidGeneratorTool::new(Default::default())) as Box<dyn Tool>,
   |                                             ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HashCalculatorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_basic.rs:101:46
    |
101 |             Box::new(HashCalculatorTool::new(Default::default())) as Box<dyn Tool>,
    |                                              ^^^^^^^^^^^^^^^^^^ help: try: `HashCalculatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: `llmspell-tools` (test "hook_integration_tests") generated 9 warnings (run `cargo clippy --fix --test "hook_integration_tests"` to apply 6 suggestions)
warning: calling `TextManipulatorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_basic.rs:134:47
    |
134 |             Box::new(TextManipulatorTool::new(Default::default())) as Box<dyn Tool>,
    |                                               ^^^^^^^^^^^^^^^^^^ help: try: `TextManipulatorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_basic.rs:205:45
    |
205 |             Box::new(UuidGeneratorTool::new(Default::default())) as Box<dyn Tool>,
    |                                             ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `UuidGeneratorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_basic.rs:265:45
    |
265 |             Box::new(UuidGeneratorTool::new(Default::default())) as Box<dyn Tool>,
    |                                             ^^^^^^^^^^^^^^^^^^ help: try: `UuidGeneratorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-bridge/tests/json_performance_test.rs:65:24
   |
65 |     let small_per_op = small_duration.as_micros() as f64 / f64::from(iterations);
   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss
   = note: `-W clippy::cast-precision-loss` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::cast_precision_loss)]`

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-bridge/tests/json_performance_test.rs:82:25
   |
82 |     let medium_per_op = medium_duration.as_micros() as f64 / f64::from(iterations);
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
  --> llmspell-bridge/tests/json_performance_test.rs:99:24
   |
99 |     let large_per_op = large_duration.as_micros() as f64 / f64::from(iterations);
   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-bridge/tests/json_performance_test.rs:152:24
    |
152 |     let small_per_op = small_duration.as_micros() as f64 / f64::from(iterations);
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-bridge/tests/json_performance_test.rs:168:25
    |
168 |     let medium_per_op = medium_duration.as_micros() as f64 / f64::from(iterations);
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-bridge/tests/json_performance_test.rs:184:24
    |
184 |     let large_per_op = large_duration.as_micros() as f64 / f64::from(iterations);
    |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: casting `u128` to `f64` causes a loss of precision (`u128` is 128 bits wide, but `f64`'s mantissa is only 52 bits wide)
   --> llmspell-bridge/tests/json_performance_test.rs:227:18
    |
227 |     let per_op = duration.as_micros() as f64 / f64::from(iterations);
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_precision_loss

warning: item in documentation is missing backticks
 --> llmspell-tools/tests/webpage_monitor_integration.rs:1:36
  |
1 | //! ABOUTME: Integration tests for WebpageMonitorTool
  |                                    ^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
1 - //! ABOUTME: Integration tests for WebpageMonitorTool
1 + //! ABOUTME: Integration tests for `WebpageMonitorTool`
  |

warning: `llmspell-sessions` (test "policy_test") generated 8 warnings
warning: item in documentation is missing backticks
 --> llmspell-tools/tests/http_request_integration.rs:1:27
  |
1 | //! Integration tests for HttpRequestTool
  |                           ^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
1 - //! Integration tests for HttpRequestTool
1 + //! Integration tests for `HttpRequestTool`
  |

warning: use Option::map_or_else instead of an if let/else
  --> llmspell-tools/tests/common/mod.rs:64:21
   |
64 |       let error_msg = if let Some(error_str) = output_value["error"].as_str() {
   |  _____________________^
65 | |         // Simple string error format
66 | |         error_str.to_string()
67 | |     } else if let Some(error_obj) = output_value["error"].as_object() {
...  |
76 | |         panic!("Expected error field in output, got: {output_value}");
77 | |     };
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else
   = note: `-W clippy::option-if-let-else` implied by `-W clippy::nursery`
   = help: to override `-W clippy::nursery` add `#[allow(clippy::option_if_let_else)]`
help: try
   |
64 ~     let error_msg = output_value["error"].as_str().map_or_else(|| if let Some(error_obj) = output_value["error"].as_object() {
65 +         // Complex error object format - try message field first
66 +         if let Some(msg) = error_obj.get("message").and_then(|m| m.as_str()) {
67 +             msg.to_string()
68 +         } else {
69 +             // Fallback to serializing the entire error object
70 +             serde_json::to_string(error_obj).unwrap_or_else(|_| format!("{error_obj:?}"))
71 +         }
72 +     } else {
73 +         panic!("Expected error field in output, got: {output_value}");
74 ~     }, |error_str| error_str.to_string());
   |

warning: use Option::map_or_else instead of an if let/else
  --> llmspell-tools/tests/common/mod.rs:69:9
   |
69 | /         if let Some(msg) = error_obj.get("message").and_then(|m| m.as_str()) {
70 | |             msg.to_string()
71 | |         } else {
...  |
74 | |         }
   | |_________^ help: try: `error_obj.get("message").and_then(|m| m.as_str()).map_or_else(|| serde_json::to_string(error_obj).unwrap_or_else(|_| format!("{error_obj:?}")), |msg| msg.to_string())`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#option_if_let_else

warning: calling `HttpRequestConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/http_request_integration.rs:12:37
   |
12 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
   |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/webpage_monitor_integration.rs:41:17
   |
41 |                 eprintln!("Skipping test due to network error: {}", e);
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
41 -                 eprintln!("Skipping test due to network error: {}", e);
41 +                 eprintln!("Skipping test due to network error: {e}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/webpage_monitor_integration.rs:45:13
   |
45 |             panic!("Unexpected error: {}", e);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
45 -             panic!("Unexpected error: {}", e);
45 +             panic!("Unexpected error: {e}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/webpage_monitor_integration.rs:79:17
   |
79 |                 eprintln!("Skipping test due to network error: {}", e);
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
79 -                 eprintln!("Skipping test due to network error: {}", e);
79 +                 eprintln!("Skipping test due to network error: {e}");
   |

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/webpage_monitor_integration.rs:83:13
   |
83 |             panic!("Unexpected error: {}", e);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
   |
83 -             panic!("Unexpected error: {}", e);
83 +             panic!("Unexpected error: {e}");
   |

warning: calling `HttpRequestConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/http_request_integration.rs:23:37
   |
23 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
   |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:112:17
    |
112 |                 eprintln!("Skipping test due to network error: {}", e);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
112 -                 eprintln!("Skipping test due to network error: {}", e);
112 +                 eprintln!("Skipping test due to network error: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:116:13
    |
116 |             panic!("Unexpected error: {}", e);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
116 -             panic!("Unexpected error: {}", e);
116 +             panic!("Unexpected error: {e}");
    |

warning: variables can be used directly in the `format!` string
  --> llmspell-tools/tests/http_request_integration.rs:59:13
   |
59 |             eprintln!("Warning: HTTP GET test failed due to network issue: {}", e);
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
   = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`
help: change this to
   |
59 -             eprintln!("Warning: HTTP GET test failed due to network issue: {}", e);
59 +             eprintln!("Warning: HTTP GET test failed due to network issue: {e}");
   |

warning: calling `HttpRequestConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/http_request_integration.rs:66:37
   |
66 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
   |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:160:25
    |
160 |                         eprintln!("Skipping second fetch due to network error: {}", e);
    |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
160 -                         eprintln!("Skipping second fetch due to network error: {}", e);
160 +                         eprintln!("Skipping second fetch due to network error: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:163:21
    |
163 |                     panic!("Unexpected error on second fetch: {}", e);
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
163 -                     panic!("Unexpected error on second fetch: {}", e);
163 +                     panic!("Unexpected error on second fetch: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:170:17
    |
170 |                 eprintln!("Skipping test due to network error: {}", e);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
170 -                 eprintln!("Skipping test due to network error: {}", e);
170 +                 eprintln!("Skipping test due to network error: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:174:13
    |
174 |             panic!("Unexpected error: {}", e);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
174 -             panic!("Unexpected error: {}", e);
174 +             panic!("Unexpected error: {e}");
    |

warning: calling `HttpRequestConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/http_request_integration.rs:92:37
   |
92 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
   |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:204:17
    |
204 |                 eprintln!("Skipping test due to network error: {}", e);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
204 -                 eprintln!("Skipping test due to network error: {}", e);
204 +                 eprintln!("Skipping test due to network error: {e}");
    |

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/webpage_monitor_integration.rs:208:13
    |
208 |             panic!("Unexpected error: {}", e);
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
help: change this to
    |
208 -             panic!("Unexpected error: {}", e);
208 +             panic!("Unexpected error: {e}");
    |

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:118:37
    |
118 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: `llmspell-agents` (example "research_agent") generated 1 warning
warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:143:37
    |
143 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/http_request_integration.rs:166:13
    |
166 | /             eprintln!(
167 | |                 "Warning: HTTP custom headers test failed due to network issue: {}",
168 | |                 e
169 | |             );
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:177:37
    |
177 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:197:37
    |
197 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/http_request_integration.rs:224:13
    |
224 | /             eprintln!(
225 | |                 "Warning: HTTP retry logic test failed due to network issue: {}",
226 | |                 e
227 | |             );
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:235:37
    |
235 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: `llmspell-tools` (test "security_basic") generated 8 warnings
warning: `llmspell-bridge` (test "json_performance_test") generated 7 warnings
warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:257:37
    |
257 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:280:37
    |
280 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:307:37
    |
307 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:331:37
    |
331 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:357:37
    |
357 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `HttpRequestConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/http_request_integration.rs:372:37
    |
372 |     let tool = HttpRequestTool::new(Default::default()).unwrap();
    |                                     ^^^^^^^^^^^^^^^^^^ help: try: `HttpRequestConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:39:5
   |
39 |     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
   = note: `-W clippy::bool-assert-comparison` implied by `-W clippy::all`
   = help: to override `-W clippy::all` add `#[allow(clippy::bool_assert_comparison)]`
help: replace it with `assert!(..)`
   |
39 -     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
39 +     assert!(result.get("success").unwrap().as_bool().unwrap());
   |

warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:40:5
   |
40 | /     assert_eq!(
41 | |         result
42 | |             .get("migration_available")
43 | |             .unwrap()
...  |
46 | |         true
47 | |     );
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
   |
40 ~     assert!(
41 |         result
...
44 |             .as_bool()
45 ~             .unwrap()
   |

warning: calling `FileOperationsConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_sandbox_escape_tests.rs:13:45
   |
13 |     let file_tool = FileOperationsTool::new(Default::default());
   |                                             ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access
   = note: `-W clippy::default-trait-access` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::default_trait_access)]`

warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:82:5
   |
82 |     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
   |
82 -     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
82 +     assert!(result.get("success").unwrap().as_bool().unwrap());
   |

warning: used `assert_eq!` with a literal bool
  --> llmspell-bridge/tests/migration_runtime_test.rs:83:5
   |
83 | /     assert_eq!(
84 | |         result.get("has_migration_api").unwrap().as_bool().unwrap(),
85 | |         false
86 | |     );
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
   |
83 ~     assert!(
84 ~         !result.get("has_migration_api").unwrap().as_bool().unwrap()
   |

warning: calling `FileOperationsConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_sandbox_escape_tests.rs:57:45
   |
57 |     let file_tool = FileOperationsTool::new(Default::default());
   |                                             ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: used `assert_eq!` with a literal bool
   --> llmspell-bridge/tests/migration_runtime_test.rs:128:5
    |
128 |     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
    |
128 -     assert_eq!(result.get("success").unwrap().as_bool().unwrap(), true);
128 +     assert!(result.get("success").unwrap().as_bool().unwrap());
    |

warning: used `assert_eq!` with a literal bool
   --> llmspell-bridge/tests/migration_runtime_test.rs:129:5
    |
129 |     assert_eq!(result.get("state_works").unwrap().as_bool().unwrap(), true);
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
    |
129 -     assert_eq!(result.get("state_works").unwrap().as_bool().unwrap(), true);
129 +     assert!(result.get("state_works").unwrap().as_bool().unwrap());
    |

warning: used `assert_eq!` with a literal bool
   --> llmspell-bridge/tests/migration_runtime_test.rs:130:5
    |
130 | /     assert_eq!(
131 | |         result.get("has_migration_api").unwrap().as_bool().unwrap(),
132 | |         false
133 | |     );
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_assert_comparison
help: replace it with `assert!(..)`
    |
130 ~     assert!(
131 ~         !result.get("has_migration_api").unwrap().as_bool().unwrap()
    |

warning: calling `ProcessExecutorConfig::default()` is more clear than this expression
  --> llmspell-tools/tests/security_sandbox_escape_tests.rs:83:49
   |
83 |     let process_tool = ProcessExecutorTool::new(Default::default());
   |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `ProcessExecutorConfig::default()`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileSearchConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:136:43
    |
136 |     let search_tool = FileSearchTool::new(Default::default(), sandbox);
    |                                           ^^^^^^^^^^^^^^^^^^ help: try: `FileSearchConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `SystemMonitorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:173:47
    |
173 |     let monitor_tool = SystemMonitorTool::new(Default::default());
    |                                               ^^^^^^^^^^^^^^^^^^ help: try: `SystemMonitorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `FileOperationsConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:206:45
    |
206 |     let file_tool = FileOperationsTool::new(Default::default());
    |                                             ^^^^^^^^^^^^^^^^^^ help: try: `FileOperationsConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

warning: calling `ProcessExecutorConfig::default()` is more clear than this expression
   --> llmspell-tools/tests/security_sandbox_escape_tests.rs:246:49
    |
246 |     let process_tool = ProcessExecutorTool::new(Default::default());
    |                                                 ^^^^^^^^^^^^^^^^^^ help: try: `ProcessExecutorConfig::default()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_trait_access

error[E0061]: this method takes 2 arguments but 0 arguments were supplied
   --> llmspell-workflows/benches/workflow_hook_overhead.rs:322:35
    |
322 |             let result = workflow.execute().await.unwrap();
    |                                   ^^^^^^^-- two arguments of type `llmspell_core::types::AgentInput` and `llmspell_core::ExecutionContext` are missing
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-core/src/traits/base_agent.rs:93:14
    |
93  |     async fn execute(&self, input: AgentInput, context: ExecutionContext) -> Result<AgentOutput>;
    |              ^^^^^^^
help: provide the arguments
    |
322 -             let result = workflow.execute().await.unwrap();
322 +             let result = workflow.execute(/* llmspell_core::types::AgentInput */, /* llmspell_core::ExecutionContext */).await.unwrap();
    |

warning: item in documentation is missing backticks
 --> llmspell-tools/tests/sitemap_crawler_integration.rs:1:36
  |
1 | //! ABOUTME: Integration tests for SitemapCrawlerTool
  |                                    ^^^^^^^^^^^^^^^^^^
  |
  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
  = note: `-W clippy::doc-markdown` implied by `-W clippy::pedantic`
  = help: to override `-W clippy::pedantic` add `#[allow(clippy::doc_markdown)]`
help: try
  |
1 - //! ABOUTME: Integration tests for SitemapCrawlerTool
1 + //! ABOUTME: Integration tests for `SitemapCrawlerTool`
  |

warning: you seem to be trying to use `match` for destructuring a single pattern. Consider using `if let`
  --> llmspell-tools/tests/sitemap_crawler_integration.rs:23:5
   |
23 | /     match tool.execute(input, context).await {
24 | |         Ok(output) => {
25 | |             assert_success_output(&output, &["operation", "result"]);
...  |
40 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
   = note: `-W clippy::single-match-else` implied by `-W clippy::pedantic`
   = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_match_else)]`
help: try
   |
23 ~     if let Ok(output) = tool.execute(input, context).await {
24 +         assert_success_output(&output, &["operation", "result"]);
25 + 
26 +         let output_value: serde_json::Value = serde_json::from_str(&output.text).unwrap();
27 +         let result = &output_value["result"];
28 + 
29 +         // Should have URLs from sitemap
30 +         assert!(result["urls"].is_array() || result["pages"].is_array());
31 +         assert!(
32 +             result["url_count"].as_u64().unwrap_or(0) > 0
33 +                 || result["total_urls"].as_u64().unwrap_or(0) > 0
34 +         );
35 +     } else {
36 +         // Some sites might block automated access, which is okay for tests
37 +     }
   |

warning: you seem to be trying to use `match` for destructuring a single pattern. Consider using `if let`
  --> llmspell-tools/tests/sitemap_crawler_integration.rs:83:5
   |
83 | /     match tool.execute(input, context).await {
84 | |         Ok(output) => {
85 | |             let output_value: serde_json::Value = serde_json::from_str(&output.text).unwrap();
86 | |             if output_value["success"].as_bool().unwrap() {
...  |
97 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
help: try
   |
83 ~     if let Ok(output) = tool.execute(input, context).await {
84 +         let output_value: serde_json::Value = serde_json::from_str(&output.text).unwrap();
85 +         if output_value["success"].as_bool().unwrap() {
86 +             let result = &output_value["result"];
87 +             // If successful, check filters were applied
88 +             if let Some(urls) = result["urls"].as_array() {
89 +                 assert!(urls.len() <= 10);
90 +             }
91 +         }
92 +     } else {
93 +         // Site might not have sitemap or block access
94 +     }
   |

warning: you seem to be trying to use `match` for destructuring a single pattern. Consider using `if let`
   --> llmspell-tools/tests/sitemap_crawler_integration.rs:113:5
    |
113 | /     match tool.execute(input, context).await {
114 | |         Ok(output) => {
115 | |             let output_value: serde_json::Value = serde_json::from_str(&output.text).unwrap();
...   |
122 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
help: try
    |
113 ~     if let Ok(output) = tool.execute(input, context).await {
114 +         let output_value: serde_json::Value = serde_json::from_str(&output.text).unwrap();
115 +         // Should respect depth limit
116 +         assert!(output_value["success"].as_bool().is_some());
117 +     } else {
118 +         // Acceptable if no sitemap exists
119 +     }
    |

warning: `llmspell-bridge` (test "migration_runtime_test") generated 7 warnings (run `cargo clippy --fix --test "migration_runtime_test"` to apply 7 suggestions)
warning: variables can be used directly in the `format!` string
   --> llmspell-tools/tests/sitemap_crawler_integration.rs:185:13
    |
185 | /             assert!(
186 | |                 error_str.contains("timeout")
187 | |                     || error_str.contains("elapsed")
188 | |                     || error_str.contains("timed out")
...   |
193 | |                 error_str
194 | |             );
    | |_____________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#uninlined_format_args
    = note: `-W clippy::uninlined-format-args` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::uninlined_format_args)]`

warning: `llmspell-tools` (test "http_request_integration") generated 19 warnings (run `cargo clippy --fix --test "http_request_integration"` to apply 4 suggestions)
warning: `llmspell-tools` (test "webpage_monitor_integration") generated 16 warnings (run `cargo clippy --fix --test "webpage_monitor_integration"` to apply 13 suggestions)
warning: `llmspell-tools` (test "security_sandbox_escape_tests") generated 7 warnings
error[E0061]: this method takes 2 arguments but 0 arguments were supplied
   --> llmspell-workflows/benches/workflow_hook_overhead.rs:340:35
    |
340 |             let result = workflow.execute().await.unwrap();
    |                                   ^^^^^^^-- two arguments of type `llmspell_core::types::AgentInput` and `llmspell_core::ExecutionContext` are missing
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-core/src/traits/base_agent.rs:93:14
    |
93  |     async fn execute(&self, input: AgentInput, context: ExecutionContext) -> Result<AgentOutput>;
    |              ^^^^^^^
help: provide the arguments
    |
340 -             let result = workflow.execute().await.unwrap();
340 +             let result = workflow.execute(/* llmspell_core::types::AgentInput */, /* llmspell_core::ExecutionContext */).await.unwrap();
    |

error[E0061]: this method takes 2 arguments but 0 arguments were supplied
   --> llmspell-workflows/benches/workflow_hook_overhead.rs:360:35
    |
360 |             let result = workflow.execute().await.unwrap();
    |                                   ^^^^^^^-- two arguments of type `llmspell_core::types::AgentInput` and `llmspell_core::ExecutionContext` are missing
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-core/src/traits/base_agent.rs:93:14
    |
93  |     async fn execute(&self, input: AgentInput, context: ExecutionContext) -> Result<AgentOutput>;
    |              ^^^^^^^
help: provide the arguments
    |
360 -             let result = workflow.execute().await.unwrap();
360 +             let result = workflow.execute(/* llmspell_core::types::AgentInput */, /* llmspell_core::ExecutionContext */).await.unwrap();
    |

warning: `llmspell-tools` (test "sitemap_crawler_integration") generated 7 warnings (2 duplicates) (run `cargo clippy --fix --test "sitemap_crawler_integration"` to apply 5 suggestions)
warning: `llmspell-tools` (test "url_analyzer_integration") generated 2 warnings (2 duplicates)
error[E0061]: this method takes 2 arguments but 0 arguments were supplied
   --> llmspell-workflows/benches/workflow_hook_overhead.rs:385:35
    |
385 |             let result = workflow.execute().await.unwrap();
    |                                   ^^^^^^^-- two arguments of type `llmspell_core::types::AgentInput` and `llmspell_core::ExecutionContext` are missing
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-core/src/traits/base_agent.rs:93:14
    |
93  |     async fn execute(&self, input: AgentInput, context: ExecutionContext) -> Result<AgentOutput>;
    |              ^^^^^^^
help: provide the arguments
    |
385 -             let result = workflow.execute().await.unwrap();
385 +             let result = workflow.execute(/* llmspell_core::types::AgentInput */, /* llmspell_core::ExecutionContext */).await.unwrap();
    |

For more information about this error, try `rustc --explain E0061`.
error: could not compile `llmspell-workflows` (bench "workflow_hook_overhead") due to 4 previous errors
