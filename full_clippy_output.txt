    Checking llmspell-state-persistence v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-state-persistence)
    Checking llmspell-tools v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-tools)
    Checking llmspell-sessions v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-sessions)
    Checking llmspell-workflows v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-workflows)
    Checking llmspell-agents v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents)
warning: you seem to be trying to use `match` for an equality check. Consider using `if`
   --> llmspell-agents/src/tool_manager.rs:430:9
    |
430 | /         match context_mode {
431 | |             ContextMode::Previous => {
432 | |                 // Replace ${previous.output} with actual previous output
433 | |                 if let Some(prev_output) = previous_output {
...   |
443 | |         }
    | |_________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#single_match_else
    = note: `-W clippy::single-match-else` implied by `-W clippy::pedantic`
    = help: to override `-W clippy::pedantic` add `#[allow(clippy::single_match_else)]`
help: try
    |
430 ~         if context_mode == &ContextMode::Previous {
431 +             // Replace ${previous.output} with actual previous output
432 +             if let Some(prev_output) = previous_output {
433 +                 parameters = Self::substitute_previous_output(parameters, prev_output);
434 +             }
435 +         } else {
436 +             // Full: Parameters can reference full context - template resolution needed
437 +             // Selective: Replace specific fields - implementation would depend on context
438 +             // Default: For any future context modes, use base parameters
439 +             // For now, just use the base parameters without modification
440 +         }
    |

warning: `llmspell-agents` (lib) generated 1 warning (run `cargo clippy --fix --lib -p llmspell-agents` to apply 1 suggestion)
    Checking llmspell-bridge v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-bridge)
    Checking llmspell-testing v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-testing)
    Checking llmspell-cli v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-cli)
    Checking llmspell-core v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-core)
    Checking llmspell-hooks v0.6.0 (/Users/spuri/projects/lexlapax/rs-llmspell/llmspell-hooks)
error[E0308]: mismatched types
  --> llmspell-testing/tests/agents/isolation_tests.rs:96:50
   |
96 |         .create_shared_scope("shared_data", Some("admin".to_string()), shared_config)
   |                                             ---- ^^^^^^^^^^^^^^^^^^^ expected `&str`, found `String`
   |                                             |
   |                                             arguments to this enum variant are incorrect
   |
help: the type constructed contains `std::string::String` due to the type of the argument passed
  --> llmspell-testing/tests/agents/isolation_tests.rs:96:45
   |
96 |         .create_shared_scope("shared_data", Some("admin".to_string()), shared_config)
   |                                             ^^^^^-------------------^
   |                                                  |
   |                                                  this argument influences the type of `Some`
note: tuple variant defined here
  --> /private/tmp/rust-20250403-7454-rkwlec/rustc-1.86.0-src/library/core/src/option.rs:580:5
help: try removing the method call
   |
96 -         .create_shared_scope("shared_data", Some("admin".to_string()), shared_config)
96 +         .create_shared_scope("shared_data", Some("admin"), shared_config)
   |

error[E0308]: mismatched types
   --> llmspell-testing/tests/agents/isolation_tests.rs:96:72
    |
96  |         .create_shared_scope("shared_data", Some("admin".to_string()), shared_config)
    |          ------------------- arguments to this method are incorrect    ^^^^^^^^^^^^^ expected `&SharedScopeConfig`, found `SharedScopeConfig`
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents/src/state/isolation.rs:287:12
    |
287 |     pub fn create_shared_scope(
    |            ^^^^^^^^^^^^^^^^^^^
help: consider borrowing here
    |
96  |         .create_shared_scope("shared_data", Some("admin".to_string()), &shared_config)
    |                                                                        +

error[E0308]: mismatched types
   --> llmspell-testing/tests/agents/isolation_tests.rs:256:54
    |
256 |     isolation_manager.grant_permission("contractor", scope.clone(), StatePermission::Write);
    |                       ----------------               ^^^^^^^^^^^^^ expected `&StateScope`, found `StateScope`
    |                       |
    |                       arguments to this method are incorrect
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents/src/state/isolation.rs:351:12
    |
351 |     pub fn grant_permission(
    |            ^^^^^^^^^^^^^^^^
help: consider borrowing here
    |
256 |     isolation_manager.grant_permission("contractor", &scope.clone(), StatePermission::Write);
    |                                                      +

error[E0308]: mismatched types
   --> llmspell-testing/tests/agents/isolation_tests.rs:264:56
    |
264 |     isolation_manager.revoke_permissions("contractor", scope.clone());
    |                       ------------------               ^^^^^^^^^^^^^ expected `&StateScope`, found `StateScope`
    |                       |
    |                       arguments to this method are incorrect
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents/src/state/isolation.rs:367:12
    |
367 |     pub fn revoke_permissions(&self, agent_id: &str, scope: &StateScope) {
    |            ^^^^^^^^^^^^^^^^^^
help: consider borrowing here
    |
264 |     isolation_manager.revoke_permissions("contractor", &scope.clone());
    |                                                        +

error[E0308]: mismatched types
   --> llmspell-testing/tests/agents/isolation_tests.rs:330:43
    |
330 |         .create_pipeline("data_pipeline", stages.clone())
    |          ---------------                  ^^^^^^^^^^^^^^ expected `&[String]`, found `Vec<String>`
    |          |
    |          arguments to this method are incorrect
    |
    = note: expected reference `&[std::string::String]`
                  found struct `std::vec::Vec<std::string::String>`
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents/src/state/sharing.rs:421:12
    |
421 |     pub fn create_pipeline(
    |            ^^^^^^^^^^^^^^^
help: consider borrowing here
    |
330 |         .create_pipeline("data_pipeline", &stages.clone())
    |                                           +

error[E0308]: mismatched types
   --> llmspell-testing/tests/agents/isolation_tests.rs:373:55
    |
373 |         .create_shared_scope("concurrent_test", None, config)
    |          -------------------                          ^^^^^^ expected `&SharedScopeConfig`, found `SharedScopeConfig`
    |          |
    |          arguments to this method are incorrect
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents/src/state/isolation.rs:287:12
    |
287 |     pub fn create_shared_scope(
    |            ^^^^^^^^^^^^^^^^^^^
help: consider borrowing here
    |
373 |         .create_shared_scope("concurrent_test", None, &config)
    |                                                       +

error[E0308]: mismatched types
   --> llmspell-testing/tests/agents/isolation_tests.rs:451:48
    |
451 |         .create_shared_scope("writable", None, config)
    |          -------------------                   ^^^^^^ expected `&SharedScopeConfig`, found `SharedScopeConfig`
    |          |
    |          arguments to this method are incorrect
    |
note: method defined here
   --> /Users/spuri/projects/lexlapax/rs-llmspell/llmspell-agents/src/state/isolation.rs:287:12
    |
287 |     pub fn create_shared_scope(
    |            ^^^^^^^^^^^^^^^^^^^
help: consider borrowing here
    |
451 |         .create_shared_scope("writable", None, &config)
    |                                                +

For more information about this error, try `rustc --explain E0308`.
error: could not compile `llmspell-testing` (test "agents") due to 7 previous errors
warning: build failed, waiting for other jobs to finish...
error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:27:20
   |
27 |             engine.execute(lua_code).await.unwrap()
   |                    ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
27 |             engine.execute_script(lua_code).await.unwrap()
   |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:46:16
   |
46 |         engine.execute(create_code).await.unwrap()
   |                ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
46 |         engine.execute_script(create_code).await.unwrap()
   |                       +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:67:20
   |
67 |             engine.execute(&save_code).await.unwrap()
   |                    ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
67 |             engine.execute_script(&save_code).await.unwrap()
   |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:74:20
   |
74 |             engine.execute(&load_code).await.unwrap()
   |                    ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
74 |             engine.execute_script(&load_code).await.unwrap()
   |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
  --> llmspell-bridge/benches/session_bench.rs:93:16
   |
93 |         engine.execute(create_code).await.unwrap()
   |                ^^^^^^^
   |
help: there is a method `execute_script` with a similar name
   |
93 |         engine.execute_script(create_code).await.unwrap()
   |                       +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:130:20
    |
130 |             engine.execute(&store_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
130 |             engine.execute_script(&store_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:137:20
    |
137 |             engine.execute(&list_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
137 |             engine.execute_script(&list_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:144:20
    |
144 |             engine.execute(&query_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
144 |             engine.execute_script(&query_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:177:28
    |
177 |                     engine.execute(&lua_code).await.unwrap()
    |                            ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
177 |                     engine.execute_script(&lua_code).await.unwrap()
    |                                   +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:187:14
    |
186 | /         engine
187 | |             .execute(r#"return Session.create({ name = "batch_artifact_test" })"#)
    | |_____________-^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
187 |             .execute_script(r#"return Session.create({ name = "batch_artifact_test" })"#)
    |                     +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:218:28
    |
218 |                     engine.execute(&store_batch_code).await.unwrap()
    |                            ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
218 |                     engine.execute_script(&store_batch_code).await.unwrap()
    |                                   +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:236:18
    |
235 | /             engine
236 | |                 .execute(r#"return Session.create({ name = "perf_test" })"#)
    | |_________________-^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
236 |                 .execute_script(r#"return Session.create({ name = "perf_test" })"#)
    |                         +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:246:14
    |
245 | /         engine
246 | |             .execute(r#"return Session.create({ name = "save_load_test" })"#)
    | |_____________-^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
246 |             .execute_script(r#"return Session.create({ name = "save_load_test" })"#)
    |                     +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:256:20
    |
256 |             engine.execute(&save_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
256 |             engine.execute_script(&save_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:265:20
    |
265 |             engine.execute(&load_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
265 |             engine.execute_script(&load_code).await.unwrap()
    |                           +++++++

error[E0599]: no method named `execute` found for struct `llmspell_bridge::lua::LuaEngine` in the current scope
   --> llmspell-bridge/benches/session_bench.rs:286:20
    |
286 |             engine.execute(&store_text_code).await.unwrap()
    |                    ^^^^^^^
    |
help: there is a method `execute_script` with a similar name
    |
286 |             engine.execute_script(&store_text_code).await.unwrap()
    |                           +++++++

For more information about this error, try `rustc --explain E0599`.
error: could not compile `llmspell-bridge` (bench "session_bench") due to 16 previous errors
