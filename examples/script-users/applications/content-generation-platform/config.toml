# Content Generation Platform Configuration
# Purpose: Multi-format content creation with conditional routing
# Prerequisites: OPENAI_API_KEY or ANTHROPIC_API_KEY environment variables
# Version: 2.0.0

# Default script engine
default_engine = "lua"

# Engine configurations
[engines.lua]
stdlib = "Standard"
max_memory_bytes = 50000000  # 50MB
enable_debug = false
timeout_ms = 60000  # 1 minute
security_level = "Safe"  # Capital S required

# Provider configurations - nested structure (providers.providers.name)
[providers]
default_provider = "openai"

[providers.providers.openai]
provider_type = "openai"
api_key_env = "OPENAI_API_KEY"
default_model = "gpt-4o-mini"
timeout_seconds = 60

[providers.providers.anthropic]
provider_type = "anthropic"
api_key_env = "ANTHROPIC_API_KEY"
default_model = "claude-3-haiku-20240307"
timeout_seconds = 60

# Global runtime configuration
[runtime]
max_concurrent_scripts = 5
script_timeout_seconds = 300
enable_streaming = true

[runtime.security]
allow_file_access = true
allow_network_access = true  # Needed for webhooks
allow_process_spawn = false
max_memory_bytes = 104857600  # 100MB
max_execution_time_ms = 300000  # 5 minutes

# State persistence - for workflow state
[runtime.state_persistence]
enabled = true
backend_type = "memory"
max_state_size_bytes = 10000000
migration_enabled = false
backup_enabled = false

# Session management
[runtime.sessions]
enabled = true
max_sessions = 10
max_artifacts_per_session = 100
artifact_compression_threshold = 10240
session_timeout_seconds = 3600
storage_backend = "memory"

# Tool configurations
[tools.file_operations]
allowed_paths = [
    "/tmp",
    "/tmp/content-output"
]
atomic_writes = true
max_file_size = 10485760  # 10MB

[tools.custom.web_search]
max_results = 10
timeout_seconds = 30

[tools.custom.webhook_caller]
allowed_domains = ["httpbin.org"]
timeout_seconds = 10